Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@urql/core"),r={__typename:"PageInfo",endCursor:null,startCursor:null,hasNextPage:!1,hasPreviousPage:!1},a=e=>"string"==typeof e?e:null,s=(e,r,a)=>{for(var s=new Set,t=0,n=r.length;t<n;t++){var o=e.resolve(r[t],"node");"string"==typeof o&&s.add(o)}for(var i=r.slice(),f=0,l=a.length;f<l;f++){var u=a[f],g=e.resolve(u,"node");"string"!=typeof g||s.has(g)||(s.add(g),i.push(u))}return i},t=(e,r)=>{for(var a=new Set,s=0,t=e.length;s<t;s++){var n=e[s];"string"==typeof n&&a.add(n)}for(var o=e.slice(),i=0,f=r.length;i<f;i++){var l=r[i];"string"!=typeof l||a.has(l)||(a.add(l),o.push(l))}return o},n=(r,a)=>{for(var s in a)if("first"!==s&&"last"!==s&&"after"!==s&&"before"!==s){if(!(s in r))return!1;var t=r[s],n=a[s];if(typeof t!=typeof n||"object"!=typeof t?t!==n:e.stringifyVariables(t)!==e.stringifyVariables(n))return!1}for(var o in r)if("first"!==o&&"last"!==o&&"after"!==o&&"before"!==o&&!(o in a))return!1;return!0},o=(e,s,t)=>{var n=a(e.resolve(s,t));if(!n)return null;var o=e.resolve(n,"__typename"),i=e.resolve(n,"edges")||[],f=e.resolve(n,"nodes")||[];if("string"!=typeof o)return null;var l={__typename:o,edges:i,nodes:f,pageInfo:r},u=e.resolve(n,"pageInfo");if("string"==typeof u){var g=a(e.resolve(u,"__typename")),p=a(e.resolve(u,"endCursor")),v=a(e.resolve(u,"startCursor")),d=e.resolve(u,"hasNextPage"),y=e.resolve(u,"hasPreviousPage"),h=l.pageInfo={__typename:"string"==typeof g?g:"PageInfo",hasNextPage:"boolean"==typeof d?d:!!p,hasPreviousPage:"boolean"==typeof y?y:!!v,endCursor:p,startCursor:v};if(null===h.endCursor){var m=i[i.length-1];if(m){var _=e.resolve(m,"cursor");h.endCursor=a(_)}}if(null===h.startCursor){var P=i[0];if(P){var C=e.resolve(P,"cursor");h.startCursor=a(C)}}}return l};exports.relayPagination=(e={})=>{var i=e.mergeMode||"inwards";return(e,f,l,u)=>{var{parentKey:g,fieldName:p}=u,v=l.inspectFields(g).filter((e=>e.fieldName===p)),d=v.length;if(0!==d){for(var y=null,h=[],m=[],_=[],P=[],C={...r},b=0;b<d;b++){var{fieldKey:c,arguments:I}=v[b];if(null!==I&&n(f,I)){var N=o(l,g,c);if(null!==N&&(0!==N.nodes.length||0!==N.edges.length||!y)){if("inwards"===i&&"number"==typeof I.last&&"number"==typeof I.first){var x=N.edges.slice(0,I.first+1),w=N.edges.slice(-I.last),K=N.nodes.slice(0,I.first+1),V=N.nodes.slice(-I.last);h=s(l,h,x),m=s(l,w,m),_=t(_,K),P=t(V,P),C=N.pageInfo}else I.after?(h=s(l,h,N.edges),_=t(_,N.nodes),C.endCursor=N.pageInfo.endCursor,C.hasNextPage=N.pageInfo.hasNextPage):I.before?(m=s(l,N.edges,m),P=t(N.nodes,P),C.startCursor=N.pageInfo.startCursor,C.hasPreviousPage=N.pageInfo.hasPreviousPage):"number"==typeof I.last?(m=s(l,N.edges,m),P=t(N.nodes,P),C=N.pageInfo):(h=s(l,h,N.edges),_=t(_,N.nodes),C=N.pageInfo);N.pageInfo.__typename!==C.__typename&&(C.__typename=N.pageInfo.__typename),y!==N.__typename&&(y=N.__typename)}}}if("string"==typeof y){if(!a(l.resolve(g,p,f))){if(!u.store.schema)return;u.partial=!0}return{__typename:y,edges:"inwards"===i?s(l,h,m):s(l,m,h),nodes:"inwards"===i?t(_,P):t(P,_),pageInfo:{__typename:C.__typename,endCursor:C.endCursor,startCursor:C.startCursor,hasNextPage:C.hasNextPage,hasPreviousPage:C.hasPreviousPage}}}}}},exports.simplePagination=({offsetArgument:r="skip",limitArgument:a="limit",mergeMode:s="after"}={})=>{var t=(s,t)=>{for(var n in t)if(n!==r&&n!==a){if(!(n in s))return!1;var o=s[n],i=t[n];if(typeof o!=typeof i||"object"!=typeof o?o!==i:e.stringifyVariables(o)!==e.stringifyVariables(i))return!1}for(var f in s)if(f!==r&&f!==a&&!(f in t))return!1;return!0};return(e,a,n,o)=>{var{parentKey:i,fieldName:f}=o,l=n.inspectFields(i).filter((e=>e.fieldName===f)),u=l.length;if(0!==u){for(var g=new Set,p=[],v=null,d=0;d<u;d++){var{fieldKey:y,arguments:h}=l[d];if(null!==h&&t(a,h)){var m=n.resolve(i,y),_=h[r];if(null!==m&&0!==m.length&&"number"==typeof _){for(var P=[],C=0;C<m.length;C++){var b=m[C];g.has(b)||(P.push(b),g.add(b))}p=(!v||_>v)==("after"===s)?[...p,...P]:[...P,...p],v=_}}}return n.resolve(i,f,a)?p:o.store.schema?(o.partial=!0,p):void 0}}};
//# sourceMappingURL=urql-exchange-graphcache-extras.min.js.map
