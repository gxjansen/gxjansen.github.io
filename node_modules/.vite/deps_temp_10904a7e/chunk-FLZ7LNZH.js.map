{
  "version": 3,
  "sources": ["../../fast-deep-equal/index.js", "../../@keystatic/core/dist/keystatic-core-ui.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-fileX2Icon.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-alertCircleIcon.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-listXIcon.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-searchIcon.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-searchXIcon.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-diffIcon.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-plusSquareIcon.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-dotSquareIcon.js", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/ar-AE.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/bg-BG.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/cs-CZ.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/da-DK.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/de-DE.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/el-GR.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/en-US.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/es-ES.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/et-EE.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/fi-FI.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/fr-FR.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/he-IL.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/hr-HR.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/hu-HU.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/it-IT.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/ja-JP.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/ko-KR.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/lt-LT.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/lv-LV.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/nb-NO.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/nl-NL.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/pl-PL.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/pt-BR.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/pt-PT.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/ro-RO.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/ru-RU.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/sk-SK.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/sl-SI.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/sr-SP.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/sv-SE.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/tr-TR.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/uk-UA.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/zh-CN.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/intl/zh-TW.json", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/src/*.js", "../../@react-aria/searchfield/dist/packages/@react-aria/searchfield/src/useSearchField.ts", "../../@react-stately/searchfield/dist/packages/@react-stately/searchfield/src/useSearchFieldState.ts", "../../@keystar/ui/dist/keystar-ui-search-field.js", "../../@react-stately/table/dist/packages/@react-stately/table/src/TableUtils.ts", "../../@react-stately/table/dist/packages/@react-stately/table/src/TableColumnLayout.ts", "../../@react-stately/grid/dist/packages/@react-stately/grid/src/useGridState.ts", "../../@react-stately/grid/dist/packages/@react-stately/grid/src/GridCollection.ts", "../../@react-stately/table/dist/packages/@react-stately/table/src/TableCollection.ts", "../../@react-stately/table/dist/packages/@react-stately/table/src/useTableState.ts", "../../@react-stately/table/dist/packages/@react-stately/table/src/TableHeader.ts", "../../@react-stately/table/dist/packages/@react-stately/table/src/TableBody.ts", "../../@react-stately/table/dist/packages/@react-stately/table/src/Column.ts", "../../@react-stately/table/dist/packages/@react-stately/table/src/Row.ts", "../../@react-stately/table/dist/packages/@react-stately/table/src/Cell.ts", "../../@react-stately/flags/dist/packages/@react-stately/flags/src/index.ts", "../../@keystar/ui/dist/keystar-ui-table.js", "../../@react-aria/table/dist/packages/@react-aria/table/src/utils.ts", "../../@react-aria/table/dist/packages/@react-aria/table/intl/ar-AE.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/bg-BG.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/cs-CZ.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/da-DK.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/de-DE.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/el-GR.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/en-US.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/es-ES.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/et-EE.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/fi-FI.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/fr-FR.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/he-IL.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/hr-HR.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/hu-HU.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/it-IT.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/ja-JP.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/ko-KR.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/lt-LT.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/lv-LV.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/nb-NO.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/nl-NL.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/pl-PL.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/pt-BR.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/pt-PT.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/ro-RO.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/ru-RU.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/sk-SK.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/sl-SI.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/sr-SP.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/sv-SE.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/tr-TR.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/uk-UA.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/zh-CN.json", "../../@react-aria/table/dist/packages/@react-aria/table/intl/zh-TW.json", "../../@react-aria/table/dist/packages/@react-aria/table/src/*.js", "../../@react-aria/table/dist/packages/@react-aria/table/src/TableKeyboardDelegate.ts", "../../@react-aria/table/dist/packages/@react-aria/table/src/useTable.ts", "../../@react-aria/table/dist/packages/@react-aria/table/src/useTableColumnHeader.ts", "../../@react-aria/table/dist/packages/@react-aria/table/src/useTableRow.ts", "../../@react-aria/table/dist/packages/@react-aria/table/src/useTableHeaderRow.ts", "../../@react-aria/table/dist/packages/@react-aria/table/src/useTableCell.ts", "../../@react-aria/table/dist/packages/@react-aria/table/src/useTableSelectionCheckbox.ts", "../../@react-aria/table/dist/packages/@react-aria/table/src/index.ts", "../../@keystar/ui/dist/keystar-ui-icon-icons-arrowUpIcon.js", "../../js-yaml/dist/js-yaml.mjs", "../../@keystatic/core/dist/required-files-858fa039.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-historyIcon.js", "../../@keystar/ui/dist/keystar-ui-notice.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-copyPlusIcon.js", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/src/useBreadcrumbItem.ts", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/ar-AE.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/bg-BG.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/cs-CZ.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/da-DK.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/de-DE.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/el-GR.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/en-US.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/es-ES.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/et-EE.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/fi-FI.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/fr-FR.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/he-IL.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/hr-HR.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/hu-HU.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/it-IT.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/ja-JP.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/ko-KR.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/lt-LT.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/lv-LV.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/nb-NO.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/nl-NL.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/pl-PL.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/pt-BR.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/pt-PT.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/ro-RO.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/ru-RU.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/sk-SK.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/sl-SI.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/sr-SP.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/sv-SE.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/tr-TR.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/uk-UA.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/zh-CN.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/intl/zh-TW.json", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/src/*.js", "../../@react-aria/breadcrumbs/dist/packages/@react-aria/breadcrumbs/src/useBreadcrumbs.ts", "../../@keystar/ui/dist/keystar-ui-breadcrumbs.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-folderClosedIcon.js", "../../@keystar/ui/dist/keystar-ui-icon-icons-folderOpenIcon.js", "../../@urql/core/src/utils/error.ts", "../../@urql/core/src/utils/hash.ts", "../../@urql/core/src/utils/variables.ts", "../../@urql/core/src/utils/request.ts", "../../@urql/core/src/utils/result.ts", "../../@urql/core/src/internal/fetchOptions.ts", "../../@urql/core/src/internal/fetchSource.ts", "../../@urql/core/src/utils/collectTypenames.ts", "../../@urql/core/src/utils/formatDocument.ts", "../../@urql/core/src/utils/maskTypename.ts", "../../@urql/core/src/utils/streamUtils.ts", "../../@urql/core/src/utils/operation.ts", "../../@urql/core/src/utils/index.ts", "../../@urql/core/src/gql.ts", "../../@urql/core/src/exchanges/cache.ts", "../../@urql/core/src/exchanges/ssr.ts", "../../@urql/core/src/exchanges/subscription.ts", "../../@urql/core/src/exchanges/debug.ts", "../../@urql/core/src/exchanges/dedup.ts", "../../@urql/core/src/exchanges/fetch.ts", "../../@urql/core/src/exchanges/compose.ts", "../../@urql/core/src/exchanges/map.ts", "../../@urql/core/src/exchanges/fallback.ts", "../../@urql/core/src/client.ts", "../../@urql/exchange-graphcache/src/helpers/help.ts", "../../@urql/exchange-graphcache/src/ast/node.ts", "../../@urql/exchange-graphcache/src/ast/variables.ts", "../../@urql/exchange-graphcache/src/ast/traversal.ts", "../../@urql/exchange-graphcache/src/ast/schemaPredicates.ts", "../../@urql/exchange-graphcache/src/store/keys.ts", "../../@urql/exchange-graphcache/src/store/data.ts", "../../@urql/exchange-graphcache/src/operations/shared.ts", "../../@urql/exchange-graphcache/src/operations/query.ts", "../../@urql/exchange-graphcache/src/operations/write.ts", "../../@urql/exchange-graphcache/src/operations/invalidate.ts", "../../@urql/exchange-graphcache/src/store/store.ts", "../../@urql/exchange-graphcache/src/ast/schema.ts", "../../@urql/exchange-graphcache/src/helpers/operation.ts", "../../@urql/exchange-graphcache/src/cacheExchange.ts", "../../@urql/exchange-graphcache/src/offlineExchange.ts", "../../@urql/exchange-auth/src/authExchange.ts", "../../@urql/exchange-persisted/src/sha256.ts", "../../@urql/exchange-persisted/src/persistedExchange.ts", "../../@urql/exchange-graphcache/src/extras/relayPagination.ts", "../../@urql/exchange-graphcache/src/extras/simplePagination.ts"],
  "sourcesContent": ["'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n", "import React, { useMemo, useCallback, useState, useRef, useEffect, createContext, useContext, memo, useSyncExternalStore } from 'react';\nimport { ActionButton, Button, ButtonGroup } from '@keystar/ui/button';\nimport { Icon } from '@keystar/ui/icon';\nimport { fileX2Icon } from '@keystar/ui/icon/icons/fileX2Icon';\nimport { githubIcon } from '@keystar/ui/icon/icons/githubIcon';\nimport { Flex, HStack, Box, Divider, VStack } from '@keystar/ui/layout';\nimport { Heading, Text } from '@keystar/ui/typography';\nimport { useLocalizedStringFormatter } from '@react-aria/i18n';\nimport { isHotkey } from 'is-hotkey';\nimport { alertCircleIcon } from '@keystar/ui/icon/icons/alertCircleIcon';\nimport { listXIcon } from '@keystar/ui/icon/icons/listXIcon';\nimport { searchIcon } from '@keystar/ui/icon/icons/searchIcon';\nimport { searchXIcon } from '@keystar/ui/icon/icons/searchXIcon';\nimport { diffIcon } from '@keystar/ui/icon/icons/diffIcon';\nimport { plusSquareIcon } from '@keystar/ui/icon/icons/plusSquareIcon';\nimport { dotSquareIcon } from '@keystar/ui/icon/icons/dotSquareIcon';\nimport { TextLink, useLink } from '@keystar/ui/link';\nimport { ProgressCircle } from '@keystar/ui/progress';\nimport { SearchField } from '@keystar/ui/search-field';\nimport { useMediaQuery, breakpointQueries, css, tokenSchema, injectGlobal, containerQueries, classNames, transition } from '@keystar/ui/style';\nimport { TableView, TableHeader, Column, TableBody, Cell, Row } from '@keystar/ui/table';\nimport { p as parseProps, t as toFormattedFormDataError, P as PageRoot, l as l10nMessages, a as PageHeader, b as parsedValToYjs, y as yjsToVal, g as getKeysForArrayValue, c as getNewArrayElementKey, s as setKeysForArrayValue, u as updateValue, d as getInitialPropsValueFromInitializer, e as useTheme, T as ThemeProvider, f as serializeProps, h as getDraft, i as getYjsValFromParsedValue, j as PageBody, k as containerWidthForEntryLayout, m as showDraftRestoredToast, n as createGetPreviewProps, o as setDraft, q as delDraft, r as useCreateBranchMutation, v as prettyErrorForCreateBranchMutation, w as clientSideValidateProp, F as FormForEntry, x as getInitialPropsValue, z as useAssociatedPullRequest, C as CreateBranchDialog, A as useNavItems, B as useSidebar, S as SidebarDialog, D as SidebarPanel, E as SidebarProvider } from './index-cb6d8e27.js';\nimport { u as useRouter, g as getEntryDataFilepath, o as object, a as useTree, b as useBaseCommit, c as useIsRepoPrivate, d as useBranchInfo, e as getDirectoriesForTreeKey, f as getTreeKey, h as useData, L as LOADING, i as getTreeNodeAtPath, j as getBlobFromPersistedCache, s as setBlobToPersistedCache, k as blobSha, l as serializeRepoConfig, m as getPathPrefix, n as getAuth, K as KEYSTATIC_CLOUD_API_URL, p as KEYSTATIC_CLOUD_HEADERS, q as getCollectionPath, r as isLocalConfig, t as getEntriesInCollectionWithTreeKey, v as getCollectionFormat, w as getCollectionItemPath, x as getSlugGlobForCollection, y as parseRepoConfig, G as GitHubAppShellQuery, z as useConfig, A as useCloudInfo, B as useAwarenessStates, C as getSyncAuth, D as redirectToCloudAuth, E as CloudAppShellQuery, F as BranchInfoContext, H as useSetTreeSha, R as RepoWithWriteAccessContext, I as useCurrentUnscopedTree, J as updateTreeWithChanges, M as hydrateTreeCacheWithEntries, N as scopeEntriesWithPathPrefix, O as fetchGitHubTreeData, P as treeSha, Q as getSlugFromState, S as useYjs, T as useYjsIfAvailable, U as useEventCallback, V as useRepositoryId, W as getBranchPrefix, X as getRepoUrl, Y as getDataFileExtension, Z as isGitHubConfig, _ as pluralize, $ as useViewer, a0 as useContentPanelState, a1 as ContentPanelProvider, a2 as AppShellErrorContext, a3 as ConfigContext, a4 as AppStateContext, a5 as GitHubAppShellProvider, a6 as LocalAppShellProvider, a7 as getSingletonFormat, a8 as getSingletonPath, a9 as isCloudConfig, aa as assertValidRepoConfig, ab as RouterProvider, ac as GitHubAppShellDataContext, ad as CloudInfoProvider, ae as GitHubAppShellDataProvider } from './index-cf1193f7.js';\nimport { jsx, jsxs, Fragment } from 'react/jsx-runtime';\nimport { LRUCache } from 'lru-cache';\nimport { Dialog, DialogContainer, AlertDialog, DialogTrigger } from '@keystar/ui/dialog';\nimport '@keystar/ui/field';\nimport '@keystar/ui/menu';\nimport { Content } from '@keystar/ui/slots';\nimport '@react-aria/label';\nimport { assert } from 'emery';\nimport '@keystar/ui/drag-and-drop';\nimport { trash2Icon } from '@keystar/ui/icon/icons/trash2Icon';\nimport '@keystar/ui/list-view';\nimport { TooltipTrigger, Tooltip } from '@keystar/ui/tooltip';\nimport 'slate';\nimport 'slate-react';\nimport { SplitView, SplitPanePrimary, SplitPaneSecondary } from '@keystar/ui/split-view';\nimport '@keystar/ui/icon/icons/panelLeftOpenIcon';\nimport '@keystar/ui/icon/icons/panelLeftCloseIcon';\nimport '@keystar/ui/icon/icons/panelRightOpenIcon';\nimport '@keystar/ui/icon/icons/panelRightCloseIcon';\nimport '@keystar/ui/checkbox';\nimport '@keystar/ui/number-field';\nimport { TextField } from '@keystar/ui/text-field';\nimport '@keystar/ui/icon/icons/imageIcon';\nimport '@braintree/sanitize-url';\nimport '@react-stately/collections';\nimport '@keystar/ui/action-bar';\nimport '@keystar/ui/combobox';\nimport 'decimal.js-light';\nimport 'minimatch';\nimport '@keystar/ui/picker';\nimport '@keystar/ui/icon/icons/refreshCwIcon';\nimport '@sindresorhus/slugify';\nimport { l as loadDataFile } from './required-files-858fa039.js';\nimport * as Y from 'yjs';\nimport * as s from 'superstruct';\nimport { historyIcon } from '@keystar/ui/icon/icons/historyIcon';\nimport { Notice } from '@keystar/ui/notice';\nimport { Toaster, toastQueue } from '@keystar/ui/toast';\nimport { ActionGroup, Item as Item$1 } from '@keystar/ui/action-group';\nimport { Badge } from '@keystar/ui/badge';\nimport { copyPlusIcon } from '@keystar/ui/icon/icons/copyPlusIcon';\nimport { externalLinkIcon } from '@keystar/ui/icon/icons/externalLinkIcon';\nimport { useClient, Provider as Provider$1, createClient, fetchExchange, useMutation } from 'urql';\nimport { Breadcrumbs, Item } from '@keystar/ui/breadcrumbs';\nimport { u as useSlugsInCollection } from './useSlugsInCollection-d43cad70.js';\nimport { Avatar } from '@keystar/ui/avatar';\nimport { gql } from '@ts-gql/tag/no-transform';\nimport { dump } from 'js-yaml';\nimport { KeystarProvider, ClientSideOnlyDocumentElement } from '@keystar/ui/core';\nimport { cacheExchange } from '@urql/exchange-graphcache';\nimport { authExchange } from '@urql/exchange-auth';\nimport { persistedExchange } from '@urql/exchange-persisted';\nimport { relayPagination } from '@urql/exchange-graphcache/extras';\nimport { b as base64Encode } from './base64-3538d789.js';\nimport isEqual from 'fast-deep-equal';\nimport { gitBranchIcon } from '@keystar/ui/icon/icons/gitBranchIcon';\nimport { gitBranchPlusIcon } from '@keystar/ui/icon/icons/gitBranchPlusIcon';\nimport { gitPullRequestIcon } from '@keystar/ui/icon/icons/gitPullRequestIcon';\nimport { plusIcon } from '@keystar/ui/icon/icons/plusIcon';\nimport '@markdoc/markdoc/dist/index.mjs';\nimport 'prosemirror-commands';\nimport 'prosemirror-state';\nimport 'prosemirror-transform';\nimport '@keystar/ui/editor';\nimport '@keystar/ui/icon/icons/boldIcon';\nimport '@keystar/ui/icon/icons/chevronDownIcon';\nimport '@keystar/ui/icon/icons/codeIcon';\nimport '@keystar/ui/icon/icons/italicIcon';\nimport '@keystar/ui/icon/icons/listIcon';\nimport '@keystar/ui/icon/icons/listOrderedIcon';\nimport '@keystar/ui/icon/icons/minusIcon';\nimport '@keystar/ui/icon/icons/quoteIcon';\nimport '@keystar/ui/icon/icons/removeFormattingIcon';\nimport '@keystar/ui/icon/icons/strikethroughIcon';\nimport '@keystar/ui/icon/icons/tableIcon';\nimport '@keystar/ui/icon/icons/fileCodeIcon';\nimport '@keystar/ui/icon/icons/heading1Icon';\nimport '@keystar/ui/icon/icons/heading2Icon';\nimport '@keystar/ui/icon/icons/heading3Icon';\nimport '@keystar/ui/icon/icons/heading4Icon';\nimport '@keystar/ui/icon/icons/heading5Icon';\nimport '@keystar/ui/icon/icons/heading6Icon';\nimport '@keystar/ui/icon/icons/separatorHorizontalIcon';\nimport 'prosemirror-model';\nimport '@emotion/css';\nimport '@react-aria/overlays';\nimport '@react-aria/utils';\nimport '@react-stately/overlays';\nimport '@keystar/ui/nav-list';\nimport '@keystar/ui/overlays';\nimport '@keystar/ui/status-light';\nimport '@keystar/ui/utils';\nimport '@keystar/ui/icon/icons/logOutIcon';\nimport '@keystar/ui/icon/icons/gitForkIcon';\nimport '@keystar/ui/icon/icons/monitorIcon';\nimport '@keystar/ui/icon/icons/moonIcon';\nimport '@keystar/ui/icon/icons/sunIcon';\nimport '@keystar/ui/icon/icons/userIcon';\nimport '@keystar/ui/radio';\nimport 'idb-keyval';\nimport '@keystar/ui/icon/icons/editIcon';\nimport '@keystar/ui/icon/icons/linkIcon';\nimport '@keystar/ui/icon/icons/unlinkIcon';\nimport '@keystar/ui/icon/icons/maximizeIcon';\nimport '@keystar/ui/icon/icons/minimizeIcon';\nimport '@keystar/ui/icon/icons/subscriptIcon';\nimport '@keystar/ui/icon/icons/superscriptIcon';\nimport '@keystar/ui/icon/icons/typeIcon';\nimport '@keystar/ui/icon/icons/underlineIcon';\nimport '@keystar/ui/icon/icons/alignLeftIcon';\nimport '@keystar/ui/icon/icons/alignRightIcon';\nimport '@keystar/ui/icon/icons/alignCenterIcon';\nimport 'match-sorter';\nimport 'emery/assertions';\nimport '@keystar/ui/icon/icons/trashIcon';\nimport '@emotion/weak-memoize';\nimport '@keystar/ui/icon/icons/columnsIcon';\nimport '@keystar/ui/icon/icons/fileUpIcon';\nimport 'y-prosemirror';\nimport '@keystar/ui/icon/icons/sheetIcon';\nimport 'scroll-into-view-if-needed';\nimport '@react-stately/list';\nimport '@keystar/ui/listbox';\nimport 'slate-history';\nimport 'mdast-util-from-markdown';\nimport 'mdast-util-gfm-autolink-literal';\nimport 'micromark-extension-gfm-autolink-literal';\nimport 'mdast-util-gfm-strikethrough';\nimport 'micromark-extension-gfm-strikethrough';\nimport 'prosemirror-view';\nimport '@react-aria/selection';\nimport 'prosemirror-tables';\nimport '@keystar/ui/icon/icons/pencilIcon';\nimport 'react-dom';\nimport 'prosemirror-history';\nimport 'prosemirror-keymap';\nimport 'escape-string-regexp';\nimport 'mdast-util-to-markdown';\nimport 'mdast-util-gfm';\nimport 'mdast-util-mdx';\nimport 'micromark-extension-gfm';\nimport 'micromark-extension-mdxjs';\nimport 'unist-util-visit';\nimport '@keystar/ui/icon/icons/link2Icon';\nimport '@keystar/ui/icon/icons/link2OffIcon';\nimport '@keystar/ui/icon/icons/undo2Icon';\nimport 'y-protocols/awareness';\nimport '@toeverything/y-indexeddb';\nimport 'lib0/broadcastchannel';\nimport 'lib0/time';\nimport 'lib0/encoding';\nimport 'lib0/decoding';\nimport 'y-protocols/sync';\nimport 'y-protocols/auth';\nimport 'lib0/mutex';\nimport 'lib0/math';\nimport 'cookie';\nimport 'partysocket/ws';\nimport 'lib0/encoding.js';\n\n// the collator enables language-sensitive string comparison\nconst collator = new Intl.Collator(undefined, {\n  sensitivity: 'base'\n});\n\n/**\n * Creates a comparison function that should be provided to the `sort()` method\n * of your data array.\n */\nfunction sortBy(direction, valueA, valueB) {\n  const modifier = direction === 'ascending' ? 1 : -1;\n\n  // always push `null` and `undefined` to the bottom\n  if (valueA == null) return 1;\n  if (valueB == null) return -1;\n\n  // the collator is only appropriate for strings, it fails in subtle\n  // ways for floats, dates, etc.\n  if (typeof valueA === 'string' && typeof valueB === 'string') {\n    return collator.compare(valueA, valueB) * modifier;\n  }\n  return compare(valueA, valueB) * modifier;\n}\n\n/** Default comparison for non-string values */\nfunction compare(a, b) {\n  if (a < b) return -1;\n  if (a > b) return 1;\n  return 0;\n}\n\nfunction EmptyState(props) {\n  return /*#__PURE__*/jsx(Flex, {\n    alignItems: \"center\",\n    direction: \"column\",\n    gap: \"large\",\n    justifyContent: \"center\",\n    minHeight: \"scale.3000\",\n    paddingX: {\n      mobile: 'medium',\n      tablet: 'xlarge',\n      desktop: 'xxlarge'\n    },\n    children: 'children' in props ? props.children : /*#__PURE__*/jsxs(Fragment, {\n      children: [props.icon && /*#__PURE__*/jsx(Icon, {\n        src: props.icon,\n        size: \"large\",\n        color: \"neutralEmphasis\"\n      }), props.title && /*#__PURE__*/jsx(Heading, {\n        align: \"center\",\n        size: \"medium\",\n        children: props.title\n      }), props.message && /*#__PURE__*/jsx(Text, {\n        align: \"center\",\n        children: props.message\n      }), props.actions]\n    })\n  });\n}\n\nclass NotFoundError extends Error {\n  constructor() {\n    super('Not found');\n    this.name = 'NotFoundError';\n  }\n}\nfunction isNotFoundError(err) {\n  return typeof err === 'object' && err !== null && err instanceof NotFoundError;\n}\nfunction notFound() {\n  throw new NotFoundError();\n}\nclass NotFoundErrorBoundaryInner extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      notFound: false,\n      lastHref: props.href\n    };\n  }\n  static getDerivedStateFromError(err) {\n    if (isNotFoundError(err)) {\n      return {\n        notFound: true\n      };\n    }\n    throw err;\n  }\n  static getDerivedStateFromProps(props, state) {\n    if (props.href !== state.lastHref && state.notFound) {\n      return {\n        notFound: false,\n        lastHref: props.href\n      };\n    }\n    return {\n      notFound: state.notFound,\n      lastHref: props.href\n    };\n  }\n  render() {\n    if (this.state.notFound) return this.props.fallback;\n    return this.props.children;\n  }\n}\nfunction NotFoundBoundary(props) {\n  const router = useRouter();\n  return /*#__PURE__*/jsx(NotFoundErrorBoundaryInner, {\n    ...props,\n    href: router.href\n  });\n}\n\nclass TrackedMap extends Map {\n  #onGet;\n  constructor(onGet, entries) {\n    super(entries);\n    this.#onGet = onGet;\n  }\n  get(key) {\n    this.#onGet(key);\n    return super.get(key);\n  }\n}\nfunction parseEntry(args, files) {\n  const dataFilepath = getEntryDataFilepath(args.dirpath, args.format);\n  const data = files.get(dataFilepath);\n  if (!data) {\n    throw new Error(`Could not find data file at ${dataFilepath}`);\n  }\n  const {\n    loaded,\n    extraFakeFile\n  } = loadDataFile(data, args.format);\n  const filesWithFakeFile = new Map(files);\n  if (extraFakeFile) {\n    filesWithFakeFile.set(`${args.dirpath}/${extraFakeFile.path}`, extraFakeFile.contents);\n  }\n  const usedFiles = new Set([dataFilepath]);\n  const rootSchema = object(args.schema);\n  let initialState;\n  const getFile = filepath => {\n    usedFiles.add(filepath);\n    return filesWithFakeFile.get(filepath);\n  };\n  try {\n    initialState = parseProps(rootSchema, loaded, [], [], (schema, value, path, pathWithArrayFieldSlugs) => {\n      var _args$slug;\n      if (path.length === 1 && path[0] === ((_args$slug = args.slug) === null || _args$slug === void 0 ? void 0 : _args$slug.field)) {\n        if (schema.formKind !== 'slug') {\n          throw new Error(`slugField is not a slug field`);\n        }\n        return schema.parse(value, {\n          slug: args.slug.slug\n        });\n      }\n      if (schema.formKind === 'asset') {\n        var _args$slug2, _args$slug3, _args$slug4;\n        const suggestedFilenamePrefix = pathWithArrayFieldSlugs.join('/');\n        const filepath = schema.filename(value, {\n          suggestedFilenamePrefix,\n          slug: (_args$slug2 = args.slug) === null || _args$slug2 === void 0 ? void 0 : _args$slug2.slug\n        });\n        const asset = filepath ? getFile(`${schema.directory ? `${schema.directory}${((_args$slug3 = args.slug) === null || _args$slug3 === void 0 ? void 0 : _args$slug3.slug) === undefined ? '' : `/${args.slug.slug}`}` : args.dirpath}/${filepath}`) : undefined;\n        return schema.parse(value, {\n          asset,\n          slug: (_args$slug4 = args.slug) === null || _args$slug4 === void 0 ? void 0 : _args$slug4.slug\n        });\n      }\n      if (schema.formKind === 'content') {\n        var _args$slug7;\n        const rootPath = `${args.dirpath}/${pathWithArrayFieldSlugs.join('/')}`;\n        const mainFilepath = rootPath + schema.contentExtension;\n        const mainContents = getFile(mainFilepath);\n        const otherFiles = new TrackedMap(key => {\n          usedFiles.add(`${rootPath}/${key}`);\n        });\n        const otherDirectories = new Map();\n        for (const [filename] of filesWithFakeFile) {\n          if (filename.startsWith(rootPath + '/')) {\n            const relativePath = filename.slice(rootPath.length + 1);\n            otherFiles.set(relativePath, filesWithFakeFile.get(filename));\n          }\n        }\n        for (const dir of (_schema$directories = schema.directories) !== null && _schema$directories !== void 0 ? _schema$directories : []) {\n          var _schema$directories, _args$slug5, _args$slug6;\n          const dirFiles = new TrackedMap(relativePath => usedFiles.add(start + relativePath));\n          const start = `${dir}${((_args$slug5 = args.slug) === null || _args$slug5 === void 0 ? void 0 : _args$slug5.slug) === undefined ? '' : `/${(_args$slug6 = args.slug) === null || _args$slug6 === void 0 ? void 0 : _args$slug6.slug}`}/`;\n          for (const [filename, val] of filesWithFakeFile) {\n            if (filename.startsWith(start)) {\n              const relativePath = filename.slice(start.length);\n              dirFiles.set(relativePath, val);\n            }\n          }\n          if (dirFiles.size) {\n            otherDirectories.set(dir, dirFiles);\n          }\n        }\n        return schema.parse(value, {\n          content: mainContents,\n          other: otherFiles,\n          external: otherDirectories,\n          slug: (_args$slug7 = args.slug) === null || _args$slug7 === void 0 ? void 0 : _args$slug7.slug\n        });\n      }\n      return schema.parse(value, undefined);\n    }, false);\n  } catch (err) {\n    throw toFormattedFormDataError(err);\n  }\n  if (extraFakeFile) {\n    usedFiles.delete(`${args.dirpath}/${extraFakeFile.path}`);\n  }\n  return {\n    initialState,\n    initialFiles: [...usedFiles]\n  };\n}\nfunction getAllFilesInTree(tree) {\n  return [...tree.values()].flatMap(val => val.children ? getAllFilesInTree(val.children) : [val.entry]);\n}\nfunction useItemData(args) {\n  var _args$slug9;\n  const {\n    current: currentBranch\n  } = useTree();\n  const baseCommit = useBaseCommit();\n  const isRepoPrivate = useIsRepoPrivate();\n  const branchInfo = useBranchInfo();\n  const rootTree = currentBranch.kind === 'loaded' ? currentBranch.data.tree : undefined;\n  const locationsForTreeKey = useMemo(() => {\n    var _args$slug8;\n    return getDirectoriesForTreeKey(object(args.schema), args.dirpath, (_args$slug8 = args.slug) === null || _args$slug8 === void 0 ? void 0 : _args$slug8.slug, args.format);\n  }, [args.dirpath, args.format, args.schema, (_args$slug9 = args.slug) === null || _args$slug9 === void 0 ? void 0 : _args$slug9.slug]);\n  const localTreeKey = useMemo(() => getTreeKey(locationsForTreeKey, rootTree !== null && rootTree !== void 0 ? rootTree : new Map()), [locationsForTreeKey, rootTree]);\n  const tree = useMemo(() => {\n    return rootTree !== null && rootTree !== void 0 ? rootTree : new Map();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [localTreeKey, locationsForTreeKey]);\n  const hasLoaded = currentBranch.kind === 'loaded';\n  return useData(useCallback(() => {\n    var _getTreeNodeAtPath;\n    if (!hasLoaded) return LOADING;\n    const dataFilepathSha = (_getTreeNodeAtPath = getTreeNodeAtPath(tree, getEntryDataFilepath(args.dirpath, args.format))) === null || _getTreeNodeAtPath === void 0 ? void 0 : _getTreeNodeAtPath.entry.sha;\n    if (dataFilepathSha === undefined) {\n      return 'not-found';\n    }\n    const _args = {\n      config: args.config,\n      dirpath: args.dirpath,\n      format: args.format,\n      schema: args.schema,\n      slug: args.slug\n    };\n    const allBlobs = locationsForTreeKey.flatMap(dir => {\n      const node = getTreeNodeAtPath(tree, dir);\n      if (!node) return [];\n      return node.children ? getAllFilesInTree(node.children) : [node.entry];\n    }).map(entry => {\n      const blob = fetchBlob(args.config, entry.sha, entry.path, baseCommit, isRepoPrivate, {\n        owner: branchInfo.mainOwner,\n        name: branchInfo.mainRepo\n      });\n      if (blob instanceof Uint8Array) {\n        return [entry.path, blob];\n      }\n      return blob.then(blob => [entry.path, blob]);\n    });\n    if (allBlobs.every(x => Array.isArray(x))) {\n      const {\n        initialFiles,\n        initialState\n      } = parseEntry(_args, new Map(allBlobs));\n      return {\n        initialState,\n        initialFiles,\n        localTreeKey\n      };\n    }\n    return Promise.all(allBlobs).then(async data => {\n      const {\n        initialState,\n        initialFiles\n      } = parseEntry(_args, new Map(data));\n      return {\n        initialState,\n        initialFiles,\n        localTreeKey\n      };\n    });\n  }, [hasLoaded, tree, args.dirpath, args.format, args.config, args.schema, args.slug, locationsForTreeKey, baseCommit, isRepoPrivate, branchInfo.mainOwner, branchInfo.mainRepo, localTreeKey]));\n}\nconst blobCache = new LRUCache({\n  max: 200\n});\nasync function hydrateBlobCache(contents) {\n  const sha = await blobSha(contents);\n  blobCache.set(sha, contents);\n  await setBlobToPersistedCache(sha, contents);\n  return sha;\n}\nasync function fetchGitHubBlob(config, oid, filepath, commitSha, isRepoPrivate, repo) {\n  if (!isRepoPrivate) {\n    var _getPathPrefix;\n    return fetch(`https://raw.githubusercontent.com/${serializeRepoConfig(repo)}/${commitSha}/${(_getPathPrefix = getPathPrefix(config.storage)) !== null && _getPathPrefix !== void 0 ? _getPathPrefix : ''}${filepath}`);\n  }\n  const auth = await getAuth(config);\n  return fetch(config.storage.kind === 'github' ? `https://api.github.com/repos/${serializeRepoConfig(config.storage.repo)}/git/blobs/${oid}` : `${KEYSTATIC_CLOUD_API_URL}/v1/github/blob/${oid}`, {\n    headers: {\n      Authorization: `Bearer ${auth.accessToken}`,\n      Accept: 'application/vnd.github.raw',\n      ...(config.storage.kind === 'cloud' ? KEYSTATIC_CLOUD_HEADERS : {})\n    }\n  });\n}\nfunction fetchBlob(config, oid, filepath, commitSha, isRepoPrivate, repo) {\n  if (blobCache.has(oid)) return blobCache.get(oid);\n  const promise = (async () => {\n    const isLocal = config.storage.kind === 'local';\n    if (!isLocal) {\n      const stored = await getBlobFromPersistedCache(oid);\n      if (stored) {\n        blobCache.set(oid, stored);\n        return stored;\n      }\n    }\n    return (isLocal ? fetch(`/api/keystatic/blob/${oid}/${filepath}`, {\n      headers: {\n        'no-cors': '1'\n      }\n    }) : fetchGitHubBlob(config, oid, filepath, commitSha, isRepoPrivate, repo)).then(async x => {\n      if (!x.ok) {\n        throw new Error(`Could not fetch blob ${oid} (${filepath}): ${x.status}\\n${await x.text()}`);\n      }\n      return x.arrayBuffer();\n    }).then(x => {\n      const array = new Uint8Array(x);\n      blobCache.set(oid, array);\n      if (config.storage.kind !== 'local') {\n        setBlobToPersistedCache(oid, array);\n      }\n      return array;\n    }).catch(err => {\n      blobCache.delete(oid);\n      throw err;\n    });\n  })();\n  blobCache.set(oid, promise);\n  return promise;\n}\n\nfunction CollectionPage(props) {\n  var _config$collections, _URLSearchParams$get;\n  const {\n    collection,\n    config\n  } = props;\n  const containerWidth = 'none'; // TODO: use a \"large\" when we have more columns\n  const collectionConfig = (_config$collections = config.collections) === null || _config$collections === void 0 ? void 0 : _config$collections[collection];\n  if (!collectionConfig) notFound();\n  const router = useRouter();\n  const [searchTerm, setSearchTerm] = useState((_URLSearchParams$get = new URLSearchParams(router.search).get('search')) !== null && _URLSearchParams$get !== void 0 ? _URLSearchParams$get : '');\n  const setSearchTermFromForm = useCallback(value => {\n    setSearchTerm(value);\n    const params = new URLSearchParams(router.search);\n    if (value) {\n      params.set('search', value);\n    } else {\n      params.delete('search');\n    }\n    router.replace(router.pathname + '?' + params.toString());\n  }, [router]);\n  let debouncedSearchTerm = useDebouncedValue(searchTerm, 300);\n  return /*#__PURE__*/jsxs(PageRoot, {\n    containerWidth: containerWidth,\n    children: [/*#__PURE__*/jsx(CollectionPageHeader, {\n      collectionLabel: collectionConfig.label,\n      createHref: `${props.basePath}/collection/${encodeURIComponent(props.collection)}/create`,\n      searchTerm: searchTerm,\n      onSearchTermChange: setSearchTermFromForm\n    }), /*#__PURE__*/jsx(CollectionPageContent, {\n      searchTerm: debouncedSearchTerm,\n      ...props\n    })]\n  });\n}\nfunction CollectionPageHeader(props) {\n  const {\n    collectionLabel,\n    createHref\n  } = props;\n  const stringFormatter = useLocalizedStringFormatter(l10nMessages);\n  const isAboveMobile = useMediaQuery(breakpointQueries.above.mobile);\n  const [searchVisible, setSearchVisible] = useState(isAboveMobile);\n  const searchRef = useRef(null);\n  useEffect(() => {\n    setSearchVisible(isAboveMobile);\n  }, [isAboveMobile]);\n\n  // entries are presented in a virtualized table view, so we replace the\n  // default (e.g. ctrl+f) browser search behaviour\n  useEffect(() => {\n    const listener = event => {\n      // bail if the search field is already focused; let users invoke the\n      // browser search if they need to\n      if (document.activeElement === searchRef.current) {\n        return;\n      }\n      if (isHotkey('mod+f', event)) {\n        var _searchRef$current;\n        event.preventDefault();\n        (_searchRef$current = searchRef.current) === null || _searchRef$current === void 0 || _searchRef$current.select();\n      }\n    };\n    document.addEventListener('keydown', listener);\n    return () => document.removeEventListener('keydown', listener);\n  }, []);\n  return /*#__PURE__*/jsxs(PageHeader, {\n    children: [/*#__PURE__*/jsx(Heading, {\n      elementType: \"h1\",\n      id: \"page-title\",\n      size: \"small\",\n      flex: true,\n      minWidth: 0,\n      children: collectionLabel\n    }), /*#__PURE__*/jsx(\"div\", {\n      role: \"search\",\n      style: {\n        display: searchVisible ? 'block' : 'none'\n      },\n      children: /*#__PURE__*/jsx(SearchField, {\n        ref: searchRef,\n        \"aria-label\": stringFormatter.format('search') // TODO: l10n \"Search {collection}\"?\n        ,\n        onChange: props.onSearchTermChange,\n        onClear: () => {\n          props.onSearchTermChange('');\n          if (!isAboveMobile) {\n            // the timeout ensures that the \"add\" button isn't pressed\n            setTimeout(() => {\n              setSearchVisible(false);\n            }, 250);\n          }\n        },\n        onBlur: () => {\n          if (!isAboveMobile && props.searchTerm === '') {\n            setSearchVisible(false);\n          }\n        },\n        placeholder: stringFormatter.format('search'),\n        value: props.searchTerm,\n        width: \"scale.2400\"\n      })\n    }), /*#__PURE__*/jsx(ActionButton, {\n      \"aria-label\": \"show search\",\n      isHidden: searchVisible || {\n        above: 'mobile'\n      },\n      onPress: () => {\n        setSearchVisible(true);\n        // NOTE: this hack is to force the search field to focus, and invoke\n        // the software keyboard on mobile safari\n        let tempInput = document.createElement('input');\n        tempInput.style.position = 'absolute';\n        tempInput.style.opacity = '0';\n        document.body.appendChild(tempInput);\n        tempInput.focus();\n        setTimeout(() => {\n          var _searchRef$current2;\n          (_searchRef$current2 = searchRef.current) === null || _searchRef$current2 === void 0 || _searchRef$current2.focus();\n          tempInput.remove();\n        }, 0);\n      },\n      children: /*#__PURE__*/jsx(Icon, {\n        src: searchIcon\n      })\n    }), /*#__PURE__*/jsx(Button, {\n      marginStart: \"auto\",\n      prominence: \"high\",\n      href: createHref,\n      isHidden: searchVisible ? {\n        below: 'tablet'\n      } : undefined,\n      children: stringFormatter.format('add')\n    })]\n  });\n}\nfunction CollectionPageContent(props) {\n  const trees = useTree();\n  const tree = trees.merged.kind === 'loaded' ? trees.merged.data.current.entries.get(getCollectionPath(props.config, props.collection)) : null;\n  if (trees.merged.kind === 'error') {\n    return /*#__PURE__*/jsx(EmptyState, {\n      icon: alertCircleIcon,\n      title: \"Unable to load collection\",\n      message: trees.merged.error.message,\n      actions: /*#__PURE__*/jsx(Button, {\n        tone: \"accent\",\n        href: props.basePath,\n        children: \"Dashboard\"\n      })\n    });\n  }\n  if (trees.merged.kind === 'loading') {\n    return /*#__PURE__*/jsx(EmptyState, {\n      children: /*#__PURE__*/jsx(ProgressCircle, {\n        \"aria-label\": \"Loading Entries\",\n        isIndeterminate: true,\n        size: \"large\"\n      })\n    });\n  }\n  if (!tree) {\n    return /*#__PURE__*/jsx(EmptyState, {\n      icon: listXIcon,\n      title: \"Empty collection\",\n      message: /*#__PURE__*/jsxs(Fragment, {\n        children: [\"There aren't any entries yet.\", ' ', /*#__PURE__*/jsx(TextLink, {\n          href: `${props.basePath}/collection/${encodeURIComponent(props.collection)}/create`,\n          children: \"Create the first entry\"\n        }), ' ', \"to see it here.\"]\n      })\n    });\n  }\n  return /*#__PURE__*/jsx(CollectionTable, {\n    ...props,\n    trees: trees.merged.data\n  });\n}\nconst SLUG = '@@slug';\nconst STATUS = '@@status';\nfunction CollectionTable(props) {\n  let {\n    searchTerm\n  } = props;\n  let {\n    currentBranch,\n    defaultBranch\n  } = useBranchInfo();\n  let isLocalMode = isLocalConfig(props.config);\n  let router = useRouter();\n  let [sortDescriptor, setSortDescriptor] = useState({\n    column: SLUG,\n    direction: 'ascending'\n  });\n  let hideStatusColumn = isLocalMode || currentBranch === defaultBranch;\n  const branchInfo = useBranchInfo();\n  const isRepoPrivate = useIsRepoPrivate();\n  const baseCommit = useBaseCommit();\n  const collection = props.config.collections[props.collection];\n  const entriesWithStatus = useMemo(() => {\n    const defaultEntries = new Map(getEntriesInCollectionWithTreeKey(props.config, props.collection, props.trees.default.tree).map(x => [x.slug, x.key]));\n    return getEntriesInCollectionWithTreeKey(props.config, props.collection, props.trees.current.tree).map(entry => {\n      return {\n        name: entry.slug,\n        status: defaultEntries.has(entry.slug) ? defaultEntries.get(entry.slug) === entry.key ? 'Unchanged' : 'Changed' : 'Added',\n        sha: entry.sha\n      };\n    });\n  }, [props.collection, props.config, props.trees]);\n  const mainFiles = useData(useCallback(async () => {\n    var _collection$columns;\n    if (!((_collection$columns = collection.columns) !== null && _collection$columns !== void 0 && _collection$columns.length)) return undefined;\n    const formatInfo = getCollectionFormat(props.config, props.collection);\n    const entries = await Promise.all(entriesWithStatus.map(async entry => {\n      return [entry.name, await fetchBlob(props.config, entry.sha, getEntryDataFilepath(getCollectionItemPath(props.config, props.collection, entry.name), formatInfo), baseCommit, isRepoPrivate, {\n        owner: branchInfo.mainOwner,\n        name: branchInfo.mainRepo\n      })];\n    }));\n    const glob = getSlugGlobForCollection(props.config, props.collection);\n    const rootSchema = {\n      kind: 'object',\n      fields: collection.schema\n    };\n    return new Map(entries.map(([slug, dataFile]) => {\n      const {\n        loaded\n      } = loadDataFile(dataFile, formatInfo);\n      const validated = parseProps(rootSchema, loaded, [], [], (schema, value, path) => {\n        if (schema.formKind === 'asset') {\n          return schema.reader.parse(value);\n        }\n        if (schema.formKind === 'content') {\n          return;\n        }\n        if (path.length === 1 && slug !== undefined) {\n          if (path[0] === collection.slugField) {\n            if (schema.formKind !== 'slug') {\n              throw new Error(`Slug field ${collection.slugField} is not a slug field`);\n            }\n            return schema.reader.parseWithSlug(value, {\n              slug,\n              glob\n            });\n          }\n        }\n        return schema.reader.parse(value);\n      }, true);\n      return [slug, validated];\n    }));\n  }, [baseCommit, branchInfo.mainOwner, branchInfo.mainRepo, collection, entriesWithStatus, isRepoPrivate, props.collection, props.config]));\n  const entriesWithData = useMemo(() => {\n    if (mainFiles.kind !== 'loaded' || !mainFiles.data) {\n      return entriesWithStatus;\n    }\n    const {\n      data\n    } = mainFiles;\n    return entriesWithStatus.map(entry => {\n      return {\n        ...entry,\n        data: data.get(entry.name)\n      };\n    });\n  }, [entriesWithStatus, mainFiles]);\n  const filteredItems = useMemo(() => {\n    return entriesWithData.filter(item => item.name.toLowerCase().includes(searchTerm.toLowerCase()));\n  }, [entriesWithData, searchTerm]);\n  const sortedItems = useMemo(() => {\n    return [...filteredItems].sort((a, b) => {\n      const readCol = (row, other) => {\n        var _other;\n        if (sortDescriptor.column === SLUG) {\n          var _collection$parseSlug, _collection$parseSlug2;\n          return (_collection$parseSlug = (_collection$parseSlug2 = collection.parseSlugForSort) === null || _collection$parseSlug2 === void 0 ? void 0 : _collection$parseSlug2.call(collection, row.name)) !== null && _collection$parseSlug !== void 0 ? _collection$parseSlug : row.name;\n        }\n        if (sortDescriptor.column === STATUS) {\n          return row.status;\n        }\n        return (_other = other === null || other === void 0 ? void 0 : other[sortDescriptor.column]) !== null && _other !== void 0 ? _other : row.name;\n      };\n      const other = mainFiles.kind === 'loaded' ? mainFiles.data : undefined;\n      return sortBy(sortDescriptor.direction, readCol(a, other === null || other === void 0 ? void 0 : other.get(a.name)), readCol(b, other === null || other === void 0 ? void 0 : other.get(b.name)));\n    });\n  }, [collection, filteredItems, mainFiles, sortDescriptor.column, sortDescriptor.direction]);\n  const columns = useMemo(() => {\n    var _collection$columns2;\n    if ((_collection$columns2 = collection.columns) !== null && _collection$columns2 !== void 0 && _collection$columns2.length) {\n      return [...(hideStatusColumn ? [] : [{\n        name: 'Status',\n        key: STATUS,\n        minWidth: 32,\n        width: 32\n      }]), {\n        name: 'Slug',\n        key: SLUG\n      }, ...collection.columns.map(column => {\n        const schema = collection.schema[column];\n        return {\n          name: 'label' in schema && schema.label || column,\n          key: column\n        };\n      })];\n    }\n    return hideStatusColumn ? [{\n      name: 'Name',\n      key: SLUG\n    }] : [{\n      name: 'Status',\n      key: STATUS,\n      minWidth: 32,\n      width: 32\n    }, {\n      name: 'Name',\n      key: SLUG\n    }];\n  }, [collection, hideStatusColumn]);\n  return /*#__PURE__*/jsxs(TableView, {\n    \"aria-labelledby\": \"page-title\",\n    selectionMode: \"none\",\n    onSortChange: setSortDescriptor,\n    sortDescriptor: sortDescriptor,\n    density: \"spacious\",\n    overflowMode: \"truncate\",\n    prominence: \"low\",\n    onRowAction: key => {\n      router.push(getItemPath(props.basePath, props.collection, key));\n    },\n    renderEmptyState: () => /*#__PURE__*/jsx(EmptyState, {\n      icon: searchXIcon,\n      title: \"No results\",\n      message: `No items matching \"${searchTerm}\" were found.`\n    }),\n    flex: true,\n    marginTop: {\n      tablet: 'large'\n    },\n    marginBottom: {\n      mobile: 'regular',\n      tablet: 'xlarge'\n    },\n    UNSAFE_className: css({\n      marginInline: tokenSchema.size.space.regular,\n      [breakpointQueries.above.mobile]: {\n        marginInline: `calc(${tokenSchema.size.space.xlarge} - ${tokenSchema.size.space.medium})`\n      },\n      [breakpointQueries.above.tablet]: {\n        marginInline: `calc(${tokenSchema.size.space.xxlarge} - ${tokenSchema.size.space.medium})`\n      },\n      '[role=rowheader]': {\n        cursor: 'pointer'\n      }\n    }),\n    children: [/*#__PURE__*/jsx(TableHeader, {\n      columns: columns,\n      children: ({\n        name,\n        key,\n        ...options\n      }) => key === STATUS ? /*#__PURE__*/jsx(Column, {\n        isRowHeader: true,\n        allowsSorting: true,\n        ...options,\n        children: /*#__PURE__*/jsx(Icon, {\n          \"aria-label\": \"Status\",\n          src: diffIcon\n        })\n      }, key) : /*#__PURE__*/jsx(Column, {\n        isRowHeader: true,\n        allowsSorting: true,\n        ...options,\n        children: name\n      }, key)\n    }), /*#__PURE__*/jsx(TableBody, {\n      items: sortedItems,\n      children: item => {\n        var _collection$columns3;\n        const statusCell = /*#__PURE__*/jsx(Cell, {\n          textValue: item.status,\n          children: item.status === 'Added' ? /*#__PURE__*/jsx(Icon, {\n            color: \"positive\",\n            src: plusSquareIcon\n          }) : item.status === 'Changed' ? /*#__PURE__*/jsx(Icon, {\n            color: \"accent\",\n            src: dotSquareIcon\n          }) : null\n        }, STATUS + item.name);\n        const nameCell = /*#__PURE__*/jsx(Cell, {\n          textValue: item.name,\n          children: /*#__PURE__*/jsx(Text, {\n            weight: \"medium\",\n            children: item.name\n          })\n        }, SLUG + item.name);\n        if ((_collection$columns3 = collection.columns) !== null && _collection$columns3 !== void 0 && _collection$columns3.length) {\n          return /*#__PURE__*/jsx(Row, {\n            children: [...(hideStatusColumn ? [] : [statusCell]), nameCell, ...collection.columns.map(column => {\n              var _item$data;\n              let val;\n              val = (_item$data = item.data) === null || _item$data === void 0 ? void 0 : _item$data[column];\n              if (val == null) {\n                val = undefined;\n              } else {\n                val = val + '';\n              }\n              return /*#__PURE__*/jsx(Cell, {\n                textValue: val,\n                children: /*#__PURE__*/jsx(Text, {\n                  weight: \"medium\",\n                  children: val\n                })\n              }, column + item.name);\n            })]\n          }, item.name);\n        }\n        return hideStatusColumn ? /*#__PURE__*/jsx(Row, {\n          children: nameCell\n        }, item.name) : /*#__PURE__*/jsxs(Row, {\n          children: [statusCell, nameCell]\n        }, item.name);\n      }\n    })]\n  });\n}\nfunction getItemPath(basePath, collection, key) {\n  return `${basePath}/collection/${encodeURIComponent(collection)}/item/${encodeURIComponent(key)}`;\n}\nfunction useDebouncedValue(value, delay = 300) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const timer = setTimeout(() => setDebouncedValue(value), delay);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n}\n\n// this is written like this rather than ArrayField<ComponentSchema> to avoid TypeScript erroring about circularity\n\nfunction castToMemoizedInfoForSchema(val) {\n  return val;\n}\nfunction getOrInsert(map, key, val) {\n  if (!map.has(key)) {\n    map.set(key, val(key));\n  }\n  return map.get(key);\n}\nfunction findSingleReorderedElement(oldKeys, newKeys) {\n  if (oldKeys.length !== newKeys.length) return;\n  const sortedOldKeys = [...oldKeys].sort();\n  const sortedNewKeys = [...newKeys].sort();\n  if (sortedOldKeys.join() !== sortedNewKeys.join()) return;\n  let reorderedKey;\n  for (let i = 0; i < oldKeys.length; i++) {\n    if (oldKeys[i] !== newKeys[i]) {\n      if (reorderedKey === newKeys[i]) continue;\n      if (reorderedKey !== undefined) return;\n      reorderedKey = oldKeys[i];\n    }\n  }\n  return reorderedKey;\n}\nfunction createGetPreviewPropsFromY(rootSchema, yMap, awareness) {\n  const memoizedInfoForSchema = castToMemoizedInfoForSchema({\n    form(schema, onChange) {\n      return onChange;\n    },\n    array(schema, onChange) {\n      return {\n        rawOnChange: onChange,\n        inner: new Map(),\n        onChange(updater) {\n          const yArr = onChange.yjs();\n          const oldVal = yjsToVal(schema, awareness, yArr);\n          const oldKeys = getKeysForArrayValue(yArr);\n          const uniqueKeys = new Set();\n          for (const x of updater) {\n            if (x.key !== undefined) {\n              if (uniqueKeys.has(x.key)) {\n                throw new Error('Array elements must have unique keys');\n              }\n              uniqueKeys.add(x.key);\n            }\n          }\n          const newKeys = updater.map(x => {\n            if (x.key !== undefined) return x.key;\n            let elementKey = getNewArrayElementKey();\n            // just in case someone gives a key that is above our counter\n            while (uniqueKeys.has(elementKey)) {\n              elementKey = getNewArrayElementKey();\n            }\n            uniqueKeys.add(elementKey);\n            return elementKey;\n          });\n          setKeysForArrayValue(yArr, newKeys);\n          // optimise for the case where a single element has been re-ordered (drag and drop)\n          const reorderedKey = findSingleReorderedElement(oldKeys, newKeys);\n          if (reorderedKey !== undefined) {\n            const oldIndex = oldKeys.indexOf(reorderedKey);\n            const newIndex = newKeys.indexOf(reorderedKey);\n            let val = yArr.get(oldIndex);\n            if (val instanceof Y.AbstractType) {\n              val = val.clone();\n            }\n            yArr.delete(oldIndex);\n            yArr.insert(newIndex, [val]);\n            for (const [idx, {\n              value\n            }] of updater.entries()) {\n              const oldIndex = oldKeys.indexOf(newKeys[idx]);\n              const newVal = updateValue(schema.element, oldVal[oldIndex], value);\n              if (newVal !== oldVal) {\n                yArr.delete(oldIndex);\n                yArr.insert(idx, [parsedValToYjs(schema.element, newVal)]);\n              }\n            }\n            return;\n          }\n\n          // optimise only updating values + added new elements at the end\n          const oldKeysJoined = oldKeys.join();\n          const newKeysJoined = newKeys.slice(0, oldKeys.length).join();\n          if (oldKeysJoined === newKeysJoined) {\n            for (const [idx, {\n              value\n            }] of updater.entries()) {\n              const oldIndex = oldKeys.indexOf(newKeys[idx]);\n              const newVal = updateValue(schema.element, oldVal[oldIndex], value);\n              if (newVal !== oldVal) {\n                yArr.delete(oldIndex);\n                yArr.insert(idx, [parsedValToYjs(schema.element, newVal)]);\n              }\n            }\n            const valsToInsert = [];\n            for (const {\n              value\n            } of updater.slice(oldKeys.length)) {\n              valsToInsert.push(parsedValToYjs(schema.element, getInitialPropsValueFromInitializer(schema.element, value)));\n            }\n            if (valsToInsert.length) {\n              yArr.insert(oldKeys.length, valsToInsert);\n            }\n            return;\n          }\n          // for anything else, just replace the whole array\n\n          const newVals = updater.map((x, i) => {\n            const key = newKeys[i];\n            const oldIndex = oldKeys.indexOf(key);\n            if (oldIndex !== -1) {\n              const oldElement = yArr.get(oldIndex);\n              if (x.value === undefined) {\n                if (oldElement instanceof Y.AbstractType) {\n                  return oldElement.clone();\n                }\n                return oldElement;\n              }\n              const newVal = updateValue(schema.element, oldVal[oldIndex], x.value);\n              return parsedValToYjs(schema.element, newVal);\n            }\n            return parsedValToYjs(schema.element, getInitialPropsValueFromInitializer(schema.element, x.value));\n          });\n          yArr.delete(0, yArr.length);\n          yArr.insert(0, newVals);\n        }\n      };\n    },\n    conditional(schema, stateUpdater) {\n      return {\n        onChange: (discriminant, value) => {\n          stateUpdater.yjs().set('discriminant', discriminant);\n          if (value !== undefined) {\n            const old = yjsToVal(schema, awareness, stateUpdater.yjs().get('value'));\n            stateUpdater.yjs().set('value', parsedValToYjs(schema, updateValue(schema.values[discriminant.toString()], old, value)));\n          }\n        },\n        onChangeForValue: Object.assign(cb => {\n          const old = yjsToVal(schema, awareness, stateUpdater.yjs().get('value'));\n          stateUpdater.yjs().set('value', parsedValToYjs(schema, cb(old)));\n        }, {\n          yjs() {\n            return stateUpdater.yjs().get('value');\n          }\n        })\n      };\n    },\n    object(schema, stateUpdater) {\n      return {\n        onChange: updater => {\n          for (const [key, val] of Object.entries(updater)) {\n            const oldVal = yjsToVal(schema.fields[key], awareness, stateUpdater.yjs().get(key));\n            stateUpdater.yjs().set(key, parsedValToYjs(schema.fields[key], updateValue(schema.fields[key], oldVal, val)));\n          }\n        },\n        innerOnChanges: Object.fromEntries(Object.entries(schema.fields).map(([key, val]) => {\n          let func = Object.assign(newVal => {\n            stateUpdater.yjs().set(key, parsedValToYjs(val, newVal));\n          }, {\n            yjs() {\n              return stateUpdater.yjs().get(key);\n            }\n          });\n          return [key, func];\n        }))\n      };\n    }\n  });\n  const previewPropsFactories = {\n    form(schema, value, onChange) {\n      return {\n        value,\n        onChange,\n        schema: schema\n      };\n    },\n    object(schema, value, memoized, path, getInnerProp) {\n      const fields = {};\n      for (const key of Object.keys(schema.fields)) {\n        fields[key] = getInnerProp(schema.fields[key], value[key], memoized.innerOnChanges[key], key);\n      }\n      const previewProps = {\n        fields,\n        onChange: memoized.onChange,\n        schema: schema\n      };\n      return previewProps;\n    },\n    array(schema, value, memoized, path, getInnerProp) {\n      const arrayValue = value;\n      const keys = getKeysForArrayValue(arrayValue);\n      const unusedKeys = new Set(getKeysForArrayValue(value));\n      const props = {\n        elements: arrayValue.map((val, i) => {\n          const key = keys[i];\n          unusedKeys.delete(key);\n          const element = getOrInsert(memoized.inner, key, () => {\n            const onChange = Object.assign(val => {\n              const yArr = memoized.rawOnChange.yjs();\n              const keys = getKeysForArrayValue(yArr);\n              const index = keys.indexOf(key);\n              const newVal = val(yjsToVal(schema, awareness, yArr.get(index)));\n              yArr.delete(index);\n              yArr.insert(index, [parsedValToYjs(schema.element, newVal)]);\n            }, {\n              yjs() {\n                const keys = getKeysForArrayValue(memoized.rawOnChange.yjs());\n                const i = keys.indexOf(key);\n                return memoized.rawOnChange.yjs().get(i);\n              }\n            });\n            const element = getInnerProp(schema.element, val, onChange, key);\n            return {\n              element,\n              elementWithKey: {\n                ...element,\n                key\n              },\n              onChange\n            };\n          });\n          const currentInnerProp = getInnerProp(schema.element, val, element.onChange, key);\n          if (element.element !== currentInnerProp) {\n            element.element = currentInnerProp;\n            element.elementWithKey = {\n              ...currentInnerProp,\n              key\n            };\n          }\n          return element.elementWithKey;\n        }),\n        schema: schema,\n        onChange: memoized.onChange\n      };\n      for (const key of unusedKeys) {\n        memoized.inner.delete(key);\n      }\n      return props;\n    },\n    conditional(schema, value, memoized, path, getInnerProp) {\n      const props = {\n        discriminant: value.discriminant,\n        onChange: memoized.onChange,\n        value: getInnerProp(schema.values[value.discriminant.toString()], value.value, memoized.onChangeForValue, 'value'),\n        schema: schema\n      };\n      return props;\n    }\n  };\n  function getPreviewPropsForProp(schema, value, memoedThing, path, getInnerProp) {\n    return previewPropsFactories[schema.kind](schema, value, memoedThing, path, getInnerProp);\n  }\n  function getInitialMemoState(schema, value, stateUpdater, path) {\n    const innerState = new Map();\n    const memoizedInfo = memoizedInfoForSchema[schema.kind](schema, stateUpdater);\n    const state = {\n      value,\n      inner: innerState,\n      props: getPreviewPropsForProp(schema, value, memoizedInfo, path, (schema, value, onChange, key) => {\n        const state = getInitialMemoState(schema, value, onChange, path.concat(key));\n        innerState.set(key, state);\n        return state.props;\n      }),\n      schema: schema,\n      cached: memoizedInfo\n    };\n    return state;\n  }\n  function getUpToDateProps(schema, value, stateUpdater, memoState, path) {\n    if (memoState.schema !== schema) {\n      Object.assign(memoState, getInitialMemoState(schema, value, stateUpdater, path));\n      return memoState.props;\n    }\n    if (memoState.value === value) {\n      return memoState.props;\n    }\n    memoState.value = value;\n    const unusedKeys = new Set(memoState.inner.keys());\n    memoState.props = getPreviewPropsForProp(schema, value, memoState.cached, path, (schema, value, onChange, innerMemoStateKey) => {\n      unusedKeys.delete(innerMemoStateKey);\n      if (!memoState.inner.has(innerMemoStateKey)) {\n        const innerState = getInitialMemoState(schema, value, onChange, path.concat(innerMemoStateKey));\n        memoState.inner.set(innerMemoStateKey, innerState);\n        return innerState.props;\n      }\n      return getUpToDateProps(schema, value, onChange, memoState.inner.get(innerMemoStateKey), path.concat(innerMemoStateKey));\n    });\n    for (const key of unusedKeys) {\n      memoState.inner.delete(key);\n    }\n    return memoState.props;\n  }\n  let memoState;\n  const rootUpdater = Object.assign(cb => {\n    const newValue = cb(memoState.value);\n    const innerYMap = parsedValToYjs(rootSchema, newValue);\n    for (const [key, val] of innerYMap.entries()) {\n      innerYMap.delete(key);\n      yMap.set(key, val);\n    }\n  }, {\n    yjs() {\n      return yMap;\n    }\n  });\n  return value => {\n    if (memoState === undefined) {\n      memoState = getInitialMemoState(rootSchema, value, rootUpdater, []);\n      return memoState.props;\n    }\n    return getUpToDateProps(rootSchema, value, rootUpdater, memoState, []);\n  };\n}\n\nconst AppSlugContext = /*#__PURE__*/createContext(undefined);\nconst AppSlugProvider = AppSlugContext.Provider;\nfunction InstallGitHubApp(props) {\n  var _URL$searchParams$get;\n  const router = useRouter();\n  const appSlugFromContext = useContext(AppSlugContext);\n  const appSlug = (_URL$searchParams$get = new URL(router.href, 'https://example.com').searchParams.get('slug')) !== null && _URL$searchParams$get !== void 0 ? _URL$searchParams$get : appSlugFromContext === null || appSlugFromContext === void 0 ? void 0 : appSlugFromContext.value;\n  const parsedRepo = parseRepoConfig(props.config.storage.repo);\n  return /*#__PURE__*/jsxs(Flex, {\n    direction: \"column\",\n    gap: \"regular\",\n    children: [/*#__PURE__*/jsxs(Flex, {\n      alignItems: \"end\",\n      gap: \"regular\",\n      children: [/*#__PURE__*/jsx(TextField, {\n        label: \"Repo Name\",\n        width: \"100%\",\n        isReadOnly: true,\n        value: parsedRepo.name\n      }), /*#__PURE__*/jsx(ActionButton, {\n        onPress: () => {\n          navigator.clipboard.writeText(parsedRepo.name);\n        },\n        children: \"Copy Repo Name\"\n      })]\n    }), appSlug ? /*#__PURE__*/jsx(Button, {\n      prominence: \"high\",\n      href: `https://github.com/apps/${appSlug}/installations/new`,\n      children: \"Install GitHub App\"\n    }) : /*#__PURE__*/jsx(Notice, {\n      tone: \"caution\",\n      children: appSlugFromContext ? /*#__PURE__*/jsxs(Text, {\n        children: [\"The \", /*#__PURE__*/jsx(\"code\", {\n          children: appSlugFromContext.envName\n        }), \" environment variable wasn't provided so we can't link to the GitHub app installation page. You should find the App on GitHub and add the repo yourself.\"]\n      }) : /*#__PURE__*/jsx(Text, {\n        children: \"Find the App on GitHub and add the repo.\"\n      })\n    })]\n  });\n}\n\nfunction ForkRepoDialog(props) {\n  const stringFormatter = useLocalizedStringFormatter(l10nMessages);\n  const client = useClient();\n  const [state, setState] = useState({\n    kind: 'idle'\n  });\n  useEffect(() => {\n    const listener = async event => {\n      if (event.key === 'ks-refetch-installations' && event.newValue === 'true') {\n        localStorage.removeItem('ks-refetch-installations');\n        try {\n          var _res$data;\n          const auth = await getAuth(props.config);\n          if (!auth) throw new Error('Unauthorized');\n          const res = await client.query(GitHubAppShellQuery, parseRepoConfig(props.config.storage.repo)).toPromise();\n          if ((_res$data = res.data) !== null && _res$data !== void 0 && (_res$data = _res$data.repository) !== null && _res$data !== void 0 && (_res$data = _res$data.forks.nodes) !== null && _res$data !== void 0 && _res$data.some(x => (x === null || x === void 0 ? void 0 : x.viewerPermission) === 'ADMIN' || (x === null || x === void 0 ? void 0 : x.viewerPermission) === 'WRITE' || (x === null || x === void 0 ? void 0 : x.viewerPermission) === 'MAINTAIN')) {\n            await new Promise(resolve => setTimeout(resolve, 100));\n            props.onCreate();\n          }\n        } catch (err) {\n          setState({\n            kind: 'error',\n            error: err\n          });\n        }\n      }\n    };\n    addEventListener('storage', listener);\n    return () => removeEventListener('storage', listener);\n  }, [client, props]);\n  const appSlug = useContext(AppSlugContext);\n  return /*#__PURE__*/jsxs(Dialog, {\n    size: \"small\",\n    isDismissable: true,\n    onDismiss: () => {\n      props.onDismiss();\n    },\n    children: [/*#__PURE__*/jsx(Heading, {\n      children: \"Fork Repo\"\n    }), state.kind === 'error' ? /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsx(Content, {\n        children: /*#__PURE__*/jsx(Notice, {\n          tone: \"critical\",\n          children: state.error.message\n        })\n      }), /*#__PURE__*/jsx(ButtonGroup, {\n        children: /*#__PURE__*/jsx(Button, {\n          onPress: props.onDismiss,\n          children: stringFormatter.format('cancel')\n        })\n      })]\n    }) : /*#__PURE__*/jsx(Fragment, {\n      children: /*#__PURE__*/jsx(Content, {\n        children: /*#__PURE__*/jsxs(Flex, {\n          gap: \"large\",\n          direction: \"column\",\n          marginBottom: \"large\",\n          children: [/*#__PURE__*/jsx(Text, {\n            children: \"You don't have permission to write to this repo so to save your changes, you need to fork the repo.\"\n          }), /*#__PURE__*/jsxs(Text, {\n            children: [\"To start,\", ' ', /*#__PURE__*/jsx(TextLink, {\n              href: `https://github.com/${serializeRepoConfig(props.config.storage.repo)}/fork`,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"fork the repo on GitHub\"\n            }), \". Then, come back to this page and\", ' ', /*#__PURE__*/jsx(TextLink, {\n              href: `https://github.com/apps/${appSlug === null || appSlug === void 0 ? void 0 : appSlug.value}/installations/new?state=close`,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"install the Keystatic GitHub App on your fork.\"\n            })]\n          })]\n        })\n      })\n    })]\n  });\n}\n\nconst HeaderBreadcrumbs = /*#__PURE__*/memo(props => /*#__PURE__*/jsx(Breadcrumbs, {\n  flex: true,\n  size: \"medium\",\n  minWidth: \"alias.singleLineWidth\",\n  children: props.items.map(item => /*#__PURE__*/jsx(Item, {\n    href: item.href,\n    children: item.label\n  }, item.key))\n}));\n\nfunction useSlugFieldInfo(collection, slugToExclude) {\n  const config = useConfig();\n  const allSlugs = useSlugsInCollection(collection);\n  return useMemo(() => {\n    const slugs = new Set(allSlugs);\n    if (slugToExclude) {\n      slugs.delete(slugToExclude);\n    }\n    const collectionConfig = config.collections[collection];\n    return {\n      field: collectionConfig.slugField,\n      slugs,\n      glob: getSlugGlobForCollection(config, collection)\n    };\n  }, [allSlugs, collection, config, slugToExclude]);\n}\n\nfunction PresenceAvatars() {\n  const cloudInfo = useCloudInfo();\n  const awarenessStates = useAwarenessStates();\n  const router = useRouter();\n  if (!cloudInfo) return null;\n  return /*#__PURE__*/jsx(HStack, {\n    children: [...awarenessStates.values()].map(val => {\n      if (!val.user || router.href !== `/keystatic/branch/${val.branch}/${val.location}`) {\n        return null;\n      }\n      return /*#__PURE__*/jsx(Avatar, {\n        src: val.user.avatarUrl,\n        name: val.user.name\n      });\n    })\n  });\n}\n\ninjectGlobal({\n  body: {\n    overflow: 'hidden'\n  }\n});\nfunction createUrqlClient(config) {\n  const repo = config.storage.kind === 'github' ? parseRepoConfig(config.storage.repo) : {\n    owner: 'repo-owner',\n    name: 'repo-name'\n  };\n  return createClient({\n    url: config.storage.kind === 'github' ? 'https://api.github.com/graphql' : `${KEYSTATIC_CLOUD_API_URL}/v1/github/graphql`,\n    requestPolicy: 'cache-and-network',\n    exchanges: [authExchange(async utils => {\n      let authState = await getAuth(config);\n      return {\n        addAuthToOperation(operation) {\n          authState = getSyncAuth(config);\n          if (!authState) {\n            return operation;\n          }\n          return utils.appendHeaders(operation, {\n            Authorization: `Bearer ${authState.accessToken}`,\n            ...(config.storage.kind === 'cloud' ? KEYSTATIC_CLOUD_HEADERS : {})\n          });\n        },\n        didAuthError() {\n          return false;\n        },\n        willAuthError(operation) {\n          var _operation$query$defi;\n          authState = getSyncAuth(config);\n          if (operation.query.definitions[0].kind === 'OperationDefinition' && (_operation$query$defi = operation.query.definitions[0].name) !== null && _operation$query$defi !== void 0 && _operation$query$defi.value.includes('AppShell') && !authState) {\n            if (config.storage.kind === 'github') {\n              window.location.href = '/api/keystatic/github/login';\n            } else {\n              redirectToCloudAuth('', config);\n            }\n            return true;\n          }\n          if (!authState) {\n            return true;\n          }\n          return false;\n        },\n        async refreshAuth() {\n          authState = await getAuth(config);\n        }\n      };\n    }), cacheExchange({\n      resolvers: {\n        Repository: {\n          refs: relayPagination()\n        }\n      },\n      updates: {\n        Mutation: {\n          createRef(result, args, cache, _info) {\n            cache.updateQuery({\n              query: config.storage.kind === 'github' ? GitHubAppShellQuery : CloudAppShellQuery,\n              variables: repo\n            }, data => {\n              var _data$repository;\n              if (data !== null && data !== void 0 && (_data$repository = data.repository) !== null && _data$repository !== void 0 && (_data$repository = _data$repository.refs) !== null && _data$repository !== void 0 && _data$repository.nodes && result.createRef && typeof result.createRef === 'object' && 'ref' in result.createRef) {\n                return {\n                  ...data,\n                  repository: {\n                    ...data.repository,\n                    refs: {\n                      ...data.repository.refs,\n                      nodes: [...data.repository.refs.nodes, result.createRef.ref]\n                    }\n                  }\n                };\n              }\n              return data;\n            });\n          },\n          deleteRef(result, args, cache, _info) {\n            cache.updateQuery({\n              query: config.storage.kind === 'github' ? GitHubAppShellQuery : CloudAppShellQuery,\n              variables: repo\n            }, data => {\n              var _data$repository2;\n              if (data !== null && data !== void 0 && (_data$repository2 = data.repository) !== null && _data$repository2 !== void 0 && (_data$repository2 = _data$repository2.refs) !== null && _data$repository2 !== void 0 && _data$repository2.nodes && result.deleteRef && typeof result.deleteRef === 'object' && '__typename' in result.deleteRef && typeof args.input === 'object' && args.input !== null && 'refId' in args.input && typeof args.input.refId === 'string') {\n                const refId = args.input.refId;\n                return {\n                  ...data,\n                  repository: {\n                    ...data.repository,\n                    refs: {\n                      ...data.repository.refs,\n                      nodes: data.repository.refs.nodes.filter(x => (x === null || x === void 0 ? void 0 : x.id) !== refId)\n                    }\n                  }\n                };\n              }\n              return data;\n            });\n          }\n        }\n      }\n    }), ...(config.storage.kind === 'github' ? [] : [persistedExchange({\n      enableForMutation: true,\n      enforcePersistedQueries: true\n    })]), fetchExchange]\n  });\n}\nfunction Provider({\n  children,\n  config\n}) {\n  const themeContext = useTheme();\n  const {\n    push: navigate\n  } = useRouter();\n  const keystarRouter = useMemo(() => ({\n    navigate\n  }), [navigate]);\n  return /*#__PURE__*/jsxs(ThemeProvider, {\n    value: themeContext,\n    children: [/*#__PURE__*/jsx(\"meta\", {\n      name: \"viewport\",\n      content: \"width=device-width, initial-scale=1\"\n    }), /*#__PURE__*/jsxs(KeystarProvider, {\n      locale: config.locale || 'en-US',\n      colorScheme: themeContext.theme,\n      router: keystarRouter,\n      children: [/*#__PURE__*/jsx(ClientSideOnlyDocumentElement, {}), /*#__PURE__*/jsx(\"link\", {\n        href: \"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\",\n        rel: \"stylesheet\"\n      }), /*#__PURE__*/jsx(Provider$1, {\n        value: useMemo(() => createUrqlClient(config), [config]),\n        children: children\n      }), /*#__PURE__*/jsx(Toaster, {})]\n    })]\n  });\n}\n\nconst textEncoder = new TextEncoder();\nconst frontmatterSplit = textEncoder.encode('---\\n');\nfunction combineFrontmatterAndContents(frontmatter, contents) {\n  const array = new Uint8Array(frontmatter.byteLength + contents.byteLength + frontmatterSplit.byteLength * 2);\n  array.set(frontmatterSplit);\n  array.set(frontmatter, frontmatterSplit.byteLength);\n  array.set(frontmatterSplit, frontmatterSplit.byteLength + frontmatter.byteLength);\n  array.set(contents, frontmatterSplit.byteLength * 2 + frontmatter.byteLength);\n  return array;\n}\nfunction serializeEntryToFiles(args) {\n  var _args$slug, _args$slug2;\n  let {\n    value: stateWithExtraFilesRemoved,\n    extraFiles\n  } = serializeProps(args.state, object(args.schema), (_args$slug = args.slug) === null || _args$slug === void 0 ? void 0 : _args$slug.field, (_args$slug2 = args.slug) === null || _args$slug2 === void 0 ? void 0 : _args$slug2.value, true);\n  const dataFormat = args.format.data;\n  let dataContent = textEncoder.encode(dataFormat === 'json' ? JSON.stringify(stateWithExtraFilesRemoved, null, 2) + '\\n' : dump(stateWithExtraFilesRemoved));\n  if (args.format.contentField) {\n    const filename = `${args.format.contentField.key}${args.format.contentField.config.contentExtension}`;\n    let contents;\n    extraFiles = extraFiles.filter(x => {\n      if (x.path !== filename) return true;\n      contents = x.contents;\n      return false;\n    });\n    assert(contents !== undefined, 'Expected content field to be present');\n    dataContent = combineFrontmatterAndContents(dataContent, contents);\n  }\n  return [{\n    path: getEntryDataFilepath(args.basePath, args.format),\n    contents: dataContent\n  }, ...extraFiles.map(file => ({\n    path: `${file.parent ? args.slug ? `${file.parent}/${args.slug.value}` : file.parent : args.basePath}/${file.path}`,\n    contents: file.contents\n  }))];\n}\nfunction useUpsertItem(args) {\n  const [state, setState] = useState({\n    kind: 'idle'\n  });\n  const baseCommit = useBaseCommit();\n  const branchInfo = useContext(BranchInfoContext);\n  const setTreeSha = useSetTreeSha();\n  const [, mutate] = useMutation(createCommitMutation);\n  const repoWithWriteAccess = useContext(RepoWithWriteAccessContext);\n  const appSlug = useContext(AppSlugContext);\n  const unscopedTreeData = useCurrentUnscopedTree();\n  return [state, async override => {\n    try {\n      var _getPathPrefix, _args$initialFiles;\n      const unscopedTree = unscopedTreeData.kind === 'loaded' ? unscopedTreeData.data.tree : undefined;\n      if (!unscopedTree) return false;\n      if (repoWithWriteAccess === null && args.config.storage.kind === 'github' && appSlug !== null && appSlug !== void 0 && appSlug.value) {\n        setState({\n          kind: 'needs-fork'\n        });\n        return false;\n      }\n      setState({\n        kind: 'loading'\n      });\n      const pathPrefix = (_getPathPrefix = getPathPrefix(args.config.storage)) !== null && _getPathPrefix !== void 0 ? _getPathPrefix : '';\n      let additions = serializeEntryToFiles({\n        basePath: args.basePath,\n        config: args.config,\n        schema: args.schema,\n        format: args.format,\n        state: args.state,\n        slug: args.slug\n      }).map(addition => ({\n        ...addition,\n        path: pathPrefix + addition.path\n      }));\n      const additionPathToSha = new Map(await Promise.all(additions.map(async addition => [addition.path, await hydrateBlobCache(addition.contents)])));\n      const filesToDelete = new Set((_args$initialFiles = args.initialFiles) === null || _args$initialFiles === void 0 ? void 0 : _args$initialFiles.map(x => pathPrefix + x));\n      for (const file of additions) {\n        filesToDelete.delete(file.path);\n      }\n      additions = additions.filter(addition => {\n        const sha = additionPathToSha.get(addition.path);\n        const existing = getTreeNodeAtPath(unscopedTree, addition.path);\n        return (existing === null || existing === void 0 ? void 0 : existing.entry.sha) !== sha;\n      });\n      const deletions = [...filesToDelete].map(path => ({\n        path\n      }));\n      const updatedTree = await updateTreeWithChanges(unscopedTree, {\n        additions,\n        deletions: [...filesToDelete]\n      });\n      await hydrateTreeCacheWithEntries(updatedTree.entries);\n      if (args.config.storage.kind === 'github' || args.config.storage.kind === 'cloud') {\n        var _override$branch, _override$sha, _result$error, _result$data;\n        const branch = {\n          branchName: (_override$branch = override === null || override === void 0 ? void 0 : override.branch) !== null && _override$branch !== void 0 ? _override$branch : branchInfo.currentBranch,\n          repositoryNameWithOwner: `${repoWithWriteAccess.owner}/${repoWithWriteAccess.name}`\n        };\n        const runMutation = expectedHeadOid => mutate({\n          input: {\n            branch,\n            expectedHeadOid,\n            message: {\n              headline: `Update ${args.basePath}`\n            },\n            fileChanges: {\n              additions: additions.map(addition => ({\n                ...addition,\n                contents: base64Encode(addition.contents)\n              })),\n              deletions\n            }\n          }\n        });\n        let result = await runMutation((_override$sha = override === null || override === void 0 ? void 0 : override.sha) !== null && _override$sha !== void 0 ? _override$sha : baseCommit);\n        const gqlError = (_result$error = result.error) === null || _result$error === void 0 || (_result$error = _result$error.graphQLErrors[0]) === null || _result$error === void 0 ? void 0 : _result$error.originalError;\n        if (gqlError && 'type' in gqlError) {\n          if (gqlError.type === 'BRANCH_PROTECTION_RULE_VIOLATION') {\n            setState({\n              kind: 'needs-new-branch',\n              reason: 'Changes must be made via pull request to this branch. Create a new branch to save changes.'\n            });\n            return false;\n          }\n          if (gqlError.type === 'STALE_DATA') {\n            var _refData$data, _args$slug3;\n            // we don't want this to go into the cache yet\n            // so we create a new client just for this\n            const refData = await createUrqlClient(args.config).query(FetchRef, {\n              owner: repoWithWriteAccess.owner,\n              name: repoWithWriteAccess.name,\n              ref: `refs/heads/${branchInfo.currentBranch}`\n            }).toPromise();\n            if (!((_refData$data = refData.data) !== null && _refData$data !== void 0 && (_refData$data = _refData$data.repository) !== null && _refData$data !== void 0 && (_refData$data = _refData$data.ref) !== null && _refData$data !== void 0 && _refData$data.target)) {\n              throw new Error('Branch not found');\n            }\n            const tree = scopeEntriesWithPathPrefix(await fetchGitHubTreeData(refData.data.repository.ref.target.oid, args.config), args.config);\n            const treeKey = getTreeKey(getDirectoriesForTreeKey(object(args.schema), args.basePath, (_args$slug3 = args.slug) === null || _args$slug3 === void 0 ? void 0 : _args$slug3.value, args.format), tree.tree);\n            if (treeKey === args.currentLocalTreeKey) {\n              result = await runMutation(refData.data.repository.ref.target.oid);\n            } else {\n              setState({\n                kind: 'needs-new-branch',\n                reason: 'This entry has been updated since it was opened. Create a new branch to save changes.'\n              });\n              return false;\n            }\n          }\n        }\n        if (result.error) {\n          throw result.error;\n        }\n        const target = (_result$data = result.data) === null || _result$data === void 0 || (_result$data = _result$data.createCommitOnBranch) === null || _result$data === void 0 || (_result$data = _result$data.ref) === null || _result$data === void 0 ? void 0 : _result$data.target;\n        if (target) {\n          setState({\n            kind: 'updated'\n          });\n          return true;\n        }\n        throw new Error('Failed to update');\n      } else {\n        const res = await fetch('/api/keystatic/update', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'no-cors': '1'\n          },\n          body: JSON.stringify({\n            additions: additions.map(addition => ({\n              ...addition,\n              contents: base64Encode(addition.contents)\n            })),\n            deletions\n          })\n        });\n        if (!res.ok) {\n          throw new Error(await res.text());\n        }\n        const newTree = await res.json();\n        const {\n          tree\n        } = await hydrateTreeCacheWithEntries(newTree);\n        setTreeSha(await treeSha(tree));\n        setState({\n          kind: 'updated'\n        });\n        return true;\n      }\n    } catch (err) {\n      setState({\n        kind: 'error',\n        error: err\n      });\n      return false;\n    }\n  }, () => {\n    setState({\n      kind: 'idle'\n    });\n  }];\n}\nconst createCommitMutation = gql`\n  mutation CreateCommit($input: CreateCommitOnBranchInput!) {\n    createCommitOnBranch(input: $input) {\n      ref {\n        id\n        target {\n          id\n          oid\n          ... on Commit {\n            tree {\n              id\n              oid\n            }\n          }\n        }\n      }\n    }\n  }\n`;\nfunction useDeleteItem(args) {\n  const [state, setState] = useState({\n    kind: 'idle'\n  });\n  const baseCommit = useBaseCommit();\n  const branchInfo = useContext(BranchInfoContext);\n  const [, mutate] = useMutation(createCommitMutation);\n  const setTreeSha = useSetTreeSha();\n  const repoWithWriteAccess = useContext(RepoWithWriteAccessContext);\n  const appSlug = useContext(AppSlugContext);\n  const unscopedTreeData = useCurrentUnscopedTree();\n  return [state, async () => {\n    try {\n      const unscopedTree = unscopedTreeData.kind === 'loaded' ? unscopedTreeData.data.tree : undefined;\n      if (!unscopedTree) return false;\n      if (repoWithWriteAccess === null && args.storage.kind === 'github' && appSlug !== null && appSlug !== void 0 && appSlug.value) {\n        setState({\n          kind: 'needs-fork'\n        });\n        return false;\n      }\n      setState({\n        kind: 'loading'\n      });\n      const deletions = args.initialFiles.map(x => {\n        var _getPathPrefix2;\n        return ((_getPathPrefix2 = getPathPrefix(args.storage)) !== null && _getPathPrefix2 !== void 0 ? _getPathPrefix2 : '') + x;\n      });\n      const updatedTree = await updateTreeWithChanges(unscopedTree, {\n        additions: [],\n        deletions\n      });\n      await hydrateTreeCacheWithEntries(updatedTree.entries);\n      if (args.storage.kind === 'github' || args.storage.kind === 'cloud') {\n        const {\n          error\n        } = await mutate({\n          input: {\n            branch: {\n              repositoryNameWithOwner: `${repoWithWriteAccess.owner}/${repoWithWriteAccess.name}`,\n              branchName: branchInfo.currentBranch\n            },\n            message: {\n              headline: `Delete ${args.basePath}`\n            },\n            expectedHeadOid: baseCommit,\n            fileChanges: {\n              deletions: deletions.map(path => ({\n                path\n              }))\n            }\n          }\n        });\n        if (error) {\n          throw error;\n        }\n        setState({\n          kind: 'updated'\n        });\n        return true;\n      } else {\n        const res = await fetch('/api/keystatic/update', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'no-cors': '1'\n          },\n          body: JSON.stringify({\n            additions: [],\n            deletions: deletions.map(path => ({\n              path\n            }))\n          })\n        });\n        if (!res.ok) {\n          throw new Error(await res.text());\n        }\n        const newTree = await res.json();\n        const {\n          tree\n        } = await hydrateTreeCacheWithEntries(newTree);\n        setTreeSha(await treeSha(tree));\n        setState({\n          kind: 'updated'\n        });\n        return true;\n      }\n    } catch (err) {\n      setState({\n        kind: 'error',\n        error: err\n      });\n    }\n  }, () => {\n    setState({\n      kind: 'idle'\n    });\n  }];\n}\nconst FetchRef = gql`\n  query FetchRef($owner: String!, $name: String!, $ref: String!) {\n    repository(owner: $owner, name: $name) {\n      id\n      ref(qualifiedName: $ref) {\n        id\n        target {\n          id\n          oid\n        }\n      }\n    }\n  }\n`;\n\nfunction useHasChanged(args) {\n  const serialize = useCallback(async state => {\n    const slug = args.slugField ? getSlugFromState({\n      schema: args.schema.fields,\n      slugField: args.slugField\n    }, state) : undefined;\n    const serializedState = serializeProps(state, args.schema, args.slugField, slug, true);\n    return {\n      slug,\n      value: serializedState.value,\n      extraFiles: Object.fromEntries(await Promise.all(serializedState.extraFiles.map(async val => [JSON.stringify([val.path, val.parent]), await blobSha(val.contents)])))\n    };\n  }, [args.schema, args.slugField]);\n  const initialFilesForUpdate = useData(useCallback(() => args.initialState === null ? null : serialize(args.initialState), [args.initialState, serialize]));\n  const filesForUpdate = useData(useCallback(() => serialize(args.state), [serialize, args.state]));\n  const hasChangedState = useMemo(() => {\n    if (initialFilesForUpdate.kind === 'loaded' && filesForUpdate.kind === 'loaded') {\n      const a = initialFilesForUpdate.data;\n      const b = filesForUpdate.data;\n      return !isEqual(a, b);\n    }\n    return 'unknown';\n  }, [initialFilesForUpdate, filesForUpdate]);\n  const [hasChanged, setHasChanged] = useState(false);\n  if (typeof hasChangedState === 'boolean' && hasChangedState !== hasChanged) {\n    setHasChanged(hasChangedState);\n  }\n  return hasChanged;\n}\n\nfunction useYJsValue(schema, type) {\n  const yjsInfo = useYjs();\n  const thing = useMemo(() => {\n    let lastVal = yjsToVal(schema, yjsInfo.awareness, type);\n    return {\n      getSnapshot: () => lastVal,\n      subscribe: cb => {\n        const handler = () => {\n          lastVal = yjsToVal(schema, yjsInfo.awareness, type);\n          cb();\n        };\n        type.observeDeep(handler);\n        return () => {\n          type.unobserveDeep(handler);\n        };\n      }\n    };\n  }, [schema, type, yjsInfo.awareness]);\n  return useSyncExternalStore(thing.subscribe, thing.getSnapshot, thing.getSnapshot);\n}\n\nconst storedValSchema$2 = s.type({\n  version: s.literal(1),\n  savedAt: s.date(),\n  slug: s.string(),\n  beforeTreeKey: s.string(),\n  files: s.map(s.string(), s.instance(Uint8Array))\n});\nfunction ItemPageInner(props) {\n  var _getPathPrefix, _getPathPrefix2;\n  const {\n    collection,\n    config,\n    itemSlug,\n    updateResult,\n    onUpdate: parentOnUpdate\n  } = props;\n  const collectionConfig = props.config.collections[collection];\n  const schema = useMemo(() => object(collectionConfig.schema), [collectionConfig.schema]);\n  const router = useRouter();\n  const baseCommit = useBaseCommit();\n  const currentBasePath = getCollectionItemPath(config, collection, itemSlug);\n  const formatInfo = getCollectionFormat(config, collection);\n  const branchInfo = useBranchInfo();\n  const [forceValidation, setForceValidation] = useState(false);\n  const previewHref = useMemo(() => {\n    return collectionConfig.previewUrl ? collectionConfig.previewUrl.replace('{slug}', props.itemSlug).replace('{branch}', branchInfo.currentBranch) : undefined;\n  }, [branchInfo.currentBranch, collectionConfig.previewUrl, props.itemSlug]);\n  const onDelete = async () => {\n    // TODO: delete multiplayer draft\n    if (await deleteItem()) {\n      router.push(`${props.basePath}/collection/${encodeURIComponent(collection)}`);\n    }\n  };\n  const slugInfo = useSlugFieldInfo(collection, itemSlug);\n  const [deleteResult, deleteItem, resetDeleteItem] = useDeleteItem({\n    initialFiles: props.initialFiles,\n    storage: config.storage,\n    basePath: currentBasePath\n  });\n  const onDuplicate = () => {\n    router.push(`${props.basePath}/collection/${encodeURIComponent(collection)}/create?duplicate=${itemSlug}`);\n  };\n  const isSavingDisabled = updateResult.kind === 'loading' || !props.hasChanged;\n  const onUpdate = useCallback(async () => {\n    if (isSavingDisabled) return false;\n    if (!clientSideValidateProp(schema, props.state, slugInfo)) {\n      setForceValidation(true);\n      return false;\n    }\n    const slug = getSlugFromState(collectionConfig, props.state);\n    const hasUpdated = await parentOnUpdate();\n    if (hasUpdated && slug !== itemSlug) {\n      router.replace(`${props.basePath}/collection/${encodeURIComponent(collection)}/item/${encodeURIComponent(slug)}`);\n    }\n    return hasUpdated;\n  }, [collection, collectionConfig, isSavingDisabled, itemSlug, parentOnUpdate, props.basePath, props.state, router, schema, slugInfo]);\n  const viewHref = config.storage.kind !== 'local' ? `${getRepoUrl(branchInfo)}${formatInfo.dataLocation === 'index' ? `/tree/${branchInfo.currentBranch}/${(_getPathPrefix = getPathPrefix(config.storage)) !== null && _getPathPrefix !== void 0 ? _getPathPrefix : ''}${currentBasePath}` : `/blob/${branchInfo.currentBranch}/${(_getPathPrefix2 = getPathPrefix(config.storage)) !== null && _getPathPrefix2 !== void 0 ? _getPathPrefix2 : ''}${currentBasePath}${getDataFileExtension(formatInfo)}`}` : undefined;\n  const formID = 'item-edit-form';\n\n  // allow shortcuts \"cmd+s\" and \"ctrl+s\" to save\n  useEffect(() => {\n    const listener = event => {\n      if (updateResult.kind === 'loading') {\n        return;\n      }\n      if (isHotkey('mod+s', event)) {\n        event.preventDefault();\n        onUpdate();\n      }\n    };\n    document.addEventListener('keydown', listener);\n    return () => document.removeEventListener('keydown', listener);\n  }, [updateResult.kind, onUpdate]);\n  return /*#__PURE__*/jsx(Fragment, {\n    children: /*#__PURE__*/jsxs(ItemPageShell, {\n      headerActions: /*#__PURE__*/jsx(HeaderActions, {\n        formID: formID,\n        isLoading: updateResult.kind === 'loading',\n        hasChanged: props.hasChanged,\n        onDelete: onDelete,\n        onDuplicate: onDuplicate,\n        onReset: props.onReset,\n        viewHref: viewHref,\n        previewHref: previewHref\n      }),\n      ...props,\n      children: [updateResult.kind === 'error' && /*#__PURE__*/jsx(Notice, {\n        tone: \"critical\",\n        children: updateResult.error.message\n      }), deleteResult.kind === 'error' && /*#__PURE__*/jsx(Notice, {\n        tone: \"critical\",\n        children: deleteResult.error.message\n      }), /*#__PURE__*/jsx(Box, {\n        id: formID,\n        height: \"100%\",\n        minHeight: 0,\n        minWidth: 0,\n        elementType: \"form\",\n        onSubmit: event => {\n          if (event.target !== event.currentTarget) return;\n          event.preventDefault();\n          onUpdate();\n        },\n        children: /*#__PURE__*/jsx(FormForEntry, {\n          previewProps: props.previewProps,\n          forceValidation: forceValidation,\n          entryLayout: collectionConfig.entryLayout,\n          formatInfo: formatInfo,\n          slugField: slugInfo\n        })\n      }), /*#__PURE__*/jsx(DialogContainer\n      // ideally this would be a popover on desktop but using a DialogTrigger wouldn't work since\n      // this doesn't open on click but after doing a network request and it failing and manually wiring about a popover and modal would be a pain\n      , {\n        onDismiss: props.onResetUpdateItem,\n        children: updateResult.kind === 'needs-new-branch' && /*#__PURE__*/jsx(CreateBranchDuringUpdateDialog, {\n          branchOid: baseCommit,\n          onCreate: async newBranch => {\n            const itemBasePath = `/keystatic/branch/${encodeURIComponent(newBranch)}/collection/${encodeURIComponent(collection)}/item/`;\n            router.push(itemBasePath + encodeURIComponent(itemSlug));\n            const slug = getSlugFromState(collectionConfig, props.state);\n            const hasUpdated = await parentOnUpdate({\n              branch: newBranch,\n              sha: baseCommit\n            });\n            if (hasUpdated && slug !== itemSlug) {\n              router.replace(itemBasePath + encodeURIComponent(slug));\n            }\n          },\n          reason: updateResult.reason,\n          onDismiss: props.onResetUpdateItem\n        })\n      }), /*#__PURE__*/jsx(DialogContainer\n      // ideally this would be a popover on desktop but using a DialogTrigger\n      // wouldn't work since this doesn't open on click but after doing a\n      // network request and it failing and manually wiring about a popover\n      // and modal would be a pain\n      , {\n        onDismiss: props.onResetUpdateItem,\n        children: updateResult.kind === 'needs-fork' && isGitHubConfig(props.config) && /*#__PURE__*/jsx(ForkRepoDialog, {\n          onCreate: async () => {\n            const slug = getSlugFromState(collectionConfig, props.state);\n            const hasUpdated = await props.onUpdate();\n            if (hasUpdated && slug !== itemSlug) {\n              router.replace(`${props.basePath}/collection/${encodeURIComponent(collection)}/item/${encodeURIComponent(slug)}`);\n            }\n          },\n          onDismiss: props.onResetUpdateItem,\n          config: props.config\n        })\n      }), /*#__PURE__*/jsx(DialogContainer\n      // ideally this would be a popover on desktop but using a DialogTrigger\n      // wouldn't work since this doesn't open on click but after doing a\n      // network request and it failing and manually wiring about a popover\n      // and modal would be a pain\n      , {\n        onDismiss: resetDeleteItem,\n        children: deleteResult.kind === 'needs-fork' && isGitHubConfig(props.config) && /*#__PURE__*/jsx(ForkRepoDialog, {\n          onCreate: async () => {\n            await deleteItem();\n            router.push(`${props.basePath}/collection/${encodeURIComponent(collection)}`);\n          },\n          onDismiss: resetDeleteItem,\n          config: props.config\n        })\n      })]\n    })\n  });\n}\nfunction LocalItemPage(props) {\n  var _draft$state;\n  const {\n    collection,\n    config,\n    initialFiles,\n    initialState,\n    localTreeKey,\n    draft\n  } = props;\n  const collectionConfig = config.collections[collection];\n  const schema = useMemo(() => object(collectionConfig.schema), [collectionConfig.schema]);\n  const [{\n    state,\n    localTreeKey: localTreeKeyInState\n  }, setState] = useState({\n    state: (_draft$state = draft === null || draft === void 0 ? void 0 : draft.state) !== null && _draft$state !== void 0 ? _draft$state : initialState,\n    localTreeKey\n  });\n  useEffect(() => {\n    if (draft && state === draft.state) {\n      showDraftRestoredToast(draft.savedAt, localTreeKey !== draft.treeKey);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [draft]);\n  if (localTreeKeyInState !== localTreeKey) {\n    setState({\n      state: initialState,\n      localTreeKey\n    });\n  }\n  const previewProps = useMemo(() => createGetPreviewProps(schema, stateUpdater => {\n    setState(state => ({\n      localTreeKey: state.localTreeKey,\n      state: stateUpdater(state.state)\n    }));\n  }, () => undefined), [schema])(state);\n  const hasChanged = useHasChanged({\n    initialState,\n    schema,\n    state,\n    slugField: collectionConfig.slugField\n  });\n  const slug = getSlugFromState(collectionConfig, state);\n  const formatInfo = getCollectionFormat(config, collection);\n  const futureBasePath = getCollectionItemPath(config, collection, slug);\n  const [updateResult, _update, resetUpdateItem] = useUpsertItem({\n    state,\n    initialFiles,\n    config,\n    schema: collectionConfig.schema,\n    basePath: futureBasePath,\n    format: formatInfo,\n    currentLocalTreeKey: localTreeKey,\n    slug: {\n      field: collectionConfig.slugField,\n      value: slug\n    }\n  });\n  useEffect(() => {\n    const key = ['collection', collection, props.itemSlug];\n    if (hasChanged) {\n      const serialized = serializeEntryToFiles({\n        basePath: futureBasePath,\n        config,\n        format: getCollectionFormat(config, collection),\n        schema: collectionConfig.schema,\n        slug: {\n          field: collectionConfig.slugField,\n          value: slug\n        },\n        state\n      });\n      const files = new Map(serialized.map(x => [x.path, x.contents]));\n      const data = {\n        beforeTreeKey: localTreeKey,\n        slug,\n        files,\n        savedAt: new Date(),\n        version: 1\n      };\n      setDraft(key, data);\n    } else {\n      delDraft(key);\n    }\n  }, [collection, collectionConfig, config, futureBasePath, localTreeKey, props.itemSlug, slug, state, hasChanged]);\n  const update = useEventCallback(_update);\n  const onReset = () => {\n    setState({\n      state: initialState,\n      localTreeKey\n    });\n  };\n  return /*#__PURE__*/jsx(ItemPageInner, {\n    ...props,\n    onUpdate: update,\n    onReset: onReset,\n    updateResult: updateResult,\n    onResetUpdateItem: resetUpdateItem,\n    previewProps: previewProps,\n    state: state,\n    hasChanged: hasChanged\n  });\n}\nfunction CollabItemPage(props) {\n  const {\n    collection,\n    config,\n    initialFiles,\n    initialState,\n    localTreeKey\n  } = props;\n  const collectionConfig = config.collections[collection];\n  const schema = useMemo(() => object(collectionConfig.schema), [collectionConfig.schema]);\n  const yjsInfo = useYjs();\n  const state = useYJsValue(schema, props.map);\n  const previewProps = useMemo(() => createGetPreviewPropsFromY(schema, props.map, yjsInfo.awareness), [props.map, schema, yjsInfo.awareness])(state);\n  const slug = getSlugFromState(collectionConfig, state);\n  const formatInfo = getCollectionFormat(props.config, props.collection);\n  const hasChanged = useHasChanged({\n    initialState,\n    schema,\n    state,\n    slugField: collectionConfig.slugField\n  });\n  const futureBasePath = getCollectionItemPath(config, collection, slug);\n  const [updateResult, _update, resetUpdateItem] = useUpsertItem({\n    state,\n    initialFiles,\n    config,\n    schema: collectionConfig.schema,\n    basePath: futureBasePath,\n    format: formatInfo,\n    currentLocalTreeKey: localTreeKey,\n    slug: {\n      field: collectionConfig.slugField,\n      value: slug\n    }\n  });\n  const update = useEventCallback(_update);\n  const onReset = () => {\n    props.map.doc.transact(() => {\n      for (const [key, value] of Object.entries(collectionConfig.schema)) {\n        const val = getYjsValFromParsedValue(value, props.initialState[key]);\n        props.map.set(key, val);\n      }\n    });\n  };\n  return /*#__PURE__*/jsx(ItemPageInner, {\n    ...props,\n    onUpdate: update,\n    onReset: onReset,\n    updateResult: updateResult,\n    onResetUpdateItem: resetUpdateItem,\n    previewProps: previewProps,\n    state: state,\n    hasChanged: hasChanged\n  });\n}\nfunction HeaderActions(props) {\n  let {\n    formID,\n    hasChanged,\n    isLoading,\n    onDelete,\n    onDuplicate,\n    onReset,\n    previewHref,\n    viewHref\n  } = props;\n  const isBelowDesktop = useMediaQuery(breakpointQueries.below.desktop);\n  const stringFormatter = useLocalizedStringFormatter(l10nMessages);\n  const [deleteAlertIsOpen, setDeleteAlertOpen] = useState(false);\n  const [duplicateAlertIsOpen, setDuplicateAlertOpen] = useState(false);\n  const menuActions = useMemo(() => {\n    let items = [{\n      key: 'reset',\n      label: 'Reset changes',\n      // TODO: l10n\n      icon: historyIcon\n    }, {\n      key: 'delete',\n      label: 'Delete entry…',\n      // TODO: l10n\n      icon: trash2Icon\n    }, {\n      key: 'duplicate',\n      label: 'Duplicate entry…',\n      // TODO: l10n\n      icon: copyPlusIcon\n    }];\n    if (previewHref) {\n      items.push({\n        key: 'preview',\n        label: 'Preview',\n        icon: externalLinkIcon,\n        href: previewHref,\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      });\n    }\n    if (viewHref) {\n      items.push({\n        key: 'view',\n        label: 'View on GitHub',\n        icon: githubIcon,\n        href: viewHref,\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      });\n    }\n    return items;\n  }, [previewHref, viewHref]);\n  const indicatorElement = (() => {\n    if (isLoading) {\n      return /*#__PURE__*/jsx(ProgressCircle, {\n        \"aria-label\": \"Saving changes\",\n        isIndeterminate: true,\n        size: \"small\",\n        alignSelf: \"center\"\n      });\n    }\n    if (hasChanged) {\n      return isBelowDesktop ? /*#__PURE__*/jsx(Box, {\n        backgroundColor: \"pendingEmphasis\",\n        height: \"scale.75\",\n        width: \"scale.75\",\n        borderRadius: \"full\",\n        children: /*#__PURE__*/jsx(Text, {\n          visuallyHidden: true,\n          children: \"Unsaved\"\n        })\n      }) : /*#__PURE__*/jsx(Badge, {\n        tone: \"pending\",\n        children: \"Unsaved\"\n      });\n    }\n    return null;\n  })();\n  return /*#__PURE__*/jsxs(Flex, {\n    alignItems: \"center\",\n    gap: {\n      mobile: 'small',\n      tablet: 'regular'\n    },\n    children: [/*#__PURE__*/jsx(PresenceAvatars, {}), indicatorElement, /*#__PURE__*/jsx(ActionGroup, {\n      buttonLabelBehavior: \"hide\",\n      overflowMode: \"collapse\",\n      prominence: \"low\",\n      density: \"compact\",\n      maxWidth: isBelowDesktop ? 'element.regular' : undefined // force switch to action menu on small devices\n      ,\n      items: menuActions,\n      disabledKeys: hasChanged ? [] : ['reset'],\n      onAction: key => {\n        switch (key) {\n          case 'reset':\n            onReset();\n            break;\n          case 'delete':\n            setDeleteAlertOpen(true);\n            break;\n          case 'duplicate':\n            if (hasChanged) {\n              setDuplicateAlertOpen(true);\n            } else {\n              onDuplicate();\n            }\n            break;\n        }\n      },\n      children: item => /*#__PURE__*/jsxs(Item$1, {\n        textValue: item.label,\n        href: item.href,\n        target: item.target,\n        rel: item.rel,\n        children: [/*#__PURE__*/jsx(Icon, {\n          src: item.icon\n        }), /*#__PURE__*/jsx(Text, {\n          children: item.label\n        })]\n      }, item.key)\n    }), /*#__PURE__*/jsx(Button, {\n      form: formID,\n      isDisabled: isLoading,\n      prominence: \"high\",\n      type: \"submit\",\n      children: stringFormatter.format('save')\n    }), /*#__PURE__*/jsx(DialogContainer, {\n      onDismiss: () => setDeleteAlertOpen(false),\n      children: deleteAlertIsOpen && /*#__PURE__*/jsx(AlertDialog, {\n        title: \"Delete entry\",\n        tone: \"critical\",\n        cancelLabel: \"Cancel\",\n        primaryActionLabel: \"Yes, delete\",\n        autoFocusButton: \"cancel\",\n        onPrimaryAction: onDelete,\n        children: \"Are you sure? This action cannot be undone.\"\n      })\n    }), /*#__PURE__*/jsx(DialogContainer, {\n      onDismiss: () => setDuplicateAlertOpen(false),\n      children: duplicateAlertIsOpen && /*#__PURE__*/jsx(AlertDialog, {\n        title: \"Save and duplicate entry\",\n        tone: \"neutral\",\n        cancelLabel: \"Cancel\",\n        primaryActionLabel: \"Save and duplicate\",\n        autoFocusButton: \"primary\",\n        onPrimaryAction: onDuplicate,\n        children: \"You have unsaved changes. Save this entry to duplicate it.\"\n      })\n    })]\n  });\n}\nfunction CreateBranchDuringUpdateDialog(props) {\n  var _data$createRef;\n  const stringFormatter = useLocalizedStringFormatter(l10nMessages);\n  const repositoryId = useRepositoryId();\n  const [branchName, setBranchName] = useState('');\n  const [{\n    error,\n    fetching,\n    data\n  }, createBranch] = useCreateBranchMutation();\n  const isLoading = fetching || !!(data !== null && data !== void 0 && (_data$createRef = data.createRef) !== null && _data$createRef !== void 0 && _data$createRef.__typename);\n  const config = useConfig();\n  const branchPrefix = getBranchPrefix(config);\n  const propsForBranchPrefix = branchPrefix ? {\n    UNSAFE_className: css({\n      '& input': {\n        paddingInlineStart: tokenSchema.size.space.xsmall\n      }\n    }),\n    startElement: /*#__PURE__*/jsx(Flex, {\n      alignItems: \"center\",\n      paddingStart: \"regular\",\n      justifyContent: \"center\",\n      pointerEvents: \"none\",\n      children: /*#__PURE__*/jsx(Text, {\n        color: \"neutralSecondary\",\n        children: branchPrefix\n      })\n    })\n  } : {};\n  return /*#__PURE__*/jsx(Dialog, {\n    children: /*#__PURE__*/jsxs(\"form\", {\n      style: {\n        display: 'contents'\n      },\n      onSubmit: async event => {\n        var _result$data;\n        if (event.target !== event.currentTarget) return;\n        event.preventDefault();\n        const fullBranchName = (branchPrefix !== null && branchPrefix !== void 0 ? branchPrefix : '') + branchName;\n        const name = `refs/heads/${fullBranchName}`;\n        const result = await createBranch({\n          input: {\n            name,\n            oid: props.branchOid,\n            repositoryId\n          }\n        });\n        if ((_result$data = result.data) !== null && _result$data !== void 0 && (_result$data = _result$data.createRef) !== null && _result$data !== void 0 && _result$data.__typename) {\n          props.onCreate(fullBranchName);\n        }\n      },\n      children: [/*#__PURE__*/jsx(Heading, {\n        children: stringFormatter.format('newBranch')\n      }), /*#__PURE__*/jsx(Content, {\n        children: /*#__PURE__*/jsx(Flex, {\n          gap: \"large\",\n          direction: \"column\",\n          children: /*#__PURE__*/jsx(TextField, {\n            value: branchName,\n            onChange: setBranchName,\n            label: \"Branch name\",\n            description: props.reason,\n            autoFocus: true,\n            errorMessage: prettyErrorForCreateBranchMutation(error),\n            ...propsForBranchPrefix\n          })\n        })\n      }), /*#__PURE__*/jsxs(ButtonGroup, {\n        children: [isLoading && /*#__PURE__*/jsx(ProgressCircle, {\n          isIndeterminate: true,\n          size: \"small\",\n          \"aria-label\": \"Creating Branch\"\n        }), /*#__PURE__*/jsx(Button, {\n          isDisabled: isLoading,\n          onPress: props.onDismiss,\n          children: stringFormatter.format('cancel')\n        }), /*#__PURE__*/jsx(Button, {\n          isDisabled: isLoading,\n          prominence: \"high\",\n          type: \"submit\",\n          children: \"Create branch and save\"\n        })]\n      })]\n    })\n  });\n}\nfunction ItemPageWrapper(props) {\n  var _props$config$collect;\n  const collectionConfig = (_props$config$collect = props.config.collections) === null || _props$config$collect === void 0 ? void 0 : _props$config$collect[props.collection];\n  if (!collectionConfig) notFound();\n  const format = useMemo(() => getCollectionFormat(props.config, props.collection), [props.config, props.collection]);\n  const slugInfo = useMemo(() => {\n    return {\n      slug: props.itemSlug,\n      field: collectionConfig.slugField\n    };\n  }, [collectionConfig.slugField, props.itemSlug]);\n  const draftData = useData(useCallback(async () => {\n    const raw = await getDraft(['collection', props.collection, props.itemSlug]);\n    if (!raw) throw new Error('No draft found');\n    const stored = storedValSchema$2.create(raw);\n    const parsed = parseEntry({\n      config: props.config,\n      dirpath: getCollectionItemPath(props.config, props.collection, stored.slug),\n      format,\n      schema: collectionConfig.schema,\n      slug: {\n        field: collectionConfig.slugField,\n        slug: stored.slug\n      }\n    }, stored.files);\n    return {\n      state: parsed.initialState,\n      savedAt: stored.savedAt,\n      treeKey: stored.beforeTreeKey\n    };\n  }, [collectionConfig, format, props.collection, props.config, props.itemSlug]));\n  const itemData = useItemData({\n    config: props.config,\n    dirpath: getCollectionItemPath(props.config, props.collection, props.itemSlug),\n    schema: collectionConfig.schema,\n    format,\n    slug: slugInfo\n  });\n  const branchInfo = useBranchInfo();\n  const key = `${branchInfo.currentBranch}/${props.collection}/item/${props.itemSlug}`;\n  const yjsInfo = useYjsIfAvailable();\n  const isItemDataLoading = itemData.kind !== 'loaded';\n  const isItemNotFound = !isItemDataLoading && itemData.data === 'not-found';\n  const mapData = useData(useCallback(() => {\n    if (!yjsInfo) return;\n    if (yjsInfo === 'loading') return LOADING;\n    if (isItemDataLoading) return LOADING;\n    if (isItemNotFound) return;\n    return (async () => {\n      await yjsInfo.doc.whenSynced;\n      let doc = yjsInfo.data.get(key);\n      if (doc instanceof Y.Doc) {\n        const promise = doc.whenLoaded;\n        doc.load();\n        await promise;\n      } else {\n        doc = new Y.Doc();\n        yjsInfo.data.set(key, doc);\n      }\n      const data = doc.getMap('data');\n      return data;\n    })();\n  }, [isItemDataLoading, isItemNotFound, key, yjsInfo]));\n  useMemo(() => {\n    if (mapData.kind !== 'loaded' || itemData.kind !== 'loaded' || itemData.data === 'not-found' || !mapData.data || mapData.data.size) {\n      return;\n    }\n    const data = mapData.data;\n    const {\n      data: {\n        initialState\n      }\n    } = itemData;\n    data.doc.transact(() => {\n      for (const [key, value] of Object.entries(collectionConfig.schema)) {\n        const val = getYjsValFromParsedValue(value, initialState[key]);\n        data.set(key, val);\n      }\n    });\n  }, [collectionConfig.schema, itemData, mapData]);\n  if (itemData.kind === 'error') {\n    return /*#__PURE__*/jsx(ItemPageShell, {\n      ...props,\n      children: /*#__PURE__*/jsx(PageBody, {\n        children: /*#__PURE__*/jsx(Notice, {\n          tone: \"critical\",\n          children: itemData.error.message\n        })\n      })\n    });\n  }\n  if (mapData.kind === 'error') {\n    return /*#__PURE__*/jsx(ItemPageShell, {\n      ...props,\n      children: /*#__PURE__*/jsx(PageBody, {\n        children: /*#__PURE__*/jsx(Notice, {\n          tone: \"critical\",\n          children: mapData.error.message\n        })\n      })\n    });\n  }\n  if (itemData.kind === 'loading' || draftData.kind === 'loading' || mapData.kind === 'loading') {\n    return /*#__PURE__*/jsx(ItemPageShell, {\n      ...props,\n      children: /*#__PURE__*/jsx(Flex, {\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        minHeight: \"scale.3000\",\n        children: /*#__PURE__*/jsx(ProgressCircle, {\n          \"aria-label\": \"Loading Item\",\n          isIndeterminate: true,\n          size: \"large\"\n        })\n      })\n    });\n  }\n  if (itemData.data === 'not-found') {\n    return /*#__PURE__*/jsx(ItemPageShell, {\n      ...props,\n      children: /*#__PURE__*/jsx(PageBody, {\n        children: /*#__PURE__*/jsx(Notice, {\n          tone: \"caution\",\n          children: \"Entry not found.\"\n        })\n      })\n    });\n  }\n  const loadedDraft = draftData.kind === 'loaded' ? draftData.data : undefined;\n  if (mapData.data) {\n    return /*#__PURE__*/jsx(CollabItemPage, {\n      collection: props.collection,\n      basePath: props.basePath,\n      config: props.config,\n      itemSlug: props.itemSlug,\n      initialState: itemData.data.initialState,\n      initialFiles: itemData.data.initialFiles,\n      localTreeKey: itemData.data.localTreeKey,\n      map: mapData.data\n    });\n  }\n  return /*#__PURE__*/jsx(LocalItemPage, {\n    collection: props.collection,\n    basePath: props.basePath,\n    config: props.config,\n    itemSlug: props.itemSlug,\n    initialState: itemData.data.initialState,\n    initialFiles: itemData.data.initialFiles,\n    draft: loadedDraft,\n    localTreeKey: itemData.data.localTreeKey\n  });\n}\nconst ItemPageShell = props => {\n  const collectionConfig = props.config.collections[props.collection];\n  const collectionHref = `${props.basePath}/collection/${props.collection}`;\n  const breadcrumbItems = useMemo(() => [{\n    key: 'collection',\n    label: collectionConfig.label,\n    href: collectionHref\n  }, {\n    key: 'item',\n    label: props.itemSlug\n  }], [collectionConfig.label, collectionHref, props.itemSlug]);\n  return /*#__PURE__*/jsxs(PageRoot, {\n    containerWidth: containerWidthForEntryLayout(collectionConfig),\n    children: [/*#__PURE__*/jsxs(PageHeader, {\n      children: [/*#__PURE__*/jsx(HeaderBreadcrumbs, {\n        items: breadcrumbItems\n      }), props.headerActions]\n    }), props.children]\n  });\n};\n\nfunction CreateItemWrapper(props) {\n  var _props$config$collect;\n  const router = useRouter();\n  const duplicateSlug = useMemo(() => {\n    const url = new URL(router.href, 'http://localhost');\n    return url.searchParams.get('duplicate');\n  }, [router.href]);\n  const collectionConfig = (_props$config$collect = props.config.collections) === null || _props$config$collect === void 0 ? void 0 : _props$config$collect[props.collection];\n  if (!collectionConfig) notFound();\n  const format = useMemo(() => getCollectionFormat(props.config, props.collection), [props.config, props.collection]);\n  const draftData = useData(useCallback(async () => {\n    const raw = await getDraft(['collection-create', props.collection, ...(duplicateSlug ? [duplicateSlug] : [])]);\n    if (!raw) throw new Error('No draft found');\n    const stored = storedValSchema$1.create(raw);\n    const parsed = parseEntry({\n      config: props.config,\n      dirpath: getCollectionItemPath(props.config, props.collection, stored.slug),\n      format,\n      schema: collectionConfig.schema,\n      slug: {\n        field: collectionConfig.slugField,\n        slug: stored.slug\n      }\n    }, stored.files);\n    return {\n      state: parsed.initialState,\n      savedAt: stored.savedAt\n    };\n  }, [collectionConfig, duplicateSlug, format, props.collection, props.config]));\n  const slug = useMemo(() => {\n    if (duplicateSlug) {\n      return {\n        field: collectionConfig.slugField,\n        slug: duplicateSlug\n      };\n    }\n    if (collectionConfig.template) {\n      return {\n        field: collectionConfig.slugField,\n        slug: ''\n      };\n    }\n  }, [duplicateSlug, collectionConfig]);\n  const isFromTemplate = !!duplicateSlug || !!collectionConfig.template;\n  const itemData = useItemData({\n    config: props.config,\n    dirpath: collectionConfig.template && !duplicateSlug ? collectionConfig.template : getCollectionItemPath(props.config, props.collection, duplicateSlug !== null && duplicateSlug !== void 0 ? duplicateSlug : ''),\n    schema: collectionConfig.schema,\n    format,\n    slug\n  });\n  const duplicateInitalState = isFromTemplate && itemData.kind === 'loaded' && itemData.data !== 'not-found' ? itemData.data.initialState : undefined;\n  const duplicateInitalStateWithUpdatedSlug = useMemo(() => {\n    if (duplicateInitalState) {\n      let slugFieldValue = duplicateInitalState[collectionConfig.slugField];\n      // we'll make a best effort to add something to the slug after duplicated so it's different\n      // but if it fails a user can change it before creating\n      // (e.g. potentially it's not just a text field so appending -copy might not work)\n      try {\n        const slugFieldSchema = collectionConfig.schema[collectionConfig.slugField];\n        if (slugFieldSchema.kind !== 'form' || slugFieldSchema.formKind !== 'slug') {\n          throw new Error('not slug field');\n        }\n        const serialized = slugFieldSchema.serializeWithSlug(slugFieldValue);\n        slugFieldValue = slugFieldSchema.parse(serialized.value, {\n          slug: serialized.slug ? `${serialized.slug}-copy` : ''\n        });\n      } catch {}\n      return {\n        ...duplicateInitalState,\n        [collectionConfig.slugField]: slugFieldValue\n      };\n    }\n  }, [collectionConfig.schema, collectionConfig.slugField, duplicateInitalState]);\n  const branchInfo = useBranchInfo();\n  const yjsInfo = useYjsIfAvailable();\n  const key = `${branchInfo.currentBranch}/${props.collection}/create${duplicateSlug !== null && duplicateSlug !== void 0 && duplicateSlug.length ? `?duplicate=${duplicateSlug}` : ''}`;\n  const mapData = useData(useCallback(async () => {\n    if (!yjsInfo) return;\n    if (yjsInfo === 'loading') return LOADING;\n    await yjsInfo.doc.whenSynced;\n    if (isFromTemplate && !duplicateInitalState) return LOADING;\n    let doc = yjsInfo.data.get(key);\n    if (doc instanceof Y.Doc) {\n      const promise = doc.whenLoaded;\n      doc.load();\n      await promise;\n    } else {\n      doc = new Y.Doc();\n      yjsInfo.data.set(key, doc);\n    }\n    const data = doc.getMap('data');\n    if (!data.size) {\n      doc.transact(() => {\n        for (const [key, value] of Object.entries(collectionConfig.schema)) {\n          var _duplicateInitalState;\n          const val = getYjsValFromParsedValue(value, (_duplicateInitalState = duplicateInitalState === null || duplicateInitalState === void 0 ? void 0 : duplicateInitalState[key]) !== null && _duplicateInitalState !== void 0 ? _duplicateInitalState : getInitialPropsValue(value));\n          data.set(key, val);\n        }\n      });\n    }\n    return data;\n  }, [collectionConfig, duplicateInitalState, isFromTemplate, key, yjsInfo]));\n  if (isFromTemplate && itemData.kind === 'error') {\n    return /*#__PURE__*/jsx(PageBody, {\n      children: /*#__PURE__*/jsx(Notice, {\n        tone: \"critical\",\n        children: itemData.error.message\n      })\n    });\n  }\n  if (mapData.kind === 'error') {\n    console.log(mapData.error);\n    return /*#__PURE__*/jsx(PageBody, {\n      children: /*#__PURE__*/jsx(Notice, {\n        tone: \"critical\",\n        children: mapData.error.message\n      })\n    });\n  }\n  if (isFromTemplate && itemData.kind === 'loading' || draftData.kind === 'loading' || mapData.kind === 'loading') {\n    return /*#__PURE__*/jsx(Flex, {\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      minHeight: \"scale.3000\",\n      children: /*#__PURE__*/jsx(ProgressCircle, {\n        \"aria-label\": \"Loading Item\",\n        isIndeterminate: true,\n        size: \"large\"\n      })\n    });\n  }\n  if (isFromTemplate && itemData.kind === 'loaded' && itemData.data === 'not-found') {\n    return /*#__PURE__*/jsx(PageBody, {\n      children: /*#__PURE__*/jsx(Notice, {\n        tone: \"caution\",\n        children: \"Entry not found.\"\n      })\n    });\n  }\n  if (!mapData.data) {\n    return /*#__PURE__*/jsx(CreateItemLocal, {\n      collection: props.collection,\n      config: props.config,\n      basePath: props.basePath,\n      draft: draftData.kind === 'loaded' ? draftData.data : undefined,\n      duplicateSlug: duplicateSlug,\n      initialState: duplicateInitalStateWithUpdatedSlug\n    });\n  }\n  return /*#__PURE__*/jsx(CreateItemCollab, {\n    collection: props.collection,\n    config: props.config,\n    basePath: props.basePath,\n    duplicateSlug: duplicateSlug,\n    initialState: duplicateInitalStateWithUpdatedSlug,\n    map: mapData.data\n  });\n}\nconst storedValSchema$1 = s.type({\n  version: s.literal(1),\n  savedAt: s.date(),\n  slug: s.string(),\n  files: s.map(s.string(), s.instance(Uint8Array))\n});\nfunction CreateItemLocal(props) {\n  var _props$config$collect2, _props$draft$state, _props$draft;\n  const collectionConfig = (_props$config$collect2 = props.config.collections) === null || _props$config$collect2 === void 0 ? void 0 : _props$config$collect2[props.collection];\n  if (!collectionConfig) notFound();\n  const schema = useMemo(() => object(collectionConfig.schema), [collectionConfig.schema]);\n  const initialState = useMemo(() => {\n    var _props$initialState;\n    return (_props$initialState = props.initialState) !== null && _props$initialState !== void 0 ? _props$initialState : getInitialPropsValue(schema);\n  }, [props.initialState, schema]);\n  const [state, setState] = useState((_props$draft$state = (_props$draft = props.draft) === null || _props$draft === void 0 ? void 0 : _props$draft.state) !== null && _props$draft$state !== void 0 ? _props$draft$state : initialState);\n  const previewProps = useMemo(() => createGetPreviewProps(schema, setState, () => undefined), [schema])(state);\n  useEffect(() => {\n    if (props.draft && state === props.draft.state) {\n      showDraftRestoredToast(props.draft.savedAt, false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.draft]);\n  const slug = getSlugFromState(collectionConfig, state);\n  const formatInfo = getCollectionFormat(props.config, props.collection);\n  const basePath = getCollectionItemPath(props.config, props.collection, slug);\n  const [createResult, _createItem, resetCreateItemState] = useUpsertItem({\n    state,\n    basePath,\n    initialFiles: undefined,\n    config: props.config,\n    schema: collectionConfig.schema,\n    format: formatInfo,\n    currentLocalTreeKey: undefined,\n    slug: {\n      field: collectionConfig.slugField,\n      value: slug\n    }\n  });\n  const createItem = useEventCallback(_createItem);\n  const hasChanged = useHasChanged({\n    initialState,\n    schema,\n    state,\n    slugField: collectionConfig.slugField\n  });\n  const hasCreated = createResult.kind === 'updated' || createResult.kind === 'loading';\n  useEffect(() => {\n    const key = ['collection-create', props.collection, ...(props.duplicateSlug ? [props.duplicateSlug] : [])];\n    if (hasChanged && !hasCreated) {\n      const serialized = serializeEntryToFiles({\n        basePath,\n        config: props.config,\n        format: formatInfo,\n        schema: collectionConfig.schema,\n        slug: {\n          field: collectionConfig.slugField,\n          value: slug\n        },\n        state\n      });\n      const files = new Map(serialized.map(x => [x.path, x.contents]));\n      const data = {\n        slug,\n        files,\n        savedAt: new Date(),\n        version: 1\n      };\n      setDraft(key, data);\n    } else {\n      delDraft(key);\n    }\n  }, [collectionConfig, slug, state, hasChanged, props.duplicateSlug, props.collection, props.config, basePath, formatInfo, hasCreated]);\n  return /*#__PURE__*/jsx(CreateItemInner, {\n    basePath: props.basePath,\n    collection: props.collection,\n    createResult: createResult,\n    createItem: createItem,\n    resetCreateItemState: resetCreateItemState,\n    state: state,\n    slug: slug,\n    previewProps: previewProps,\n    onReset: () => {\n      setState(initialState);\n    }\n  });\n}\nfunction CreateItemCollab(props) {\n  var _props$config$collect3;\n  const collectionConfig = (_props$config$collect3 = props.config.collections) === null || _props$config$collect3 === void 0 ? void 0 : _props$config$collect3[props.collection];\n  if (!collectionConfig) notFound();\n  const schema = useMemo(() => object(collectionConfig.schema), [collectionConfig.schema]);\n  const yjsInfo = useYjs();\n  const state = useYJsValue(schema, props.map);\n  const previewProps = useMemo(() => createGetPreviewPropsFromY(schema, props.map, yjsInfo.awareness), [props.map, schema, yjsInfo.awareness])(state);\n  const slug = getSlugFromState(collectionConfig, state);\n  const formatInfo = getCollectionFormat(props.config, props.collection);\n  const basePath = getCollectionItemPath(props.config, props.collection, slug);\n  const [createResult, _createItem, resetCreateItemState] = useUpsertItem({\n    state,\n    basePath,\n    initialFiles: undefined,\n    config: props.config,\n    schema: collectionConfig.schema,\n    format: formatInfo,\n    currentLocalTreeKey: undefined,\n    slug: {\n      field: collectionConfig.slugField,\n      value: slug\n    }\n  });\n  const createItem = useEventCallback(_createItem);\n  return /*#__PURE__*/jsx(CreateItemInner, {\n    basePath: props.basePath,\n    collection: props.collection,\n    createResult: createResult,\n    createItem: createItem,\n    resetCreateItemState: resetCreateItemState,\n    state: state,\n    slug: slug,\n    previewProps: previewProps,\n    onReset: () => {\n      props.map.doc.transact(() => {\n        for (const [key, value] of Object.entries(collectionConfig.schema)) {\n          var _props$initialState$k, _props$initialState2;\n          const val = getYjsValFromParsedValue(value, (_props$initialState$k = (_props$initialState2 = props.initialState) === null || _props$initialState2 === void 0 ? void 0 : _props$initialState2[key]) !== null && _props$initialState$k !== void 0 ? _props$initialState$k : getInitialPropsValue(value));\n          props.map.set(key, val);\n        }\n      });\n    }\n  });\n}\nfunction CreateItemInner(props) {\n  const stringFormatter = useLocalizedStringFormatter(l10nMessages);\n  const router = useRouter();\n  const config = useConfig();\n  const collectionConfig = config.collections[props.collection];\n  const schema = useMemo(() => object(collectionConfig.schema), [collectionConfig]);\n  const [forceValidation, setForceValidation] = useState(false);\n  const formatInfo = getCollectionFormat(config, props.collection);\n  const baseCommit = useBaseCommit();\n  let collectionPath = `${props.basePath}/collection/${encodeURIComponent(props.collection)}`;\n  const {\n    createResult\n  } = props;\n  const currentSlug = createResult.kind === 'updated' || createResult.kind === 'loading' ? props.slug : undefined;\n  const slugInfo = useSlugFieldInfo(props.collection, currentSlug);\n  const onCreate = async () => {\n    if (createResult.kind === 'loading') return;\n    if (!clientSideValidateProp(schema, props.state, slugInfo)) {\n      setForceValidation(true);\n      return;\n    }\n    if (await props.createItem()) {\n      const slug = getSlugFromState(collectionConfig, props.state);\n      router.push(`${collectionPath}/item/${encodeURIComponent(slug)}`);\n      toastQueue.positive('Entry created', {\n        timeout: 5000\n      }); // TODO: l10n\n    }\n  };\n\n  // note we're still \"loading\" when it's already been created\n  // since we're waiting to go to the item page\n  const isLoading = createResult.kind === 'loading' || createResult.kind === 'updated';\n  const formID = 'item-create-form';\n  const breadcrumbItems = useMemo(() => [{\n    key: 'collection',\n    label: collectionConfig.label,\n    href: collectionPath\n  }, {\n    key: 'current',\n    label: stringFormatter.format('add')\n  }], [collectionConfig.label, stringFormatter, collectionPath]);\n  return /*#__PURE__*/jsxs(Fragment, {\n    children: [/*#__PURE__*/jsxs(PageRoot, {\n      containerWidth: containerWidthForEntryLayout(collectionConfig),\n      children: [/*#__PURE__*/jsxs(PageHeader, {\n        children: [/*#__PURE__*/jsx(HeaderBreadcrumbs, {\n          items: breadcrumbItems\n        }), /*#__PURE__*/jsx(PresenceAvatars, {}), isLoading && /*#__PURE__*/jsx(ProgressCircle, {\n          \"aria-label\": \"Creating entry\",\n          isIndeterminate: true,\n          size: \"small\"\n        }), /*#__PURE__*/jsxs(TooltipTrigger, {\n          children: [/*#__PURE__*/jsx(Button, {\n            prominence: \"low\",\n            \"aria-label\": \"Reset\",\n            onPress: () => {\n              props.onReset();\n              setForceValidation(false);\n            },\n            children: /*#__PURE__*/jsx(Icon, {\n              src: historyIcon\n            })\n          }), /*#__PURE__*/jsx(Tooltip, {\n            children: \"Reset\"\n          })]\n        }), /*#__PURE__*/jsx(Button, {\n          isDisabled: isLoading,\n          prominence: \"high\",\n          type: \"submit\",\n          form: formID,\n          marginStart: \"auto\",\n          children: stringFormatter.format('create')\n        })]\n      }), /*#__PURE__*/jsxs(Flex, {\n        id: formID,\n        elementType: \"form\",\n        onSubmit: event => {\n          if (event.target !== event.currentTarget) return;\n          event.preventDefault();\n          onCreate();\n        },\n        direction: \"column\",\n        gap: \"xxlarge\",\n        height: \"100%\",\n        minHeight: 0,\n        minWidth: 0,\n        children: [createResult.kind === 'error' && /*#__PURE__*/jsx(Notice, {\n          tone: \"critical\",\n          children: createResult.error.message\n        }), /*#__PURE__*/jsx(FormForEntry, {\n          previewProps: props.previewProps,\n          forceValidation: forceValidation,\n          entryLayout: collectionConfig.entryLayout,\n          formatInfo: formatInfo,\n          slugField: slugInfo\n        })]\n      })]\n    }), /*#__PURE__*/jsx(DialogContainer\n    // ideally this would be a popover on desktop but using a DialogTrigger\n    // wouldn't work since this doesn't open on click but after doing a\n    // network request and it failing and manually wiring about a popover\n    // and modal would be a pain\n    , {\n      onDismiss: props.resetCreateItemState,\n      children: createResult.kind === 'needs-new-branch' && /*#__PURE__*/jsx(CreateBranchDuringUpdateDialog, {\n        branchOid: baseCommit,\n        onCreate: async newBranch => {\n          router.push(`/keystatic/branch/${encodeURIComponent(newBranch)}/collection/${encodeURIComponent(props.collection)}/create`);\n          if (await props.createItem({\n            branch: newBranch,\n            sha: baseCommit\n          })) {\n            const slug = getSlugFromState(collectionConfig, props.state);\n            router.push(`/keystatic/branch/${encodeURIComponent(newBranch)}/collection/${encodeURIComponent(props.collection)}/item/${encodeURIComponent(slug)}`);\n          }\n        },\n        reason: createResult.reason,\n        onDismiss: props.resetCreateItemState\n      })\n    }), /*#__PURE__*/jsx(DialogContainer\n    // ideally this would be a popover on desktop but using a DialogTrigger\n    // wouldn't work since this doesn't open on click but after doing a\n    // network request and it failing and manually wiring about a popover\n    // and modal would be a pain\n    , {\n      onDismiss: props.resetCreateItemState,\n      children: createResult.kind === 'needs-fork' && isGitHubConfig(config) && /*#__PURE__*/jsx(ForkRepoDialog, {\n        onCreate: async () => {\n          if (await props.createItem()) {\n            const slug = getSlugFromState(collectionConfig, props.state);\n            router.push(`${collectionPath}/item/${encodeURIComponent(slug)}`);\n          }\n        },\n        onDismiss: props.resetCreateItemState,\n        config: config\n      })\n    })]\n  });\n}\n\nconst DashboardSection = ({\n  children,\n  title\n}) => {\n  return /*#__PURE__*/jsxs(Flex, {\n    elementType: \"section\",\n    direction: \"column\",\n    gap: \"medium\",\n    children: [/*#__PURE__*/jsx(Text, {\n      casing: \"uppercase\",\n      color: \"neutralTertiary\",\n      size: \"small\",\n      weight: \"bold\",\n      elementType: \"h2\",\n      children: title\n    }), children]\n  });\n};\nconst FILL_COLS = 'fill';\nconst DashboardGrid = props => {\n  return /*#__PURE__*/jsx(\"div\", {\n    className: css({\n      display: 'grid',\n      gap: tokenSchema.size.space.large,\n      gridAutoRows: tokenSchema.size.element.xlarge,\n      gridTemplateColumns: `[${FILL_COLS}-start] 1fr [${FILL_COLS}-end]`,\n      [containerQueries.above.mobile]: {\n        gridTemplateColumns: `[${FILL_COLS}-start] 1fr 1fr [${FILL_COLS}-end]`\n      },\n      [containerQueries.above.tablet]: {\n        gridTemplateColumns: `[${FILL_COLS}-start] 1fr 1fr 1fr [${FILL_COLS}-end]`\n      }\n    }),\n    ...props\n  });\n};\nconst DashboardCard = props => {\n  const ref = useRef(null);\n  const {\n    linkProps\n  } = useLink(props, ref);\n  return /*#__PURE__*/jsxs(Flex, {\n    alignItems: \"center\",\n    backgroundColor: \"canvas\",\n    padding: \"large\",\n    position: \"relative\",\n    children: [/*#__PURE__*/jsxs(Flex, {\n      direction: \"column\",\n      gap: \"medium\",\n      flex: true,\n      children: [/*#__PURE__*/jsx(Heading, {\n        elementType: \"h3\",\n        size: \"small\",\n        truncate: true,\n        children: /*#__PURE__*/jsx(\"a\", {\n          ref: ref,\n          href: props.href,\n          ...linkProps,\n          className: classNames(css({\n            color: tokenSchema.color.foreground.neutral,\n            outline: 'none',\n            '&:hover': {\n              color: tokenSchema.color.foreground.neutralEmphasis,\n              '::before': {\n                backgroundColor: tokenSchema.color.alias.backgroundIdle,\n                borderColor: tokenSchema.color.border.neutral\n              }\n            },\n            '&:active': {\n              '::before': {\n                backgroundColor: tokenSchema.color.alias.backgroundHovered,\n                borderColor: tokenSchema.color.alias.borderHovered\n              }\n            },\n            '&:focus-visible::before': {\n              outline: `${tokenSchema.size.alias.focusRing} solid ${tokenSchema.color.alias.focusRing}`,\n              outlineOffset: tokenSchema.size.alias.focusRingGap\n            },\n            // fill the available space so that the card is clickable\n            '::before': {\n              border: `${tokenSchema.size.border.regular} solid ${tokenSchema.color.border.muted}`,\n              borderRadius: tokenSchema.size.radius.medium,\n              content: '\"\"',\n              position: 'absolute',\n              inset: 0,\n              transition: transition(['background-color', 'border-color'])\n            }\n          })),\n          children: props.label\n        })\n      }), props.children]\n    }), props.endElement]\n  });\n};\n\nfunction useLocalizedString() {\n  let stringFormatter = useLocalizedStringFormatter(l10nMessages);\n  return stringFormatter;\n}\n\nfunction BranchSection() {\n  let branchInfo = useBranchInfo();\n  let router = useRouter();\n  let localizedString = useLocalizedString();\n  let prNumber = useAssociatedPullRequest();\n  let repoURL = getRepoUrl(branchInfo);\n  let isDefaultBranch = branchInfo.currentBranch === branchInfo.defaultBranch;\n  return /*#__PURE__*/jsxs(DashboardSection, {\n    title: localizedString.format('currentBranch'),\n    children: [/*#__PURE__*/jsxs(Flex, {\n      alignItems: \"center\",\n      gap: \"regular\",\n      border: \"muted\",\n      borderRadius: \"medium\",\n      backgroundColor: \"canvas\",\n      padding: \"large\",\n      children: [/*#__PURE__*/jsx(Icon, {\n        src: gitBranchIcon,\n        color: \"neutralTertiary\"\n      }), /*#__PURE__*/jsx(Text, {\n        size: \"medium\",\n        weight: \"semibold\",\n        children: branchInfo.currentBranch\n      })]\n    }), /*#__PURE__*/jsxs(Flex, {\n      gap: \"regular\",\n      wrap: true,\n      children: [/*#__PURE__*/jsxs(DialogTrigger, {\n        children: [/*#__PURE__*/jsxs(ActionButton, {\n          children: [/*#__PURE__*/jsx(Icon, {\n            src: gitBranchPlusIcon\n          }), /*#__PURE__*/jsx(Text, {\n            children: localizedString.format('newBranch')\n          })]\n        }), close => /*#__PURE__*/jsx(CreateBranchDialog, {\n          onDismiss: close,\n          onCreate: branchName => {\n            close();\n            router.push(router.href.replace(/\\/branch\\/[^/]+/, '/branch/' + encodeURIComponent(branchName)));\n          }\n        })]\n      }), !isDefaultBranch && prNumber !== undefined && (prNumber === false ? /*#__PURE__*/jsxs(ActionButton, {\n        href: `${repoURL}/pull/new/${branchInfo.currentBranch}`,\n        target: \"_blank\",\n        children: [/*#__PURE__*/jsx(Icon, {\n          src: gitPullRequestIcon\n        }), /*#__PURE__*/jsx(Text, {\n          children: localizedString.format('createPullRequest')\n        })]\n      }) : /*#__PURE__*/jsxs(ActionButton, {\n        href: `${repoURL}/pull/${prNumber}`,\n        target: \"_blank\",\n        children: [/*#__PURE__*/jsx(Icon, {\n          src: gitPullRequestIcon\n        }), /*#__PURE__*/jsxs(Text, {\n          children: [\"Pull request #\", prNumber]\n        })]\n      }))]\n    })]\n  });\n}\n\nfunction DashboardCards() {\n  const navItems = useNavItems();\n  const hasSections = navItems.some(item => 'children' in item);\n  const items = navItems.map(item => renderItemOrGroup(item));\n  return hasSections ? /*#__PURE__*/jsx(Fragment, {\n    children: items\n  }) : /*#__PURE__*/jsx(DashboardSection, {\n    title: \"Content\",\n    children: /*#__PURE__*/jsx(DashboardGrid, {\n      children: items\n    })\n  });\n}\nlet dividerCount = 0;\nfunction renderItemOrGroup(itemOrGroup) {\n  if ('isDivider' in itemOrGroup) {\n    return /*#__PURE__*/jsx(Flex, {\n      gridColumn: FILL_COLS,\n      children: /*#__PURE__*/jsx(Divider, {\n        alignSelf: \"center\",\n        size: \"medium\",\n        width: \"alias.singleLineWidth\"\n      })\n    }, dividerCount++);\n  }\n  if ('children' in itemOrGroup) {\n    return /*#__PURE__*/jsx(DashboardSection, {\n      title: itemOrGroup.title,\n      children: /*#__PURE__*/jsx(DashboardGrid, {\n        children: itemOrGroup.children.map(child => renderItemOrGroup(child))\n      })\n    }, itemOrGroup.title);\n  }\n  let changeElement = (() => {\n    if (!itemOrGroup.changed) {\n      return undefined;\n    }\n    return typeof itemOrGroup.changed === 'number' ? /*#__PURE__*/jsx(Badge, {\n      tone: \"accent\",\n      marginStart: \"auto\",\n      children: pluralize(itemOrGroup.changed, {\n        singular: 'change',\n        plural: 'changes'\n      })\n    }) : /*#__PURE__*/jsx(Badge, {\n      tone: \"accent\",\n      children: \"Changed\"\n    });\n  })();\n  let endElement = (() => {\n    // entry counts are only available for collections\n    if (typeof itemOrGroup.entryCount !== 'number') {\n      return changeElement;\n    }\n    return /*#__PURE__*/jsxs(Flex, {\n      gap: \"medium\",\n      alignItems: \"center\",\n      children: [changeElement, /*#__PURE__*/jsx(ActionButton, {\n        \"aria-label\": \"Add\",\n        href: `${itemOrGroup.href}/create`,\n        children: /*#__PURE__*/jsx(Icon, {\n          src: plusIcon\n        })\n      })]\n    });\n  })();\n  return /*#__PURE__*/jsx(DashboardCard, {\n    label: itemOrGroup.label,\n    href: itemOrGroup.href,\n    endElement: endElement,\n    children: typeof itemOrGroup.entryCount === 'number' ? /*#__PURE__*/jsx(Text, {\n      color: \"neutralSecondary\",\n      children: pluralize(itemOrGroup.entryCount, {\n        singular: 'entry',\n        plural: 'entries'\n      })\n    }) : null\n  }, itemOrGroup.key);\n}\n\nfunction DashboardPage(props) {\n  var _viewer$name;\n  const stringFormatter = useLocalizedStringFormatter(l10nMessages);\n  const viewer = useViewer();\n  const cloudInfo = useCloudInfo();\n  const user = viewer ? {\n    name: (_viewer$name = viewer.name) !== null && _viewer$name !== void 0 ? _viewer$name : viewer.login,\n    avatarUrl: viewer.avatarUrl\n  } : cloudInfo === null || cloudInfo === void 0 ? void 0 : cloudInfo.user;\n  return /*#__PURE__*/jsxs(PageRoot, {\n    containerWidth: \"large\",\n    children: [/*#__PURE__*/jsx(PageHeader, {\n      children: /*#__PURE__*/jsx(Heading, {\n        elementType: \"h1\",\n        id: \"page-title\",\n        size: \"small\",\n        children: stringFormatter.format('dashboard')\n      })\n    }), /*#__PURE__*/jsx(PageBody, {\n      isScrollable: true,\n      children: /*#__PURE__*/jsxs(Flex, {\n        direction: \"column\",\n        gap: \"xxlarge\",\n        children: [user && /*#__PURE__*/jsx(UserInfo, {\n          user: user,\n          manageAccount: !!cloudInfo\n        }), !isLocalConfig(props.config) && /*#__PURE__*/jsx(BranchSection, {}), /*#__PURE__*/jsx(DashboardCards, {})]\n      })\n    })]\n  });\n}\nfunction UserInfo({\n  user,\n  manageAccount\n}) {\n  return /*#__PURE__*/jsxs(Flex, {\n    alignItems: \"center\",\n    gap: \"medium\",\n    isHidden: {\n      below: 'tablet'\n    },\n    children: [/*#__PURE__*/jsx(Avatar, {\n      src: user.avatarUrl,\n      name: user.name,\n      size: \"large\"\n    }), /*#__PURE__*/jsxs(VStack, {\n      gap: \"medium\",\n      children: [/*#__PURE__*/jsxs(Heading, {\n        size: \"medium\",\n        elementType: \"p\",\n        UNSAFE_style: {\n          fontWeight: tokenSchema.typography.fontWeight.bold\n        },\n        children: [\"Hello, \", user.name, \"!\"]\n      }), manageAccount && /*#__PURE__*/jsx(TextLink, {\n        href: \"https://keystatic.cloud/account\",\n        children: \"Manage Account\"\n      })]\n    })]\n  });\n}\n\nconst MainPanelLayout = props => {\n  let isBelowDesktop = useMediaQuery(breakpointQueries.below.desktop);\n  let sidebarState = useSidebar();\n  let ref = useRef(null);\n  let context = useContentPanelState(ref);\n  return /*#__PURE__*/jsx(ContentPanelProvider, {\n    value: context,\n    children: /*#__PURE__*/jsxs(SplitView, {\n      autoSaveId: \"keystatic-app-split-view\",\n      isCollapsed: isBelowDesktop || !sidebarState.isOpen,\n      onCollapseChange: sidebarState.toggle,\n      defaultSize: 260,\n      minSize: 180,\n      maxSize: 400\n      // styles\n      ,\n      height: \"100vh\",\n      children: [isBelowDesktop ? /*#__PURE__*/jsx(SidebarDialog, {}) : /*#__PURE__*/jsx(SplitPanePrimary, {\n        children: /*#__PURE__*/jsx(SidebarPanel, {})\n      }), /*#__PURE__*/jsx(SplitPaneSecondary, {\n        ref: ref,\n        children: props.children\n      })]\n    })\n  });\n};\n\nfunction BranchNotFound(props) {\n  const branchInfo = useBranchInfo();\n  if (branchInfo.hasLoadedAllBranches && !branchInfo.allBranches.includes(branchInfo.currentBranch)) {\n    return /*#__PURE__*/jsx(EmptyState, {\n      icon: alertCircleIcon,\n      title: \"Branch not found\",\n      message: `The branch ${branchInfo.currentBranch} does not exist in this repository.`\n    });\n  }\n  return props.children;\n}\nconst AppShell = props => {\n  const content = /*#__PURE__*/jsx(AppShellErrorContext.Consumer, {\n    children: error => error && !(error !== null && error !== void 0 && error.graphQLErrors.some(err => {\n      var _err$originalError;\n      return (err === null || err === void 0 || (_err$originalError = err.originalError) === null || _err$originalError === void 0 ? void 0 : _err$originalError.type) === 'NOT_FOUND';\n    })) ? /*#__PURE__*/jsx(EmptyState, {\n      icon: alertCircleIcon,\n      title: \"Failed to load shell\",\n      message: error.message\n    }) : props.children\n  });\n  const inner = /*#__PURE__*/jsx(ConfigContext.Provider, {\n    value: props.config,\n    children: /*#__PURE__*/jsx(AppStateContext.Provider, {\n      value: {\n        basePath: props.basePath\n      },\n      children: /*#__PURE__*/jsx(SidebarProvider, {\n        children: /*#__PURE__*/jsx(MainPanelLayout, {\n          children: /*#__PURE__*/jsx(BranchNotFound, {\n            children: content\n          })\n        })\n      })\n    })\n  });\n  if (isGitHubConfig(props.config) || props.config.storage.kind === 'cloud') {\n    return /*#__PURE__*/jsx(GitHubAppShellProvider, {\n      currentBranch: props.currentBranch,\n      config: props.config,\n      children: inner\n    });\n  }\n  if (isLocalConfig(props.config)) {\n    return /*#__PURE__*/jsx(LocalAppShellProvider, {\n      config: props.config,\n      children: inner\n    });\n  }\n  return null;\n};\n\nfunction SingletonPageInner(props) {\n  var _getPathPrefix, _getPathPrefix2;\n  const isBelowDesktop = useMediaQuery(breakpointQueries.below.desktop);\n  const singletonConfig = props.config.singletons[props.singleton];\n  const branchInfo = useBranchInfo();\n  const [forceValidation, setForceValidation] = useState(false);\n  const schema = useMemo(() => object(singletonConfig.schema), [singletonConfig.schema]);\n  const router = useRouter();\n  const previewHref = useMemo(() => {\n    if (!singletonConfig.previewUrl) return undefined;\n    return singletonConfig.previewUrl.replace('{branch}', branchInfo.currentBranch);\n  }, [branchInfo.currentBranch, singletonConfig.previewUrl]);\n  const isGitHub = isGitHubConfig(props.config) || isCloudConfig(props.config);\n  const formatInfo = getSingletonFormat(props.config, props.singleton);\n  const singletonExists = !!props.initialState;\n  const singletonPath = getSingletonPath(props.config, props.singleton);\n  const viewHref = isGitHub && singletonExists ? `${getRepoUrl(branchInfo)}${formatInfo.dataLocation === 'index' ? `/tree/${branchInfo.currentBranch}/${(_getPathPrefix = getPathPrefix(props.config.storage)) !== null && _getPathPrefix !== void 0 ? _getPathPrefix : ''}${singletonPath}` : `/blob/${(_getPathPrefix2 = getPathPrefix(props.config.storage)) !== null && _getPathPrefix2 !== void 0 ? _getPathPrefix2 : ''}${branchInfo.currentBranch}/${singletonPath}${getDataFileExtension(formatInfo)}`}` : undefined;\n  const menuActions = useMemo(() => {\n    const actions = [{\n      key: 'reset',\n      label: 'Reset',\n      icon: historyIcon\n    }];\n    if (previewHref) {\n      actions.push({\n        key: 'preview',\n        label: 'Preview',\n        icon: externalLinkIcon,\n        href: previewHref,\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      });\n    }\n    if (viewHref) {\n      actions.push({\n        key: 'view',\n        label: 'View on GitHub',\n        icon: githubIcon,\n        href: viewHref,\n        target: '_blank',\n        rel: 'noopener noreferrer'\n      });\n    }\n    return actions;\n  }, [previewHref, viewHref]);\n  const formID = 'singleton-form';\n  const baseCommit = useBaseCommit();\n  const isCreating = props.initialState === null;\n  const onCreate = async () => {\n    if (props.updateResult.kind === 'loading' || !props.hasChanged) return;\n    if (!clientSideValidateProp(schema, props.state, undefined)) {\n      setForceValidation(true);\n      return;\n    }\n    await props.onUpdate();\n  };\n  return /*#__PURE__*/jsxs(PageRoot, {\n    containerWidth: containerWidthForEntryLayout(singletonConfig),\n    children: [/*#__PURE__*/jsxs(PageHeader, {\n      children: [/*#__PURE__*/jsxs(Flex, {\n        flex: true,\n        alignItems: \"center\",\n        gap: \"regular\",\n        children: [/*#__PURE__*/jsx(Heading, {\n          elementType: \"h1\",\n          id: \"page-title\",\n          size: \"small\",\n          children: singletonConfig.label\n        }), props.updateResult.kind === 'loading' ? /*#__PURE__*/jsx(ProgressCircle, {\n          \"aria-label\": `Updating ${singletonConfig.label}`,\n          isIndeterminate: true,\n          size: \"small\",\n          alignSelf: \"center\"\n        }) : props.hasChanged && /*#__PURE__*/jsx(Badge, {\n          tone: \"pending\",\n          children: \"Unsaved\"\n        })]\n      }), /*#__PURE__*/jsx(PresenceAvatars, {}), /*#__PURE__*/jsx(ActionGroup, {\n        buttonLabelBehavior: \"hide\",\n        overflowMode: \"collapse\",\n        prominence: \"low\",\n        density: \"compact\",\n        maxWidth: isBelowDesktop ? 'element.regular' : undefined // force switch to action menu on small devices\n        ,\n        items: menuActions,\n        disabledKeys: props.hasChanged ? [] : ['reset'],\n        onAction: key => {\n          switch (key) {\n            case 'reset':\n              props.onReset();\n              break;\n          }\n        },\n        children: item => /*#__PURE__*/jsxs(Item$1, {\n          textValue: item.label,\n          href: item.href,\n          target: item.target,\n          rel: item.rel,\n          children: [/*#__PURE__*/jsx(Icon, {\n            src: item.icon\n          }), /*#__PURE__*/jsx(Text, {\n            children: item.label\n          })]\n        }, item.key)\n      }), /*#__PURE__*/jsx(Button, {\n        form: formID,\n        isDisabled: props.updateResult.kind === 'loading',\n        prominence: \"high\",\n        type: \"submit\",\n        children: isCreating ? 'Create' : 'Save'\n      })]\n    }), /*#__PURE__*/jsxs(Flex, {\n      elementType: \"form\",\n      id: formID,\n      onSubmit: event => {\n        if (event.target !== event.currentTarget) return;\n        event.preventDefault();\n        onCreate();\n      },\n      direction: \"column\",\n      gap: \"xxlarge\",\n      height: \"100%\",\n      minHeight: 0,\n      minWidth: 0,\n      children: [props.updateResult.kind === 'error' && /*#__PURE__*/jsx(Notice, {\n        tone: \"critical\",\n        children: props.updateResult.error.message\n      }), /*#__PURE__*/jsx(FormForEntry, {\n        previewProps: props.previewProps,\n        forceValidation: forceValidation,\n        entryLayout: singletonConfig.entryLayout,\n        formatInfo: formatInfo,\n        slugField: undefined\n      }), /*#__PURE__*/jsx(DialogContainer\n      // ideally this would be a popover on desktop but using a DialogTrigger wouldn't work since\n      // this doesn't open on click but after doing a network request and it failing and manually wiring about a popover and modal would be a pain\n      , {\n        onDismiss: props.onResetUpdateItem,\n        children: props.updateResult.kind === 'needs-new-branch' && /*#__PURE__*/jsx(CreateBranchDuringUpdateDialog, {\n          branchOid: baseCommit,\n          onCreate: async newBranch => {\n            router.push(`/keystatic/branch/${encodeURIComponent(newBranch)}/singleton/${encodeURIComponent(props.singleton)}`);\n            props.onUpdate({\n              branch: newBranch,\n              sha: baseCommit\n            });\n          },\n          reason: props.updateResult.reason,\n          onDismiss: props.onResetUpdateItem\n        })\n      }), /*#__PURE__*/jsx(DialogContainer\n      // ideally this would be a popover on desktop but using a DialogTrigger\n      // wouldn't work since this doesn't open on click but after doing a\n      // network request and it failing and manually wiring about a popover\n      // and modal would be a pain\n      , {\n        onDismiss: props.onResetUpdateItem,\n        children: props.updateResult.kind === 'needs-fork' && isGitHubConfig(props.config) && /*#__PURE__*/jsx(ForkRepoDialog, {\n          onCreate: async () => {\n            props.onUpdate();\n          },\n          onDismiss: props.onResetUpdateItem,\n          config: props.config\n        })\n      })]\n    })]\n  });\n}\nfunction LocalSingletonPage(props) {\n  const {\n    singleton,\n    initialFiles,\n    initialState,\n    localTreeKey,\n    config,\n    draft\n  } = props;\n  const singletonConfig = config.singletons[singleton];\n  const schema = useMemo(() => object(singletonConfig.schema), [singletonConfig.schema]);\n  const singletonPath = getSingletonPath(config, singleton);\n  const [{\n    state,\n    localTreeKey: localTreeKeyInState\n  }, setState] = useState(() => {\n    var _draft$state;\n    return {\n      localTreeKey: localTreeKey,\n      state: (_draft$state = draft === null || draft === void 0 ? void 0 : draft.state) !== null && _draft$state !== void 0 ? _draft$state : initialState === null ? getInitialPropsValue(schema) : initialState\n    };\n  });\n  useEffect(() => {\n    if (draft && state === draft.state) {\n      showDraftRestoredToast(draft.savedAt, localTreeKey !== draft.treeKey);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [draft]);\n  if (localTreeKeyInState !== localTreeKey) {\n    setState({\n      localTreeKey: localTreeKey,\n      state: initialState === null ? getInitialPropsValue(schema) : initialState\n    });\n  }\n  const isCreating = initialState === null;\n  const hasChanged = useHasChanged({\n    initialState,\n    state,\n    schema,\n    slugField: undefined\n  }) || isCreating;\n  useEffect(() => {\n    const key = ['singleton', singleton];\n    if (hasChanged) {\n      const serialized = serializeEntryToFiles({\n        basePath: singletonPath,\n        config,\n        format: getSingletonFormat(config, singleton),\n        schema: singletonConfig.schema,\n        slug: undefined,\n        state\n      });\n      const files = new Map(serialized.map(x => [x.path, x.contents]));\n      const data = {\n        beforeTreeKey: localTreeKey,\n        files,\n        savedAt: new Date(),\n        version: 1\n      };\n      setDraft(key, data);\n    } else {\n      delDraft(key);\n    }\n  }, [config, localTreeKey, state, hasChanged, singleton, singletonPath, singletonConfig]);\n  const previewProps = useMemo(() => createGetPreviewProps(schema, stateUpdater => {\n    setState(state => ({\n      localTreeKey: state.localTreeKey,\n      state: stateUpdater(state.state)\n    }));\n  }, () => undefined), [schema])(state);\n  const formatInfo = getSingletonFormat(config, singleton);\n  const [updateResult, _update, resetUpdateItem] = useUpsertItem({\n    state,\n    initialFiles,\n    config,\n    schema: singletonConfig.schema,\n    basePath: singletonPath,\n    format: formatInfo,\n    currentLocalTreeKey: localTreeKey,\n    slug: undefined\n  });\n  const update = useEventCallback(_update);\n  const onReset = () => setState({\n    localTreeKey: localTreeKey,\n    state: initialState === null ? getInitialPropsValue(schema) : initialState\n  });\n  return /*#__PURE__*/jsx(SingletonPageInner, {\n    ...props,\n    hasChanged: hasChanged,\n    onReset: onReset,\n    onUpdate: update,\n    onResetUpdateItem: resetUpdateItem,\n    updateResult: updateResult,\n    state: state,\n    previewProps: previewProps\n  });\n}\nfunction CollabSingletonPage(props) {\n  const {\n    singleton,\n    initialFiles,\n    initialState,\n    localTreeKey,\n    config\n  } = props;\n  const singletonConfig = config.singletons[singleton];\n  const schema = useMemo(() => object(singletonConfig.schema), [singletonConfig.schema]);\n  const singletonPath = getSingletonPath(config, singleton);\n  const yjsInfo = useYjs();\n  const state = useYJsValue(schema, props.map);\n  const previewProps = useMemo(() => createGetPreviewPropsFromY(schema, props.map, yjsInfo.awareness), [props.map, schema, yjsInfo.awareness])(state);\n  const isCreating = initialState === null;\n  const hasChanged = useHasChanged({\n    initialState,\n    state,\n    schema,\n    slugField: undefined\n  }) || isCreating;\n  const formatInfo = getSingletonFormat(config, singleton);\n  const [updateResult, _update, resetUpdateItem] = useUpsertItem({\n    state,\n    initialFiles,\n    config,\n    schema: singletonConfig.schema,\n    basePath: singletonPath,\n    format: formatInfo,\n    currentLocalTreeKey: localTreeKey,\n    slug: undefined\n  });\n  const update = useEventCallback(_update);\n  const onReset = () => {\n    props.map.doc.transact(() => {\n      for (const [key, value] of Object.entries(singletonConfig.schema)) {\n        var _props$initialState$k, _props$initialState;\n        const val = getYjsValFromParsedValue(value, (_props$initialState$k = (_props$initialState = props.initialState) === null || _props$initialState === void 0 ? void 0 : _props$initialState[key]) !== null && _props$initialState$k !== void 0 ? _props$initialState$k : getInitialPropsValue(value));\n        props.map.set(key, val);\n      }\n    });\n  };\n  return /*#__PURE__*/jsx(SingletonPageInner, {\n    ...props,\n    hasChanged: hasChanged,\n    onReset: onReset,\n    onUpdate: update,\n    onResetUpdateItem: resetUpdateItem,\n    updateResult: updateResult,\n    state: state,\n    previewProps: previewProps\n  });\n}\nconst storedValSchema = s.type({\n  version: s.literal(1),\n  savedAt: s.date(),\n  beforeTreeKey: s.optional(s.string()),\n  files: s.map(s.string(), s.instance(Uint8Array))\n});\nfunction SingletonPageWrapper(props) {\n  var _props$config$singlet;\n  const singletonConfig = (_props$config$singlet = props.config.singletons) === null || _props$config$singlet === void 0 ? void 0 : _props$config$singlet[props.singleton];\n  if (!singletonConfig) notFound();\n  const header = /*#__PURE__*/jsx(PageHeader, {\n    children: /*#__PURE__*/jsx(Heading, {\n      elementType: \"h1\",\n      id: \"page-title\",\n      size: \"small\",\n      children: singletonConfig.label\n    })\n  });\n  const format = useMemo(() => getSingletonFormat(props.config, props.singleton), [props.config, props.singleton]);\n  const dirpath = getSingletonPath(props.config, props.singleton);\n  const draftData = useData(useCallback(async () => {\n    const raw = await getDraft(['singleton', props.singleton]);\n    if (!raw) throw new Error('No draft found');\n    const stored = storedValSchema.create(raw);\n    const parsed = parseEntry({\n      config: props.config,\n      dirpath,\n      format,\n      schema: singletonConfig.schema,\n      slug: undefined\n    }, stored.files);\n    return {\n      state: parsed.initialState,\n      savedAt: stored.savedAt,\n      treeKey: stored.beforeTreeKey\n    };\n  }, [dirpath, format, props.config, props.singleton, singletonConfig.schema]));\n  const itemData = useItemData({\n    config: props.config,\n    dirpath,\n    schema: singletonConfig.schema,\n    format,\n    slug: undefined\n  });\n  const branchInfo = useBranchInfo();\n  const key = `${branchInfo.currentBranch}/${props.singleton}`;\n  const yjsInfo = useYjsIfAvailable();\n  const isItemDataLoading = itemData.kind === 'loading';\n  const mapData = useData(useCallback(async () => {\n    if (!yjsInfo) return;\n    if (yjsInfo === 'loading') return LOADING;\n    await yjsInfo.doc.whenSynced;\n    if (isItemDataLoading) return LOADING;\n    let doc = yjsInfo.data.get(key);\n    if (doc instanceof Y.Doc) {\n      const promise = doc.whenLoaded;\n      doc.load();\n      await promise;\n    } else {\n      doc = new Y.Doc();\n      yjsInfo.data.set(key, doc);\n    }\n    return doc.getMap('data');\n  }, [yjsInfo, isItemDataLoading, key]));\n  useMemo(() => {\n    if (mapData.kind !== 'loaded' || itemData.kind !== 'loaded' || !mapData.data || mapData.data.size) {\n      return;\n    }\n    const data = mapData.data;\n    data.doc.transact(() => {\n      for (const [key, value] of Object.entries(singletonConfig.schema)) {\n        const val = getYjsValFromParsedValue(value, itemData.data === 'not-found' ? getInitialPropsValue(value) : itemData.data.initialState[key]);\n        data.set(key, val);\n      }\n    });\n  }, [itemData, mapData, singletonConfig]);\n  if (itemData.kind === 'error') {\n    return /*#__PURE__*/jsxs(PageRoot, {\n      children: [header, /*#__PURE__*/jsx(PageBody, {\n        children: /*#__PURE__*/jsx(Notice, {\n          margin: \"xxlarge\",\n          tone: \"critical\",\n          children: itemData.error.message\n        })\n      })]\n    });\n  }\n  if (mapData.kind === 'error') {\n    return /*#__PURE__*/jsxs(PageRoot, {\n      children: [header, /*#__PURE__*/jsx(PageBody, {\n        children: /*#__PURE__*/jsx(Notice, {\n          margin: \"xxlarge\",\n          tone: \"critical\",\n          children: mapData.error.message\n        })\n      })]\n    });\n  }\n  if (itemData.kind === 'loading' || draftData.kind === 'loading' || mapData.kind === 'loading') {\n    return /*#__PURE__*/jsxs(PageRoot, {\n      children: [header, /*#__PURE__*/jsx(PageBody, {\n        children: /*#__PURE__*/jsx(Flex, {\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          minHeight: \"scale.3000\",\n          children: /*#__PURE__*/jsx(ProgressCircle, {\n            \"aria-label\": `Loading ${singletonConfig.label}`,\n            isIndeterminate: true,\n            size: \"large\"\n          })\n        })\n      })]\n    });\n  }\n  if (mapData.data) {\n    return /*#__PURE__*/jsx(CollabSingletonPage, {\n      singleton: props.singleton,\n      config: props.config,\n      initialState: itemData.data === 'not-found' ? null : itemData.data.initialState,\n      initialFiles: itemData.data === 'not-found' ? [] : itemData.data.initialFiles,\n      localTreeKey: itemData.data === 'not-found' ? undefined : itemData.data.localTreeKey,\n      map: mapData.data\n    });\n  }\n  return /*#__PURE__*/jsx(LocalSingletonPage, {\n    singleton: props.singleton,\n    config: props.config,\n    initialState: itemData.data === 'not-found' ? null : itemData.data.initialState,\n    initialFiles: itemData.data === 'not-found' ? [] : itemData.data.initialFiles,\n    localTreeKey: itemData.data === 'not-found' ? undefined : itemData.data.localTreeKey,\n    draft: draftData.kind === 'loaded' ? draftData.data : undefined\n  });\n}\n\nfunction CreatedGitHubApp(props) {\n  return /*#__PURE__*/jsx(Flex, {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    margin: \"xxlarge\",\n    children: /*#__PURE__*/jsxs(Flex, {\n      backgroundColor: \"surface\",\n      padding: \"large\",\n      border: \"color.alias.borderIdle\",\n      borderRadius: \"medium\",\n      direction: \"column\",\n      justifyContent: \"center\",\n      gap: \"xlarge\",\n      maxWidth: \"scale.4600\",\n      children: [/*#__PURE__*/jsx(Heading, {\n        children: \"You've installed Keystatic! \\uD83C\\uDF89\"\n      }), /*#__PURE__*/jsx(Text, {\n        children: \"To start using Keystatic, you need to install the GitHub app you've created.\"\n      }), /*#__PURE__*/jsxs(Text, {\n        children: [\"Make sure to add the App to the\", ' ', /*#__PURE__*/jsx(\"code\", {\n          children: serializeRepoConfig(props.config.storage.repo)\n        }), ' ', \"repository.\"]\n      }), /*#__PURE__*/jsx(InstallGitHubApp, {\n        config: props.config\n      })]\n    })\n  });\n}\n\nfunction KeystaticSetup(props) {\n  const [deployedURL, setDeployedURL] = useState('');\n  const [organization, setOrganization] = useState('');\n  return /*#__PURE__*/jsx(Flex, {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    margin: \"xxlarge\",\n    children: /*#__PURE__*/jsxs(Flex, {\n      backgroundColor: \"surface\",\n      padding: \"large\",\n      border: \"color.alias.borderIdle\",\n      borderRadius: \"medium\",\n      direction: \"column\",\n      justifyContent: \"center\",\n      gap: \"xlarge\",\n      maxWidth: \"scale.4600\",\n      elementType: \"form\",\n      action: `https://github.com${organization ? `/organizations/${organization}` : ''}/settings/apps/new`,\n      method: \"post\",\n      children: [/*#__PURE__*/jsx(Flex, {\n        justifyContent: \"center\",\n        children: /*#__PURE__*/jsx(Heading, {\n          children: \"Keystatic Setup\"\n        })\n      }), /*#__PURE__*/jsx(Text, {\n        children: \"Keystatic doesn't have the required config.\"\n      }), /*#__PURE__*/jsx(Text, {\n        children: \"If you've already created your GitHub app, make sure to add the following environment variables:\"\n      }), /*#__PURE__*/jsxs(Box, {\n        elementType: \"ul\",\n        children: [/*#__PURE__*/jsx(\"li\", {\n          children: /*#__PURE__*/jsx(\"code\", {\n            children: \"KEYSTATIC_GITHUB_CLIENT_ID\"\n          })\n        }), /*#__PURE__*/jsx(\"li\", {\n          children: /*#__PURE__*/jsx(\"code\", {\n            children: \"KEYSTATIC_GITHUB_CLIENT_SECRET\"\n          })\n        }), /*#__PURE__*/jsx(\"li\", {\n          children: /*#__PURE__*/jsx(\"code\", {\n            children: \"KEYSTATIC_SECRET\"\n          })\n        })]\n      }), /*#__PURE__*/jsx(Text, {\n        children: \"If you haven't created your GitHub app for Keystatic, you can create one below.\"\n      }), /*#__PURE__*/jsx(TextField, {\n        label: \"Deployed App URL\",\n        description: \"This should the root of your domain. If you're not sure where Keystatic will be deployed, leave this blank and you can update the GitHub app later.\",\n        value: deployedURL,\n        onChange: setDeployedURL\n      }), /*#__PURE__*/jsx(TextField, {\n        label: \"GitHub organization (if any)\",\n        description: \"You must be an owner or GitHub App manager in the organization to create the GitHub App. Leave this blank to create the app in your personal account.\",\n        value: organization,\n        onChange: setOrganization\n      }), /*#__PURE__*/jsxs(Text, {\n        children: [\"After visiting GitHub to create the GitHub app, you'll be redirected back here and secrets generated from GitHub will be written to your\", ' ', /*#__PURE__*/jsx(\"code\", {\n          children: \".env\"\n        }), \" file.\"]\n      }), /*#__PURE__*/jsx(\"input\", {\n        type: \"text\",\n        name: \"manifest\",\n        className: css({\n          display: 'none'\n        }),\n        value: JSON.stringify({\n          name: `${parseRepoConfig(props.config.storage.repo).owner} Keystatic`,\n          url: deployedURL ? `${deployedURL}/keystatic` : `${window.location.origin}/keystatic`,\n          public: true,\n          redirect_url: `${window.location.origin}/api/keystatic/github/created-app`,\n          callback_urls: [`${window.location.origin}/api/keystatic/github/oauth/callback`, `http://127.0.0.1/api/keystatic/github/oauth/callback`, ...(deployedURL ? [`${deployedURL}/api/keystatic/github/oauth/callback`] : [])],\n          request_oauth_on_install: true,\n          default_permissions: {\n            contents: 'write',\n            metadata: 'read',\n            pull_requests: 'read'\n          }\n        })\n      }), /*#__PURE__*/jsx(Button, {\n        prominence: \"high\",\n        type: \"submit\",\n        children: \"Create GitHub App\"\n      })]\n    })\n  });\n}\n\nfunction RepoNotFound(props) {\n  const repo = serializeRepoConfig(props.config.storage.repo);\n  return /*#__PURE__*/jsx(Flex, {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    margin: \"xxlarge\",\n    children: /*#__PURE__*/jsxs(Flex, {\n      backgroundColor: \"surface\",\n      padding: \"large\",\n      border: \"color.alias.borderIdle\",\n      borderRadius: \"medium\",\n      direction: \"column\",\n      justifyContent: \"center\",\n      gap: \"xlarge\",\n      maxWidth: \"scale.4600\",\n      children: [/*#__PURE__*/jsx(Flex, {\n        justifyContent: \"center\",\n        children: /*#__PURE__*/jsx(Heading, {\n          children: \"Repo not found\"\n        })\n      }), /*#__PURE__*/jsxs(Text, {\n        children: [\"Keystatic is configured for the\", ' ', /*#__PURE__*/jsx(\"a\", {\n          href: `https://github.com/${repo}`,\n          children: repo\n        }), \" GitHub repo but Keystatic isn't able to access this repo. This is either because you don't have access to this repo or you haven't added the GitHub app to it.\"]\n      }), /*#__PURE__*/jsx(InstallGitHubApp, {\n        config: props.config\n      })]\n    })\n  });\n}\n\nconst storedStateSchema = s.object({\n  state: s.string(),\n  from: s.string(),\n  code_verifier: s.string()\n});\nconst tokenResponseSchema = s.type({\n  access_token: s.string(),\n  token_type: s.string(),\n  expires_in: s.number()\n});\nfunction KeystaticCloudAuthCallback({\n  config\n}) {\n  var _config$cloud2;\n  const router = useRouter();\n  const url = new URL(window.location.href);\n  const code = url.searchParams.get('code');\n  const state = url.searchParams.get('state');\n  const storedState = useMemo(() => {\n    const _storedState = localStorage.getItem('keystatic-cloud-state');\n    const storedState = (() => {\n      try {\n        return storedStateSchema.create(JSON.parse(_storedState || ''));\n      } catch {\n        return null;\n      }\n    })();\n    return storedState;\n  }, []);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    var _config$cloud;\n    if (code && state && storedState && (_config$cloud = config.cloud) !== null && _config$cloud !== void 0 && _config$cloud.project) {\n      const {\n        project\n      } = config.cloud;\n      (async () => {\n        const res = await fetch(`${KEYSTATIC_CLOUD_API_URL}/oauth/token`, {\n          method: 'POST',\n          body: new URLSearchParams({\n            code,\n            client_id: project,\n            redirect_uri: `${window.location.origin}/keystatic/cloud/oauth/callback`,\n            code_verifier: storedState.code_verifier,\n            grant_type: 'authorization_code'\n          }).toString(),\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            ...KEYSTATIC_CLOUD_HEADERS\n          }\n        });\n        if (!res.ok) {\n          throw new Error(`Bad response: ${res.status} ${res.statusText}\\n\\n${await res.text()}`);\n        }\n        const data = await res.json();\n        const parsed = tokenResponseSchema.create(data);\n        localStorage.setItem('keystatic-cloud-access-token', JSON.stringify({\n          token: parsed.access_token,\n          project,\n          validUntil: Date.now() + parsed.expires_in * 1000\n        }));\n        router.push(`/keystatic/${storedState.from}`);\n      })().catch(error => {\n        setError(error);\n      });\n    }\n  }, [code, state, router, storedState, config]);\n  if (!((_config$cloud2 = config.cloud) !== null && _config$cloud2 !== void 0 && _config$cloud2.project)) {\n    return /*#__PURE__*/jsx(Text, {\n      children: \"Missing Keystatic Cloud config\"\n    });\n  }\n  if (!code || !state) {\n    return /*#__PURE__*/jsx(Text, {\n      children: \"Missing code or state\"\n    });\n  }\n  if (!storedState || state !== storedState.state) {\n    return /*#__PURE__*/jsx(Text, {\n      children: \"Invalid state\"\n    });\n  }\n  if (error) {\n    return /*#__PURE__*/jsx(Text, {\n      children: error.message\n    });\n  }\n  return /*#__PURE__*/jsx(Flex, {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    height: \"100vh\",\n    children: /*#__PURE__*/jsx(ProgressCircle, {\n      size: \"large\",\n      isIndeterminate: true,\n      \"aria-label\": \"Authenticating\"\n    })\n  });\n}\n\nfunction parseParamsWithoutBranch(params) {\n  if (params.length === 0) {\n    return {};\n  }\n  if (params.length === 2 && params[0] === 'singleton') {\n    return {\n      singleton: params[1]\n    };\n  }\n  if (params.length < 2 || params[0] !== 'collection') return null;\n  const collection = params[1];\n  if (params.length === 2) {\n    return {\n      collection\n    };\n  }\n  if (params.length === 3 && params[2] === 'create') {\n    return {\n      collection,\n      kind: 'create'\n    };\n  }\n  if (params.length === 4 && params[2] === 'item') {\n    const slug = params[3];\n    return {\n      collection,\n      kind: 'edit',\n      slug\n    };\n  }\n  return null;\n}\nfunction RedirectToBranch(props) {\n  const {\n    push\n  } = useRouter();\n  const {\n    data,\n    error\n  } = useContext(GitHubAppShellDataContext);\n  useEffect(() => {\n    var _error$response, _data$repository, _data$repository2, _error$graphQLErrors, _error$graphQLErrors2;\n    if ((error === null || error === void 0 || (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n      if (props.config.storage.kind === 'github') {\n        window.location.href = '/api/keystatic/github/login';\n      } else {\n        redirectToCloudAuth('', props.config);\n      }\n    }\n    if (data !== null && data !== void 0 && (_data$repository = data.repository) !== null && _data$repository !== void 0 && _data$repository.defaultBranchRef) {\n      push(`/keystatic/branch/${encodeURIComponent(data.repository.defaultBranchRef.name)}`);\n    }\n    if (props.config.storage.kind === 'github' && !(data !== null && data !== void 0 && (_data$repository2 = data.repository) !== null && _data$repository2 !== void 0 && _data$repository2.id) && (error === null || error === void 0 || (_error$graphQLErrors = error.graphQLErrors) === null || _error$graphQLErrors === void 0 || (_error$graphQLErrors = _error$graphQLErrors[0]) === null || _error$graphQLErrors === void 0 || (_error$graphQLErrors = _error$graphQLErrors.originalError) === null || _error$graphQLErrors === void 0 ? void 0 : _error$graphQLErrors.type) === 'NOT_FOUND' || (error === null || error === void 0 || (_error$graphQLErrors2 = error.graphQLErrors) === null || _error$graphQLErrors2 === void 0 || (_error$graphQLErrors2 = _error$graphQLErrors2[0]) === null || _error$graphQLErrors2 === void 0 || (_error$graphQLErrors2 = _error$graphQLErrors2.originalError) === null || _error$graphQLErrors2 === void 0 ? void 0 : _error$graphQLErrors2.type) === 'FORBIDDEN') {\n      window.location.href = '/api/keystatic/github/repo-not-found';\n    }\n  }, [data, error, push, props.config]);\n  return null;\n}\nfunction PageInner({\n  config\n}) {\n  var _config$cloud;\n  const {\n    params\n  } = useRouter();\n  let branch = null,\n    parsedParams,\n    basePath;\n  if (params.join('/') === 'cloud/oauth/callback') {\n    return /*#__PURE__*/jsx(KeystaticCloudAuthCallback, {\n      config: config\n    });\n  }\n  let wrapper = x => x;\n  if (isCloudConfig(config) || isLocalConfig(config) && (_config$cloud = config.cloud) !== null && _config$cloud !== void 0 && _config$cloud.project) {\n    wrapper = element => /*#__PURE__*/jsx(CloudInfoProvider, {\n      config: config,\n      children: element\n    });\n  }\n  if (isGitHubConfig(config) || isCloudConfig(config)) {\n    const origWrapper = wrapper;\n    wrapper = element => /*#__PURE__*/jsx(AuthWrapper, {\n      config: config,\n      children: /*#__PURE__*/jsx(GitHubAppShellDataProvider, {\n        config: config,\n        children: origWrapper(element)\n      })\n    });\n    if (params.length === 0) {\n      return wrapper( /*#__PURE__*/jsx(RedirectToBranch, {\n        config: config\n      }));\n    }\n    if (params.length === 1 && isGitHubConfig(config)) {\n      if (params[0] === 'setup') return /*#__PURE__*/jsx(KeystaticSetup, {\n        config: config\n      });\n      if (params[0] === 'repo-not-found') {\n        return /*#__PURE__*/jsx(RepoNotFound, {\n          config: config\n        });\n      }\n      if (params[0] === 'created-github-app') {\n        return /*#__PURE__*/jsx(CreatedGitHubApp, {\n          config: config\n        });\n      }\n    }\n    if (params[0] !== 'branch' || params.length < 2) {\n      return /*#__PURE__*/jsx(Text, {\n        children: \"Not found\"\n      });\n    }\n    branch = params[1];\n    basePath = `/keystatic/branch/${encodeURIComponent(branch)}`;\n    parsedParams = parseParamsWithoutBranch(params.slice(2));\n  } else {\n    parsedParams = parseParamsWithoutBranch(params);\n    basePath = '/keystatic';\n  }\n  return wrapper( /*#__PURE__*/jsx(AppShell, {\n    config: config,\n    currentBranch: branch || '',\n    basePath: basePath,\n    children: /*#__PURE__*/jsx(NotFoundBoundary, {\n      fallback: /*#__PURE__*/jsx(PageRoot, {\n        children: /*#__PURE__*/jsx(PageBody, {\n          children: /*#__PURE__*/jsx(EmptyState, {\n            icon: fileX2Icon,\n            title: \"Not found\",\n            message: \"This page could not be found.\"\n          })\n        })\n      }),\n      children: parsedParams === null ? /*#__PURE__*/jsx(AlwaysNotFound, {}) : parsedParams.collection ? parsedParams.kind === 'create' ? /*#__PURE__*/jsx(CreateItemWrapper, {\n        collection: parsedParams.collection,\n        config: config,\n        basePath: basePath\n      }, parsedParams.collection) : parsedParams.kind === 'edit' ? /*#__PURE__*/jsx(ItemPageWrapper, {\n        collection: parsedParams.collection,\n        basePath: basePath,\n        config: config,\n        itemSlug: parsedParams.slug\n      }, parsedParams.collection) : /*#__PURE__*/jsx(CollectionPage, {\n        basePath: basePath,\n        collection: parsedParams.collection,\n        config: config\n      }, parsedParams.collection) : parsedParams.singleton ? /*#__PURE__*/jsx(SingletonPageWrapper, {\n        config: config,\n        singleton: parsedParams.singleton\n      }, parsedParams.singleton) : /*#__PURE__*/jsx(DashboardPage, {\n        config: config,\n        basePath: basePath\n      })\n    })\n  }));\n}\nfunction AlwaysNotFound() {\n  notFound();\n}\nfunction AuthWrapper(props) {\n  const [state, setState] = useState('unknown');\n  const router = useRouter();\n  useEffect(() => {\n    getAuth(props.config).then(auth => {\n      if (auth) {\n        setState('valid');\n        return;\n      }\n      setState('explicit-auth');\n    });\n  }, [props.config]);\n  if (state === 'valid') {\n    return props.children;\n  }\n  if (state === 'explicit-auth') {\n    if (props.config.storage.kind === 'github') {\n      return /*#__PURE__*/jsx(Flex, {\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"100vh\",\n        children: /*#__PURE__*/jsxs(Button, {\n          href: `/api/keystatic/github/login${router.params.length ? `?${new URLSearchParams({\n            from: router.params.map(encodeURIComponent).join('/')\n          })}` : ''}`\n          // even though we'll never be in an iframe, so this isn't really distinct from _self\n          // it makes react-aria avoid using client-side routing which we need here\n          ,\n          target: \"_top\",\n          children: [/*#__PURE__*/jsx(Icon, {\n            src: githubIcon\n          }), /*#__PURE__*/jsx(Text, {\n            children: \"Log in with GitHub\"\n          })]\n        })\n      });\n    }\n    if (props.config.storage.kind === 'cloud') {\n      return /*#__PURE__*/jsx(Flex, {\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"100vh\",\n        children: /*#__PURE__*/jsx(Button, {\n          onPress: () => {\n            redirectToCloudAuth(router.params.map(encodeURIComponent).join('/'), props.config);\n          },\n          children: /*#__PURE__*/jsx(Text, {\n            children: \"Log in with Keystatic Cloud\"\n          })\n        })\n      });\n    }\n  }\n  return null;\n}\nfunction RedirectToLoopback(props) {\n  useEffect(() => {\n    if (window.location.hostname === 'localhost') {\n      window.location.href = window.location.href.replace('localhost', '127.0.0.1');\n    }\n  }, []);\n  if (window.location.hostname === 'localhost') {\n    return null;\n  }\n  return props.children;\n}\nfunction Keystatic(props) {\n  if (props.config.storage.kind === 'github') {\n    assertValidRepoConfig(props.config.storage.repo);\n  }\n  return /*#__PURE__*/jsx(ClientOnly, {\n    children: /*#__PURE__*/jsx(RedirectToLoopback, {\n      children: /*#__PURE__*/jsx(AppSlugProvider, {\n        value: props.appSlug,\n        children: /*#__PURE__*/jsx(RouterProvider, {\n          children: /*#__PURE__*/jsx(Provider, {\n            config: props.config,\n            children: /*#__PURE__*/jsx(PageInner, {\n              config: props.config\n            })\n          })\n        })\n      })\n    })\n  });\n}\nfunction ClientOnly(props) {\n  const [mounted, setMounted] = useState(false);\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n  if (!mounted) return null;\n  return props.children;\n}\n\nexport { Keystatic };\n", "import { jsxs, Fragment, jsx } from 'react/jsx-runtime';\n\nconst fileX2Icon = /*#__PURE__*/jsxs(Fragment, {\n  children: [/*#__PURE__*/jsx(\"path\", {\n    d: \"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4\"\n  }), /*#__PURE__*/jsx(\"path\", {\n    d: \"M14 2v4a2 2 0 0 0 2 2h4M8 12.5l-5 5M3 12.5l5 5\"\n  })]\n});\n\nexport { fileX2Icon };\n", "import { jsxs, Fragment, jsx } from 'react/jsx-runtime';\n\nconst alertCircleIcon = /*#__PURE__*/jsxs(Fragment, {\n  children: [/*#__PURE__*/jsx(\"circle\", {\n    cx: 12,\n    cy: 12,\n    r: 10\n  }), /*#__PURE__*/jsx(\"path\", {\n    d: \"M12 8v4M12 16h.01\"\n  })]\n});\n\nexport { alertCircleIcon };\n", "import { jsx } from 'react/jsx-runtime';\n\nconst listXIcon = /*#__PURE__*/jsx(\"path\", {\n  d: \"M11 12H3M16 6H3M16 18H3M19 10l-4 4M15 10l4 4\"\n});\n\nexport { listXIcon };\n", "import { jsxs, Fragment, jsx } from 'react/jsx-runtime';\n\nconst searchIcon = /*#__PURE__*/jsxs(Fragment, {\n  children: [/*#__PURE__*/jsx(\"circle\", {\n    cx: 11,\n    cy: 11,\n    r: 8\n  }), /*#__PURE__*/jsx(\"path\", {\n    d: \"m21 21-4.3-4.3\"\n  })]\n});\n\nexport { searchIcon };\n", "import { jsxs, Fragment, jsx } from 'react/jsx-runtime';\n\nconst searchXIcon = /*#__PURE__*/jsxs(Fragment, {\n  children: [/*#__PURE__*/jsx(\"path\", {\n    d: \"m13.5 8.5-5 5M8.5 8.5l5 5\"\n  }), /*#__PURE__*/jsx(\"circle\", {\n    cx: 11,\n    cy: 11,\n    r: 8\n  }), /*#__PURE__*/jsx(\"path\", {\n    d: \"m21 21-4.3-4.3\"\n  })]\n});\n\nexport { searchXIcon };\n", "import { jsx } from 'react/jsx-runtime';\n\nconst diffIcon = /*#__PURE__*/jsx(\"path\", {\n  d: \"M12 3v14M5 10h14M5 21h14\"\n});\n\nexport { diffIcon };\n", "import { jsxs, Fragment, jsx } from 'react/jsx-runtime';\n\nconst plusSquareIcon = /*#__PURE__*/jsxs(Fragment, {\n  children: [/*#__PURE__*/jsx(\"rect\", {\n    width: 18,\n    height: 18,\n    x: 3,\n    y: 3,\n    rx: 2\n  }), /*#__PURE__*/jsx(\"path\", {\n    d: \"M8 12h8M12 8v8\"\n  })]\n});\n\nexport { plusSquareIcon };\n", "import { jsxs, Fragment, jsx } from 'react/jsx-runtime';\n\nconst dotSquareIcon = /*#__PURE__*/jsxs(Fragment, {\n  children: [/*#__PURE__*/jsx(\"rect\", {\n    width: 18,\n    height: 18,\n    x: 3,\n    y: 3,\n    rx: 2\n  }), /*#__PURE__*/jsx(\"circle\", {\n    cx: 12,\n    cy: 12,\n    r: 1\n  })]\n});\n\nexport { dotSquareIcon };\n", "{\n  \"Clear search\": \"مسح البحث\"\n}\n", "{\n  \"Clear search\": \"Изчистване на търсене\"\n}\n", "{\n  \"Clear search\": \"Vymazat hledání\"\n}\n", "{\n  \"Clear search\": \"Ryd søgning\"\n}\n", "{\n  \"Clear search\": \"Suche zurücksetzen\"\n}\n", "{\n  \"Clear search\": \"Απαλοιφή αναζήτησης\"\n}\n", "{\n  \"Clear search\": \"Clear search\"\n}\n", "{\n  \"Clear search\": \"Borrar búsqueda\"\n}\n", "{\n  \"Clear search\": \"Tühjenda otsing\"\n}\n", "{\n  \"Clear search\": \"Tyhjennä haku\"\n}\n", "{\n  \"Clear search\": \"Effacer la recherche\"\n}\n", "{\n  \"Clear search\": \"נקה חיפוש\"\n}\n", "{\n  \"Clear search\": \"Obriši pretragu\"\n}\n", "{\n  \"Clear search\": \"Keresés törlése\"\n}\n", "{\n  \"Clear search\": \"Cancella ricerca\"\n}\n", "{\n  \"Clear search\": \"検索をクリア\"\n}\n", "{\n  \"Clear search\": \"검색 지우기\"\n}\n", "{\n  \"Clear search\": \"Išvalyti iešką\"\n}\n", "{\n  \"Clear search\": \"Notīrīt meklēšanu\"\n}\n", "{\n  \"Clear search\": \"Tøm søk\"\n}\n", "{\n  \"Clear search\": \"Zoekactie wissen\"\n}\n", "{\n  \"Clear search\": \"Wyczyść zawartość wyszukiwania\"\n}\n", "{\n  \"Clear search\": \"Limpar pesquisa\"\n}\n", "{\n  \"Clear search\": \"Limpar pesquisa\"\n}\n", "{\n  \"Clear search\": \"Ştergeţi căutarea\"\n}\n", "{\n  \"Clear search\": \"Очистить поиск\"\n}\n", "{\n  \"Clear search\": \"Vymazať vyhľadávanie\"\n}\n", "{\n  \"Clear search\": \"Počisti iskanje\"\n}\n", "{\n  \"Clear search\": \"Obriši pretragu\"\n}\n", "{\n  \"Clear search\": \"Rensa sökning\"\n}\n", "{\n  \"Clear search\": \"Aramayı temizle\"\n}\n", "{\n  \"Clear search\": \"Очистити пошук\"\n}\n", "{\n  \"Clear search\": \"清除搜索\"\n}\n", "{\n  \"Clear search\": \"清除搜尋條件\"\n}\n", "const _temp0 = require(\"../intl/ar-AE.json\");\nconst _temp1 = require(\"../intl/bg-BG.json\");\nconst _temp2 = require(\"../intl/cs-CZ.json\");\nconst _temp3 = require(\"../intl/da-DK.json\");\nconst _temp4 = require(\"../intl/de-DE.json\");\nconst _temp5 = require(\"../intl/el-GR.json\");\nconst _temp6 = require(\"../intl/en-US.json\");\nconst _temp7 = require(\"../intl/es-ES.json\");\nconst _temp8 = require(\"../intl/et-EE.json\");\nconst _temp9 = require(\"../intl/fi-FI.json\");\nconst _temp10 = require(\"../intl/fr-FR.json\");\nconst _temp11 = require(\"../intl/he-IL.json\");\nconst _temp12 = require(\"../intl/hr-HR.json\");\nconst _temp13 = require(\"../intl/hu-HU.json\");\nconst _temp14 = require(\"../intl/it-IT.json\");\nconst _temp15 = require(\"../intl/ja-JP.json\");\nconst _temp16 = require(\"../intl/ko-KR.json\");\nconst _temp17 = require(\"../intl/lt-LT.json\");\nconst _temp18 = require(\"../intl/lv-LV.json\");\nconst _temp19 = require(\"../intl/nb-NO.json\");\nconst _temp20 = require(\"../intl/nl-NL.json\");\nconst _temp21 = require(\"../intl/pl-PL.json\");\nconst _temp22 = require(\"../intl/pt-BR.json\");\nconst _temp23 = require(\"../intl/pt-PT.json\");\nconst _temp24 = require(\"../intl/ro-RO.json\");\nconst _temp25 = require(\"../intl/ru-RU.json\");\nconst _temp26 = require(\"../intl/sk-SK.json\");\nconst _temp27 = require(\"../intl/sl-SI.json\");\nconst _temp28 = require(\"../intl/sr-SP.json\");\nconst _temp29 = require(\"../intl/sv-SE.json\");\nconst _temp30 = require(\"../intl/tr-TR.json\");\nconst _temp31 = require(\"../intl/uk-UA.json\");\nconst _temp32 = require(\"../intl/zh-CN.json\");\nconst _temp33 = require(\"../intl/zh-TW.json\");\nmodule.exports = {\n  \"ar-AE\": _temp0,\n  \"bg-BG\": _temp1,\n  \"cs-CZ\": _temp2,\n  \"da-DK\": _temp3,\n  \"de-DE\": _temp4,\n  \"el-GR\": _temp5,\n  \"en-US\": _temp6,\n  \"es-ES\": _temp7,\n  \"et-EE\": _temp8,\n  \"fi-FI\": _temp9,\n  \"fr-FR\": _temp10,\n  \"he-IL\": _temp11,\n  \"hr-HR\": _temp12,\n  \"hu-HU\": _temp13,\n  \"it-IT\": _temp14,\n  \"ja-JP\": _temp15,\n  \"ko-KR\": _temp16,\n  \"lt-LT\": _temp17,\n  \"lv-LV\": _temp18,\n  \"nb-NO\": _temp19,\n  \"nl-NL\": _temp20,\n  \"pl-PL\": _temp21,\n  \"pt-BR\": _temp22,\n  \"pt-PT\": _temp23,\n  \"ro-RO\": _temp24,\n  \"ru-RU\": _temp25,\n  \"sk-SK\": _temp26,\n  \"sl-SI\": _temp27,\n  \"sr-SP\": _temp28,\n  \"sv-SE\": _temp29,\n  \"tr-TR\": _temp30,\n  \"uk-UA\": _temp31,\n  \"zh-CN\": _temp32,\n  \"zh-TW\": _temp33\n}", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {AriaButtonProps} from '@react-types/button';\nimport {AriaSearchFieldProps} from '@react-types/searchfield';\nimport {chain} from '@react-aria/utils';\nimport {DOMAttributes, ValidationResult} from '@react-types/shared';\nimport {InputHTMLAttributes, LabelHTMLAttributes, RefObject} from 'react';\n// @ts-ignore\nimport intlMessages from '../intl/*.json';\nimport {SearchFieldState} from '@react-stately/searchfield';\nimport {useLocalizedStringFormatter} from '@react-aria/i18n';\nimport {useTextField} from '@react-aria/textfield';\n\nexport interface SearchFieldAria extends ValidationResult {\n  /** Props for the text field's visible label element (if any). */\n  labelProps: LabelHTMLAttributes<HTMLLabelElement>,\n  /** Props for the input element. */\n  inputProps: InputHTMLAttributes<HTMLInputElement>,\n  /** Props for the clear button. */\n  clearButtonProps: AriaButtonProps,\n  /** Props for the searchfield's description element, if any. */\n  descriptionProps: DOMAttributes,\n  /** Props for the searchfield's error message element, if any. */\n  errorMessageProps: DOMAttributes\n}\n\n/**\n * Provides the behavior and accessibility implementation for a search field.\n * @param props - Props for the search field.\n * @param state - State for the search field, as returned by `useSearchFieldState`.\n * @param inputRef - A ref to the input element.\n */\nexport function useSearchField(\n  props: AriaSearchFieldProps,\n  state: SearchFieldState,\n  inputRef: RefObject<HTMLInputElement>\n): SearchFieldAria {\n  let stringFormatter = useLocalizedStringFormatter(intlMessages, '@react-aria/searchfield');\n  let {\n    isDisabled,\n    isReadOnly,\n    onSubmit = () => {},\n    onClear,\n    type = 'search'\n  } = props;\n\n  let onKeyDown = (e) => {\n    const key = e.key;\n\n    if (key === 'Enter') {\n      e.preventDefault();\n    }\n\n    if (isDisabled || isReadOnly) {\n      return;\n    }\n\n    if (key === 'Enter') {\n      onSubmit(state.value);\n    }\n\n    if (key === 'Escape') {\n      if (state.value === '') {\n        e.continuePropagation();\n      } else {\n        state.setValue('');\n        if (onClear) {\n          onClear();\n        }\n      }\n    }\n  };\n\n  let onClearButtonClick = () => {\n    state.setValue('');\n\n    if (onClear) {\n      onClear();\n    }\n  };\n\n  let onPressStart = () => {\n    // this is in PressStart for mobile so that touching the clear button doesn't remove focus from\n    // the input and close the keyboard\n    inputRef.current?.focus();\n  };\n\n  let {labelProps, inputProps, descriptionProps, errorMessageProps, ...validation} = useTextField({\n    ...props,\n    value: state.value,\n    onChange: state.setValue,\n    onKeyDown: !isReadOnly ? chain(onKeyDown, props.onKeyDown) : props.onKeyDown,\n    type\n  }, inputRef);\n\n  return {\n    labelProps,\n    inputProps: {\n      ...inputProps,\n      // already handled by useSearchFieldState\n      defaultValue: undefined\n    },\n    clearButtonProps: {\n      'aria-label': stringFormatter.format('Clear search'),\n      excludeFromTabOrder: true,\n      // @ts-ignore\n      preventFocusOnPress: true,\n      isDisabled: isDisabled || isReadOnly,\n      onPress: onClearButtonClick,\n      onPressStart\n    },\n    descriptionProps,\n    errorMessageProps,\n    ...validation\n  };\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {SearchFieldProps} from '@react-types/searchfield';\nimport {useControlledState} from '@react-stately/utils';\n\nexport interface SearchFieldState {\n  /** The current value of the search field. */\n  readonly value: string,\n\n  /** Sets the value of the search field. */\n  setValue(value: string): void\n}\n\n/**\n * Provides state management for a search field.\n */\nexport function useSearchFieldState(props: SearchFieldProps): SearchFieldState {\n  let [value, setValue] = useControlledState(toString(props.value), toString(props.defaultValue) || '', props.onChange);\n\n  return {\n    value,\n    setValue\n  };\n}\n\nfunction toString(val) {\n  if (val == null) {\n    return;\n  }\n\n  return val.toString();\n}\n", "'use client';\nimport { useSearchField } from '@react-aria/searchfield';\nimport { useObjectRef } from '@react-aria/utils';\nimport { useSearchFieldState } from '@react-stately/searchfield';\nimport { forwardRef } from 'react';\nimport { ClearButton } from '@keystar/ui/button';\nimport { searchIcon } from '@keystar/ui/icon/icons/searchIcon';\nimport { Icon } from '@keystar/ui/icon';\nimport { Flex } from '@keystar/ui/layout';\nimport { css } from '@keystar/ui/style';\nimport { TextFieldPrimitive } from '@keystar/ui/text-field';\nimport { jsx } from 'react/jsx-runtime';\n\n/** Search fields are text fields, specifically designed for search behaviour. */\nconst SearchField = /*#__PURE__*/forwardRef(function SearchField(props, forwardedRef) {\n  const {\n    autoFocus,\n    description,\n    errorMessage,\n    id,\n    isDisabled,\n    isReadOnly,\n    isRequired,\n    label,\n    showIcon = true,\n    ...styleProps\n  } = props;\n  let domRef = useObjectRef(forwardedRef);\n  let state = useSearchFieldState(props);\n  let {\n    labelProps,\n    inputProps,\n    clearButtonProps,\n    descriptionProps,\n    errorMessageProps\n  } = useSearchField(props, state, domRef);\n  let clearButtonVisible = state.value !== '' && !props.isReadOnly;\n  let clearButton = /*#__PURE__*/jsx(ClearButton, {\n    ...clearButtonProps,\n    preventFocus: true,\n    isDisabled: isDisabled\n  });\n  let startElement = /*#__PURE__*/jsx(Flex, {\n    alignItems: \"center\",\n    flexShrink: 0,\n    justifyContent: \"center\",\n    pointerEvents: \"none\",\n    width: \"element.regular\",\n    children: /*#__PURE__*/jsx(Icon, {\n      src: searchIcon,\n      color: props.isDisabled ? 'color.alias.foregroundDisabled' : 'neutralSecondary'\n    })\n  });\n  return /*#__PURE__*/jsx(TextFieldPrimitive, {\n    ref: domRef,\n    ...styleProps,\n    isDisabled: isDisabled,\n    isReadOnly: isReadOnly,\n    isRequired: isRequired,\n    label: label,\n    labelProps: labelProps,\n    inputProps: inputProps,\n    inputWrapperProps: {\n      className: css({\n        input: {\n          '&[data-adornment=\"start\"]': {\n            paddingInlineStart: 0\n          },\n          '&[data-adornment=\"end\"]': {\n            paddingInlineEnd: 0\n          },\n          '&[data-adornment=\"both\"]': {\n            paddingInline: 0\n          }\n        }\n      })\n    },\n    description: description,\n    descriptionProps: descriptionProps,\n    errorMessage: errorMessage,\n    errorMessageProps: errorMessageProps,\n    startElement: showIcon && startElement,\n    endElement: clearButtonVisible && clearButton\n  });\n});\n\nexport { SearchField };\n", "/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {ColumnSize} from '@react-types/table';\nimport {Key} from '@react-types/shared';\n\n// numbers and percents are considered static. *fr units or a lack of units are considered dynamic.\nexport function isStatic(width: number | string): boolean {\n  return width != null && (!isNaN(width as number) || (String(width)).match(/^(\\d+)(?=%$)/) !== null);\n}\n\nexport function parseFractionalUnit(width: string): number {\n  if (!width) {\n    return 1;\n  }\n  let match = width.match(/^(.+)(?=fr$)/);\n  // if width is the incorrect format, just default it to a 1fr\n  if (!match) {\n    console.warn(`width: ${width} is not a supported format, width should be a number (ex. 150), percentage (ex. '50%') or fr unit (ex. '2fr')`,\n      'defaulting to \\'1fr\\'');\n    return 1;\n  }\n  return parseFloat(match[0]);\n}\n\nexport function parseStaticWidth(width: number | string, tableWidth: number): number {\n  if (typeof width === 'string') {\n    let match = width.match(/^(\\d+)(?=%$)/);\n    if (!match) {\n      throw new Error('Only percentages or numbers are supported for static column widths');\n    }\n    return tableWidth * (parseFloat(match[0]) / 100);\n  }\n  return width;\n}\n\n\nexport function getMaxWidth(maxWidth: number | string, tableWidth: number): number {\n  return maxWidth != null\n    ? parseStaticWidth(maxWidth, tableWidth)\n    : Number.MAX_SAFE_INTEGER;\n}\n\n// cannot support FR units, we'd need to know everything else in the table to do that\nexport function getMinWidth(minWidth: number | string, tableWidth: number): number {\n  return minWidth != null\n    ? parseStaticWidth(minWidth, tableWidth)\n    : 0;\n}\n\n\nexport interface IColumn {\n  minWidth?: number | string,\n  maxWidth?: number | string,\n  width?: number | string,\n  defaultWidth?: number | string,\n  key?: Key\n}\n\n/**\n * Implements the flex algorithm described in https://www.w3.org/TR/css-flexbox-1/#layout-algorithm\n * It makes a few constraint/assumptions:\n * 1. All basis values are 0 unless it is a static width, then the basis is the static width\n * 2. All flex grow and shrink values are equal to the FR specified on the column, grow and shrink for the same column are equal\n * 3. We only have one row\n * An example of the setup can be seen here https://jsfiddle.net/snowystinger/wv0ymjaf/61/ where I let the browser figure out the\n * flex of the columns.\n * Note: We differ in one key aspect, all of our column widths must be whole numbers, so we avoid browser\n * sub pixel rounding errors. To do this, we use a cascading rounding algorithm to ensure that the sum of the widths is maintained\n * while distributing the rounding remainder across the columns.\n *\n * As noted in the chrome source code, this algorithm is very accurate, but has the potential to be quadratic.\n * They have deemed this to be acceptable because the number of elements is usually small and the flex factors\n * are usually not high variance. I believe we can make the same assumptions. Particularly once resizing is\n * started, it will convert all columns to the left to static widths, so it will cut down on the number of FR columns.\n *\n * There are likely faster ways to do this, I've chosen to stick to the spec as closely as possible for readability, accuracy, and for the\n * note that this behaving quadratically is unlikely to be a problem.\n * @param availableWidth - The visible width of the table.\n * @param columns - The table defined columns.\n * @param changedColumns - Any columns we want to override, for example, during resizing.\n * @param getDefaultWidth - A function that returns the default width of a column by its index.\n * @param getDefaultMinWidth - A function that returns the default min width of a column by its index.\n */\nexport function calculateColumnSizes(availableWidth: number, columns: IColumn[], changedColumns: Map<Key, ColumnSize>, getDefaultWidth, getDefaultMinWidth) {\n  let hasNonFrozenItems = false;\n  let flexItems = columns.map((column, index) => {\n    let width = changedColumns.get(column.key) != null ? changedColumns.get(column.key) : column.width ?? column.defaultWidth ?? getDefaultWidth?.(index) ?? '1fr';\n    let frozen = false;\n    let baseSize = 0;\n    let flex = 0;\n    let targetMainSize = null;\n    if (isStatic(width)) {\n      baseSize = parseStaticWidth(width, availableWidth);\n      frozen = true;\n    } else {\n      flex = parseFractionalUnit(width);\n      if (flex <= 0) {\n        frozen = true;\n      }\n    }\n\n    let min = getMinWidth(column.minWidth ?? getDefaultMinWidth?.(index) ?? 0, availableWidth);\n    let max = getMaxWidth(column.maxWidth, availableWidth);\n    let hypotheticalMainSize = Math.max(min, Math.min(baseSize, max));\n\n    // 9.7.1\n    // We don't make use of flex basis, it's always 0, so we are always in 'grow' mode.\n    // 9.7.2\n    if (frozen) {\n      targetMainSize = hypotheticalMainSize;\n    } else if (baseSize > hypotheticalMainSize) {\n      frozen = true;\n      targetMainSize = hypotheticalMainSize;\n    }\n\n    // 9.7.3\n    if (!frozen) {\n      hasNonFrozenItems = true;\n    }\n    return {\n      frozen,\n      baseSize,\n      hypotheticalMainSize,\n      min,\n      max,\n      flex,\n      targetMainSize,\n      violation: 0\n    };\n  });\n\n  // 9.7.4\n  // 9.7.4.a\n  while (hasNonFrozenItems) {\n    // 9.7.4.b\n    /**\n     * Calculate the remaining free space as for initial free space,\n     * above (9.7.3). If the sum of the unfrozen flex items’ flex factors is\n     * less than one, multiply the initial free space by this sum (of flex factors).\n     * If the magnitude of this value is less than the magnitude of\n     * the remaining free space, use this as the remaining free space.\n     */\n    let usedWidth = 0;\n    let flexFactors = 0;\n    flexItems.forEach(item => {\n      if (item.frozen) {\n        usedWidth += item.targetMainSize;\n      } else {\n        usedWidth += item.baseSize;\n        flexFactors += item.flex;\n      }\n    });\n\n    let remainingFreeSpace = availableWidth - usedWidth;\n    // we only support integer FR's, and because of hasNonFrozenItems, we know that flexFactors > 0\n    // so no need to check for flexFactors < 1\n    // 9.7.4.c\n    /**\n     * If the remaining free space is zero\n     * - Do nothing.\n     * Else // remember, we're always in grow mode\n     * - Find the ratio of the item’s flex grow factor to the\n     * sum of the flex grow factors of all unfrozen items on\n     * the line. Set the item’s target main size to its flex\n     * base size plus a fraction of the remaining free space\n     * proportional to the ratio.\n     */\n    if (remainingFreeSpace > 0) {\n      flexItems.forEach((item) => {\n        if (!item.frozen) {\n          let ratio = item.flex / flexFactors;\n          item.targetMainSize = item.baseSize + (ratio * remainingFreeSpace);\n        }\n      });\n    }\n\n    // 9.7.4.d\n    /**\n     * Fix min/max violations. Clamp each non-frozen item’s\n     * target main size by its used min and max main sizes\n     * and floor its content-box size at zero. If the item’s\n     * target main size was made smaller by this, it’s a max\n     * violation. If the item’s target main size was made\n     * larger by this, it’s a min violation.\n     */\n    let totalViolation = 0;\n    flexItems.forEach(item => {\n      item.violation = 0;\n      if (!item.frozen) {\n        let {min, max, targetMainSize} = item;\n        item.targetMainSize = Math.max(min, Math.min(targetMainSize, max));\n\n        item.violation = item.targetMainSize - targetMainSize;\n        totalViolation += item.violation;\n      }\n    });\n\n    // 9.7.4.e\n    /**\n     * Freeze over-flexed items. The total violation is the\n     * sum of the adjustments from the previous step\n     * ∑(clamped size - unclamped size). If the total violation is:\n     * Zero\n     * - Freeze all items.\n     *\n     * Positive\n     * - Freeze all the items with min violations.\n     *\n     * Negative\n     * - Freeze all the items with max violations.\n     */\n    hasNonFrozenItems = false;\n    flexItems.forEach(item => {\n      if (totalViolation === 0 || Math.sign(totalViolation) === Math.sign(item.violation)) {\n        item.frozen = true;\n      } else if (!item.frozen) {\n        hasNonFrozenItems = true;\n      }\n    });\n  }\n\n  return cascadeRounding(flexItems);\n}\n\nfunction cascadeRounding(flexItems): number[] {\n  /*\n  Given an array of floats that sum to an integer, this rounds the floats\n  and returns an array of integers with the same sum.\n  */\n\n  let fpTotal = 0;\n  let intTotal = 0;\n  let roundedArray = [];\n  flexItems.forEach(function (item) {\n    let float = item.targetMainSize;\n    let integer = Math.round(float + fpTotal) - intTotal;\n    fpTotal += float;\n    intTotal += integer;\n    roundedArray.push(integer);\n  });\n\n  return roundedArray;\n}\n", "/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {\n  calculateColumnSizes,\n  getMaxWidth,\n  getMinWidth,\n  isStatic,\n  parseFractionalUnit\n} from './TableUtils';\nimport {ColumnSize, TableCollection} from '@react-types/table';\nimport {GridNode} from '@react-types/grid';\nimport {Key} from '@react-types/shared';\n\nexport interface TableColumnLayoutOptions<T> {\n  getDefaultWidth?: (column: GridNode<T>) => ColumnSize | null | undefined,\n  getDefaultMinWidth?: (column: GridNode<T>) => ColumnSize | null | undefined\n}\n\nexport class TableColumnLayout<T> {\n  getDefaultWidth: (column: GridNode<T>) => ColumnSize | null | undefined;\n  getDefaultMinWidth: (column: GridNode<T>) => ColumnSize | null | undefined;\n  columnWidths: Map<Key, number> = new Map();\n  columnMinWidths: Map<Key, number> = new Map();\n  columnMaxWidths: Map<Key, number> = new Map();\n\n  constructor(options: TableColumnLayoutOptions<T>) {\n    this.getDefaultWidth = options?.getDefaultWidth ?? (() => '1fr');\n    this.getDefaultMinWidth = options?.getDefaultMinWidth ?? (() => 75);\n  }\n\n  /** Takes an array of columns and splits it into 2 maps of columns with controlled and columns with uncontrolled widths. */\n  splitColumnsIntoControlledAndUncontrolled(columns: Array<GridNode<T>>): [Map<Key, GridNode<T>>, Map<Key, GridNode<T>>] {\n    return columns.reduce((acc, col) => {\n      if (col.props.width != null) {\n        acc[0].set(col.key, col);\n      } else {\n        acc[1].set(col.key, col);\n      }\n      return acc;\n    }, [new Map(), new Map()]);\n  }\n\n  /** Takes uncontrolled and controlled widths and joins them into a single Map. */\n  recombineColumns(columns: Array<GridNode<T>>, uncontrolledWidths: Map<Key, ColumnSize>, uncontrolledColumns: Map<Key, GridNode<T>>, controlledColumns: Map<Key, GridNode<T>>): Map<Key, ColumnSize> {\n    return new Map(columns.map(col => {\n      if (uncontrolledColumns.has(col.key)) {\n        return [col.key, uncontrolledWidths.get(col.key)];\n      } else {\n        return [col.key, controlledColumns.get(col.key).props.width];\n      }\n    }));\n  }\n\n  /** Used to make an initial Map of the uncontrolled widths based on default widths. */\n  getInitialUncontrolledWidths(uncontrolledColumns: Map<Key, GridNode<T>>): Map<Key, ColumnSize> {\n    return new Map(Array.from(uncontrolledColumns).map(([key, col]) =>\n      [key, col.props.defaultWidth ?? this.getDefaultWidth?.(col) ?? '1fr']\n    ));\n  }\n\n  getColumnWidth(key: Key): number {\n    return this.columnWidths.get(key) ?? 0;\n  }\n\n  getColumnMinWidth(key: Key): number {\n    return this.columnMinWidths.get(key) ?? 0;\n  }\n\n  getColumnMaxWidth(key: Key): number {\n    return this.columnMaxWidths.get(key) ?? 0;\n  }\n\n  resizeColumnWidth(tableWidth: number, collection: TableCollection<T>, controlledWidths: Map<Key, ColumnSize>, uncontrolledWidths: Map<Key, ColumnSize>, col = null, width: number): Map<Key, ColumnSize> {\n    let prevColumnWidths = this.columnWidths;\n    // resizing a column\n    let resizeIndex = Infinity;\n    let resizingChanged = new Map<Key, ColumnSize>([...controlledWidths, ...uncontrolledWidths]);\n    let percentKeys = new Map();\n    let frKeysToTheRight = new Map();\n    let minWidths = new Map();\n    // freeze columns to the left to their previous pixel value\n    collection.columns.forEach((column, i) => {\n      let frKey;\n      let frValue;\n      minWidths.set(column.key, this.getDefaultMinWidth(collection.columns[i]));\n      if (col !== column.key && !column.props.width && !isStatic(uncontrolledWidths.get(column.key))) {\n        // uncontrolled don't have props.width for us, so instead get from our state\n        frKey = column.key;\n        frValue = parseFractionalUnit(uncontrolledWidths.get(column.key) as string);\n      } else if (col !== column.key && !isStatic(column.props.width) && !uncontrolledWidths.get(column.key)) {\n        // controlledWidths will be the same in the collection\n        frKey = column.key;\n        frValue = parseFractionalUnit(column.props.width);\n      } else if (col !== column.key && column.props.width?.endsWith?.('%')) {\n        percentKeys.set(column.key, column.props.width);\n      }\n      // don't freeze columns to the right of the resizing one\n      if (resizeIndex < i) {\n        if (frKey) {\n          frKeysToTheRight.set(frKey, frValue);\n        }\n        return;\n      }\n      // we already know the new size of the resizing column\n      if (column.key === col) {\n        resizeIndex = i;\n        resizingChanged.set(column.key, Math.floor(width));\n        return;\n      }\n      // freeze column to previous value\n      resizingChanged.set(column.key, prevColumnWidths.get(column.key));\n    });\n\n    // predict pixels sizes for all columns based on resize\n    let columnWidths = calculateColumnSizes(\n      tableWidth,\n      collection.columns.map(col => ({...col.props, key: col.key})),\n      resizingChanged,\n      (i) => this.getDefaultWidth(collection.columns[i]),\n      (i) => this.getDefaultMinWidth(collection.columns[i])\n    );\n\n    // set all new column widths for onResize event\n    // columns going in will be the same order as the columns coming out\n    let newWidths = new Map<Key, ColumnSize>();\n    // set all column widths based on calculateColumnSize\n    columnWidths.forEach((width, index) => {\n      let key = collection.columns[index].key;\n      newWidths.set(key, width);\n    });\n\n    // add FR's back as they were to columns to the right\n    Array.from(frKeysToTheRight).forEach(([key]) => {\n      newWidths.set(key, `${frKeysToTheRight.get(key)}fr`);\n    });\n\n    // put back in percents\n    Array.from(percentKeys).forEach(([key, width]) => {\n      // resizing locks a column to a px width\n      if (key === col) {\n        return;\n      }\n      newWidths.set(key, width);\n    });\n    return newWidths;\n  }\n\n  buildColumnWidths(tableWidth: number, collection: TableCollection<T>, widths: Map<Key, ColumnSize>) {\n    this.columnWidths = new Map();\n    this.columnMinWidths = new Map();\n    this.columnMaxWidths = new Map();\n\n    // initial layout or table/window resizing\n    let columnWidths = calculateColumnSizes(\n      tableWidth,\n      collection.columns.map(col => ({...col.props, key: col.key})),\n      widths,\n      (i) => this.getDefaultWidth(collection.columns[i]),\n      (i) => this.getDefaultMinWidth(collection.columns[i])\n    );\n\n    // columns going in will be the same order as the columns coming out\n    columnWidths.forEach((width, index) => {\n      let key = collection.columns[index].key;\n      let column = collection.columns[index];\n      this.columnWidths.set(key, width);\n      this.columnMinWidths.set(key, getMinWidth(column.props.minWidth ?? this.getDefaultMinWidth(column), tableWidth));\n      this.columnMaxWidths.set(key, getMaxWidth(column.props.maxWidth, tableWidth));\n    });\n    return this.columnWidths;\n  }\n}\n", "import {getChildNodes, getFirstItem, getLastItem} from '@react-stately/collections';\nimport {GridCollection, GridNode} from '@react-types/grid';\nimport {Key} from '@react-types/shared';\nimport {MultipleSelectionStateProps, SelectionManager, useMultipleSelectionState} from '@react-stately/selection';\nimport {useEffect, useMemo, useRef} from 'react';\n\nexport interface GridState<T, C extends GridCollection<T>> {\n  collection: C,\n  /** A set of keys for rows that are disabled. */\n  disabledKeys: Set<Key>,\n  /** A selection manager to read and update row selection state. */\n  selectionManager: SelectionManager,\n  /** Whether keyboard navigation is disabled, such as when the arrow keys should be handled by a component within a cell. */\n  isKeyboardNavigationDisabled: boolean\n}\n\nexport interface GridStateOptions<T, C extends GridCollection<T>> extends MultipleSelectionStateProps {\n  collection: C,\n  disabledKeys?: Iterable<Key>,\n  focusMode?: 'row' | 'cell'\n}\n\n/**\n * Provides state management for a grid component. Handles row selection and focusing a grid cell's focusable child if applicable.\n */\nexport function useGridState<T extends object, C extends GridCollection<T>>(props: GridStateOptions<T, C>): GridState<T, C> {\n  let {collection, focusMode} = props;\n  let selectionState = useMultipleSelectionState(props);\n  let disabledKeys = useMemo(() =>\n      props.disabledKeys ? new Set(props.disabledKeys) : new Set<Key>()\n    , [props.disabledKeys]);\n\n  let setFocusedKey = selectionState.setFocusedKey;\n  selectionState.setFocusedKey = (key, child) => {\n    // If focusMode is cell and an item is focused, focus a child cell instead.\n    if (focusMode === 'cell' && key != null) {\n      let item = collection.getItem(key);\n      if (item?.type === 'item') {\n        let children = getChildNodes(item, collection);\n        if (child === 'last') {\n          key = getLastItem(children)?.key;\n        } else {\n          key = getFirstItem(children)?.key;\n        }\n      }\n    }\n\n    setFocusedKey(key, child);\n  };\n\n  let selectionManager = useMemo(() =>\n    new SelectionManager(collection, selectionState)\n    , [collection, selectionState]\n  );\n\n  // Reset focused key if that item is deleted from the collection.\n  const cachedCollection = useRef(null);\n  useEffect(() => {\n    if (selectionState.focusedKey != null && !collection.getItem(selectionState.focusedKey)) {\n      const node = cachedCollection.current.getItem(selectionState.focusedKey);\n      const parentNode =\n        node.parentKey != null && (node.type === 'cell' || node.type === 'rowheader' || node.type === 'column') ?\n        cachedCollection.current.getItem(node.parentKey) :\n        node;\n      const cachedRows = cachedCollection.current.rows;\n      const rows = collection.rows;\n      const diff = cachedRows.length - rows.length;\n      let index = Math.min(\n        (\n          diff > 1 ?\n          Math.max(parentNode.index - diff + 1, 0) :\n          parentNode.index\n        ),\n        rows.length - 1);\n      let newRow:GridNode<T>;\n      while (index >= 0) {\n        if (!selectionManager.isDisabled(rows[index].key) && rows[index].type !== 'headerrow') {\n          newRow = rows[index];\n          break;\n        }\n        // Find next, not disabled row.\n        if (index < rows.length - 1) {\n          index++;\n        // Otherwise, find previous, not disabled row.\n        } else {\n          if (index > parentNode.index) {\n            index = parentNode.index;\n          }\n          index--;\n        }\n      }\n      if (newRow) {\n        const childNodes = newRow.hasChildNodes ? [...getChildNodes(newRow, collection)] : [];\n        const keyToFocus =\n          newRow.hasChildNodes &&\n          parentNode !== node &&\n          node.index < childNodes.length ?\n          childNodes[node.index].key :\n          newRow.key;\n        selectionState.setFocusedKey(keyToFocus);\n      } else {\n        selectionState.setFocusedKey(null);\n      }\n    }\n    cachedCollection.current = collection;\n  }, [collection, selectionManager, selectionState, selectionState.focusedKey]);\n\n  return {\n    collection,\n    disabledKeys,\n    isKeyboardNavigationDisabled: false,\n    selectionManager\n  };\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {GridNode, GridRow, GridCollection as IGridCollection} from '@react-types/grid';\nimport {Key} from '@react-types/shared';\n\ninterface GridCollectionOptions<T> {\n  columnCount: number,\n  items: GridRow<T>[],\n  visitNode?: (cell: GridNode<T>) => GridNode<T>\n}\n\nexport class GridCollection<T> implements IGridCollection<T> {\n  keyMap: Map<Key, GridNode<T>> = new Map();\n  columnCount: number;\n  rows: GridNode<T>[];\n\n  constructor(opts?: GridCollectionOptions<T>) {\n    this.keyMap = new Map();\n    this.columnCount = opts?.columnCount;\n    this.rows = [];\n\n    let visit = (node: GridNode<T>) => {\n      // If the node is the same object as the previous node for the same key,\n      // we can skip this node and its children. We always visit columns though,\n      // because we depend on order to build the columns array.\n      let prevNode = this.keyMap.get(node.key);\n      if (opts.visitNode) {\n        node = opts.visitNode(node);\n      }\n\n      this.keyMap.set(node.key, node);\n\n      let childKeys = new Set();\n      let last: GridNode<T>;\n      for (let child of node.childNodes) {\n        if (child.type === 'cell' && child.parentKey == null) {\n          // if child is a cell parent key isn't already established by the collection, match child node to parent row\n          child.parentKey = node.key;\n        }\n        childKeys.add(child.key);\n\n        if (last) {\n          last.nextKey = child.key;\n          child.prevKey = last.key;\n        } else {\n          child.prevKey = null;\n        }\n\n        visit(child);\n        last = child;\n      }\n\n      if (last) {\n        last.nextKey = null;\n      }\n\n      // Remove deleted nodes and their children from the key map\n      if (prevNode) {\n        for (let child of prevNode.childNodes) {\n          if (!childKeys.has(child.key)) {\n            remove(child);\n          }\n        }\n      }\n    };\n\n    let remove = (node: GridNode<T>) => {\n      this.keyMap.delete(node.key);\n      for (let child of node.childNodes) {\n        if (this.keyMap.get(child.key) === child) {\n          remove(child);\n        }\n      }\n    };\n\n    let last: GridNode<T>;\n    opts.items.forEach((node, i) => {\n      let rowNode = {\n        level: 0,\n        key: 'row-' + i,\n        type: 'row',\n        value: undefined,\n        hasChildNodes: true,\n        childNodes: [...node.childNodes],\n        rendered: undefined,\n        textValue: undefined,\n        ...node\n      } as GridNode<T>;\n\n      if (last) {\n        last.nextKey = rowNode.key;\n        rowNode.prevKey = last.key;\n      } else {\n        rowNode.prevKey = null;\n      }\n\n      this.rows.push(rowNode);\n      visit(rowNode);\n\n      last = rowNode;\n    });\n\n    if (last) {\n      last.nextKey = null;\n    }\n  }\n\n  *[Symbol.iterator]() {\n    yield* [...this.rows];\n  }\n\n  get size() {\n    return [...this.rows].length;\n  }\n\n  getKeys() {\n    return this.keyMap.keys();\n  }\n\n  getKeyBefore(key: Key) {\n    let node = this.keyMap.get(key);\n    return node ? node.prevKey : null;\n  }\n\n  getKeyAfter(key: Key) {\n    let node = this.keyMap.get(key);\n    return node ? node.nextKey : null;\n  }\n\n  getFirstKey() {\n    return [...this.rows][0]?.key;\n  }\n\n  getLastKey() {\n    let rows = [...this.rows];\n    return rows[rows.length - 1]?.key;\n  }\n\n  getItem(key: Key) {\n    return this.keyMap.get(key);\n  }\n\n  at(idx: number) {\n    const keys = [...this.getKeys()];\n    return this.getItem(keys[idx]);\n  }\n\n  getChildren(key: Key): Iterable<GridNode<T>> {\n    let node = this.keyMap.get(key);\n    return node?.childNodes || [];\n  }\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {getFirstItem, getLastItem} from '@react-stately/collections';\nimport {GridCollection} from '@react-stately/grid';\nimport {GridNode} from '@react-types/grid';\nimport {TableCollection as ITableCollection} from '@react-types/table';\nimport {Key} from '@react-types/shared';\n\ninterface GridCollectionOptions {\n  showSelectionCheckboxes?: boolean,\n  showDragButtons?: boolean\n}\n\nconst ROW_HEADER_COLUMN_KEY = 'row-header-column-' + Math.random().toString(36).slice(2);\nlet ROW_HEADER_COLUMN_KEY_DRAG = 'row-header-column-' + Math.random().toString(36).slice(2);\nwhile (ROW_HEADER_COLUMN_KEY === ROW_HEADER_COLUMN_KEY_DRAG) {\n  ROW_HEADER_COLUMN_KEY_DRAG = 'row-header-column-' + Math.random().toString(36).slice(2);\n}\n\n/** @private */\nexport function buildHeaderRows<T>(keyMap: Map<Key, GridNode<T>>, columnNodes: GridNode<T>[]): GridNode<T>[] {\n  if (columnNodes.length === 0) {\n    return [];\n  }\n\n  let columns: GridNode<T>[][] = [];\n  let seen = new Map();\n  for (let column of columnNodes) {\n    let parentKey = column.parentKey;\n    let col = [column];\n\n    while (parentKey) {\n      let parent: GridNode<T> = keyMap.get(parentKey);\n      if (!parent) {\n        break;\n      }\n\n      // If we've already seen this parent, than it is shared\n      // with a previous column. If the current column is taller\n      // than the previous column, than we need to shift the parent\n      // in the previous column so it's level with the current column.\n      if (seen.has(parent)) {\n        parent.colspan++;\n\n        let {column, index} = seen.get(parent);\n        if (index > col.length) {\n          break;\n        }\n\n        for (let i = index; i < col.length; i++) {\n          column.splice(i, 0, null);\n        }\n\n        // Adjust shifted indices\n        for (let i = col.length; i < column.length; i++) {\n          // eslint-disable-next-line max-depth\n          if (column[i] && seen.has(column[i])) {\n            seen.get(column[i]).index = i;\n          }\n        }\n      } else {\n        parent.colspan = 1;\n        col.push(parent);\n        seen.set(parent, {column: col, index: col.length - 1});\n      }\n\n      parentKey = parent.parentKey;\n    }\n\n    columns.push(col);\n    column.index = columns.length - 1;\n  }\n\n  let maxLength = Math.max(...columns.map(c => c.length));\n  let headerRows = Array(maxLength).fill(0).map(() => []);\n\n  // Convert columns into rows.\n  let colIndex = 0;\n  for (let column of columns) {\n    let i = maxLength - 1;\n    for (let item of column) {\n      if (item) {\n        // Fill the space up until the current column with a placeholder\n        let row = headerRows[i];\n        let rowLength = row.reduce((p, c) => p + c.colspan, 0);\n        if (rowLength < colIndex) {\n          let placeholder: GridNode<T> = {\n            type: 'placeholder',\n            key: 'placeholder-' + item.key,\n            colspan: colIndex - rowLength,\n            index: rowLength,\n            value: null,\n            rendered: null,\n            level: i,\n            hasChildNodes: false,\n            childNodes: [],\n            textValue: null\n          };\n\n          // eslint-disable-next-line max-depth\n          if (row.length > 0) {\n            row[row.length - 1].nextKey = placeholder.key;\n            placeholder.prevKey = row[row.length - 1].key;\n          }\n\n          row.push(placeholder);\n        }\n\n        if (row.length > 0) {\n          row[row.length - 1].nextKey = item.key;\n          item.prevKey = row[row.length - 1].key;\n        }\n\n        item.level = i;\n        item.colIndex = colIndex;\n        row.push(item);\n      }\n\n      i--;\n    }\n\n    colIndex++;\n  }\n\n  // Add placeholders at the end of each row that is shorter than the maximum\n  let i = 0;\n  for (let row of headerRows) {\n    let rowLength = row.reduce((p, c) => p + c.colspan, 0);\n    if (rowLength < columnNodes.length) {\n      let placeholder: GridNode<T> = {\n        type: 'placeholder',\n        key: 'placeholder-' + row[row.length - 1].key,\n        colspan: columnNodes.length - rowLength,\n        index: rowLength,\n        value: null,\n        rendered: null,\n        level: i,\n        hasChildNodes: false,\n        childNodes: [],\n        textValue: null,\n        prevKey: row[row.length - 1].key\n      };\n\n      row.push(placeholder);\n    }\n\n    i++;\n  }\n\n  return headerRows.map((childNodes, index) => {\n    let row: GridNode<T> = {\n      type: 'headerrow',\n      key: 'headerrow-' + index,\n      index,\n      value: null,\n      rendered: null,\n      level: 0,\n      hasChildNodes: true,\n      childNodes,\n      textValue: null\n    };\n\n    return row;\n  });\n}\n\nexport class TableCollection<T> extends GridCollection<T> implements ITableCollection<T> {\n  headerRows: GridNode<T>[];\n  columns: GridNode<T>[];\n  rowHeaderColumnKeys: Set<Key>;\n  body: GridNode<T>;\n  _size: number = 0;\n\n  constructor(nodes: Iterable<GridNode<T>>, prev?: ITableCollection<T>, opts?: GridCollectionOptions) {\n    let rowHeaderColumnKeys: Set<Key> = new Set();\n    let body: GridNode<T>;\n    let columns: GridNode<T>[] = [];\n    // Add cell for selection checkboxes if needed.\n    if (opts?.showSelectionCheckboxes) {\n      let rowHeaderColumn: GridNode<T> = {\n        type: 'column',\n        key: ROW_HEADER_COLUMN_KEY,\n        value: null,\n        textValue: '',\n        level: 0,\n        index: opts?.showDragButtons ? 1 : 0,\n        hasChildNodes: false,\n        rendered: null,\n        childNodes: [],\n        props: {\n          isSelectionCell: true\n        }\n      };\n\n      columns.unshift(rowHeaderColumn);\n    }\n\n    // Add cell for drag buttons if needed.\n    if (opts?.showDragButtons) {\n      let rowHeaderColumn: GridNode<T> = {\n        type: 'column',\n        key: ROW_HEADER_COLUMN_KEY_DRAG,\n        value: null,\n        textValue: '',\n        level: 0,\n        index: 0,\n        hasChildNodes: false,\n        rendered: null,\n        childNodes: [],\n        props: {\n          isDragButtonCell: true\n        }\n      };\n\n      columns.unshift(rowHeaderColumn);\n    }\n\n    let rows = [];\n    let columnKeyMap = new Map();\n    let visit = (node: GridNode<T>) => {\n      switch (node.type) {\n        case 'body':\n          body = node;\n          break;\n        case 'column':\n          columnKeyMap.set(node.key, node);\n          if (!node.hasChildNodes) {\n            columns.push(node);\n\n            if (node.props.isRowHeader) {\n              rowHeaderColumnKeys.add(node.key);\n            }\n          }\n          break;\n        case 'item':\n          rows.push(node);\n          return; // do not go into childNodes\n      }\n      for (let child of node.childNodes) {\n        visit(child);\n      }\n    };\n\n    for (let node of nodes) {\n      visit(node);\n    }\n\n    let headerRows = buildHeaderRows(columnKeyMap, columns) as GridNode<T>[];\n    headerRows.forEach((row, i) => rows.splice(i, 0, row));\n\n    super({\n      columnCount: columns.length,\n      items: rows,\n      visitNode: node => {\n        node.column = columns[node.index];\n        return node;\n      }\n    });\n    this.columns = columns;\n    this.rowHeaderColumnKeys = rowHeaderColumnKeys;\n    this.body = body;\n    this.headerRows = headerRows;\n    this._size = [...body.childNodes].length;\n\n    // Default row header column to the first one.\n    if (this.rowHeaderColumnKeys.size === 0) {\n      this.rowHeaderColumnKeys.add(this.columns.find(column => !column.props?.isDragButtonCell && !column.props?.isSelectionCell).key);\n    }\n  }\n\n  *[Symbol.iterator]() {\n    yield* this.body.childNodes;\n  }\n\n  get size() {\n    return this._size;\n  }\n\n  getKeys() {\n    return this.keyMap.keys();\n  }\n\n  getKeyBefore(key: Key) {\n    let node = this.keyMap.get(key);\n    return node ? node.prevKey : null;\n  }\n\n  getKeyAfter(key: Key) {\n    let node = this.keyMap.get(key);\n    return node ? node.nextKey : null;\n  }\n\n  getFirstKey() {\n    return getFirstItem(this.body.childNodes)?.key;\n  }\n\n  getLastKey() {\n    return getLastItem(this.body.childNodes)?.key;\n  }\n\n  getItem(key: Key) {\n    return this.keyMap.get(key);\n  }\n\n  at(idx: number) {\n    const keys = [...this.getKeys()];\n    return this.getItem(keys[idx]);\n  }\n\n  getTextValue(key: Key): string {\n    let row = this.getItem(key);\n    if (!row) {\n      return '';\n    }\n\n    // If the row has a textValue, use that.\n    if (row.textValue) {\n      return row.textValue;\n    }\n\n    // Otherwise combine the text of each of the row header columns.\n    let rowHeaderColumnKeys = this.rowHeaderColumnKeys;\n    if (rowHeaderColumnKeys) {\n      let text = [];\n      for (let cell of row.childNodes) {\n        let column = this.columns[cell.index];\n        if (rowHeaderColumnKeys.has(column.key) && cell.textValue) {\n          text.push(cell.textValue);\n        }\n\n        if (text.length === rowHeaderColumnKeys.size) {\n          break;\n        }\n      }\n\n      return text.join(' ');\n    }\n\n    return '';\n  }\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {GridState, useGridState} from '@react-stately/grid';\nimport {TableCollection as ITableCollection, TableBodyProps, TableHeaderProps} from '@react-types/table';\nimport {Key, Node, SelectionMode, Sortable, SortDescriptor, SortDirection} from '@react-types/shared';\nimport {MultipleSelectionStateProps} from '@react-stately/selection';\nimport {ReactElement, useCallback, useMemo, useState} from 'react';\nimport {TableCollection} from './TableCollection';\nimport {useCollection} from '@react-stately/collections';\n\nexport interface TableState<T> extends GridState<T, ITableCollection<T>> {\n  /** A collection of rows and columns in the table. */\n  collection: ITableCollection<T>,\n  /** Whether the row selection checkboxes should be displayed. */\n  showSelectionCheckboxes: boolean,\n  /** The current sorted column and direction. */\n  sortDescriptor: SortDescriptor,\n  /** Calls the provided onSortChange handler with the provided column key and sort direction. */\n  sort(columnKey: Key, direction?: 'ascending' | 'descending'): void,\n  /** Whether keyboard navigation is disabled, such as when the arrow keys should be handled by a component within a cell. */\n  isKeyboardNavigationDisabled: boolean,\n  /** Set whether keyboard navigation is disabled, such as when the arrow keys should be handled by a component within a cell. */\n  setKeyboardNavigationDisabled: (val: boolean) => void\n}\n\nexport interface CollectionBuilderContext<T> {\n  showSelectionCheckboxes: boolean,\n  showDragButtons: boolean,\n  selectionMode: SelectionMode,\n  columns: Node<T>[]\n}\n\nexport interface TableStateProps<T> extends MultipleSelectionStateProps, Sortable {\n  /** The elements that make up the table. Includes the TableHeader, TableBody, Columns, and Rows. */\n  children?: [ReactElement<TableHeaderProps<T>>, ReactElement<TableBodyProps<T>>],\n  /** A list of row keys to disable. */\n  disabledKeys?: Iterable<Key>,\n  /** A pre-constructed collection to use instead of building one from items and children. */\n  collection?: ITableCollection<T>,\n  /** Whether the row selection checkboxes should be displayed. */\n  showSelectionCheckboxes?: boolean,\n  /** Whether the row drag button should be displayed.\n   * @private\n   */\n  showDragButtons?: boolean\n}\n\nconst OPPOSITE_SORT_DIRECTION = {\n  ascending: 'descending' as SortDirection,\n  descending: 'ascending' as SortDirection\n};\n\n/**\n * Provides state management for a table component. Handles building a collection\n * of columns and rows from props. In addition, it tracks row selection and manages sort order changes.\n */\nexport function useTableState<T extends object>(props: TableStateProps<T>): TableState<T> {\n  let [isKeyboardNavigationDisabled, setKeyboardNavigationDisabled] = useState(false);\n  let {selectionMode = 'none', showSelectionCheckboxes, showDragButtons} = props;\n\n  let context = useMemo(() => ({\n    showSelectionCheckboxes: showSelectionCheckboxes && selectionMode !== 'none',\n    showDragButtons: showDragButtons,\n    selectionMode,\n    columns: []\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }), [props.children, showSelectionCheckboxes, selectionMode, showDragButtons]);\n\n  let collection = useCollection<T, ITableCollection<T>>(\n    props,\n    useCallback((nodes) => new TableCollection(nodes, null, context), [context]),\n    context\n  );\n  let {disabledKeys, selectionManager} = useGridState({\n    ...props,\n    collection,\n    disabledBehavior: props.disabledBehavior || 'selection'\n  });\n\n  return {\n    collection,\n    disabledKeys,\n    selectionManager,\n    showSelectionCheckboxes: props.showSelectionCheckboxes || false,\n    sortDescriptor: props.sortDescriptor,\n    isKeyboardNavigationDisabled: collection.size === 0 || isKeyboardNavigationDisabled,\n    setKeyboardNavigationDisabled,\n    sort(columnKey: Key, direction?: 'ascending' | 'descending') {\n      props.onSortChange({\n        column: columnKey,\n        direction: direction ?? (props.sortDescriptor?.column === columnKey\n          ? OPPOSITE_SORT_DIRECTION[props.sortDescriptor.direction]\n          : 'ascending')\n      });\n    }\n  };\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {CollectionBuilderContext} from './useTableState';\nimport {PartialNode} from '@react-stately/collections';\nimport React, {JSX, ReactElement} from 'react';\nimport {TableHeaderProps} from '@react-types/table';\n\nfunction TableHeader<T>(props: TableHeaderProps<T>): ReactElement { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return null;\n}\n\nTableHeader.getCollectionNode = function* getCollectionNode<T>(props: TableHeaderProps<T>, context: CollectionBuilderContext<T>): Generator<PartialNode<T>, void, any> {\n  let {children, columns} = props;\n\n  // Clear columns so they aren't double added in strict mode.\n  context.columns = [];\n\n  if (typeof children === 'function') {\n    if (!columns) {\n      throw new Error('props.children was a function but props.columns is missing');\n    }\n\n    for (let column of columns) {\n      yield {\n        type: 'column',\n        value: column,\n        renderer: children\n      };\n    }\n  } else {\n    let columns: PartialNode<T>[] = [];\n    React.Children.forEach(children, column => {\n      columns.push({\n        type: 'column',\n        element: column\n      });\n    });\n\n    yield* columns;\n  }\n};\n\n/**\n * A TableHeader is a container for the Column elements in a Table. Columns can be statically defined\n * as children, or generated dynamically using a function based on the data passed to the `columns` prop.\n */\n// We don't want getCollectionNode to show up in the type definition\nlet _TableHeader = TableHeader as <T>(props: TableHeaderProps<T>) => JSX.Element;\nexport {_TableHeader as TableHeader};\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {PartialNode} from '@react-stately/collections';\nimport React, {JSX, ReactElement} from 'react';\nimport {TableBodyProps} from '@react-types/table';\n\nfunction TableBody<T>(props: TableBodyProps<T>): ReactElement { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return null;\n}\n\nTableBody.getCollectionNode = function* getCollectionNode<T>(props: TableBodyProps<T>): Generator<PartialNode<T>> {\n  let {children, items} = props;\n  yield {\n    type: 'body',\n    hasChildNodes: true,\n    props,\n    *childNodes() {\n      if (typeof children === 'function') {\n        if (!items) {\n          throw new Error('props.children was a function but props.items is missing');\n        }\n\n        for (let item of items) {\n          yield {\n            type: 'item',\n            value: item,\n            renderer: children\n          };\n        }\n      } else {\n        let items: PartialNode<T>[] = [];\n        React.Children.forEach(children, item => {\n          items.push({\n            type: 'item',\n            element: item\n          });\n        });\n\n        yield* items;\n      }\n    }\n  };\n};\n\n/**\n * A TableBody is a container for the Row elements of a Table. Rows can be statically defined\n * as children, or generated dynamically using a function based on the data passed to the `items` prop.\n */\n// We don't want getCollectionNode to show up in the type definition\nlet _TableBody = TableBody as <T>(props: TableBodyProps<T>) => JSX.Element;\nexport {_TableBody as TableBody};\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {CollectionBuilderContext} from './useTableState';\nimport {ColumnProps} from '@react-types/table';\nimport {GridNode} from '@react-types/grid';\nimport {PartialNode} from '@react-stately/collections';\nimport React, {JSX, ReactElement} from 'react';\n\nfunction Column<T>(props: ColumnProps<T>): ReactElement { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return null;\n}\n\nColumn.getCollectionNode = function* getCollectionNode<T>(props: ColumnProps<T>, context: CollectionBuilderContext<T>): Generator<PartialNode<T>, void, GridNode<T>[]> {\n  let {title, children, childColumns} = props;\n\n  let rendered = title || children;\n  let textValue = props.textValue || (typeof rendered === 'string' ? rendered : '') || props['aria-label'];\n\n  let fullNodes = yield {\n    type: 'column',\n    hasChildNodes: !!childColumns || (title && React.Children.count(children) > 0),\n    rendered,\n    textValue,\n    props,\n    *childNodes() {\n      if (childColumns) {\n        for (let child of childColumns) {\n          yield {\n            type: 'column',\n            value: child\n          };\n        }\n      } else if (title) {\n        let childColumns: PartialNode<T>[] = [];\n        React.Children.forEach(children, child => {\n          childColumns.push({\n            type: 'column',\n            element: child as ReactElement<ColumnProps<T>>\n          });\n        });\n\n        yield* childColumns;\n      }\n    },\n    shouldInvalidate(newContext: CollectionBuilderContext<T>) {\n      // This is a bit of a hack, but it works.\n      // If this method is called, then there's a cached version of this node available.\n      // But, we need to keep the list of columns in the new context up to date.\n      updateContext(newContext);\n      return false;\n    }\n  };\n\n  let updateContext = (context: CollectionBuilderContext<T>) => {\n    // register leaf columns on the context so that <Row> can access them\n    for (let node of fullNodes) {\n      if (!node.hasChildNodes) {\n        context.columns.push(node);\n      }\n    }\n  };\n\n  updateContext(context);\n};\n\n/**\n * A Column represents a field of each item within a Table. Columns may also contain nested\n * Column elements to represent column groups. Nested columns can be statically defined as\n * children, or dynamically generated using a function based on the `childColumns` prop.\n */\n// We don't want getCollectionNode to show up in the type definition\nlet _Column = Column as <T>(props: ColumnProps<T>) => JSX.Element;\nexport {_Column as Column};\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {CollectionBuilderContext} from './useTableState';\nimport {PartialNode} from '@react-stately/collections';\nimport React, {JSX, ReactElement} from 'react';\nimport {RowProps} from '@react-types/table';\n\nfunction Row<T>(props: RowProps<T>): ReactElement { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return null;\n}\n\nRow.getCollectionNode = function* getCollectionNode<T>(props: RowProps<T>, context: CollectionBuilderContext<T>): Generator<PartialNode<T>> {\n  let {children, textValue, UNSTABLE_childItems} = props;\n\n  yield {\n    type: 'item',\n    props: props,\n    textValue,\n    'aria-label': props['aria-label'],\n    hasChildNodes: true,\n    *childNodes() {\n      // Process cells first\n      if (context.showDragButtons) {\n        yield {\n          type: 'cell',\n          key: 'header-drag', // this is combined with the row key by CollectionBuilder\n          props: {\n            isDragButtonCell: true\n          }\n        };\n      }\n\n      if (context.showSelectionCheckboxes && context.selectionMode !== 'none') {\n        yield {\n          type: 'cell',\n          key: 'header', // this is combined with the row key by CollectionBuilder\n          props: {\n            isSelectionCell: true\n          }\n        };\n      }\n\n      if (typeof children === 'function') {\n        for (let column of context.columns) {\n          yield {\n            type: 'cell',\n            element: children(column.key),\n            key: column.key // this is combined with the row key by CollectionBuilder\n          };\n        }\n\n        if (UNSTABLE_childItems) {\n          for (let child of UNSTABLE_childItems) {\n            // Note: in order to reuse the render function of TableBody for our child rows, we just need to yield a type and a value here. CollectionBuilder will then look up\n            // the parent renderer and use that to build the full node of this child row, using the value provided here to generate the cells\n            yield {\n              type: 'item',\n              value: child\n            };\n          }\n        }\n      } else {\n        let cells: PartialNode<T>[] = [];\n        let childRows: PartialNode<T>[] = [];\n        React.Children.forEach(children, node => {\n          if (node.type === Row) {\n            if (cells.length < context.columns.length) {\n              throw new Error('All of a Row\\'s child Cells must be positioned before any child Rows.');\n            }\n\n            childRows.push({\n              type: 'item',\n              element: node\n            });\n          } else {\n            cells.push({\n              type: 'cell',\n              element: node\n            });\n          }\n        });\n\n        if (cells.length !== context.columns.length) {\n          throw new Error(`Cell count must match column count. Found ${cells.length} cells and ${context.columns.length} columns.`);\n        }\n\n        yield* cells;\n        yield* childRows;\n      }\n    },\n    shouldInvalidate(newContext: CollectionBuilderContext<T>) {\n      // Invalidate all rows if the columns changed.\n      return newContext.columns.length !== context.columns.length ||\n        newContext.columns.some((c, i) => c.key !== context.columns[i].key) ||\n        newContext.showSelectionCheckboxes !== context.showSelectionCheckboxes ||\n        newContext.showDragButtons !== context.showDragButtons ||\n        newContext.selectionMode !== context.selectionMode;\n    }\n  };\n};\n\n/**\n * A Row represents a single item in a Table and contains Cell elements for each column.\n * Cells can be statically defined as children, or generated dynamically using a function\n * based on the columns defined in the TableHeader.\n */\n// We don't want getCollectionNode to show up in the type definition\nlet _Row = Row as <T>(props: RowProps<T>) => JSX.Element;\nexport {_Row as Row};\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {CellProps} from '@react-types/table';\nimport {JSX, ReactElement} from 'react';\nimport {PartialNode} from '@react-stately/collections';\n\nfunction Cell(props: CellProps): ReactElement { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return null;\n}\n\nCell.getCollectionNode = function* getCollectionNode<T>(props: CellProps): Generator<PartialNode<T>> {\n  let {children} = props;\n\n  let textValue = props.textValue || (typeof children === 'string' ? children : '') || props['aria-label'] || '';\n  yield {\n    type: 'cell',\n    props: props,\n    rendered: children,\n    textValue,\n    'aria-label': props['aria-label'],\n    hasChildNodes: false\n  };\n};\n\n/**\n * A Cell represents the value of a single Column within a Table Row.\n */\n// We don't want getCollectionNode to show up in the type definition\nlet _Cell = Cell as (props: CellProps) => JSX.Element;\nexport {_Cell as Cell};\n", "/*\n * Copyright 2023 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nlet _tableNestedRows = false;\n\nexport function enableTableNestedRows() {\n  _tableNestedRows = true;\n}\n\nexport function tableNestedRows() {\n  return _tableNestedRows;\n}\n", "'use client';\nimport { useTableState, TableColumnLayout, Column } from '@react-stately/table';\nexport { Cell, Row, TableBody, TableHeader } from '@react-stately/table';\nimport { useRef, useCallback, useMemo, forwardRef, createContext, useContext } from 'react';\nimport { FocusScope, useFocusRing } from '@react-aria/focus';\nimport { useLocale, useLocalizedStringFormatter } from '@react-aria/i18n';\nimport { useHover, usePress } from '@react-aria/interactions';\nimport { useTable, useTableRowGroup, useTableHeaderRow, useTableColumnHeader, useTableRow, useTableCell, useTableSelectionCheckbox, useTableSelectAllCheckbox } from '@react-aria/table';\nimport { mergeProps, filterDOMProps } from '@react-aria/utils';\nimport { setScrollLeft, useVirtualizer, ScrollView, layoutInfoToStyle, VirtualizerItem } from '@react-aria/virtualizer';\nimport { VisuallyHidden } from '@react-aria/visually-hidden';\nimport { TableLayout } from '@react-stately/layout';\nimport { useVirtualizerState } from '@react-stately/virtualizer';\nimport { Checkbox } from '@keystar/ui/checkbox';\nimport { ProgressCircle } from '@keystar/ui/progress';\nimport { SlotProvider } from '@keystar/ui/slots';\nimport { ClassList, tokenSchema, useStyleProps, toDataAttributes, classNames, css, transition } from '@keystar/ui/style';\nimport { TooltipTrigger, Tooltip } from '@keystar/ui/tooltip';\nimport { Text } from '@keystar/ui/typography';\nimport { isReactText } from '@keystar/ui/utils';\nimport { arrowUpIcon } from '@keystar/ui/icon/icons/arrowUpIcon';\nimport { Icon } from '@keystar/ui/icon';\nimport { jsx, jsxs } from 'react/jsx-runtime';\n\nvar localizedMessages = {\n\t\"ar-AE\": {\n\t\tloading: \"جارٍ التحميل...\",\n\t\tloadingMore: \"جارٍ تحميل المزيد...\"\n\t},\n\t\"bg-BG\": {\n\t\tloading: \"Зареждане...\",\n\t\tloadingMore: \"Зареждане на още...\"\n\t},\n\t\"cs-CZ\": {\n\t\tloading: \"Načítání...\",\n\t\tloadingMore: \"Načítání dalších...\"\n\t},\n\t\"da-DK\": {\n\t\tloading: \"Indlæser...\",\n\t\tloadingMore: \"Indlæser flere...\"\n\t},\n\t\"de-DE\": {\n\t\tloading: \"Laden...\",\n\t\tloadingMore: \"Mehr laden ...\"\n\t},\n\t\"el-GR\": {\n\t\tloading: \"Φόρτωση...\",\n\t\tloadingMore: \"Φόρτωση περισσότερων...\"\n\t},\n\t\"en-US\": {\n\t\tloading: \"Loading…\",\n\t\tloadingMore: \"Loading more…\"\n\t},\n\t\"es-ES\": {\n\t\tloading: \"Cargando…\",\n\t\tloadingMore: \"Cargando más…\"\n\t},\n\t\"et-EE\": {\n\t\tloading: \"Laadimine...\",\n\t\tloadingMore: \"Laadi rohkem...\"\n\t},\n\t\"fi-FI\": {\n\t\tloading: \"Ladataan…\",\n\t\tloadingMore: \"Ladataan lisää…\"\n\t},\n\t\"fr-FR\": {\n\t\tloading: \"Chargement...\",\n\t\tloadingMore: \"Chargement supplémentaire...\"\n\t},\n\t\"he-IL\": {\n\t\tloading: \"טוען...\",\n\t\tloadingMore: \"טוען עוד...\"\n\t},\n\t\"hr-HR\": {\n\t\tloading: \"Učitavam...\",\n\t\tloadingMore: \"Učitavam još...\"\n\t},\n\t\"hu-HU\": {\n\t\tloading: \"Betöltés folyamatban…\",\n\t\tloadingMore: \"Továbbiak betöltése folyamatban…\"\n\t},\n\t\"it-IT\": {\n\t\tloading: \"Caricamento...\",\n\t\tloadingMore: \"Caricamento altri...\"\n\t},\n\t\"ja-JP\": {\n\t\tloading: \"読み込み中...\",\n\t\tloadingMore: \"さらに読み込み中...\"\n\t},\n\t\"ko-KR\": {\n\t\tloading: \"로드 중…\",\n\t\tloadingMore: \"추가 로드 중…\"\n\t},\n\t\"lt-LT\": {\n\t\tloading: \"Įkeliama...\",\n\t\tloadingMore: \"Įkeliama daugiau...\"\n\t},\n\t\"lv-LV\": {\n\t\tloading: \"Notiek ielāde...\",\n\t\tloadingMore: \"Tiek ielādēts vēl...\"\n\t},\n\t\"nb-NO\": {\n\t\tloading: \"Laster inn ...\",\n\t\tloadingMore: \"Laster inn flere ...\"\n\t},\n\t\"nl-NL\": {\n\t\tloading: \"Laden...\",\n\t\tloadingMore: \"Meer laden...\"\n\t},\n\t\"pl-PL\": {\n\t\tloading: \"Ładowanie...\",\n\t\tloadingMore: \"Wczytywanie większej liczby...\"\n\t},\n\t\"pt-BR\": {\n\t\tloading: \"Carregando...\",\n\t\tloadingMore: \"Carregando mais...\"\n\t},\n\t\"pt-PT\": {\n\t\tloading: \"A carregar...\",\n\t\tloadingMore: \"A carregar mais...\"\n\t},\n\t\"ro-RO\": {\n\t\tloading: \"Se încarcă...\",\n\t\tloadingMore: \"Se încarcă mai multe...\"\n\t},\n\t\"ru-RU\": {\n\t\tloading: \"Загрузка...\",\n\t\tloadingMore: \"Дополнительная загрузка...\"\n\t},\n\t\"sk-SK\": {\n\t\tloading: \"Načítava sa...\",\n\t\tloadingMore: \"Načítava sa viac...\"\n\t},\n\t\"sl-SI\": {\n\t\tloading: \"Nalaganje ...\",\n\t\tloadingMore: \"Nalaganje več vsebine ...\"\n\t},\n\t\"sr-SP\": {\n\t\tloading: \"Učitavam...\",\n\t\tloadingMore: \"Učitavam još...\"\n\t},\n\t\"sv-SE\": {\n\t\tloading: \"Läser in...\",\n\t\tloadingMore: \"Läser in mer...\"\n\t},\n\t\"tr-TR\": {\n\t\tloading: \"Yükleniyor...\",\n\t\tloadingMore: \"Daha fazla yükleniyor...\"\n\t},\n\t\"uk-UA\": {\n\t\tloading: \"Завантаження…\",\n\t\tloadingMore: \"Завантаження інших об’єктів...\"\n\t},\n\t\"zh-CN\": {\n\t\tloading: \"正在加载...\",\n\t\tloadingMore: \"正在加载更多...\"\n\t},\n\t\"zh-T\": {\n\t\tloading: \"載入中…\",\n\t\tloadingMore: \"正在載入更多…\"\n\t}\n};\n\nconst tableViewClassList = new ClassList('TableView', ['cell', 'cell-wrapper', 'row']);\nconst SortIndicator = () => {\n  // fix alignment: reduce the space the icon takes up, w/o affecting the icon layout itself\n  let labelHeight = tokenSchema.typography.text.regular.capheight;\n  return /*#__PURE__*/jsx(\"span\", {\n    \"aria-hidden\": \"true\",\n    className: css({\n      alignItems: 'center',\n      display: 'flex',\n      flexShrink: 0,\n      height: labelHeight,\n      justifyContent: 'center',\n      marginInline: tokenSchema.size.space.small,\n      opacity: 0,\n      position: 'relative',\n      transition: transition(['opacity', 'transform'], {\n        easing: 'easeOut'\n      }),\n      width: labelHeight,\n      svg: {\n        position: 'absolute'\n      },\n      ['[aria-sort=\"ascending\"] &, [aria-sort=\"descending\"] &']: {\n        opacity: 1\n      },\n      ['[aria-sort=\"descending\"] &']: {\n        transform: 'rotate(180deg)'\n      }\n    }),\n    children: /*#__PURE__*/jsx(Icon, {\n      src: arrowUpIcon\n    })\n  });\n};\n\n// ============================================================================\n// HOOKS\n// ============================================================================\n\n// Table root\n// ----------------------------------------------------------------------------\n\nfunction useTableStyleProps(props) {\n  let {\n    density,\n    overflowMode,\n    prominence\n  } = props;\n  let styleProps = useStyleProps(props);\n  return {\n    ...toDataAttributes({\n      density,\n      overflowMode,\n      prominence\n    }),\n    className: classNames(tableViewClassList.element('root'), styleProps.className, css({\n      display: 'flex',\n      flexDirection: 'column',\n      isolation: 'isolate',\n      minHeight: 0,\n      minWidth: 0,\n      outline: 'none',\n      position: 'relative',\n      userSelect: 'none'\n    })),\n    style: styleProps.style\n  };\n}\n\n// Row group (head/body/foot)\n// ----------------------------------------------------------------------------\n\nfunction useHeaderWrapperStyleProps({\n  style\n} = {}) {\n  return {\n    className: css({\n      overflow: 'hidden',\n      position: 'relative',\n      boxSizing: 'content-box',\n      flex: 'none',\n      // keep aligned with the border of the body\n      [`${tableViewClassList.selector('root')}:not([data-prominence=\"low\"]) &`]: {\n        borderLeft: `${tokenSchema.size.border.regular} solid transparent`,\n        borderRight: `${tokenSchema.size.border.regular} solid transparent`\n      }\n    }),\n    style\n  };\n}\nfunction useHeadStyleProps({\n  style\n} = {}) {\n  return {\n    className: css({\n      boxSizing: 'border-box',\n      display: 'flex',\n      flexDirection: 'column'\n    }),\n    style\n  };\n}\nfunction useBodyStyleProps({\n  style\n} = {}) {\n  return {\n    className: css({\n      [`${tableViewClassList.selector('root')}[data-prominence=\"low\"] &`]: {\n        borderBlock: `${tokenSchema.size.border.regular} solid ${tokenSchema.color.border.muted}`\n      },\n      [`${tableViewClassList.selector('root')}:not([data-prominence=\"low\"]) &`]: {\n        backgroundColor: tokenSchema.color.background.canvas,\n        border: `${tokenSchema.size.border.regular} solid ${tokenSchema.color.border.muted}`,\n        borderRadius: tokenSchema.size.radius.medium,\n        /* Fix scrollbars on iOS with sticky row headers */\n        transform: 'translate3d(0, 0, 0)'\n      }\n    }),\n    style\n  };\n}\n\n// Cell common\n// ----------------------------------------------------------------------------\n\nconst commonCellStyles = {\n  // borderBottom: `${tokenSchema.size.border.regular} solid ${tokenSchema.color.border.neutral}`,\n  boxSizing: 'border-box',\n  cursor: 'default',\n  display: 'flex',\n  height: '100%',\n  justifyContent: 'flex-start',\n  minWidth: 0,\n  outline: 0,\n  paddingInline: tokenSchema.size.space.medium,\n  position: 'relative',\n  // Density\n  paddingBlock: tokenSchema.size.space.medium,\n  [`${tableViewClassList.selector('root')}[data-density=\"compact\"] &:not([role=\"columnheader\"])`]: {\n    paddingBlock: tokenSchema.size.space.regular\n  },\n  [`${tableViewClassList.selector('root')}[data-density=\"spacious\"] &:not([role=\"columnheader\"])`]: {\n    paddingBlock: tokenSchema.size.space.large\n  },\n  // wrapping text shouldn't be centered\n  alignItems: 'center',\n  [`${tableViewClassList.selector('root')}[data-overflow-mode=\"wrap\"] &:not([role=\"columnheader\"])`]: {\n    alignItems: 'start'\n  }\n};\nfunction useCellStyleProps(props, state) {\n  const className = classNames(tableViewClassList.element('cell'), css([commonCellStyles, {\n    // Alignment\n    '&[data-align=\"end\"]': {\n      justifyContent: 'flex-end',\n      textAlign: 'end'\n    },\n    '&[data-align=\"center\"]': {\n      justifyContent: 'center',\n      textAlign: 'center'\n    },\n    // focus ring\n    '&[data-focus=\"visible\"]::after': {\n      borderRadius: tokenSchema.size.radius.small,\n      boxShadow: `inset 0 0 0 ${tokenSchema.size.alias.focusRing} ${tokenSchema.color.alias.focusRing}`,\n      content: '\"\"',\n      inset: 0,\n      position: 'absolute',\n      transition: transition(['box-shadow', 'margin'], {\n        easing: 'easeOut'\n      })\n    },\n    // HEADERS\n    '&[role=\"columnheader\"]': {\n      color: tokenSchema.color.foreground.neutralSecondary,\n      ['&[aria-sort]']: {\n        cursor: 'default',\n        '&:hover, &[data-focus=\"visible\"]': {\n          color: tokenSchema.color.foreground.neutralEmphasis\n        }\n      }\n    }\n  }]));\n  return {\n    ...toDataAttributes({\n      focus: state !== null && state !== void 0 && state.isFocusVisible ? 'visible' : undefined,\n      align: props === null || props === void 0 ? void 0 : props.align\n    }),\n    className\n    // style: getStyleFromColumn(props),\n  };\n}\nfunction useSelectionCellStyleProps() {\n  return {\n    className: classNames(tableViewClassList.element('cell'), css(commonCellStyles, {\n      alignItems: 'center',\n      flex: '0 0 auto',\n      paddingInlineStart: tokenSchema.size.space.medium,\n      width: 'auto'\n    }))\n  };\n}\n\n// Row body\n// ----------------------------------------------------------------------------\n\nfunction useRowStyleProps(props, state) {\n  let {\n    style\n  } = props;\n  let calculatedRadius = `calc(${tokenSchema.size.radius.medium} - ${tokenSchema.size.border.regular})`;\n  const className = css({\n    boxSizing: 'border-box',\n    display: 'flex',\n    position: 'relative',\n    outline: 0,\n    // separators\n    '&:not(:last-child)': {\n      backgroundColor: tokenSchema.color.border.muted,\n      paddingBottom: 1\n    },\n    // prominence\n    [`${tableViewClassList.selector('root')}:not([data-prominence=\"low\"]) &`]: {\n      '&:first-child': {\n        borderStartStartRadius: calculatedRadius,\n        borderStartEndRadius: calculatedRadius\n      },\n      '&:last-child': {\n        borderEndStartRadius: calculatedRadius,\n        borderEndEndRadius: calculatedRadius\n      }\n    },\n    // focus indicator\n    '&[data-focus=\"visible\"]': {\n      '&::before': {\n        backgroundColor: tokenSchema.color.background.accentEmphasis,\n        borderRadius: tokenSchema.size.space.small,\n        content: '\"\"',\n        insetInlineStart: tokenSchema.size.space.xsmall,\n        marginBlock: tokenSchema.size.space.xsmall,\n        marginInlineEnd: `calc(${tokenSchema.size.space.small} * -1)`,\n        position: 'sticky',\n        width: tokenSchema.size.space.small,\n        zIndex: 4\n      }\n    },\n    // interactions\n    [`&[data-interaction=\"hover\"] ${tableViewClassList.selector('cell')}`]: {\n      backgroundColor: tokenSchema.color.scale.slate2\n    },\n    [`&[data-interaction=\"press\"] ${tableViewClassList.selector('cell')}`]: {\n      backgroundColor: tokenSchema.color.scale.slate3\n      // backgroundColor: tokenSchema.color.alias.backgroundPressed,\n    },\n    // selected\n    [`&[aria-selected=\"true\"] ${tableViewClassList.selector('cell')}`]: {\n      backgroundColor: tokenSchema.color.alias.backgroundSelected\n    },\n    [`&[aria-selected=\"true\"][data-interaction=\"hover\"] ${tableViewClassList.selector('cell')}`]: {\n      backgroundColor: tokenSchema.color.alias.backgroundSelectedHovered\n    }\n  });\n  return {\n    ...toDataAttributes({\n      focus: state.isFocusVisible ? 'visible' : state.isFocusWithin ? 'within' : undefined,\n      interaction: state.isPressed ? 'press' : state.isHovered ? 'hover' : undefined\n    }),\n    className: classNames(tableViewClassList.element('row'), className),\n    style\n  };\n}\n\n// Row header\n// ----------------------------------------------------------------------------\n\nfunction useRowHeaderStyleProps({\n  style\n}) {\n  const className = css({\n    display: 'flex'\n  });\n  return {\n    className,\n    style\n  };\n}\n\n// Constants\n\nconst DEFAULT_HEADER_HEIGHT = 34;\nconst DEFAULT_HIDE_HEADER_CELL_WIDTH = 34;\nconst SELECTION_CELL_DEFAULT_WIDTH = 34;\nconst ROW_HEIGHTS = {\n  compact: 26,\n  regular: 34,\n  spacious: 42\n};\n\n// Context\n\n// @ts-ignore FIXME: generics in context?\nconst TableContext = /*#__PURE__*/createContext(null);\nfunction useTableContext() {\n  return useContext(TableContext);\n}\n\n// Main\n\nfunction TableView(props) {\n  let domRef = useRef(null);\n  let headerRef = useRef(null);\n  let bodyRef = useRef(null);\n  let {\n    direction\n  } = useLocale();\n  let stringFormatter = useLocalizedStringFormatter(localizedMessages);\n  let {\n    density = 'regular',\n    overflowMode\n  } = props;\n\n  // Renderers\n\n  // This overrides collection view's renderWrapper to support DOM hierarchy.\n\n  let renderWrapper = (parent, reusableView, children, renderChildren) => {\n    let style = layoutInfoToStyle(reusableView.layoutInfo, direction, parent && parent.layoutInfo);\n    if (style.overflow === 'hidden') {\n      style.overflow = 'visible'; // needed to support position: sticky\n    }\n    if (reusableView.viewType === 'rowgroup') {\n      return /*#__PURE__*/jsx(TableBody, {\n        style: style,\n        children: renderChildren(children)\n      }, reusableView.key);\n    }\n    if (reusableView.viewType === 'header') {\n      return /*#__PURE__*/jsx(TableHead, {\n        style: style,\n        children: renderChildren(children)\n      }, reusableView.key);\n    }\n    if (reusableView.viewType === 'row') {\n      return /*#__PURE__*/jsx(TableRow, {\n        item: reusableView.content,\n        style: style,\n        hasAction: !!props.onRowAction,\n        children: renderChildren(children)\n      }, reusableView.key);\n    }\n    if (reusableView.viewType === 'headerrow') {\n      return /*#__PURE__*/jsx(TableHeaderRow, {\n        style: style,\n        item: reusableView.content,\n        children: renderChildren(children)\n      }, reusableView.key);\n    }\n    return /*#__PURE__*/jsx(VirtualizerItem, {\n      layoutInfo: reusableView.layoutInfo,\n      virtualizer: reusableView.virtualizer,\n      parent: parent === null || parent === void 0 ? void 0 : parent.layoutInfo,\n      className: classNames(tableViewClassList.element('cell-wrapper'), css({\n        backgroundColor: tokenSchema.color.background.canvas\n      })),\n      children: reusableView.rendered\n    }, reusableView.key);\n  };\n  let renderView = (type, item) => {\n    var _item$index, _item$colspan;\n    switch (type) {\n      case 'header':\n      case 'rowgroup':\n      case 'section':\n      case 'row':\n      case 'headerrow':\n        return null;\n      case 'cell':\n        {\n          if (item.props.isSelectionCell) {\n            return /*#__PURE__*/jsx(TableCheckboxCell, {\n              cell: item\n            });\n          }\n          return /*#__PURE__*/jsx(TableCell, {\n            cell: item,\n            overflowMode: overflowMode\n          });\n        }\n      case 'placeholder':\n        return /*#__PURE__*/jsx(\"div\", {\n          role: \"gridcell\",\n          \"aria-colindex\": ((_item$index = item.index) !== null && _item$index !== void 0 ? _item$index : 0) + 1,\n          \"aria-colspan\": ((_item$colspan = item.colspan) !== null && _item$colspan !== void 0 ? _item$colspan : 0) > 1 ? item.colspan : undefined\n        });\n      case 'column':\n        if (item.props.isSelectionCell) {\n          return /*#__PURE__*/jsx(TableSelectAllCell, {\n            column: item\n          });\n        }\n        if (item.props.hideHeader) {\n          return /*#__PURE__*/jsxs(TooltipTrigger, {\n            placement: \"top\",\n            trigger: \"focus\",\n            children: [/*#__PURE__*/jsx(TableColumnHeader, {\n              column: item\n            }), /*#__PURE__*/jsx(Tooltip, {\n              children: item.rendered\n            })]\n          });\n        }\n        return /*#__PURE__*/jsx(TableColumnHeader, {\n          column: item\n        });\n      case 'loader':\n        return /*#__PURE__*/jsx(CenteredWrapper, {\n          children: /*#__PURE__*/jsx(ProgressCircle, {\n            isIndeterminate: true,\n            \"aria-label\": state.collection.size > 0 ? stringFormatter.format('loadingMore') : stringFormatter.format('loading')\n          })\n        });\n      case 'empty':\n        {\n          let emptyState = props.renderEmptyState ? props.renderEmptyState() : null;\n          if (emptyState == null) {\n            return null;\n          }\n          return /*#__PURE__*/jsx(CenteredWrapper, {\n            children: emptyState\n          });\n        }\n    }\n  };\n  let state = useTableState({\n    ...props,\n    showSelectionCheckboxes: props.selectionMode === 'multiple'\n  });\n  const getDefaultWidth = useCallback(({\n    props: {\n      hideHeader,\n      isSelectionCell\n    }\n  }) => {\n    if (hideHeader) {\n      return DEFAULT_HIDE_HEADER_CELL_WIDTH;\n    } else if (isSelectionCell) {\n      return SELECTION_CELL_DEFAULT_WIDTH;\n    }\n  }, []);\n  const getDefaultMinWidth = useCallback(({\n    props: {\n      hideHeader,\n      isSelectionCell\n    }\n  }) => {\n    if (hideHeader) {\n      return DEFAULT_HIDE_HEADER_CELL_WIDTH;\n    } else if (isSelectionCell) {\n      return SELECTION_CELL_DEFAULT_WIDTH;\n    }\n    return 75;\n  }, []);\n  let columnLayout = useMemo(() => new TableColumnLayout({\n    getDefaultWidth,\n    getDefaultMinWidth\n  }), [getDefaultWidth, getDefaultMinWidth]);\n  let tableLayout = useMemo(() => new TableLayout({\n    // If props.rowHeight is auto, then use estimated heights, otherwise use fixed heights.\n    rowHeight: overflowMode === 'wrap' ? undefined : ROW_HEIGHTS[density],\n    estimatedRowHeight: overflowMode === 'wrap' ? ROW_HEIGHTS[density] : undefined,\n    headingHeight: overflowMode === 'wrap' ? undefined : DEFAULT_HEADER_HEIGHT,\n    estimatedHeadingHeight: overflowMode === 'wrap' ? DEFAULT_HEADER_HEIGHT : undefined,\n    columnLayout,\n    initialCollection: state.collection\n  }),\n  // don't recompute when state.collection changes, only used for initial value\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [overflowMode, density, columnLayout]);\n\n  // Use a proxy so that a new object is created for each render so that alternate instances aren't affected by mutation.\n  // This can be thought of as equivalent to `{…tableLayout, tableState: state}`, but works with classes as well.\n  let layout = useMemo(() => {\n    let proxy = new Proxy(tableLayout, {\n      get(target, prop, receiver) {\n        return prop === 'tableState' ? state : Reflect.get(target, prop, receiver);\n      }\n    });\n    return proxy;\n  }, [state, tableLayout]);\n  let {\n    gridProps\n  } = useTable({\n    ...props,\n    isVirtualized: true,\n    layout\n  }, state, domRef);\n  const isEmpty = state.collection.size === 0;\n  return /*#__PURE__*/jsx(TableContext.Provider, {\n    value: {\n      isEmpty,\n      layout,\n      state\n    },\n    children: /*#__PURE__*/jsx(TableVirtualizer, {\n      layout: layout,\n      collection: state.collection,\n      renderView: renderView,\n      renderWrapper: renderWrapper,\n      bodyRef: bodyRef,\n      domRef: domRef,\n      headerRef: headerRef,\n      ...gridProps,\n      ...props\n    })\n  });\n}\nfunction TableVirtualizer(props) {\n  var _layout$getLayoutInfo;\n  let {\n    layout,\n    collection,\n    // focusedKey,\n    renderView,\n    renderWrapper,\n    domRef,\n    bodyRef,\n    headerRef,\n    disallowEmptySelection: UNUSED_disallowEmptySelection,\n    onRowAction: UNUSED_onRowAction,\n    onSelectionChange: UNUSED_onSelectionChange,\n    onSortChange: UNUSED_onSortChange,\n    overflowMode: UNUSED_overflowMode,\n    renderEmptyState: UNUSED_renderEmptyState,\n    selectedKeys: UNUSED_selectedKeys,\n    sortDescriptor: UNUSED_sortDescriptor,\n    selectionMode,\n    ...otherProps\n  } = props;\n  let {\n    direction\n  } = useLocale();\n  let loadingState = collection.body.props.loadingState;\n  let isLoading = loadingState === 'loading' || loadingState === 'loadingMore';\n  let onLoadMore = collection.body.props.onLoadMore;\n  let virtualizerState = useVirtualizerState({\n    layout,\n    collection,\n    renderView,\n    renderWrapper,\n    onVisibleRectChange(rect) {\n      let bodyEl = bodyRef.current;\n      if (bodyEl) {\n        bodyEl.scrollTop = rect.y;\n        setScrollLeft(bodyEl, direction, rect.x);\n      }\n    }\n  });\n  let styleProps = useTableStyleProps(props);\n\n  // Sync the scroll position from the table body to the header container.\n  let syncScroll = useCallback(() => {\n    let bodyEl = bodyRef.current;\n    let headerEl = headerRef.current;\n    if (bodyEl && headerEl) {\n      headerEl.scrollLeft = bodyEl.scrollLeft;\n    }\n  }, [bodyRef, headerRef]);\n  let scrollToItem = useCallback(key => {\n    let item = collection.getItem(key);\n    let column = collection.columns[0];\n    let virtualizer = virtualizerState.virtualizer;\n    virtualizer.scrollToItem(key, {\n      duration: 0,\n      // Prevent scrolling to the top when clicking on column headers.\n      shouldScrollY: (item === null || item === void 0 ? void 0 : item.type) !== 'column',\n      // Offset scroll position by width of selection cell\n      // (which is sticky and will overlap the cell we're scrolling to).\n      offsetX: column.props.isSelectionCell || column.props.isDragButtonCell ? layout.getColumnWidth(column.key) : 0\n    });\n\n    // Sync the scroll positions of the column headers and the body so scrollIntoViewport can\n    // properly decide if the column is outside the viewport or not\n    syncScroll();\n  }, [collection, layout, syncScroll, virtualizerState.virtualizer]);\n  let memoedVirtualizerProps = useMemo(() => ({\n    scrollToItem,\n    isLoading,\n    onLoadMore\n  }), [scrollToItem, isLoading, onLoadMore]);\n  let {\n    virtualizerProps,\n    scrollViewProps\n  } = useVirtualizer(memoedVirtualizerProps, virtualizerState, domRef);\n  let mergedProps = mergeProps(filterDOMProps(otherProps), virtualizerProps);\n  const [headerView, bodyView] = virtualizerState.visibleViews;\n  let headerHeight = ((_layout$getLayoutInfo = layout.getLayoutInfo('header')) === null || _layout$getLayoutInfo === void 0 ? void 0 : _layout$getLayoutInfo.rect.height) || 0;\n  let bodyStyleProps = useBodyStyleProps({\n    style: {\n      flex: 1\n    }\n  });\n  return /*#__PURE__*/jsx(FocusScope, {\n    children: /*#__PURE__*/jsxs(\"div\", {\n      ...mergedProps,\n      ...styleProps,\n      ref: domRef,\n      children: [/*#__PURE__*/jsx(TableHeaderWrapper, {\n        ref: headerRef,\n        style: {\n          height: headerHeight,\n          willChange: virtualizerState.isScrolling ? 'scroll-position' : undefined\n        },\n        children: headerView\n      }), /*#__PURE__*/jsx(ScrollView, {\n        ...scrollViewProps,\n        ...bodyStyleProps,\n        role: \"presentation\",\n        innerStyle: {\n          overflow: 'visible'\n        },\n        ref: bodyRef,\n        contentSize: virtualizerState.contentSize,\n        onScrollStart: virtualizerState.startScrolling,\n        onScrollEnd: virtualizerState.endScrolling,\n        onScroll: syncScroll,\n        children: bodyView\n      })]\n    })\n  });\n}\n\n// Styled components\n// ------------------------------\n\nfunction TableHead({\n  children,\n  style\n}) {\n  let {\n    rowGroupProps\n  } = useTableRowGroup();\n  let styleProps = useHeadStyleProps({\n    style\n  });\n  return /*#__PURE__*/jsx(\"div\", {\n    ...rowGroupProps,\n    ...styleProps,\n    children: children\n  });\n}\nfunction TableBody(props) {\n  let {\n    rowGroupProps\n  } = useTableRowGroup();\n  return /*#__PURE__*/jsx(\"div\", {\n    ...rowGroupProps,\n    ...props\n  });\n}\nconst TableHeaderWrapper = /*#__PURE__*/forwardRef(function TableHeaderWrapper(props, ref) {\n  let styleProps = useHeaderWrapperStyleProps(props);\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: ref,\n    role: \"presentation\",\n    ...styleProps,\n    children: props.children\n  });\n});\nfunction TableHeaderRow(props) {\n  let ref = useRef(null);\n  let {\n    state\n  } = useTableContext();\n  let {\n    rowProps\n  } = useTableHeaderRow({\n    node: props.item,\n    isVirtualized: true\n  }, state, ref);\n  let styleProps = useRowHeaderStyleProps(props);\n  return /*#__PURE__*/jsx(\"div\", {\n    ...rowProps,\n    ...styleProps,\n    ref: ref,\n    children: props.children\n  });\n}\nfunction TableColumnHeader({\n  column\n}) {\n  let ref = useRef(null);\n  let {\n    state\n  } = useTableContext();\n  let {\n    columnHeaderProps\n  } = useTableColumnHeader({\n    node: column,\n    isVirtualized: true\n  }, state, ref);\n  let {\n    isFocusVisible,\n    focusProps\n  } = useFocusRing();\n  let columnProps = column.props;\n  let cellStyleProps = useCellStyleProps(columnProps, {\n    isFocusVisible\n  });\n  return /*#__PURE__*/jsxs(\"div\", {\n    ...mergeProps(columnHeaderProps, focusProps),\n    ...cellStyleProps,\n    ref: ref,\n    children: [columnProps.allowsSorting && columnProps.align === 'end' && /*#__PURE__*/jsx(SortIndicator, {}), columnProps.hideHeader ? /*#__PURE__*/jsx(VisuallyHidden, {\n      children: column.rendered\n    }) : isReactText(column.rendered) ? /*#__PURE__*/jsx(Text, {\n      color: \"inherit\",\n      weight: \"semibold\",\n      truncate: true,\n      children: column.rendered\n    }) : column.rendered, columnProps.allowsSorting && columnProps.align !== 'end' && /*#__PURE__*/jsx(SortIndicator, {})]\n  });\n}\nfunction TableRow({\n  children,\n  hasAction,\n  item,\n  style\n}) {\n  let ref = useRef(null);\n  let {\n    state\n  } = useTableContext();\n  let allowsInteraction = state.selectionManager.selectionMode !== 'none' || hasAction;\n  let isDisabled = !allowsInteraction || state.disabledKeys.has(item.key);\n  let {\n    rowProps\n  } = useTableRow({\n    node: item,\n    isVirtualized: true\n  }, state, ref);\n  // The row should show the focus background style when any cell inside it is focused.\n  // If the row itself is focused, then it should have a blue focus indicator on the left.\n  let {\n    isFocusVisible: isFocusWithin,\n    focusProps: focusWithinProps\n  } = useFocusRing({\n    within: true\n  });\n  let {\n    isFocusVisible,\n    focusProps\n  } = useFocusRing();\n  let {\n    hoverProps,\n    isHovered\n  } = useHover({\n    isDisabled\n  });\n  let {\n    pressProps,\n    isPressed\n  } = usePress({\n    isDisabled\n  });\n  let styleProps = useRowStyleProps({\n    style\n  }, {\n    isFocusVisible,\n    isFocusWithin,\n    isHovered,\n    isPressed\n  });\n  return /*#__PURE__*/jsx(\"div\", {\n    ...mergeProps(rowProps, focusWithinProps, focusProps, hoverProps, pressProps),\n    ...styleProps,\n    ref: ref,\n    children: children\n  });\n}\nfunction TableCell({\n  cell,\n  overflowMode\n}) {\n  let ref = useRef(null);\n  let {\n    state\n  } = useTableContext();\n  let {\n    gridCellProps\n  } = useTableCell({\n    node: cell,\n    isVirtualized: true\n  }, state, ref);\n  let {\n    isFocusVisible,\n    focusProps\n  } = useFocusRing();\n  let styleProps = useCellStyleProps(cell.column.props, {\n    isFocusVisible\n  });\n  return /*#__PURE__*/jsx(\"div\", {\n    ...mergeProps(gridCellProps, focusProps),\n    ...styleProps,\n    ref: ref,\n    children: /*#__PURE__*/jsx(SlotProvider, {\n      slots: {\n        text: {\n          truncate: overflowMode === 'truncate'\n        }\n      },\n      children: isReactText(cell.rendered) ? /*#__PURE__*/jsx(Text, {\n        children: cell.rendered\n      }) : cell.rendered\n    })\n  });\n}\nfunction TableCheckboxCell({\n  cell\n}) {\n  let ref = useRef(null);\n  let {\n    state\n  } = useTableContext();\n  let {\n    gridCellProps\n  } = useTableCell({\n    node: cell,\n    isVirtualized: true\n  }, state, ref);\n  let {\n    checkboxProps\n  } = useTableSelectionCheckbox({\n    key: cell.parentKey\n  }, state);\n  let styleProps = useSelectionCellStyleProps();\n  return /*#__PURE__*/jsx(\"div\", {\n    ...styleProps,\n    ...gridCellProps,\n    ref: ref,\n    children: /*#__PURE__*/jsx(Checkbox, {\n      ...checkboxProps\n    })\n  });\n}\nfunction TableSelectAllCell({\n  column\n}) {\n  let ref = useRef(null);\n  let {\n    state\n  } = useTableContext();\n  let {\n    columnHeaderProps\n  } = useTableColumnHeader({\n    node: column,\n    isVirtualized: true\n  }, state, ref);\n  let {\n    checkboxProps\n  } = useTableSelectAllCheckbox(state);\n  let styleProps = useSelectionCellStyleProps();\n  return /*#__PURE__*/jsx(\"div\", {\n    ...styleProps,\n    ...columnHeaderProps,\n    ref: ref,\n    children: state.selectionManager.selectionMode === 'single' ? /*#__PURE__*/jsx(Text, {\n      visuallyHidden: true,\n      children: checkboxProps['aria-label']\n    }) : /*#__PURE__*/jsx(Checkbox, {\n      ...checkboxProps\n    })\n  });\n}\nfunction CenteredWrapper({\n  children\n}) {\n  let {\n    state\n  } = useTableContext();\n  return /*#__PURE__*/jsx(\"div\", {\n    role: \"row\",\n    \"aria-rowindex\": state.collection.headerRows.length + state.collection.size + 1,\n    style: {\n      alignItems: 'center',\n      display: 'flex',\n      height: '100%',\n      justifyContent: 'center',\n      width: '100%'\n    },\n    children: /*#__PURE__*/jsx(\"div\", {\n      role: \"rowheader\",\n      \"aria-colspan\": state.collection.columns.length,\n      children: children\n    })\n  });\n}\n\n// Override TS for Column to support Keystar UI specific props.\nconst VoussoirColumn = Column;\n\nexport { VoussoirColumn as Column, TableView };\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Key} from '@react-types/shared';\nimport {TableState} from '@react-stately/table';\n\nexport const gridIds = new WeakMap<TableState<unknown>, string>();\n\nfunction normalizeKey(key: Key): string {\n  if (typeof key === 'string') {\n    return key.replace(/\\s*/g, '');\n  }\n\n  return '' + key;\n}\n\nexport function getColumnHeaderId<T>(state: TableState<T>, columnKey: Key): string {\n  let gridId = gridIds.get(state);\n  if (!gridId) {\n    throw new Error('Unknown grid');\n  }\n\n  return `${gridId}-${normalizeKey(columnKey)}`;\n}\n\nexport function getCellId<T>(state: TableState<T>, rowKey: Key, columnKey: Key) {\n  let gridId = gridIds.get(state);\n  if (!gridId) {\n    throw new Error('Unknown grid');\n  }\n\n  return `${gridId}-${normalizeKey(rowKey)}-${normalizeKey(columnKey)}`;\n}\n\nexport function getRowLabelledBy<T>(state: TableState<T>, rowKey: Key): string {\n  // A row is labelled by it's row headers.\n  return [...state.collection.rowHeaderColumnKeys].map(columnKey =>\n    getCellId(state, rowKey, columnKey)\n  ).join(' ');\n}\n", "{\n  \"ascending\": \"تصاعدي\",\n  \"ascendingSort\": \"ترتيب حسب العمود {columnName} بترتيب تصاعدي\",\n  \"columnSize\": \"{value} بالبكسل\",\n  \"descending\": \"تنازلي\",\n  \"descendingSort\": \"ترتيب حسب العمود {columnName} بترتيب تنازلي\",\n  \"resizerDescription\": \"اضغط على مفتاح Enter لبدء تغيير الحجم\",\n  \"select\": \"تحديد\",\n  \"selectAll\": \"تحديد الكل\",\n  \"sortable\": \"عمود قابل للترتيب\"\n}\n", "{\n  \"ascending\": \"възходящ\",\n  \"ascendingSort\": \"сортирано по колона {columnName} във възходящ ред\",\n  \"columnSize\": \"{value} пиксела\",\n  \"descending\": \"низходящ\",\n  \"descendingSort\": \"сортирано по колона {columnName} в низходящ ред\",\n  \"resizerDescription\": \"Натиснете „Enter“, за да започнете да преоразмерявате\",\n  \"select\": \"Изберете\",\n  \"selectAll\": \"Изберете всичко\",\n  \"sortable\": \"сортираща колона\"\n}\n", "{\n  \"ascending\": \"vzestupně\",\n  \"ascendingSort\": \"řazeno vzestupně podle sloupce {columnName}\",\n  \"columnSize\": \"{value} pixelů\",\n  \"descending\": \"sestupně\",\n  \"descendingSort\": \"řazeno sestupně podle sloupce {columnName}\",\n  \"resizerDescription\": \"Stisknutím klávesy Enter začnete měnit velikost\",\n  \"select\": \"Vybrat\",\n  \"selectAll\": \"Vybrat vše\",\n  \"sortable\": \"sloupec s možností řazení\"\n}\n", "{\n  \"ascending\": \"stigende\",\n  \"ascendingSort\": \"sorteret efter kolonne {columnName} i stigende rækkefølge\",\n  \"columnSize\": \"{value} pixels\",\n  \"descending\": \"faldende\",\n  \"descendingSort\": \"sorteret efter kolonne {columnName} i faldende rækkefølge\",\n  \"resizerDescription\": \"Tryk på Enter for at ændre størrelse\",\n  \"select\": \"Vælg\",\n  \"selectAll\": \"Vælg alle\",\n  \"sortable\": \"sorterbar kolonne\"\n}\n", "{\n  \"ascending\": \"aufsteigend\",\n  \"ascendingSort\": \"sortiert nach Spalte {columnName} in aufsteigender Reihenfolge\",\n  \"columnSize\": \"{value} Pixel\",\n  \"descending\": \"absteigend\",\n  \"descendingSort\": \"sortiert nach Spalte {columnName} in absteigender Reihenfolge\",\n  \"resizerDescription\": \"Eingabetaste zum Starten der Größenänderung drücken\",\n  \"select\": \"Auswählen\",\n  \"selectAll\": \"Alles auswählen\",\n  \"sortable\": \"sortierbare Spalte\"\n}\n", "{\n  \"ascending\": \"αύξουσα\",\n  \"ascendingSort\": \"διαλογή ανά στήλη {columnName} σε αύξουσα σειρά\",\n  \"columnSize\": \"{value} pixel\",\n  \"descending\": \"φθίνουσα\",\n  \"descendingSort\": \"διαλογή ανά στήλη {columnName} σε φθίνουσα σειρά\",\n  \"resizerDescription\": \"Πατήστε Enter για έναρξη της αλλαγής μεγέθους\",\n  \"select\": \"Επιλογή\",\n  \"selectAll\": \"Επιλογή όλων\",\n  \"sortable\": \"Στήλη διαλογής\"\n}\n", "{\n  \"select\": \"Select\",\n  \"selectAll\": \"Select All\",\n  \"sortable\": \"sortable column\",\n  \"ascending\": \"ascending\",\n  \"descending\": \"descending\",\n  \"ascendingSort\": \"sorted by column {columnName} in ascending order\",\n  \"descendingSort\": \"sorted by column {columnName} in descending order\",\n  \"columnSize\": \"{value} pixels\",\n  \"resizerDescription\": \"Press Enter to start resizing\"\n}\n", "{\n  \"ascending\": \"de subida\",\n  \"ascendingSort\": \"ordenado por columna {columnName} en orden de subida\",\n  \"columnSize\": \"{value} píxeles\",\n  \"descending\": \"de bajada\",\n  \"descendingSort\": \"ordenado por columna {columnName} en orden de bajada\",\n  \"resizerDescription\": \"Pulse Intro para empezar a redimensionar\",\n  \"select\": \"Seleccionar\",\n  \"selectAll\": \"Seleccionar todos\",\n  \"sortable\": \"columna ordenable\"\n}\n", "{\n  \"ascending\": \"tõusev järjestus\",\n  \"ascendingSort\": \"sorditud veeru järgi {columnName} tõusvas järjestuses\",\n  \"columnSize\": \"{value} pikslit\",\n  \"descending\": \"laskuv järjestus\",\n  \"descendingSort\": \"sorditud veeru järgi {columnName} laskuvas järjestuses\",\n  \"resizerDescription\": \"Suuruse muutmise alustamiseks vajutage klahvi Enter\",\n  \"select\": \"Vali\",\n  \"selectAll\": \"Vali kõik\",\n  \"sortable\": \"sorditav veerg\"\n}\n", "{\n  \"ascending\": \"nouseva\",\n  \"ascendingSort\": \"lajiteltu sarakkeen {columnName} mukaan nousevassa järjestyksessä\",\n  \"columnSize\": \"{value} pikseliä\",\n  \"descending\": \"laskeva\",\n  \"descendingSort\": \"lajiteltu sarakkeen {columnName} mukaan laskevassa järjestyksessä\",\n  \"resizerDescription\": \"Aloita koon muutos painamalla Enter-näppäintä\",\n  \"select\": \"Valitse\",\n  \"selectAll\": \"Valitse kaikki\",\n  \"sortable\": \"lajiteltava sarake\"\n}\n", "{\n  \"ascending\": \"croissant\",\n  \"ascendingSort\": \"trié en fonction de la colonne {columnName} par ordre croissant\",\n  \"columnSize\": \"{value} pixels\",\n  \"descending\": \"décroissant\",\n  \"descendingSort\": \"trié en fonction de la colonne {columnName} par ordre décroissant\",\n  \"resizerDescription\": \"Appuyez sur Entrée pour commencer le redimensionnement.\",\n  \"select\": \"Sélectionner\",\n  \"selectAll\": \"Sélectionner tout\",\n  \"sortable\": \"colonne triable\"\n}\n", "{\n  \"ascending\": \"עולה\",\n  \"ascendingSort\": \"מוין לפי עמודה {columnName} בסדר עולה\",\n  \"columnSize\": \"{value} פיקסלים\",\n  \"descending\": \"יורד\",\n  \"descendingSort\": \"מוין לפי עמודה {columnName} בסדר יורד\",\n  \"resizerDescription\": \"הקש Enter כדי לשנות את הגודל\",\n  \"select\": \"בחר\",\n  \"selectAll\": \"בחר הכול\",\n  \"sortable\": \"עמודה שניתן למיין\"\n}\n", "{\n  \"ascending\": \"rastući\",\n  \"ascendingSort\": \"razvrstano po stupcima {columnName} rastućem redoslijedom\",\n  \"columnSize\": \"{value} piksela\",\n  \"descending\": \"padajući\",\n  \"descendingSort\": \"razvrstano po stupcima {columnName} padajućim redoslijedom\",\n  \"resizerDescription\": \"Pritisnite Enter da biste započeli promenu veličine\",\n  \"select\": \"Odaberite\",\n  \"selectAll\": \"Odaberite sve\",\n  \"sortable\": \"stupac koji se može razvrstati\"\n}\n", "{\n  \"ascending\": \"növekvő\",\n  \"ascendingSort\": \"rendezve a(z) {columnName} oszlop szerint, növekvő sorrendben\",\n  \"columnSize\": \"{value} képpont\",\n  \"descending\": \"csökkenő\",\n  \"descendingSort\": \"rendezve a(z) {columnName} oszlop szerint, csökkenő sorrendben\",\n  \"resizerDescription\": \"Nyomja le az Enter billentyűt az átméretezés megkezdéséhez\",\n  \"select\": \"Kijelölés\",\n  \"selectAll\": \"Összes kijelölése\",\n  \"sortable\": \"rendezendő oszlop\"\n}\n", "{\n  \"ascending\": \"crescente\",\n  \"ascendingSort\": \"in ordine crescente in base alla colonna {columnName}\",\n  \"columnSize\": \"{value} pixel\",\n  \"descending\": \"decrescente\",\n  \"descendingSort\": \"in ordine decrescente in base alla colonna {columnName}\",\n  \"resizerDescription\": \"Premi Invio per iniziare a ridimensionare\",\n  \"select\": \"Seleziona\",\n  \"selectAll\": \"Seleziona tutto\",\n  \"sortable\": \"colonna ordinabile\"\n}\n", "{\n  \"ascending\": \"昇順\",\n  \"ascendingSort\": \"列 {columnName} を昇順で並べ替え\",\n  \"columnSize\": \"{value} ピクセル\",\n  \"descending\": \"降順\",\n  \"descendingSort\": \"列 {columnName} を降順で並べ替え\",\n  \"resizerDescription\": \"Enter キーを押してサイズ変更を開始\",\n  \"select\": \"選択\",\n  \"selectAll\": \"すべて選択\",\n  \"sortable\": \"並べ替え可能な列\"\n}\n", "{\n  \"ascending\": \"오름차순\",\n  \"ascendingSort\": \"{columnName} 열을 기준으로 오름차순으로 정렬됨\",\n  \"columnSize\": \"{value} 픽셀\",\n  \"descending\": \"내림차순\",\n  \"descendingSort\": \"{columnName} 열을 기준으로 내림차순으로 정렬됨\",\n  \"resizerDescription\": \"크기 조정을 시작하려면 Enter를 누르세요.\",\n  \"select\": \"선택\",\n  \"selectAll\": \"모두 선택\",\n  \"sortable\": \"정렬 가능한 열\"\n}\n", "{\n  \"ascending\": \"didėjančia tvarka\",\n  \"ascendingSort\": \"surikiuota pagal stulpelį {columnName} didėjančia tvarka\",\n  \"columnSize\": \"{value} piks.\",\n  \"descending\": \"mažėjančia tvarka\",\n  \"descendingSort\": \"surikiuota pagal stulpelį {columnName} mažėjančia tvarka\",\n  \"resizerDescription\": \"Paspauskite „Enter“, kad pradėtumėte keisti dydį\",\n  \"select\": \"Pasirinkti\",\n  \"selectAll\": \"Pasirinkti viską\",\n  \"sortable\": \"rikiuojamas stulpelis\"\n}\n", "{\n  \"ascending\": \"augošā secībā\",\n  \"ascendingSort\": \"kārtots pēc kolonnas {columnName} augošā secībā\",\n  \"columnSize\": \"{value} pikseļi\",\n  \"descending\": \"dilstošā secībā\",\n  \"descendingSort\": \"kārtots pēc kolonnas {columnName} dilstošā secībā\",\n  \"resizerDescription\": \"Nospiediet Enter, lai sāktu izmēru mainīšanu\",\n  \"select\": \"Atlasīt\",\n  \"selectAll\": \"Atlasīt visu\",\n  \"sortable\": \"kārtojamā kolonna\"\n}\n", "{\n  \"ascending\": \"stigende\",\n  \"ascendingSort\": \"sortert etter kolonne {columnName} i stigende rekkefølge\",\n  \"columnSize\": \"{value} piksler\",\n  \"descending\": \"synkende\",\n  \"descendingSort\": \"sortert etter kolonne {columnName} i synkende rekkefølge\",\n  \"resizerDescription\": \"Trykk på Enter for å starte størrelsesendring\",\n  \"select\": \"Velg\",\n  \"selectAll\": \"Velg alle\",\n  \"sortable\": \"kolonne som kan sorteres\"\n}\n", "{\n  \"ascending\": \"oplopend\",\n  \"ascendingSort\": \"gesorteerd in oplopende volgorde in kolom {columnName}\",\n  \"columnSize\": \"{value} pixels\",\n  \"descending\": \"aflopend\",\n  \"descendingSort\": \"gesorteerd in aflopende volgorde in kolom {columnName}\",\n  \"resizerDescription\": \"Druk op Enter om het formaat te wijzigen\",\n  \"select\": \"Selecteren\",\n  \"selectAll\": \"Alles selecteren\",\n  \"sortable\": \"sorteerbare kolom\"\n}\n", "{\n  \"ascending\": \"rosnąco\",\n  \"ascendingSort\": \"posortowano według kolumny {columnName} w porządku rosnącym\",\n  \"columnSize\": \"Liczba pikseli: {value}\",\n  \"descending\": \"malejąco\",\n  \"descendingSort\": \"posortowano według kolumny {columnName} w porządku malejącym\",\n  \"resizerDescription\": \"Naciśnij Enter, aby rozpocząć zmienianie rozmiaru\",\n  \"select\": \"Zaznacz\",\n  \"selectAll\": \"Zaznacz wszystko\",\n  \"sortable\": \"kolumna z możliwością sortowania\"\n}\n", "{\n  \"ascending\": \"crescente\",\n  \"ascendingSort\": \"classificado pela coluna {columnName} em ordem crescente\",\n  \"columnSize\": \"{value} pixels\",\n  \"descending\": \"decrescente\",\n  \"descendingSort\": \"classificado pela coluna {columnName} em ordem decrescente\",\n  \"resizerDescription\": \"Pressione Enter para começar a redimensionar\",\n  \"select\": \"Selecionar\",\n  \"selectAll\": \"Selecionar tudo\",\n  \"sortable\": \"coluna classificável\"\n}\n", "{\n  \"ascending\": \"ascendente\",\n  \"ascendingSort\": \"Ordenar por coluna {columnName} em ordem ascendente\",\n  \"columnSize\": \"{value} pixels\",\n  \"descending\": \"descendente\",\n  \"descendingSort\": \"Ordenar por coluna {columnName} em ordem descendente\",\n  \"resizerDescription\": \"Prima Enter para iniciar o redimensionamento\",\n  \"select\": \"Selecionar\",\n  \"selectAll\": \"Selecionar tudo\",\n  \"sortable\": \"Coluna ordenável\"\n}\n", "{\n  \"ascending\": \"crescătoare\",\n  \"ascendingSort\": \"sortate după coloana {columnName} în ordine crescătoare\",\n  \"columnSize\": \"{value} pixeli\",\n  \"descending\": \"descrescătoare\",\n  \"descendingSort\": \"sortate după coloana {columnName} în ordine descrescătoare\",\n  \"resizerDescription\": \"Apăsați pe Enter pentru a începe redimensionarea\",\n  \"select\": \"Selectare\",\n  \"selectAll\": \"Selectare totală\",\n  \"sortable\": \"coloană sortabilă\"\n}\n", "{\n  \"ascending\": \"возрастание\",\n  \"ascendingSort\": \"сортировать столбец {columnName} в порядке возрастания\",\n  \"columnSize\": \"{value} пикс.\",\n  \"descending\": \"убывание\",\n  \"descendingSort\": \"сортировать столбец {columnName} в порядке убывания\",\n  \"resizerDescription\": \"Нажмите клавишу Enter для начала изменения размеров\",\n  \"select\": \"Выбрать\",\n  \"selectAll\": \"Выбрать все\",\n  \"sortable\": \"сортируемый столбец\"\n}\n", "{\n  \"ascending\": \"vzostupne\",\n  \"ascendingSort\": \"zoradené zostupne podľa stĺpca {columnName}\",\n  \"columnSize\": \"Počet pixelov: {value}\",\n  \"descending\": \"zostupne\",\n  \"descendingSort\": \"zoradené zostupne podľa stĺpca {columnName}\",\n  \"resizerDescription\": \"Stlačením klávesu Enter začnete zmenu veľkosti\",\n  \"select\": \"Vybrať\",\n  \"selectAll\": \"Vybrať všetko\",\n  \"sortable\": \"zoraditeľný stĺpec\"\n}\n", "{\n  \"ascending\": \"naraščajoče\",\n  \"ascendingSort\": \"razvrščeno po stolpcu {columnName} v naraščajočem vrstnem redu\",\n  \"columnSize\": \"{value} slikovnih pik\",\n  \"descending\": \"padajoče\",\n  \"descendingSort\": \"razvrščeno po stolpcu {columnName} v padajočem vrstnem redu\",\n  \"resizerDescription\": \"Pritisnite tipko Enter da začnete spreminjati velikost\",\n  \"select\": \"Izberite\",\n  \"selectAll\": \"Izberite vse\",\n  \"sortable\": \"razvrstljivi stolpec\"\n}\n", "{\n  \"ascending\": \"rastući\",\n  \"ascendingSort\": \"sortirano po kolonama {columnName} rastućim redosledom\",\n  \"columnSize\": \"{value} piksela\",\n  \"descending\": \"padajući\",\n  \"descendingSort\": \"sortirano po kolonama {columnName} padajućim redosledom\",\n  \"resizerDescription\": \"Pritisnite Enter da biste započeli promenu veličine\",\n  \"select\": \"Izaberite\",\n  \"selectAll\": \"Izaberite sve\",\n  \"sortable\": \"kolona koja se može sortirati\"\n}\n", "{\n  \"ascending\": \"stigande\",\n  \"ascendingSort\": \"sorterat på kolumn {columnName} i stigande ordning\",\n  \"columnSize\": \"{value} pixlar\",\n  \"descending\": \"fallande\",\n  \"descendingSort\": \"sorterat på kolumn {columnName} i fallande ordning\",\n  \"resizerDescription\": \"Tryck på Retur för att börja ändra storlek\",\n  \"select\": \"Markera\",\n  \"selectAll\": \"Markera allt\",\n  \"sortable\": \"sorterbar kolumn\"\n}\n", "{\n  \"ascending\": \"artan sırada\",\n  \"ascendingSort\": \"{columnName} sütuna göre artan düzende sırala\",\n  \"columnSize\": \"{value} piksel\",\n  \"descending\": \"azalan sırada\",\n  \"descendingSort\": \"{columnName} sütuna göre azalan düzende sırala\",\n  \"resizerDescription\": \"Yeniden boyutlandırmak için Enter'a basın\",\n  \"select\": \"Seç\",\n  \"selectAll\": \"Tümünü Seç\",\n  \"sortable\": \"Sıralanabilir sütun\"\n}\n", "{\n  \"ascending\": \"висхідний\",\n  \"ascendingSort\": \"відсортовано за стовпцем {columnName} у висхідному порядку\",\n  \"columnSize\": \"{value} пікс.\",\n  \"descending\": \"низхідний\",\n  \"descendingSort\": \"відсортовано за стовпцем {columnName} у низхідному порядку\",\n  \"resizerDescription\": \"Натисніть Enter, щоб почати зміну розміру\",\n  \"select\": \"Вибрати\",\n  \"selectAll\": \"Вибрати все\",\n  \"sortable\": \"сортувальний стовпець\"\n}\n", "{\n  \"ascending\": \"升序\",\n  \"ascendingSort\": \"按列 {columnName} 升序排序\",\n  \"columnSize\": \"{value} 像素\",\n  \"descending\": \"降序\",\n  \"descendingSort\": \"按列 {columnName} 降序排序\",\n  \"resizerDescription\": \"按“输入”键开始调整大小。\",\n  \"select\": \"选择\",\n  \"selectAll\": \"全选\",\n  \"sortable\": \"可排序的列\"\n}\n", "{\n  \"ascending\": \"遞增\",\n  \"ascendingSort\": \"已依據「{columnName}」欄遞增排序\",\n  \"columnSize\": \"{value} 像素\",\n  \"descending\": \"遞減\",\n  \"descendingSort\": \"已依據「{columnName}」欄遞減排序\",\n  \"resizerDescription\": \"按 Enter 鍵以開始調整大小\",\n  \"select\": \"選取\",\n  \"selectAll\": \"全選\",\n  \"sortable\": \"可排序的欄\"\n}\n", "const _temp0 = require(\"../intl/ar-AE.json\");\nconst _temp1 = require(\"../intl/bg-BG.json\");\nconst _temp2 = require(\"../intl/cs-CZ.json\");\nconst _temp3 = require(\"../intl/da-DK.json\");\nconst _temp4 = require(\"../intl/de-DE.json\");\nconst _temp5 = require(\"../intl/el-GR.json\");\nconst _temp6 = require(\"../intl/en-US.json\");\nconst _temp7 = require(\"../intl/es-ES.json\");\nconst _temp8 = require(\"../intl/et-EE.json\");\nconst _temp9 = require(\"../intl/fi-FI.json\");\nconst _temp10 = require(\"../intl/fr-FR.json\");\nconst _temp11 = require(\"../intl/he-IL.json\");\nconst _temp12 = require(\"../intl/hr-HR.json\");\nconst _temp13 = require(\"../intl/hu-HU.json\");\nconst _temp14 = require(\"../intl/it-IT.json\");\nconst _temp15 = require(\"../intl/ja-JP.json\");\nconst _temp16 = require(\"../intl/ko-KR.json\");\nconst _temp17 = require(\"../intl/lt-LT.json\");\nconst _temp18 = require(\"../intl/lv-LV.json\");\nconst _temp19 = require(\"../intl/nb-NO.json\");\nconst _temp20 = require(\"../intl/nl-NL.json\");\nconst _temp21 = require(\"../intl/pl-PL.json\");\nconst _temp22 = require(\"../intl/pt-BR.json\");\nconst _temp23 = require(\"../intl/pt-PT.json\");\nconst _temp24 = require(\"../intl/ro-RO.json\");\nconst _temp25 = require(\"../intl/ru-RU.json\");\nconst _temp26 = require(\"../intl/sk-SK.json\");\nconst _temp27 = require(\"../intl/sl-SI.json\");\nconst _temp28 = require(\"../intl/sr-SP.json\");\nconst _temp29 = require(\"../intl/sv-SE.json\");\nconst _temp30 = require(\"../intl/tr-TR.json\");\nconst _temp31 = require(\"../intl/uk-UA.json\");\nconst _temp32 = require(\"../intl/zh-CN.json\");\nconst _temp33 = require(\"../intl/zh-TW.json\");\nmodule.exports = {\n  \"ar-AE\": _temp0,\n  \"bg-BG\": _temp1,\n  \"cs-CZ\": _temp2,\n  \"da-DK\": _temp3,\n  \"de-DE\": _temp4,\n  \"el-GR\": _temp5,\n  \"en-US\": _temp6,\n  \"es-ES\": _temp7,\n  \"et-EE\": _temp8,\n  \"fi-FI\": _temp9,\n  \"fr-FR\": _temp10,\n  \"he-IL\": _temp11,\n  \"hr-HR\": _temp12,\n  \"hu-HU\": _temp13,\n  \"it-IT\": _temp14,\n  \"ja-JP\": _temp15,\n  \"ko-KR\": _temp16,\n  \"lt-LT\": _temp17,\n  \"lv-LV\": _temp18,\n  \"nb-NO\": _temp19,\n  \"nl-NL\": _temp20,\n  \"pl-PL\": _temp21,\n  \"pt-BR\": _temp22,\n  \"pt-PT\": _temp23,\n  \"ro-RO\": _temp24,\n  \"ru-RU\": _temp25,\n  \"sk-SK\": _temp26,\n  \"sl-SI\": _temp27,\n  \"sr-SP\": _temp28,\n  \"sv-SE\": _temp29,\n  \"tr-TR\": _temp30,\n  \"uk-UA\": _temp31,\n  \"zh-CN\": _temp32,\n  \"zh-TW\": _temp33\n}", "/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {getChildNodes, getFirstItem, getNthItem} from '@react-stately/collections';\nimport {GridKeyboardDelegate} from '@react-aria/grid';\nimport {Key, Node} from '@react-types/shared';\nimport {TableCollection} from '@react-types/table';\n\nexport class TableKeyboardDelegate<T> extends GridKeyboardDelegate<T, TableCollection<T>> {\n\n  protected isCell(node: Node<T>) {\n    return node.type === 'cell' || node.type === 'rowheader' || node.type === 'column';\n  }\n\n  getKeyBelow(key: Key) {\n    let startItem = this.collection.getItem(key);\n    if (!startItem) {\n      return;\n    }\n\n    // If focus was on a column, then focus the first child column if any,\n    // or find the corresponding cell in the first row.\n    if (startItem.type === 'column') {\n      let child = getFirstItem(getChildNodes(startItem, this.collection));\n      if (child) {\n        return child.key;\n      }\n\n      let firstKey = this.getFirstKey();\n      if (firstKey == null) {\n        return;\n      }\n\n      let firstItem = this.collection.getItem(firstKey);\n      return getNthItem(getChildNodes(firstItem, this.collection), startItem.index).key;\n    }\n\n    return super.getKeyBelow(key);\n  }\n\n  getKeyAbove(key: Key) {\n    let startItem = this.collection.getItem(key);\n    if (!startItem) {\n      return;\n    }\n\n    // If focus was on a column, focus the parent column if any\n    if (startItem.type === 'column') {\n      let parent = this.collection.getItem(startItem.parentKey);\n      if (parent && parent.type === 'column') {\n        return parent.key;\n      }\n\n      return;\n    }\n\n    // only return above row key if not header row\n    let superKey = super.getKeyAbove(key);\n    if (superKey != null && this.collection.getItem(superKey).type !== 'headerrow') {\n      return superKey;\n    }\n\n    // If no item was found, and focus was on a cell, then focus the\n    // corresponding column header.\n    if (this.isCell(startItem)) {\n      return this.collection.columns[startItem.index].key;\n    }\n\n    // If focus was on a row, then focus the first column header.\n    return this.collection.columns[0].key;\n  }\n\n  private findNextColumnKey(column: Node<T>) {\n    // Search following columns\n    let key = this.findNextKey(column.key, item => item.type === 'column');\n    if (key != null) {\n      return key;\n    }\n\n    // Wrap around to the first column\n    let row = this.collection.headerRows[column.level];\n    for (let item of getChildNodes(row, this.collection)) {\n      if (item.type === 'column') {\n        return item.key;\n      }\n    }\n  }\n\n  private findPreviousColumnKey(column: Node<T>) {\n    // Search previous columns\n    let key = this.findPreviousKey(column.key, item => item.type === 'column');\n    if (key != null) {\n      return key;\n    }\n\n    // Wrap around to the last column\n    let row = this.collection.headerRows[column.level];\n    let childNodes = [...getChildNodes(row, this.collection)];\n    for (let i = childNodes.length - 1; i >= 0; i--) {\n      let item = childNodes[i];\n      if (item.type === 'column') {\n        return item.key;\n      }\n    }\n  }\n\n  getKeyRightOf(key: Key) {\n    let item = this.collection.getItem(key);\n    if (!item) {\n      return;\n    }\n\n    // If focus was on a column, then focus the next column\n    if (item.type === 'column') {\n      return this.direction === 'rtl'\n        ? this.findPreviousColumnKey(item)\n        : this.findNextColumnKey(item);\n    }\n\n    return super.getKeyRightOf(key);\n  }\n\n  getKeyLeftOf(key: Key) {\n    let item = this.collection.getItem(key);\n    if (!item) {\n      return;\n    }\n\n    // If focus was on a column, then focus the previous column\n    if (item.type === 'column') {\n      return this.direction === 'rtl'\n        ? this.findNextColumnKey(item)\n        : this.findPreviousColumnKey(item);\n    }\n\n    return super.getKeyLeftOf(key);\n  }\n\n  getKeyForSearch(search: string, fromKey?: Key) {\n    if (!this.collator) {\n      return null;\n    }\n\n    let collection = this.collection;\n    let key = fromKey ?? this.getFirstKey();\n    if (key == null) {\n      return null;\n    }\n\n    // If the starting key is a cell, search from its parent row.\n    let startItem = collection.getItem(key);\n    if (startItem.type === 'cell') {\n      key = startItem.parentKey;\n    }\n\n    let hasWrapped = false;\n    while (key != null) {\n      let item = collection.getItem(key);\n\n      // Check each of the row header cells in this row for a match\n      for (let cell of getChildNodes(item, this.collection)) {\n        let column = collection.columns[cell.index];\n        if (collection.rowHeaderColumnKeys.has(column.key) && cell.textValue) {\n          let substring = cell.textValue.slice(0, search.length);\n          if (this.collator.compare(substring, search) === 0) {\n            // If we started on a cell, end on the matching cell. Otherwise, end on the row.\n            let fromItem = fromKey != null ? collection.getItem(fromKey) : startItem;\n            return fromItem.type === 'cell'\n              ? cell.key\n              : item.key;\n          }\n        }\n      }\n\n      key = this.getKeyBelow(key);\n\n      // Wrap around when reaching the end of the collection\n      if (key == null && !hasWrapped) {\n        key = this.getFirstKey();\n        hasWrapped = true;\n      }\n    }\n\n    return null;\n  }\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {announce} from '@react-aria/live-announcer';\nimport {GridAria, GridProps, useGrid} from '@react-aria/grid';\nimport {gridIds} from './utils';\n// @ts-ignore\nimport intlMessages from '../intl/*.json';\nimport {Layout} from '@react-stately/virtualizer';\nimport {mergeProps, useDescription, useId, useUpdateEffect} from '@react-aria/utils';\nimport {Node} from '@react-types/shared';\nimport {RefObject, useMemo} from 'react';\nimport {TableKeyboardDelegate} from './TableKeyboardDelegate';\nimport {tableNestedRows} from '@react-stately/flags';\nimport {TableState, TreeGridState} from '@react-stately/table';\nimport {useCollator, useLocale, useLocalizedStringFormatter} from '@react-aria/i18n';\n\nexport interface AriaTableProps<T> extends GridProps {\n  /** The layout object for the table. Computes what content is visible and how to position and style them. */\n  layout?: Layout<Node<T>>\n}\n\n/**\n * Provides the behavior and accessibility implementation for a table component.\n * A table displays data in rows and columns and enables a user to navigate its contents via directional navigation keys,\n * and optionally supports row selection and sorting.\n * @param props - Props for the table.\n * @param state - State for the table, as returned by `useTableState`.\n * @param ref - The ref attached to the table element.\n */\nexport function useTable<T>(props: AriaTableProps<T>, state: TableState<T> | TreeGridState<T>, ref: RefObject<HTMLElement>): GridAria {\n  let {\n    keyboardDelegate,\n    isVirtualized,\n    layout\n  } = props;\n\n  // By default, a KeyboardDelegate is provided which uses the DOM to query layout information (e.g. for page up/page down).\n  // When virtualized, the layout object will be passed in as a prop and override this.\n  let collator = useCollator({usage: 'search', sensitivity: 'base'});\n  let {direction} = useLocale();\n  let disabledBehavior = state.selectionManager.disabledBehavior;\n  let delegate = useMemo(() => keyboardDelegate || new TableKeyboardDelegate({\n    collection: state.collection,\n    disabledKeys: state.disabledKeys,\n    disabledBehavior,\n    ref,\n    direction,\n    collator,\n    layout\n  }), [keyboardDelegate, state.collection, state.disabledKeys, disabledBehavior, ref, direction, collator, layout]);\n  let id = useId(props.id);\n  gridIds.set(state, id);\n\n  let {gridProps} = useGrid({\n    ...props,\n    id,\n    keyboardDelegate: delegate\n  }, state, ref);\n\n  // Override to include header rows\n  if (isVirtualized) {\n    gridProps['aria-rowcount'] = state.collection.size + state.collection.headerRows.length;\n  }\n\n  if (tableNestedRows() && 'expandedKeys' in state) {\n    gridProps.role = 'treegrid';\n  }\n\n  let {column, direction: sortDirection} = state.sortDescriptor || {};\n  let stringFormatter = useLocalizedStringFormatter(intlMessages, '@react-aria/table');\n  let sortDescription = useMemo(() => {\n    let columnName = state.collection.columns.find(c => c.key === column)?.textValue;\n    return sortDirection && column ? stringFormatter.format(`${sortDirection}Sort`, {columnName}) : undefined;\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sortDirection, column, state.collection.columns]);\n\n  let descriptionProps = useDescription(sortDescription);\n\n  // Only announce after initial render, tabbing to the table will tell you the initial sort info already\n  useUpdateEffect(() => {\n    announce(sortDescription, 'assertive', 500);\n  }, [sortDescription]);\n\n  return {\n    gridProps: mergeProps(\n      gridProps,\n      descriptionProps,\n      {\n        // merge sort description with long press information\n        'aria-describedby': [descriptionProps['aria-describedby'], gridProps['aria-describedby']].filter(Boolean).join(' ')\n      }\n    )\n  };\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {DOMAttributes, FocusableElement} from '@react-types/shared';\nimport {getColumnHeaderId} from './utils';\nimport {GridNode} from '@react-types/grid';\n// @ts-ignore\nimport intlMessages from '../intl/*.json';\nimport {isAndroid, mergeProps, useDescription} from '@react-aria/utils';\nimport {RefObject, useEffect} from 'react';\nimport {TableState} from '@react-stately/table';\nimport {useFocusable} from '@react-aria/focus';\nimport {useGridCell} from '@react-aria/grid';\nimport {useLocalizedStringFormatter} from '@react-aria/i18n';\nimport {usePress} from '@react-aria/interactions';\n\nexport interface AriaTableColumnHeaderProps<T> {\n  /** An object representing the [column header](https://www.w3.org/TR/wai-aria-1.1/#columnheader). Contains all the relevant information that makes up the column header. */\n  node: GridNode<T>,\n  /** Whether the [column header](https://www.w3.org/TR/wai-aria-1.1/#columnheader) is contained in a virtual scroller. */\n  isVirtualized?: boolean\n}\n\nexport interface TableColumnHeaderAria {\n  /** Props for the [column header](https://www.w3.org/TR/wai-aria-1.1/#columnheader) element. */\n  columnHeaderProps: DOMAttributes\n}\n\n/**\n * Provides the behavior and accessibility implementation for a column header in a table.\n * @param props - Props for the column header.\n * @param state - State of the table, as returned by `useTableState`.\n * @param ref - The ref attached to the column header element.\n */\nexport function useTableColumnHeader<T>(props: AriaTableColumnHeaderProps<T>, state: TableState<T>, ref: RefObject<FocusableElement>): TableColumnHeaderAria {\n  let {node} = props;\n  let allowsSorting = node.props.allowsSorting;\n  // if there are no focusable children, the column header will focus the cell\n  let {gridCellProps} = useGridCell({...props, focusMode: 'child'}, state, ref);\n\n  let isSelectionCellDisabled = node.props.isSelectionCell && state.selectionManager.selectionMode === 'single';\n\n  let {pressProps} = usePress({\n    isDisabled: !allowsSorting || isSelectionCellDisabled,\n    onPress() {\n      state.sort(node.key);\n    },\n    ref\n  });\n\n  // Needed to pick up the focusable context, enabling things like Tooltips for example\n  let {focusableProps} = useFocusable({}, ref);\n\n  let ariaSort: DOMAttributes['aria-sort'] = null;\n  let isSortedColumn = state.sortDescriptor?.column === node.key;\n  let sortDirection = state.sortDescriptor?.direction;\n  // aria-sort not supported in Android Talkback\n  if (node.props.allowsSorting && !isAndroid()) {\n    ariaSort = isSortedColumn ? sortDirection : 'none';\n  }\n\n  let stringFormatter = useLocalizedStringFormatter(intlMessages, '@react-aria/table');\n  let sortDescription;\n  if (allowsSorting) {\n    sortDescription = `${stringFormatter.format('sortable')}`;\n    // Android Talkback doesn't support aria-sort so we add sort order details to the aria-described by here\n    if (isSortedColumn && sortDirection && isAndroid()) {\n      sortDescription = `${sortDescription}, ${stringFormatter.format(sortDirection)}`;\n    }\n  }\n\n  let descriptionProps = useDescription(sortDescription);\n\n  let shouldDisableFocus = state.collection.size === 0;\n  useEffect(() => {\n    if (shouldDisableFocus && state.selectionManager.focusedKey === node.key) {\n      state.selectionManager.setFocusedKey(null);\n    }\n  }, [shouldDisableFocus, state.selectionManager, node.key]);\n\n  return {\n    columnHeaderProps: {\n      ...mergeProps(\n        gridCellProps,\n        pressProps,\n        focusableProps,\n        descriptionProps,\n        // If the table is empty, make all column headers untabbable\n        shouldDisableFocus && {tabIndex: -1}\n      ),\n      role: 'columnheader',\n      id: getColumnHeaderId(state, node.key),\n      'aria-colspan': node.colspan && node.colspan > 1 ? node.colspan : null,\n      'aria-sort': ariaSort\n    }\n  };\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {FocusableElement} from '@react-types/shared';\nimport {getLastItem} from '@react-stately/collections';\nimport {getRowLabelledBy} from './utils';\nimport {getSyntheticLinkProps, mergeProps} from '@react-aria/utils';\nimport type {GridNode} from '@react-types/grid';\nimport {GridRowAria, GridRowProps, useGridRow} from '@react-aria/grid';\nimport {HTMLAttributes, RefObject} from 'react';\nimport {TableCollection} from '@react-types/table';\nimport {tableNestedRows} from '@react-stately/flags';\nimport {TableState, TreeGridState} from '@react-stately/table';\nimport {useLocale} from '@react-aria/i18n';\n\nconst EXPANSION_KEYS = {\n  expand: {\n    ltr: 'ArrowRight',\n    rtl: 'ArrowLeft'\n  },\n  'collapse': {\n    ltr: 'ArrowLeft',\n    rtl: 'ArrowRight'\n  }\n};\n\n/**\n * Provides the behavior and accessibility implementation for a row in a table.\n * @param props - Props for the row.\n * @param state - State of the table, as returned by `useTableState`.\n */\nexport function useTableRow<T>(props: GridRowProps<T>, state: TableState<T> | TreeGridState<T>, ref: RefObject<FocusableElement>): GridRowAria {\n  let {node, isVirtualized} = props;\n  let {rowProps, ...states} = useGridRow<T, TableCollection<T>, TableState<T>>(props, state, ref);\n  let {direction} = useLocale();\n\n  if (isVirtualized && !(tableNestedRows() && 'expandedKeys' in state)) {\n    rowProps['aria-rowindex'] = node.index + 1 + state.collection.headerRows.length; // aria-rowindex is 1 based\n  } else {\n    delete rowProps['aria-rowindex'];\n  }\n\n  let treeGridRowProps: HTMLAttributes<HTMLElement> = {};\n  if (tableNestedRows() && 'expandedKeys' in state) {\n    let treeNode = state.keyMap.get(node.key);\n    if (treeNode != null) {\n      let hasChildRows = treeNode.props?.UNSTABLE_childItems || treeNode.props?.children?.length > state.userColumnCount;\n      treeGridRowProps = {\n        onKeyDown: (e) => {\n          if ((e.key === EXPANSION_KEYS['expand'][direction]) && state.selectionManager.focusedKey === treeNode.key && hasChildRows && state.expandedKeys !== 'all' && !state.expandedKeys.has(treeNode.key)) {\n            state.toggleKey(treeNode.key);\n            e.stopPropagation();\n          } else if ((e.key === EXPANSION_KEYS['collapse'][direction]) && state.selectionManager.focusedKey === treeNode.key && hasChildRows && (state.expandedKeys === 'all' || state.expandedKeys.has(treeNode.key))) {\n            state.toggleKey(treeNode.key);\n            e.stopPropagation();\n          }\n        },\n        'aria-expanded': hasChildRows ? state.expandedKeys === 'all' || state.expandedKeys.has(node.key) : undefined,\n        'aria-level': treeNode.level,\n        'aria-posinset': treeNode.indexOfType + 1,\n        'aria-setsize': treeNode.level > 1 ?\n          (getLastItem(state.keyMap.get(treeNode?.parentKey).childNodes) as GridNode<T>).indexOfType + 1 :\n          (getLastItem(state.keyMap.get(state.collection.body.key).childNodes) as GridNode<T>).indexOfType + 1\n      };\n    }\n  }\n\n  let linkProps = states.hasAction ? getSyntheticLinkProps(node.props) : {};\n  return {\n    rowProps: {\n      ...mergeProps(rowProps, treeGridRowProps, linkProps),\n      'aria-labelledby': getRowLabelledBy(state, node.key)\n    },\n    ...states\n  };\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {DOMAttributes} from '@react-types/shared';\nimport {GridRowProps} from '@react-aria/grid';\nimport {RefObject} from 'react';\nimport {tableNestedRows} from '@react-stately/flags';\nimport {TableState} from '@react-stately/table';\n\nexport interface TableHeaderRowAria {\n  /** Props for the grid row element. */\n  rowProps: DOMAttributes\n}\n\n/**\n * Provides the behavior and accessibility implementation for a header row in a table.\n * @param props - Props for the row.\n * @param state - State of the table, as returned by `useTableState`.\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function useTableHeaderRow<T>(props: GridRowProps<T>, state: TableState<T>, ref: RefObject<Element>): TableHeaderRowAria {\n  let {node, isVirtualized} = props;\n  let rowProps = {\n    role: 'row'\n  };\n\n  if (isVirtualized && !(tableNestedRows() && 'expandedKeys' in state)) {\n    rowProps['aria-rowindex'] = node.index + 1; // aria-rowindex is 1 based\n  }\n\n  return {\n    rowProps\n  };\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {DOMAttributes, FocusableElement} from '@react-types/shared';\nimport {getCellId} from './utils';\nimport {GridNode} from '@react-types/grid';\nimport {RefObject} from 'react';\nimport {TableState} from '@react-stately/table';\nimport {useGridCell} from '@react-aria/grid';\n\nexport interface AriaTableCellProps {\n  /** An object representing the table cell. Contains all the relevant information that makes up the row header. */\n  node: GridNode<unknown>,\n  /** Whether the cell is contained in a virtual scroller. */\n  isVirtualized?: boolean,\n  /** Whether selection should occur on press up instead of press down. */\n  shouldSelectOnPressUp?: boolean,\n  /**\n   * Handler that is called when a user performs an action on the cell.\n   * Please use onCellAction at the collection level instead.\n   * @deprecated\n   **/\n  onAction?: () => void\n}\n\nexport interface TableCellAria {\n  /** Props for the table cell element. */\n  gridCellProps: DOMAttributes,\n  /** Whether the cell is currently in a pressed state. */\n  isPressed: boolean\n}\n\n/**\n * Provides the behavior and accessibility implementation for a cell in a table.\n * @param props - Props for the cell.\n * @param state - State of the table, as returned by `useTableState`.\n * @param ref - The ref attached to the cell element.\n */\nexport function useTableCell<T>(props: AriaTableCellProps, state: TableState<T>, ref: RefObject<FocusableElement>): TableCellAria {\n  let {gridCellProps, isPressed} = useGridCell(props, state, ref);\n\n  let columnKey = props.node.column.key;\n  if (state.collection.rowHeaderColumnKeys.has(columnKey)) {\n    gridCellProps.role = 'rowheader';\n    gridCellProps.id = getCellId(state, props.node.parentKey, columnKey);\n  }\n\n  return {\n    gridCellProps,\n    isPressed\n  };\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {AriaCheckboxProps} from '@react-types/checkbox';\nimport {getRowLabelledBy} from './utils';\n// @ts-ignore\nimport intlMessages from '../intl/*.json';\nimport {Key} from '@react-types/shared';\nimport {TableState} from '@react-stately/table';\nimport {useGridSelectionCheckbox} from '@react-aria/grid';\nimport {useLocalizedStringFormatter} from '@react-aria/i18n';\n\nexport interface AriaTableSelectionCheckboxProps {\n  /** A unique key for the checkbox. */\n  key: Key\n}\n\nexport interface TableSelectionCheckboxAria {\n  /** Props for the row selection checkbox element. */\n  checkboxProps: AriaCheckboxProps\n}\n\nexport interface TableSelectAllCheckboxAria {\n  /** Props for the select all checkbox element. */\n  checkboxProps: AriaCheckboxProps\n}\n\n/**\n * Provides the behavior and accessibility implementation for a selection checkbox in a table.\n * @param props - Props for the selection checkbox.\n * @param state - State of the table, as returned by `useTableState`.\n */\nexport function useTableSelectionCheckbox<T>(props: AriaTableSelectionCheckboxProps, state: TableState<T>): TableSelectionCheckboxAria {\n  let {key} = props;\n  const {checkboxProps} = useGridSelectionCheckbox(props, state);\n\n  return {\n    checkboxProps: {\n      ...checkboxProps,\n      'aria-labelledby': `${checkboxProps.id} ${getRowLabelledBy(state, key)}`\n    }\n  };\n}\n\n/**\n * Provides the behavior and accessibility implementation for the select all checkbox in a table.\n * @param props - Props for the select all checkbox.\n * @param state - State of the table, as returned by `useTableState`.\n */\nexport function useTableSelectAllCheckbox<T>(state: TableState<T>): TableSelectAllCheckboxAria {\n  let {isEmpty, isSelectAll, selectionMode} = state.selectionManager;\n  const stringFormatter = useLocalizedStringFormatter(intlMessages, '@react-aria/table');\n\n  return {\n    checkboxProps: {\n      'aria-label': stringFormatter.format(selectionMode === 'single' ? 'select' : 'selectAll'),\n      isSelected: isSelectAll,\n      isDisabled: selectionMode !== 'multiple' || state.collection.size === 0,\n      isIndeterminate: !isEmpty && !isSelectAll,\n      onChange: () => state.selectionManager.toggleSelectAll()\n    }\n  };\n}\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nexport {useTable} from './useTable';\nexport {useTableColumnHeader} from './useTableColumnHeader';\nexport {useTableRow} from './useTableRow';\nexport {useTableHeaderRow} from './useTableHeaderRow';\nexport {useTableCell} from './useTableCell';\nexport {useTableSelectionCheckbox, useTableSelectAllCheckbox} from './useTableSelectionCheckbox';\nexport {useTableColumnResize} from './useTableColumnResize';\n\n// Workaround for a Parcel bug where re-exports don't work in the CommonJS output format...\n// export {useGridRowGroup as useTableRowGroup} from '@react-aria/grid';\nimport {GridRowGroupAria, useGridRowGroup} from '@react-aria/grid';\nexport function useTableRowGroup(): GridRowGroupAria {\n  return useGridRowGroup();\n}\n\nexport type {AriaTableProps} from './useTable';\nexport type {GridAria, GridRowAria, GridRowProps} from '@react-aria/grid';\nexport type {AriaTableColumnHeaderProps, TableColumnHeaderAria} from './useTableColumnHeader';\nexport type {AriaTableCellProps, TableCellAria} from './useTableCell';\nexport type {TableHeaderRowAria} from './useTableHeaderRow';\nexport type {AriaTableSelectionCheckboxProps, TableSelectionCheckboxAria, TableSelectAllCheckboxAria} from './useTableSelectionCheckbox';\nexport type {AriaTableColumnResizeProps, TableColumnResizeAria} from './useTableColumnResize';\n", "import { jsx } from 'react/jsx-runtime';\n\nconst arrowUpIcon = /*#__PURE__*/jsx(\"path\", {\n  d: \"m5 12 7-7 7 7M12 19V5\"\n});\n\nexport { arrowUpIcon };\n", "\n/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */\nfunction isNothing(subject) {\n  return (typeof subject === 'undefined') || (subject === null);\n}\n\n\nfunction isObject(subject) {\n  return (typeof subject === 'object') && (subject !== null);\n}\n\n\nfunction toArray(sequence) {\n  if (Array.isArray(sequence)) return sequence;\n  else if (isNothing(sequence)) return [];\n\n  return [ sequence ];\n}\n\n\nfunction extend(target, source) {\n  var index, length, key, sourceKeys;\n\n  if (source) {\n    sourceKeys = Object.keys(source);\n\n    for (index = 0, length = sourceKeys.length; index < length; index += 1) {\n      key = sourceKeys[index];\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n\nfunction repeat(string, count) {\n  var result = '', cycle;\n\n  for (cycle = 0; cycle < count; cycle += 1) {\n    result += string;\n  }\n\n  return result;\n}\n\n\nfunction isNegativeZero(number) {\n  return (number === 0) && (Number.NEGATIVE_INFINITY === 1 / number);\n}\n\n\nvar isNothing_1      = isNothing;\nvar isObject_1       = isObject;\nvar toArray_1        = toArray;\nvar repeat_1         = repeat;\nvar isNegativeZero_1 = isNegativeZero;\nvar extend_1         = extend;\n\nvar common = {\n\tisNothing: isNothing_1,\n\tisObject: isObject_1,\n\ttoArray: toArray_1,\n\trepeat: repeat_1,\n\tisNegativeZero: isNegativeZero_1,\n\textend: extend_1\n};\n\n// YAML error class. http://stackoverflow.com/questions/8458984\n\n\nfunction formatError(exception, compact) {\n  var where = '', message = exception.reason || '(unknown reason)';\n\n  if (!exception.mark) return message;\n\n  if (exception.mark.name) {\n    where += 'in \"' + exception.mark.name + '\" ';\n  }\n\n  where += '(' + (exception.mark.line + 1) + ':' + (exception.mark.column + 1) + ')';\n\n  if (!compact && exception.mark.snippet) {\n    where += '\\n\\n' + exception.mark.snippet;\n  }\n\n  return message + ' ' + where;\n}\n\n\nfunction YAMLException$1(reason, mark) {\n  // Super constructor\n  Error.call(this);\n\n  this.name = 'YAMLException';\n  this.reason = reason;\n  this.mark = mark;\n  this.message = formatError(this, false);\n\n  // Include stack trace in error object\n  if (Error.captureStackTrace) {\n    // Chrome and NodeJS\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    // FF, IE 10+ and Safari 6+. Fallback for others\n    this.stack = (new Error()).stack || '';\n  }\n}\n\n\n// Inherit from Error\nYAMLException$1.prototype = Object.create(Error.prototype);\nYAMLException$1.prototype.constructor = YAMLException$1;\n\n\nYAMLException$1.prototype.toString = function toString(compact) {\n  return this.name + ': ' + formatError(this, compact);\n};\n\n\nvar exception = YAMLException$1;\n\n// get snippet for a single line, respecting maxLength\nfunction getLine(buffer, lineStart, lineEnd, position, maxLineLength) {\n  var head = '';\n  var tail = '';\n  var maxHalfLength = Math.floor(maxLineLength / 2) - 1;\n\n  if (position - lineStart > maxHalfLength) {\n    head = ' ... ';\n    lineStart = position - maxHalfLength + head.length;\n  }\n\n  if (lineEnd - position > maxHalfLength) {\n    tail = ' ...';\n    lineEnd = position + maxHalfLength - tail.length;\n  }\n\n  return {\n    str: head + buffer.slice(lineStart, lineEnd).replace(/\\t/g, '→') + tail,\n    pos: position - lineStart + head.length // relative position\n  };\n}\n\n\nfunction padStart(string, max) {\n  return common.repeat(' ', max - string.length) + string;\n}\n\n\nfunction makeSnippet(mark, options) {\n  options = Object.create(options || null);\n\n  if (!mark.buffer) return null;\n\n  if (!options.maxLength) options.maxLength = 79;\n  if (typeof options.indent      !== 'number') options.indent      = 1;\n  if (typeof options.linesBefore !== 'number') options.linesBefore = 3;\n  if (typeof options.linesAfter  !== 'number') options.linesAfter  = 2;\n\n  var re = /\\r?\\n|\\r|\\0/g;\n  var lineStarts = [ 0 ];\n  var lineEnds = [];\n  var match;\n  var foundLineNo = -1;\n\n  while ((match = re.exec(mark.buffer))) {\n    lineEnds.push(match.index);\n    lineStarts.push(match.index + match[0].length);\n\n    if (mark.position <= match.index && foundLineNo < 0) {\n      foundLineNo = lineStarts.length - 2;\n    }\n  }\n\n  if (foundLineNo < 0) foundLineNo = lineStarts.length - 1;\n\n  var result = '', i, line;\n  var lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;\n  var maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);\n\n  for (i = 1; i <= options.linesBefore; i++) {\n    if (foundLineNo - i < 0) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo - i],\n      lineEnds[foundLineNo - i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),\n      maxLineLength\n    );\n    result = common.repeat(' ', options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n' + result;\n  }\n\n  line = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);\n  result += common.repeat(' ', options.indent) + padStart((mark.line + 1).toString(), lineNoLength) +\n    ' | ' + line.str + '\\n';\n  result += common.repeat('-', options.indent + lineNoLength + 3 + line.pos) + '^' + '\\n';\n\n  for (i = 1; i <= options.linesAfter; i++) {\n    if (foundLineNo + i >= lineEnds.length) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo + i],\n      lineEnds[foundLineNo + i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),\n      maxLineLength\n    );\n    result += common.repeat(' ', options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n';\n  }\n\n  return result.replace(/\\n$/, '');\n}\n\n\nvar snippet = makeSnippet;\n\nvar TYPE_CONSTRUCTOR_OPTIONS = [\n  'kind',\n  'multi',\n  'resolve',\n  'construct',\n  'instanceOf',\n  'predicate',\n  'represent',\n  'representName',\n  'defaultStyle',\n  'styleAliases'\n];\n\nvar YAML_NODE_KINDS = [\n  'scalar',\n  'sequence',\n  'mapping'\n];\n\nfunction compileStyleAliases(map) {\n  var result = {};\n\n  if (map !== null) {\n    Object.keys(map).forEach(function (style) {\n      map[style].forEach(function (alias) {\n        result[String(alias)] = style;\n      });\n    });\n  }\n\n  return result;\n}\n\nfunction Type$1(tag, options) {\n  options = options || {};\n\n  Object.keys(options).forEach(function (name) {\n    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {\n      throw new exception('Unknown option \"' + name + '\" is met in definition of \"' + tag + '\" YAML type.');\n    }\n  });\n\n  // TODO: Add tag format check.\n  this.options       = options; // keep original options in case user wants to extend this type later\n  this.tag           = tag;\n  this.kind          = options['kind']          || null;\n  this.resolve       = options['resolve']       || function () { return true; };\n  this.construct     = options['construct']     || function (data) { return data; };\n  this.instanceOf    = options['instanceOf']    || null;\n  this.predicate     = options['predicate']     || null;\n  this.represent     = options['represent']     || null;\n  this.representName = options['representName'] || null;\n  this.defaultStyle  = options['defaultStyle']  || null;\n  this.multi         = options['multi']         || false;\n  this.styleAliases  = compileStyleAliases(options['styleAliases'] || null);\n\n  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {\n    throw new exception('Unknown kind \"' + this.kind + '\" is specified for \"' + tag + '\" YAML type.');\n  }\n}\n\nvar type = Type$1;\n\n/*eslint-disable max-len*/\n\n\n\n\n\nfunction compileList(schema, name) {\n  var result = [];\n\n  schema[name].forEach(function (currentType) {\n    var newIndex = result.length;\n\n    result.forEach(function (previousType, previousIndex) {\n      if (previousType.tag === currentType.tag &&\n          previousType.kind === currentType.kind &&\n          previousType.multi === currentType.multi) {\n\n        newIndex = previousIndex;\n      }\n    });\n\n    result[newIndex] = currentType;\n  });\n\n  return result;\n}\n\n\nfunction compileMap(/* lists... */) {\n  var result = {\n        scalar: {},\n        sequence: {},\n        mapping: {},\n        fallback: {},\n        multi: {\n          scalar: [],\n          sequence: [],\n          mapping: [],\n          fallback: []\n        }\n      }, index, length;\n\n  function collectType(type) {\n    if (type.multi) {\n      result.multi[type.kind].push(type);\n      result.multi['fallback'].push(type);\n    } else {\n      result[type.kind][type.tag] = result['fallback'][type.tag] = type;\n    }\n  }\n\n  for (index = 0, length = arguments.length; index < length; index += 1) {\n    arguments[index].forEach(collectType);\n  }\n  return result;\n}\n\n\nfunction Schema$1(definition) {\n  return this.extend(definition);\n}\n\n\nSchema$1.prototype.extend = function extend(definition) {\n  var implicit = [];\n  var explicit = [];\n\n  if (definition instanceof type) {\n    // Schema.extend(type)\n    explicit.push(definition);\n\n  } else if (Array.isArray(definition)) {\n    // Schema.extend([ type1, type2, ... ])\n    explicit = explicit.concat(definition);\n\n  } else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {\n    // Schema.extend({ explicit: [ type1, type2, ... ], implicit: [ type1, type2, ... ] })\n    if (definition.implicit) implicit = implicit.concat(definition.implicit);\n    if (definition.explicit) explicit = explicit.concat(definition.explicit);\n\n  } else {\n    throw new exception('Schema.extend argument should be a Type, [ Type ], ' +\n      'or a schema definition ({ implicit: [...], explicit: [...] })');\n  }\n\n  implicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n\n    if (type$1.loadKind && type$1.loadKind !== 'scalar') {\n      throw new exception('There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.');\n    }\n\n    if (type$1.multi) {\n      throw new exception('There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.');\n    }\n  });\n\n  explicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n  });\n\n  var result = Object.create(Schema$1.prototype);\n\n  result.implicit = (this.implicit || []).concat(implicit);\n  result.explicit = (this.explicit || []).concat(explicit);\n\n  result.compiledImplicit = compileList(result, 'implicit');\n  result.compiledExplicit = compileList(result, 'explicit');\n  result.compiledTypeMap  = compileMap(result.compiledImplicit, result.compiledExplicit);\n\n  return result;\n};\n\n\nvar schema = Schema$1;\n\nvar str = new type('tag:yaml.org,2002:str', {\n  kind: 'scalar',\n  construct: function (data) { return data !== null ? data : ''; }\n});\n\nvar seq = new type('tag:yaml.org,2002:seq', {\n  kind: 'sequence',\n  construct: function (data) { return data !== null ? data : []; }\n});\n\nvar map = new type('tag:yaml.org,2002:map', {\n  kind: 'mapping',\n  construct: function (data) { return data !== null ? data : {}; }\n});\n\nvar failsafe = new schema({\n  explicit: [\n    str,\n    seq,\n    map\n  ]\n});\n\nfunction resolveYamlNull(data) {\n  if (data === null) return true;\n\n  var max = data.length;\n\n  return (max === 1 && data === '~') ||\n         (max === 4 && (data === 'null' || data === 'Null' || data === 'NULL'));\n}\n\nfunction constructYamlNull() {\n  return null;\n}\n\nfunction isNull(object) {\n  return object === null;\n}\n\nvar _null = new type('tag:yaml.org,2002:null', {\n  kind: 'scalar',\n  resolve: resolveYamlNull,\n  construct: constructYamlNull,\n  predicate: isNull,\n  represent: {\n    canonical: function () { return '~';    },\n    lowercase: function () { return 'null'; },\n    uppercase: function () { return 'NULL'; },\n    camelcase: function () { return 'Null'; },\n    empty:     function () { return '';     }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction resolveYamlBoolean(data) {\n  if (data === null) return false;\n\n  var max = data.length;\n\n  return (max === 4 && (data === 'true' || data === 'True' || data === 'TRUE')) ||\n         (max === 5 && (data === 'false' || data === 'False' || data === 'FALSE'));\n}\n\nfunction constructYamlBoolean(data) {\n  return data === 'true' ||\n         data === 'True' ||\n         data === 'TRUE';\n}\n\nfunction isBoolean(object) {\n  return Object.prototype.toString.call(object) === '[object Boolean]';\n}\n\nvar bool = new type('tag:yaml.org,2002:bool', {\n  kind: 'scalar',\n  resolve: resolveYamlBoolean,\n  construct: constructYamlBoolean,\n  predicate: isBoolean,\n  represent: {\n    lowercase: function (object) { return object ? 'true' : 'false'; },\n    uppercase: function (object) { return object ? 'TRUE' : 'FALSE'; },\n    camelcase: function (object) { return object ? 'True' : 'False'; }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction isHexCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) ||\n         ((0x41/* A */ <= c) && (c <= 0x46/* F */)) ||\n         ((0x61/* a */ <= c) && (c <= 0x66/* f */));\n}\n\nfunction isOctCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x37/* 7 */));\n}\n\nfunction isDecCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */));\n}\n\nfunction resolveYamlInteger(data) {\n  if (data === null) return false;\n\n  var max = data.length,\n      index = 0,\n      hasDigits = false,\n      ch;\n\n  if (!max) return false;\n\n  ch = data[index];\n\n  // sign\n  if (ch === '-' || ch === '+') {\n    ch = data[++index];\n  }\n\n  if (ch === '0') {\n    // 0\n    if (index + 1 === max) return true;\n    ch = data[++index];\n\n    // base 2, base 8, base 16\n\n    if (ch === 'b') {\n      // base 2\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (ch !== '0' && ch !== '1') return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'x') {\n      // base 16\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isHexCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'o') {\n      // base 8\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isOctCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n  }\n\n  // base 10 (except 0)\n\n  // value should not start with `_`;\n  if (ch === '_') return false;\n\n  for (; index < max; index++) {\n    ch = data[index];\n    if (ch === '_') continue;\n    if (!isDecCode(data.charCodeAt(index))) {\n      return false;\n    }\n    hasDigits = true;\n  }\n\n  // Should have digits and should not end with `_`\n  if (!hasDigits || ch === '_') return false;\n\n  return true;\n}\n\nfunction constructYamlInteger(data) {\n  var value = data, sign = 1, ch;\n\n  if (value.indexOf('_') !== -1) {\n    value = value.replace(/_/g, '');\n  }\n\n  ch = value[0];\n\n  if (ch === '-' || ch === '+') {\n    if (ch === '-') sign = -1;\n    value = value.slice(1);\n    ch = value[0];\n  }\n\n  if (value === '0') return 0;\n\n  if (ch === '0') {\n    if (value[1] === 'b') return sign * parseInt(value.slice(2), 2);\n    if (value[1] === 'x') return sign * parseInt(value.slice(2), 16);\n    if (value[1] === 'o') return sign * parseInt(value.slice(2), 8);\n  }\n\n  return sign * parseInt(value, 10);\n}\n\nfunction isInteger(object) {\n  return (Object.prototype.toString.call(object)) === '[object Number]' &&\n         (object % 1 === 0 && !common.isNegativeZero(object));\n}\n\nvar int = new type('tag:yaml.org,2002:int', {\n  kind: 'scalar',\n  resolve: resolveYamlInteger,\n  construct: constructYamlInteger,\n  predicate: isInteger,\n  represent: {\n    binary:      function (obj) { return obj >= 0 ? '0b' + obj.toString(2) : '-0b' + obj.toString(2).slice(1); },\n    octal:       function (obj) { return obj >= 0 ? '0o'  + obj.toString(8) : '-0o'  + obj.toString(8).slice(1); },\n    decimal:     function (obj) { return obj.toString(10); },\n    /* eslint-disable max-len */\n    hexadecimal: function (obj) { return obj >= 0 ? '0x' + obj.toString(16).toUpperCase() :  '-0x' + obj.toString(16).toUpperCase().slice(1); }\n  },\n  defaultStyle: 'decimal',\n  styleAliases: {\n    binary:      [ 2,  'bin' ],\n    octal:       [ 8,  'oct' ],\n    decimal:     [ 10, 'dec' ],\n    hexadecimal: [ 16, 'hex' ]\n  }\n});\n\nvar YAML_FLOAT_PATTERN = new RegExp(\n  // 2.5e4, 2.5 and integers\n  '^(?:[-+]?(?:[0-9][0-9_]*)(?:\\\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?' +\n  // .2e4, .2\n  // special case, seems not from spec\n  '|\\\\.[0-9_]+(?:[eE][-+]?[0-9]+)?' +\n  // .inf\n  '|[-+]?\\\\.(?:inf|Inf|INF)' +\n  // .nan\n  '|\\\\.(?:nan|NaN|NAN))$');\n\nfunction resolveYamlFloat(data) {\n  if (data === null) return false;\n\n  if (!YAML_FLOAT_PATTERN.test(data) ||\n      // Quick hack to not allow integers end with `_`\n      // Probably should update regexp & check speed\n      data[data.length - 1] === '_') {\n    return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlFloat(data) {\n  var value, sign;\n\n  value  = data.replace(/_/g, '').toLowerCase();\n  sign   = value[0] === '-' ? -1 : 1;\n\n  if ('+-'.indexOf(value[0]) >= 0) {\n    value = value.slice(1);\n  }\n\n  if (value === '.inf') {\n    return (sign === 1) ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n\n  } else if (value === '.nan') {\n    return NaN;\n  }\n  return sign * parseFloat(value, 10);\n}\n\n\nvar SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;\n\nfunction representYamlFloat(object, style) {\n  var res;\n\n  if (isNaN(object)) {\n    switch (style) {\n      case 'lowercase': return '.nan';\n      case 'uppercase': return '.NAN';\n      case 'camelcase': return '.NaN';\n    }\n  } else if (Number.POSITIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '.inf';\n      case 'uppercase': return '.INF';\n      case 'camelcase': return '.Inf';\n    }\n  } else if (Number.NEGATIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '-.inf';\n      case 'uppercase': return '-.INF';\n      case 'camelcase': return '-.Inf';\n    }\n  } else if (common.isNegativeZero(object)) {\n    return '-0.0';\n  }\n\n  res = object.toString(10);\n\n  // JS stringifier can build scientific format without dots: 5e-100,\n  // while YAML requres dot: 5.e-100. Fix it with simple hack\n\n  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace('e', '.e') : res;\n}\n\nfunction isFloat(object) {\n  return (Object.prototype.toString.call(object) === '[object Number]') &&\n         (object % 1 !== 0 || common.isNegativeZero(object));\n}\n\nvar float = new type('tag:yaml.org,2002:float', {\n  kind: 'scalar',\n  resolve: resolveYamlFloat,\n  construct: constructYamlFloat,\n  predicate: isFloat,\n  represent: representYamlFloat,\n  defaultStyle: 'lowercase'\n});\n\nvar json = failsafe.extend({\n  implicit: [\n    _null,\n    bool,\n    int,\n    float\n  ]\n});\n\nvar core = json;\n\nvar YAML_DATE_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9])'                    + // [2] month\n  '-([0-9][0-9])$');                   // [3] day\n\nvar YAML_TIMESTAMP_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9]?)'                   + // [2] month\n  '-([0-9][0-9]?)'                   + // [3] day\n  '(?:[Tt]|[ \\\\t]+)'                 + // ...\n  '([0-9][0-9]?)'                    + // [4] hour\n  ':([0-9][0-9])'                    + // [5] minute\n  ':([0-9][0-9])'                    + // [6] second\n  '(?:\\\\.([0-9]*))?'                 + // [7] fraction\n  '(?:[ \\\\t]*(Z|([-+])([0-9][0-9]?)' + // [8] tz [9] tz_sign [10] tz_hour\n  '(?::([0-9][0-9]))?))?$');           // [11] tz_minute\n\nfunction resolveYamlTimestamp(data) {\n  if (data === null) return false;\n  if (YAML_DATE_REGEXP.exec(data) !== null) return true;\n  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;\n  return false;\n}\n\nfunction constructYamlTimestamp(data) {\n  var match, year, month, day, hour, minute, second, fraction = 0,\n      delta = null, tz_hour, tz_minute, date;\n\n  match = YAML_DATE_REGEXP.exec(data);\n  if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);\n\n  if (match === null) throw new Error('Date resolve error');\n\n  // match: [1] year [2] month [3] day\n\n  year = +(match[1]);\n  month = +(match[2]) - 1; // JS month starts with 0\n  day = +(match[3]);\n\n  if (!match[4]) { // no hour\n    return new Date(Date.UTC(year, month, day));\n  }\n\n  // match: [4] hour [5] minute [6] second [7] fraction\n\n  hour = +(match[4]);\n  minute = +(match[5]);\n  second = +(match[6]);\n\n  if (match[7]) {\n    fraction = match[7].slice(0, 3);\n    while (fraction.length < 3) { // milli-seconds\n      fraction += '0';\n    }\n    fraction = +fraction;\n  }\n\n  // match: [8] tz [9] tz_sign [10] tz_hour [11] tz_minute\n\n  if (match[9]) {\n    tz_hour = +(match[10]);\n    tz_minute = +(match[11] || 0);\n    delta = (tz_hour * 60 + tz_minute) * 60000; // delta in mili-seconds\n    if (match[9] === '-') delta = -delta;\n  }\n\n  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));\n\n  if (delta) date.setTime(date.getTime() - delta);\n\n  return date;\n}\n\nfunction representYamlTimestamp(object /*, style*/) {\n  return object.toISOString();\n}\n\nvar timestamp = new type('tag:yaml.org,2002:timestamp', {\n  kind: 'scalar',\n  resolve: resolveYamlTimestamp,\n  construct: constructYamlTimestamp,\n  instanceOf: Date,\n  represent: representYamlTimestamp\n});\n\nfunction resolveYamlMerge(data) {\n  return data === '<<' || data === null;\n}\n\nvar merge = new type('tag:yaml.org,2002:merge', {\n  kind: 'scalar',\n  resolve: resolveYamlMerge\n});\n\n/*eslint-disable no-bitwise*/\n\n\n\n\n\n// [ 64, 65, 66 ] -> [ padding, CR, LF ]\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\n\\r';\n\n\nfunction resolveYamlBinary(data) {\n  if (data === null) return false;\n\n  var code, idx, bitlen = 0, max = data.length, map = BASE64_MAP;\n\n  // Convert one by one.\n  for (idx = 0; idx < max; idx++) {\n    code = map.indexOf(data.charAt(idx));\n\n    // Skip CR/LF\n    if (code > 64) continue;\n\n    // Fail on illegal characters\n    if (code < 0) return false;\n\n    bitlen += 6;\n  }\n\n  // If there are any bits left, source was corrupted\n  return (bitlen % 8) === 0;\n}\n\nfunction constructYamlBinary(data) {\n  var idx, tailbits,\n      input = data.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max = input.length,\n      map = BASE64_MAP,\n      bits = 0,\n      result = [];\n\n  // Collect by 6*4 bits (3 bytes)\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      result.push((bits >> 16) & 0xFF);\n      result.push((bits >> 8) & 0xFF);\n      result.push(bits & 0xFF);\n    }\n\n    bits = (bits << 6) | map.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    result.push((bits >> 16) & 0xFF);\n    result.push((bits >> 8) & 0xFF);\n    result.push(bits & 0xFF);\n  } else if (tailbits === 18) {\n    result.push((bits >> 10) & 0xFF);\n    result.push((bits >> 2) & 0xFF);\n  } else if (tailbits === 12) {\n    result.push((bits >> 4) & 0xFF);\n  }\n\n  return new Uint8Array(result);\n}\n\nfunction representYamlBinary(object /*, style*/) {\n  var result = '', bits = 0, idx, tail,\n      max = object.length,\n      map = BASE64_MAP;\n\n  // Convert every three bytes to 4 ASCII characters.\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 3 === 0) && idx) {\n      result += map[(bits >> 18) & 0x3F];\n      result += map[(bits >> 12) & 0x3F];\n      result += map[(bits >> 6) & 0x3F];\n      result += map[bits & 0x3F];\n    }\n\n    bits = (bits << 8) + object[idx];\n  }\n\n  // Dump tail\n\n  tail = max % 3;\n\n  if (tail === 0) {\n    result += map[(bits >> 18) & 0x3F];\n    result += map[(bits >> 12) & 0x3F];\n    result += map[(bits >> 6) & 0x3F];\n    result += map[bits & 0x3F];\n  } else if (tail === 2) {\n    result += map[(bits >> 10) & 0x3F];\n    result += map[(bits >> 4) & 0x3F];\n    result += map[(bits << 2) & 0x3F];\n    result += map[64];\n  } else if (tail === 1) {\n    result += map[(bits >> 2) & 0x3F];\n    result += map[(bits << 4) & 0x3F];\n    result += map[64];\n    result += map[64];\n  }\n\n  return result;\n}\n\nfunction isBinary(obj) {\n  return Object.prototype.toString.call(obj) ===  '[object Uint8Array]';\n}\n\nvar binary = new type('tag:yaml.org,2002:binary', {\n  kind: 'scalar',\n  resolve: resolveYamlBinary,\n  construct: constructYamlBinary,\n  predicate: isBinary,\n  represent: representYamlBinary\n});\n\nvar _hasOwnProperty$3 = Object.prototype.hasOwnProperty;\nvar _toString$2       = Object.prototype.toString;\n\nfunction resolveYamlOmap(data) {\n  if (data === null) return true;\n\n  var objectKeys = [], index, length, pair, pairKey, pairHasKey,\n      object = data;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n    pairHasKey = false;\n\n    if (_toString$2.call(pair) !== '[object Object]') return false;\n\n    for (pairKey in pair) {\n      if (_hasOwnProperty$3.call(pair, pairKey)) {\n        if (!pairHasKey) pairHasKey = true;\n        else return false;\n      }\n    }\n\n    if (!pairHasKey) return false;\n\n    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);\n    else return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlOmap(data) {\n  return data !== null ? data : [];\n}\n\nvar omap = new type('tag:yaml.org,2002:omap', {\n  kind: 'sequence',\n  resolve: resolveYamlOmap,\n  construct: constructYamlOmap\n});\n\nvar _toString$1 = Object.prototype.toString;\n\nfunction resolveYamlPairs(data) {\n  if (data === null) return true;\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    if (_toString$1.call(pair) !== '[object Object]') return false;\n\n    keys = Object.keys(pair);\n\n    if (keys.length !== 1) return false;\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return true;\n}\n\nfunction constructYamlPairs(data) {\n  if (data === null) return [];\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    keys = Object.keys(pair);\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return result;\n}\n\nvar pairs = new type('tag:yaml.org,2002:pairs', {\n  kind: 'sequence',\n  resolve: resolveYamlPairs,\n  construct: constructYamlPairs\n});\n\nvar _hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n\nfunction resolveYamlSet(data) {\n  if (data === null) return true;\n\n  var key, object = data;\n\n  for (key in object) {\n    if (_hasOwnProperty$2.call(object, key)) {\n      if (object[key] !== null) return false;\n    }\n  }\n\n  return true;\n}\n\nfunction constructYamlSet(data) {\n  return data !== null ? data : {};\n}\n\nvar set = new type('tag:yaml.org,2002:set', {\n  kind: 'mapping',\n  resolve: resolveYamlSet,\n  construct: constructYamlSet\n});\n\nvar _default = core.extend({\n  implicit: [\n    timestamp,\n    merge\n  ],\n  explicit: [\n    binary,\n    omap,\n    pairs,\n    set\n  ]\n});\n\n/*eslint-disable max-len,no-use-before-define*/\n\n\n\n\n\n\n\nvar _hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\n\nvar CONTEXT_FLOW_IN   = 1;\nvar CONTEXT_FLOW_OUT  = 2;\nvar CONTEXT_BLOCK_IN  = 3;\nvar CONTEXT_BLOCK_OUT = 4;\n\n\nvar CHOMPING_CLIP  = 1;\nvar CHOMPING_STRIP = 2;\nvar CHOMPING_KEEP  = 3;\n\n\nvar PATTERN_NON_PRINTABLE         = /[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\nvar PATTERN_NON_ASCII_LINE_BREAKS = /[\\x85\\u2028\\u2029]/;\nvar PATTERN_FLOW_INDICATORS       = /[,\\[\\]\\{\\}]/;\nvar PATTERN_TAG_HANDLE            = /^(?:!|!!|![a-z\\-]+!)$/i;\nvar PATTERN_TAG_URI               = /^(?:!|[^,\\[\\]\\{\\}])(?:%[0-9a-f]{2}|[0-9a-z\\-#;\\/\\?:@&=\\+\\$,_\\.!~\\*'\\(\\)\\[\\]])*$/i;\n\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\n\nfunction is_EOL(c) {\n  return (c === 0x0A/* LF */) || (c === 0x0D/* CR */);\n}\n\nfunction is_WHITE_SPACE(c) {\n  return (c === 0x09/* Tab */) || (c === 0x20/* Space */);\n}\n\nfunction is_WS_OR_EOL(c) {\n  return (c === 0x09/* Tab */) ||\n         (c === 0x20/* Space */) ||\n         (c === 0x0A/* LF */) ||\n         (c === 0x0D/* CR */);\n}\n\nfunction is_FLOW_INDICATOR(c) {\n  return c === 0x2C/* , */ ||\n         c === 0x5B/* [ */ ||\n         c === 0x5D/* ] */ ||\n         c === 0x7B/* { */ ||\n         c === 0x7D/* } */;\n}\n\nfunction fromHexCode(c) {\n  var lc;\n\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  /*eslint-disable no-bitwise*/\n  lc = c | 0x20;\n\n  if ((0x61/* a */ <= lc) && (lc <= 0x66/* f */)) {\n    return lc - 0x61 + 10;\n  }\n\n  return -1;\n}\n\nfunction escapedHexLen(c) {\n  if (c === 0x78/* x */) { return 2; }\n  if (c === 0x75/* u */) { return 4; }\n  if (c === 0x55/* U */) { return 8; }\n  return 0;\n}\n\nfunction fromDecimalCode(c) {\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  return -1;\n}\n\nfunction simpleEscapeSequence(c) {\n  /* eslint-disable indent */\n  return (c === 0x30/* 0 */) ? '\\x00' :\n        (c === 0x61/* a */) ? '\\x07' :\n        (c === 0x62/* b */) ? '\\x08' :\n        (c === 0x74/* t */) ? '\\x09' :\n        (c === 0x09/* Tab */) ? '\\x09' :\n        (c === 0x6E/* n */) ? '\\x0A' :\n        (c === 0x76/* v */) ? '\\x0B' :\n        (c === 0x66/* f */) ? '\\x0C' :\n        (c === 0x72/* r */) ? '\\x0D' :\n        (c === 0x65/* e */) ? '\\x1B' :\n        (c === 0x20/* Space */) ? ' ' :\n        (c === 0x22/* \" */) ? '\\x22' :\n        (c === 0x2F/* / */) ? '/' :\n        (c === 0x5C/* \\ */) ? '\\x5C' :\n        (c === 0x4E/* N */) ? '\\x85' :\n        (c === 0x5F/* _ */) ? '\\xA0' :\n        (c === 0x4C/* L */) ? '\\u2028' :\n        (c === 0x50/* P */) ? '\\u2029' : '';\n}\n\nfunction charFromCodepoint(c) {\n  if (c <= 0xFFFF) {\n    return String.fromCharCode(c);\n  }\n  // Encode UTF-16 surrogate pair\n  // https://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B010000_to_U.2B10FFFF\n  return String.fromCharCode(\n    ((c - 0x010000) >> 10) + 0xD800,\n    ((c - 0x010000) & 0x03FF) + 0xDC00\n  );\n}\n\nvar simpleEscapeCheck = new Array(256); // integer, for fast access\nvar simpleEscapeMap = new Array(256);\nfor (var i = 0; i < 256; i++) {\n  simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;\n  simpleEscapeMap[i] = simpleEscapeSequence(i);\n}\n\n\nfunction State$1(input, options) {\n  this.input = input;\n\n  this.filename  = options['filename']  || null;\n  this.schema    = options['schema']    || _default;\n  this.onWarning = options['onWarning'] || null;\n  // (Hidden) Remove? makes the loader to expect YAML 1.1 documents\n  // if such documents have no explicit %YAML directive\n  this.legacy    = options['legacy']    || false;\n\n  this.json      = options['json']      || false;\n  this.listener  = options['listener']  || null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.typeMap       = this.schema.compiledTypeMap;\n\n  this.length     = input.length;\n  this.position   = 0;\n  this.line       = 0;\n  this.lineStart  = 0;\n  this.lineIndent = 0;\n\n  // position of first leading tab in the current line,\n  // used to make sure there are no tabs in the indentation\n  this.firstTabInLine = -1;\n\n  this.documents = [];\n\n  /*\n  this.version;\n  this.checkLineBreaks;\n  this.tagMap;\n  this.anchorMap;\n  this.tag;\n  this.anchor;\n  this.kind;\n  this.result;*/\n\n}\n\n\nfunction generateError(state, message) {\n  var mark = {\n    name:     state.filename,\n    buffer:   state.input.slice(0, -1), // omit trailing \\0\n    position: state.position,\n    line:     state.line,\n    column:   state.position - state.lineStart\n  };\n\n  mark.snippet = snippet(mark);\n\n  return new exception(message, mark);\n}\n\nfunction throwError(state, message) {\n  throw generateError(state, message);\n}\n\nfunction throwWarning(state, message) {\n  if (state.onWarning) {\n    state.onWarning.call(null, generateError(state, message));\n  }\n}\n\n\nvar directiveHandlers = {\n\n  YAML: function handleYamlDirective(state, name, args) {\n\n    var match, major, minor;\n\n    if (state.version !== null) {\n      throwError(state, 'duplication of %YAML directive');\n    }\n\n    if (args.length !== 1) {\n      throwError(state, 'YAML directive accepts exactly one argument');\n    }\n\n    match = /^([0-9]+)\\.([0-9]+)$/.exec(args[0]);\n\n    if (match === null) {\n      throwError(state, 'ill-formed argument of the YAML directive');\n    }\n\n    major = parseInt(match[1], 10);\n    minor = parseInt(match[2], 10);\n\n    if (major !== 1) {\n      throwError(state, 'unacceptable YAML version of the document');\n    }\n\n    state.version = args[0];\n    state.checkLineBreaks = (minor < 2);\n\n    if (minor !== 1 && minor !== 2) {\n      throwWarning(state, 'unsupported YAML version of the document');\n    }\n  },\n\n  TAG: function handleTagDirective(state, name, args) {\n\n    var handle, prefix;\n\n    if (args.length !== 2) {\n      throwError(state, 'TAG directive accepts exactly two arguments');\n    }\n\n    handle = args[0];\n    prefix = args[1];\n\n    if (!PATTERN_TAG_HANDLE.test(handle)) {\n      throwError(state, 'ill-formed tag handle (first argument) of the TAG directive');\n    }\n\n    if (_hasOwnProperty$1.call(state.tagMap, handle)) {\n      throwError(state, 'there is a previously declared suffix for \"' + handle + '\" tag handle');\n    }\n\n    if (!PATTERN_TAG_URI.test(prefix)) {\n      throwError(state, 'ill-formed tag prefix (second argument) of the TAG directive');\n    }\n\n    try {\n      prefix = decodeURIComponent(prefix);\n    } catch (err) {\n      throwError(state, 'tag prefix is malformed: ' + prefix);\n    }\n\n    state.tagMap[handle] = prefix;\n  }\n};\n\n\nfunction captureSegment(state, start, end, checkJson) {\n  var _position, _length, _character, _result;\n\n  if (start < end) {\n    _result = state.input.slice(start, end);\n\n    if (checkJson) {\n      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {\n        _character = _result.charCodeAt(_position);\n        if (!(_character === 0x09 ||\n              (0x20 <= _character && _character <= 0x10FFFF))) {\n          throwError(state, 'expected valid JSON character');\n        }\n      }\n    } else if (PATTERN_NON_PRINTABLE.test(_result)) {\n      throwError(state, 'the stream contains non-printable characters');\n    }\n\n    state.result += _result;\n  }\n}\n\nfunction mergeMappings(state, destination, source, overridableKeys) {\n  var sourceKeys, key, index, quantity;\n\n  if (!common.isObject(source)) {\n    throwError(state, 'cannot merge mappings; the provided source object is unacceptable');\n  }\n\n  sourceKeys = Object.keys(source);\n\n  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {\n    key = sourceKeys[index];\n\n    if (!_hasOwnProperty$1.call(destination, key)) {\n      destination[key] = source[key];\n      overridableKeys[key] = true;\n    }\n  }\n}\n\nfunction storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode,\n  startLine, startLineStart, startPos) {\n\n  var index, quantity;\n\n  // The output is a plain object here, so keys can only be strings.\n  // We need to convert keyNode to a string, but doing so can hang the process\n  // (deeply nested arrays that explode exponentially using aliases).\n  if (Array.isArray(keyNode)) {\n    keyNode = Array.prototype.slice.call(keyNode);\n\n    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {\n      if (Array.isArray(keyNode[index])) {\n        throwError(state, 'nested arrays are not supported inside keys');\n      }\n\n      if (typeof keyNode === 'object' && _class(keyNode[index]) === '[object Object]') {\n        keyNode[index] = '[object Object]';\n      }\n    }\n  }\n\n  // Avoid code execution in load() via toString property\n  // (still use its own toString for arrays, timestamps,\n  // and whatever user schema extensions happen to have @@toStringTag)\n  if (typeof keyNode === 'object' && _class(keyNode) === '[object Object]') {\n    keyNode = '[object Object]';\n  }\n\n\n  keyNode = String(keyNode);\n\n  if (_result === null) {\n    _result = {};\n  }\n\n  if (keyTag === 'tag:yaml.org,2002:merge') {\n    if (Array.isArray(valueNode)) {\n      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {\n        mergeMappings(state, _result, valueNode[index], overridableKeys);\n      }\n    } else {\n      mergeMappings(state, _result, valueNode, overridableKeys);\n    }\n  } else {\n    if (!state.json &&\n        !_hasOwnProperty$1.call(overridableKeys, keyNode) &&\n        _hasOwnProperty$1.call(_result, keyNode)) {\n      state.line = startLine || state.line;\n      state.lineStart = startLineStart || state.lineStart;\n      state.position = startPos || state.position;\n      throwError(state, 'duplicated mapping key');\n    }\n\n    // used for this specific key only because Object.defineProperty is slow\n    if (keyNode === '__proto__') {\n      Object.defineProperty(_result, keyNode, {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: valueNode\n      });\n    } else {\n      _result[keyNode] = valueNode;\n    }\n    delete overridableKeys[keyNode];\n  }\n\n  return _result;\n}\n\nfunction readLineBreak(state) {\n  var ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x0A/* LF */) {\n    state.position++;\n  } else if (ch === 0x0D/* CR */) {\n    state.position++;\n    if (state.input.charCodeAt(state.position) === 0x0A/* LF */) {\n      state.position++;\n    }\n  } else {\n    throwError(state, 'a line break is expected');\n  }\n\n  state.line += 1;\n  state.lineStart = state.position;\n  state.firstTabInLine = -1;\n}\n\nfunction skipSeparationSpace(state, allowComments, checkIndent) {\n  var lineBreaks = 0,\n      ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    while (is_WHITE_SPACE(ch)) {\n      if (ch === 0x09/* Tab */ && state.firstTabInLine === -1) {\n        state.firstTabInLine = state.position;\n      }\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (allowComments && ch === 0x23/* # */) {\n      do {\n        ch = state.input.charCodeAt(++state.position);\n      } while (ch !== 0x0A/* LF */ && ch !== 0x0D/* CR */ && ch !== 0);\n    }\n\n    if (is_EOL(ch)) {\n      readLineBreak(state);\n\n      ch = state.input.charCodeAt(state.position);\n      lineBreaks++;\n      state.lineIndent = 0;\n\n      while (ch === 0x20/* Space */) {\n        state.lineIndent++;\n        ch = state.input.charCodeAt(++state.position);\n      }\n    } else {\n      break;\n    }\n  }\n\n  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {\n    throwWarning(state, 'deficient indentation');\n  }\n\n  return lineBreaks;\n}\n\nfunction testDocumentSeparator(state) {\n  var _position = state.position,\n      ch;\n\n  ch = state.input.charCodeAt(_position);\n\n  // Condition state.position === state.lineStart is tested\n  // in parent on each call, for efficiency. No needs to test here again.\n  if ((ch === 0x2D/* - */ || ch === 0x2E/* . */) &&\n      ch === state.input.charCodeAt(_position + 1) &&\n      ch === state.input.charCodeAt(_position + 2)) {\n\n    _position += 3;\n\n    ch = state.input.charCodeAt(_position);\n\n    if (ch === 0 || is_WS_OR_EOL(ch)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction writeFoldedLines(state, count) {\n  if (count === 1) {\n    state.result += ' ';\n  } else if (count > 1) {\n    state.result += common.repeat('\\n', count - 1);\n  }\n}\n\n\nfunction readPlainScalar(state, nodeIndent, withinFlowCollection) {\n  var preceding,\n      following,\n      captureStart,\n      captureEnd,\n      hasPendingContent,\n      _line,\n      _lineStart,\n      _lineIndent,\n      _kind = state.kind,\n      _result = state.result,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (is_WS_OR_EOL(ch)      ||\n      is_FLOW_INDICATOR(ch) ||\n      ch === 0x23/* # */    ||\n      ch === 0x26/* & */    ||\n      ch === 0x2A/* * */    ||\n      ch === 0x21/* ! */    ||\n      ch === 0x7C/* | */    ||\n      ch === 0x3E/* > */    ||\n      ch === 0x27/* ' */    ||\n      ch === 0x22/* \" */    ||\n      ch === 0x25/* % */    ||\n      ch === 0x40/* @ */    ||\n      ch === 0x60/* ` */) {\n    return false;\n  }\n\n  if (ch === 0x3F/* ? */ || ch === 0x2D/* - */) {\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (is_WS_OR_EOL(following) ||\n        withinFlowCollection && is_FLOW_INDICATOR(following)) {\n      return false;\n    }\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  captureStart = captureEnd = state.position;\n  hasPendingContent = false;\n\n  while (ch !== 0) {\n    if (ch === 0x3A/* : */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following) ||\n          withinFlowCollection && is_FLOW_INDICATOR(following)) {\n        break;\n      }\n\n    } else if (ch === 0x23/* # */) {\n      preceding = state.input.charCodeAt(state.position - 1);\n\n      if (is_WS_OR_EOL(preceding)) {\n        break;\n      }\n\n    } else if ((state.position === state.lineStart && testDocumentSeparator(state)) ||\n               withinFlowCollection && is_FLOW_INDICATOR(ch)) {\n      break;\n\n    } else if (is_EOL(ch)) {\n      _line = state.line;\n      _lineStart = state.lineStart;\n      _lineIndent = state.lineIndent;\n      skipSeparationSpace(state, false, -1);\n\n      if (state.lineIndent >= nodeIndent) {\n        hasPendingContent = true;\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      } else {\n        state.position = captureEnd;\n        state.line = _line;\n        state.lineStart = _lineStart;\n        state.lineIndent = _lineIndent;\n        break;\n      }\n    }\n\n    if (hasPendingContent) {\n      captureSegment(state, captureStart, captureEnd, false);\n      writeFoldedLines(state, state.line - _line);\n      captureStart = captureEnd = state.position;\n      hasPendingContent = false;\n    }\n\n    if (!is_WHITE_SPACE(ch)) {\n      captureEnd = state.position + 1;\n    }\n\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  captureSegment(state, captureStart, captureEnd, false);\n\n  if (state.result) {\n    return true;\n  }\n\n  state.kind = _kind;\n  state.result = _result;\n  return false;\n}\n\nfunction readSingleQuotedScalar(state, nodeIndent) {\n  var ch,\n      captureStart, captureEnd;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x27/* ' */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x27/* ' */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (ch === 0x27/* ' */) {\n        captureStart = state.position;\n        state.position++;\n        captureEnd = state.position;\n      } else {\n        return true;\n      }\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a single quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a single quoted scalar');\n}\n\nfunction readDoubleQuotedScalar(state, nodeIndent) {\n  var captureStart,\n      captureEnd,\n      hexLength,\n      hexResult,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x22/* \" */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x22/* \" */) {\n      captureSegment(state, captureStart, state.position, true);\n      state.position++;\n      return true;\n\n    } else if (ch === 0x5C/* \\ */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (is_EOL(ch)) {\n        skipSeparationSpace(state, false, nodeIndent);\n\n        // TODO: rework to inline fn with no type cast?\n      } else if (ch < 256 && simpleEscapeCheck[ch]) {\n        state.result += simpleEscapeMap[ch];\n        state.position++;\n\n      } else if ((tmp = escapedHexLen(ch)) > 0) {\n        hexLength = tmp;\n        hexResult = 0;\n\n        for (; hexLength > 0; hexLength--) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if ((tmp = fromHexCode(ch)) >= 0) {\n            hexResult = (hexResult << 4) + tmp;\n\n          } else {\n            throwError(state, 'expected hexadecimal character');\n          }\n        }\n\n        state.result += charFromCodepoint(hexResult);\n\n        state.position++;\n\n      } else {\n        throwError(state, 'unknown escape sequence');\n      }\n\n      captureStart = captureEnd = state.position;\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a double quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a double quoted scalar');\n}\n\nfunction readFlowCollection(state, nodeIndent) {\n  var readNext = true,\n      _line,\n      _lineStart,\n      _pos,\n      _tag     = state.tag,\n      _result,\n      _anchor  = state.anchor,\n      following,\n      terminator,\n      isPair,\n      isExplicitPair,\n      isMapping,\n      overridableKeys = Object.create(null),\n      keyNode,\n      keyTag,\n      valueNode,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x5B/* [ */) {\n    terminator = 0x5D;/* ] */\n    isMapping = false;\n    _result = [];\n  } else if (ch === 0x7B/* { */) {\n    terminator = 0x7D;/* } */\n    isMapping = true;\n    _result = {};\n  } else {\n    return false;\n  }\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  while (ch !== 0) {\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === terminator) {\n      state.position++;\n      state.tag = _tag;\n      state.anchor = _anchor;\n      state.kind = isMapping ? 'mapping' : 'sequence';\n      state.result = _result;\n      return true;\n    } else if (!readNext) {\n      throwError(state, 'missed comma between flow collection entries');\n    } else if (ch === 0x2C/* , */) {\n      // \"flow collection entries can never be completely empty\", as per YAML 1.2, section 7.4\n      throwError(state, \"expected the node content, but found ','\");\n    }\n\n    keyTag = keyNode = valueNode = null;\n    isPair = isExplicitPair = false;\n\n    if (ch === 0x3F/* ? */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following)) {\n        isPair = isExplicitPair = true;\n        state.position++;\n        skipSeparationSpace(state, true, nodeIndent);\n      }\n    }\n\n    _line = state.line; // Save the current line.\n    _lineStart = state.lineStart;\n    _pos = state.position;\n    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n    keyTag = state.tag;\n    keyNode = state.result;\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((isExplicitPair || state.line === _line) && ch === 0x3A/* : */) {\n      isPair = true;\n      ch = state.input.charCodeAt(++state.position);\n      skipSeparationSpace(state, true, nodeIndent);\n      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n      valueNode = state.result;\n    }\n\n    if (isMapping) {\n      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);\n    } else if (isPair) {\n      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));\n    } else {\n      _result.push(keyNode);\n    }\n\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === 0x2C/* , */) {\n      readNext = true;\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      readNext = false;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a flow collection');\n}\n\nfunction readBlockScalar(state, nodeIndent) {\n  var captureStart,\n      folding,\n      chomping       = CHOMPING_CLIP,\n      didReadContent = false,\n      detectedIndent = false,\n      textIndent     = nodeIndent,\n      emptyLines     = 0,\n      atMoreIndented = false,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x7C/* | */) {\n    folding = false;\n  } else if (ch === 0x3E/* > */) {\n    folding = true;\n  } else {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n\n  while (ch !== 0) {\n    ch = state.input.charCodeAt(++state.position);\n\n    if (ch === 0x2B/* + */ || ch === 0x2D/* - */) {\n      if (CHOMPING_CLIP === chomping) {\n        chomping = (ch === 0x2B/* + */) ? CHOMPING_KEEP : CHOMPING_STRIP;\n      } else {\n        throwError(state, 'repeat of a chomping mode identifier');\n      }\n\n    } else if ((tmp = fromDecimalCode(ch)) >= 0) {\n      if (tmp === 0) {\n        throwError(state, 'bad explicit indentation width of a block scalar; it cannot be less than one');\n      } else if (!detectedIndent) {\n        textIndent = nodeIndent + tmp - 1;\n        detectedIndent = true;\n      } else {\n        throwError(state, 'repeat of an indentation width identifier');\n      }\n\n    } else {\n      break;\n    }\n  }\n\n  if (is_WHITE_SPACE(ch)) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (is_WHITE_SPACE(ch));\n\n    if (ch === 0x23/* # */) {\n      do { ch = state.input.charCodeAt(++state.position); }\n      while (!is_EOL(ch) && (ch !== 0));\n    }\n  }\n\n  while (ch !== 0) {\n    readLineBreak(state);\n    state.lineIndent = 0;\n\n    ch = state.input.charCodeAt(state.position);\n\n    while ((!detectedIndent || state.lineIndent < textIndent) &&\n           (ch === 0x20/* Space */)) {\n      state.lineIndent++;\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (!detectedIndent && state.lineIndent > textIndent) {\n      textIndent = state.lineIndent;\n    }\n\n    if (is_EOL(ch)) {\n      emptyLines++;\n      continue;\n    }\n\n    // End of the scalar.\n    if (state.lineIndent < textIndent) {\n\n      // Perform the chomping.\n      if (chomping === CHOMPING_KEEP) {\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n      } else if (chomping === CHOMPING_CLIP) {\n        if (didReadContent) { // i.e. only if the scalar is not empty.\n          state.result += '\\n';\n        }\n      }\n\n      // Break this `while` cycle and go to the funciton's epilogue.\n      break;\n    }\n\n    // Folded style: use fancy rules to handle line breaks.\n    if (folding) {\n\n      // Lines starting with white space characters (more-indented lines) are not folded.\n      if (is_WHITE_SPACE(ch)) {\n        atMoreIndented = true;\n        // except for the first content line (cf. Example 8.1)\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n\n      // End of more-indented block.\n      } else if (atMoreIndented) {\n        atMoreIndented = false;\n        state.result += common.repeat('\\n', emptyLines + 1);\n\n      // Just one line break - perceive as the same line.\n      } else if (emptyLines === 0) {\n        if (didReadContent) { // i.e. only if we have already read some scalar content.\n          state.result += ' ';\n        }\n\n      // Several line breaks - perceive as different lines.\n      } else {\n        state.result += common.repeat('\\n', emptyLines);\n      }\n\n    // Literal style: just add exact number of line breaks between content lines.\n    } else {\n      // Keep all line breaks except the header line break.\n      state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n    }\n\n    didReadContent = true;\n    detectedIndent = true;\n    emptyLines = 0;\n    captureStart = state.position;\n\n    while (!is_EOL(ch) && (ch !== 0)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    captureSegment(state, captureStart, state.position, false);\n  }\n\n  return true;\n}\n\nfunction readBlockSequence(state, nodeIndent) {\n  var _line,\n      _tag      = state.tag,\n      _anchor   = state.anchor,\n      _result   = [],\n      following,\n      detected  = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    if (ch !== 0x2D/* - */) {\n      break;\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (!is_WS_OR_EOL(following)) {\n      break;\n    }\n\n    detected = true;\n    state.position++;\n\n    if (skipSeparationSpace(state, true, -1)) {\n      if (state.lineIndent <= nodeIndent) {\n        _result.push(null);\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      }\n    }\n\n    _line = state.line;\n    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);\n    _result.push(state.result);\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a sequence entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'sequence';\n    state.result = _result;\n    return true;\n  }\n  return false;\n}\n\nfunction readBlockMapping(state, nodeIndent, flowIndent) {\n  var following,\n      allowCompact,\n      _line,\n      _keyLine,\n      _keyLineStart,\n      _keyPos,\n      _tag          = state.tag,\n      _anchor       = state.anchor,\n      _result       = {},\n      overridableKeys = Object.create(null),\n      keyTag        = null,\n      keyNode       = null,\n      valueNode     = null,\n      atExplicitKey = false,\n      detected      = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (!atExplicitKey && state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n    _line = state.line; // Save the current line.\n\n    //\n    // Explicit notation case. There are two separate blocks:\n    // first for the key (denoted by \"?\") and second for the value (denoted by \":\")\n    //\n    if ((ch === 0x3F/* ? */ || ch === 0x3A/* : */) && is_WS_OR_EOL(following)) {\n\n      if (ch === 0x3F/* ? */) {\n        if (atExplicitKey) {\n          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n          keyTag = keyNode = valueNode = null;\n        }\n\n        detected = true;\n        atExplicitKey = true;\n        allowCompact = true;\n\n      } else if (atExplicitKey) {\n        // i.e. 0x3A/* : */ === character after the explicit key.\n        atExplicitKey = false;\n        allowCompact = true;\n\n      } else {\n        throwError(state, 'incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line');\n      }\n\n      state.position += 1;\n      ch = following;\n\n    //\n    // Implicit notation case. Flow-style node as the key first, then \":\", and the value.\n    //\n    } else {\n      _keyLine = state.line;\n      _keyLineStart = state.lineStart;\n      _keyPos = state.position;\n\n      if (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {\n        // Neither implicit nor explicit notation.\n        // Reading is done. Go to the epilogue.\n        break;\n      }\n\n      if (state.line === _line) {\n        ch = state.input.charCodeAt(state.position);\n\n        while (is_WHITE_SPACE(ch)) {\n          ch = state.input.charCodeAt(++state.position);\n        }\n\n        if (ch === 0x3A/* : */) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if (!is_WS_OR_EOL(ch)) {\n            throwError(state, 'a whitespace character is expected after the key-value separator within a block mapping');\n          }\n\n          if (atExplicitKey) {\n            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n            keyTag = keyNode = valueNode = null;\n          }\n\n          detected = true;\n          atExplicitKey = false;\n          allowCompact = false;\n          keyTag = state.tag;\n          keyNode = state.result;\n\n        } else if (detected) {\n          throwError(state, 'can not read an implicit mapping pair; a colon is missed');\n\n        } else {\n          state.tag = _tag;\n          state.anchor = _anchor;\n          return true; // Keep the result of `composeNode`.\n        }\n\n      } else if (detected) {\n        throwError(state, 'can not read a block mapping entry; a multiline key may not be an implicit key');\n\n      } else {\n        state.tag = _tag;\n        state.anchor = _anchor;\n        return true; // Keep the result of `composeNode`.\n      }\n    }\n\n    //\n    // Common reading code for both explicit and implicit notations.\n    //\n    if (state.line === _line || state.lineIndent > nodeIndent) {\n      if (atExplicitKey) {\n        _keyLine = state.line;\n        _keyLineStart = state.lineStart;\n        _keyPos = state.position;\n      }\n\n      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {\n        if (atExplicitKey) {\n          keyNode = state.result;\n        } else {\n          valueNode = state.result;\n        }\n      }\n\n      if (!atExplicitKey) {\n        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);\n        keyTag = keyNode = valueNode = null;\n      }\n\n      skipSeparationSpace(state, true, -1);\n      ch = state.input.charCodeAt(state.position);\n    }\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a mapping entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  //\n  // Epilogue.\n  //\n\n  // Special case: last mapping's node contains only the key in explicit notation.\n  if (atExplicitKey) {\n    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n  }\n\n  // Expose the resulting mapping.\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'mapping';\n    state.result = _result;\n  }\n\n  return detected;\n}\n\nfunction readTagProperty(state) {\n  var _position,\n      isVerbatim = false,\n      isNamed    = false,\n      tagHandle,\n      tagName,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x21/* ! */) return false;\n\n  if (state.tag !== null) {\n    throwError(state, 'duplication of a tag property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  if (ch === 0x3C/* < */) {\n    isVerbatim = true;\n    ch = state.input.charCodeAt(++state.position);\n\n  } else if (ch === 0x21/* ! */) {\n    isNamed = true;\n    tagHandle = '!!';\n    ch = state.input.charCodeAt(++state.position);\n\n  } else {\n    tagHandle = '!';\n  }\n\n  _position = state.position;\n\n  if (isVerbatim) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (ch !== 0 && ch !== 0x3E/* > */);\n\n    if (state.position < state.length) {\n      tagName = state.input.slice(_position, state.position);\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      throwError(state, 'unexpected end of the stream within a verbatim tag');\n    }\n  } else {\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n\n      if (ch === 0x21/* ! */) {\n        if (!isNamed) {\n          tagHandle = state.input.slice(_position - 1, state.position + 1);\n\n          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {\n            throwError(state, 'named tag handle cannot contain such characters');\n          }\n\n          isNamed = true;\n          _position = state.position + 1;\n        } else {\n          throwError(state, 'tag suffix cannot contain exclamation marks');\n        }\n      }\n\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    tagName = state.input.slice(_position, state.position);\n\n    if (PATTERN_FLOW_INDICATORS.test(tagName)) {\n      throwError(state, 'tag suffix cannot contain flow indicator characters');\n    }\n  }\n\n  if (tagName && !PATTERN_TAG_URI.test(tagName)) {\n    throwError(state, 'tag name cannot contain such characters: ' + tagName);\n  }\n\n  try {\n    tagName = decodeURIComponent(tagName);\n  } catch (err) {\n    throwError(state, 'tag name is malformed: ' + tagName);\n  }\n\n  if (isVerbatim) {\n    state.tag = tagName;\n\n  } else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {\n    state.tag = state.tagMap[tagHandle] + tagName;\n\n  } else if (tagHandle === '!') {\n    state.tag = '!' + tagName;\n\n  } else if (tagHandle === '!!') {\n    state.tag = 'tag:yaml.org,2002:' + tagName;\n\n  } else {\n    throwError(state, 'undeclared tag handle \"' + tagHandle + '\"');\n  }\n\n  return true;\n}\n\nfunction readAnchorProperty(state) {\n  var _position,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x26/* & */) return false;\n\n  if (state.anchor !== null) {\n    throwError(state, 'duplication of an anchor property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an anchor node must contain at least one character');\n  }\n\n  state.anchor = state.input.slice(_position, state.position);\n  return true;\n}\n\nfunction readAlias(state) {\n  var _position, alias,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x2A/* * */) return false;\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an alias node must contain at least one character');\n  }\n\n  alias = state.input.slice(_position, state.position);\n\n  if (!_hasOwnProperty$1.call(state.anchorMap, alias)) {\n    throwError(state, 'unidentified alias \"' + alias + '\"');\n  }\n\n  state.result = state.anchorMap[alias];\n  skipSeparationSpace(state, true, -1);\n  return true;\n}\n\nfunction composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {\n  var allowBlockStyles,\n      allowBlockScalars,\n      allowBlockCollections,\n      indentStatus = 1, // 1: this>parent, 0: this=parent, -1: this<parent\n      atNewLine  = false,\n      hasContent = false,\n      typeIndex,\n      typeQuantity,\n      typeList,\n      type,\n      flowIndent,\n      blockIndent;\n\n  if (state.listener !== null) {\n    state.listener('open', state);\n  }\n\n  state.tag    = null;\n  state.anchor = null;\n  state.kind   = null;\n  state.result = null;\n\n  allowBlockStyles = allowBlockScalars = allowBlockCollections =\n    CONTEXT_BLOCK_OUT === nodeContext ||\n    CONTEXT_BLOCK_IN  === nodeContext;\n\n  if (allowToSeek) {\n    if (skipSeparationSpace(state, true, -1)) {\n      atNewLine = true;\n\n      if (state.lineIndent > parentIndent) {\n        indentStatus = 1;\n      } else if (state.lineIndent === parentIndent) {\n        indentStatus = 0;\n      } else if (state.lineIndent < parentIndent) {\n        indentStatus = -1;\n      }\n    }\n  }\n\n  if (indentStatus === 1) {\n    while (readTagProperty(state) || readAnchorProperty(state)) {\n      if (skipSeparationSpace(state, true, -1)) {\n        atNewLine = true;\n        allowBlockCollections = allowBlockStyles;\n\n        if (state.lineIndent > parentIndent) {\n          indentStatus = 1;\n        } else if (state.lineIndent === parentIndent) {\n          indentStatus = 0;\n        } else if (state.lineIndent < parentIndent) {\n          indentStatus = -1;\n        }\n      } else {\n        allowBlockCollections = false;\n      }\n    }\n  }\n\n  if (allowBlockCollections) {\n    allowBlockCollections = atNewLine || allowCompact;\n  }\n\n  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {\n    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {\n      flowIndent = parentIndent;\n    } else {\n      flowIndent = parentIndent + 1;\n    }\n\n    blockIndent = state.position - state.lineStart;\n\n    if (indentStatus === 1) {\n      if (allowBlockCollections &&\n          (readBlockSequence(state, blockIndent) ||\n           readBlockMapping(state, blockIndent, flowIndent)) ||\n          readFlowCollection(state, flowIndent)) {\n        hasContent = true;\n      } else {\n        if ((allowBlockScalars && readBlockScalar(state, flowIndent)) ||\n            readSingleQuotedScalar(state, flowIndent) ||\n            readDoubleQuotedScalar(state, flowIndent)) {\n          hasContent = true;\n\n        } else if (readAlias(state)) {\n          hasContent = true;\n\n          if (state.tag !== null || state.anchor !== null) {\n            throwError(state, 'alias node should not have any properties');\n          }\n\n        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {\n          hasContent = true;\n\n          if (state.tag === null) {\n            state.tag = '?';\n          }\n        }\n\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n      }\n    } else if (indentStatus === 0) {\n      // Special case: block sequences are allowed to have same indentation level as the parent.\n      // http://www.yaml.org/spec/1.2/spec.html#id2799784\n      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);\n    }\n  }\n\n  if (state.tag === null) {\n    if (state.anchor !== null) {\n      state.anchorMap[state.anchor] = state.result;\n    }\n\n  } else if (state.tag === '?') {\n    // Implicit resolving is not allowed for non-scalar types, and '?'\n    // non-specific tag is only automatically assigned to plain scalars.\n    //\n    // We only need to check kind conformity in case user explicitly assigns '?'\n    // tag, for example like this: \"!<?> [0]\"\n    //\n    if (state.result !== null && state.kind !== 'scalar') {\n      throwError(state, 'unacceptable node kind for !<?> tag; it should be \"scalar\", not \"' + state.kind + '\"');\n    }\n\n    for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {\n      type = state.implicitTypes[typeIndex];\n\n      if (type.resolve(state.result)) { // `state.result` updated in resolver if matched\n        state.result = type.construct(state.result);\n        state.tag = type.tag;\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n        break;\n      }\n    }\n  } else if (state.tag !== '!') {\n    if (_hasOwnProperty$1.call(state.typeMap[state.kind || 'fallback'], state.tag)) {\n      type = state.typeMap[state.kind || 'fallback'][state.tag];\n    } else {\n      // looking for multi type\n      type = null;\n      typeList = state.typeMap.multi[state.kind || 'fallback'];\n\n      for (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {\n        if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {\n          type = typeList[typeIndex];\n          break;\n        }\n      }\n    }\n\n    if (!type) {\n      throwError(state, 'unknown tag !<' + state.tag + '>');\n    }\n\n    if (state.result !== null && type.kind !== state.kind) {\n      throwError(state, 'unacceptable node kind for !<' + state.tag + '> tag; it should be \"' + type.kind + '\", not \"' + state.kind + '\"');\n    }\n\n    if (!type.resolve(state.result, state.tag)) { // `state.result` updated in resolver if matched\n      throwError(state, 'cannot resolve a node with !<' + state.tag + '> explicit tag');\n    } else {\n      state.result = type.construct(state.result, state.tag);\n      if (state.anchor !== null) {\n        state.anchorMap[state.anchor] = state.result;\n      }\n    }\n  }\n\n  if (state.listener !== null) {\n    state.listener('close', state);\n  }\n  return state.tag !== null ||  state.anchor !== null || hasContent;\n}\n\nfunction readDocument(state) {\n  var documentStart = state.position,\n      _position,\n      directiveName,\n      directiveArgs,\n      hasDirectives = false,\n      ch;\n\n  state.version = null;\n  state.checkLineBreaks = state.legacy;\n  state.tagMap = Object.create(null);\n  state.anchorMap = Object.create(null);\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (state.lineIndent > 0 || ch !== 0x25/* % */) {\n      break;\n    }\n\n    hasDirectives = true;\n    ch = state.input.charCodeAt(++state.position);\n    _position = state.position;\n\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    directiveName = state.input.slice(_position, state.position);\n    directiveArgs = [];\n\n    if (directiveName.length < 1) {\n      throwError(state, 'directive name must not be less than one character in length');\n    }\n\n    while (ch !== 0) {\n      while (is_WHITE_SPACE(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      if (ch === 0x23/* # */) {\n        do { ch = state.input.charCodeAt(++state.position); }\n        while (ch !== 0 && !is_EOL(ch));\n        break;\n      }\n\n      if (is_EOL(ch)) break;\n\n      _position = state.position;\n\n      while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      directiveArgs.push(state.input.slice(_position, state.position));\n    }\n\n    if (ch !== 0) readLineBreak(state);\n\n    if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {\n      directiveHandlers[directiveName](state, directiveName, directiveArgs);\n    } else {\n      throwWarning(state, 'unknown document directive \"' + directiveName + '\"');\n    }\n  }\n\n  skipSeparationSpace(state, true, -1);\n\n  if (state.lineIndent === 0 &&\n      state.input.charCodeAt(state.position)     === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 1) === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 2) === 0x2D/* - */) {\n    state.position += 3;\n    skipSeparationSpace(state, true, -1);\n\n  } else if (hasDirectives) {\n    throwError(state, 'directives end mark is expected');\n  }\n\n  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);\n  skipSeparationSpace(state, true, -1);\n\n  if (state.checkLineBreaks &&\n      PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {\n    throwWarning(state, 'non-ASCII line breaks are interpreted as content');\n  }\n\n  state.documents.push(state.result);\n\n  if (state.position === state.lineStart && testDocumentSeparator(state)) {\n\n    if (state.input.charCodeAt(state.position) === 0x2E/* . */) {\n      state.position += 3;\n      skipSeparationSpace(state, true, -1);\n    }\n    return;\n  }\n\n  if (state.position < (state.length - 1)) {\n    throwError(state, 'end of the stream or a document separator is expected');\n  } else {\n    return;\n  }\n}\n\n\nfunction loadDocuments(input, options) {\n  input = String(input);\n  options = options || {};\n\n  if (input.length !== 0) {\n\n    // Add tailing `\\n` if not exists\n    if (input.charCodeAt(input.length - 1) !== 0x0A/* LF */ &&\n        input.charCodeAt(input.length - 1) !== 0x0D/* CR */) {\n      input += '\\n';\n    }\n\n    // Strip BOM\n    if (input.charCodeAt(0) === 0xFEFF) {\n      input = input.slice(1);\n    }\n  }\n\n  var state = new State$1(input, options);\n\n  var nullpos = input.indexOf('\\0');\n\n  if (nullpos !== -1) {\n    state.position = nullpos;\n    throwError(state, 'null byte is not allowed in input');\n  }\n\n  // Use 0 as string terminator. That significantly simplifies bounds check.\n  state.input += '\\0';\n\n  while (state.input.charCodeAt(state.position) === 0x20/* Space */) {\n    state.lineIndent += 1;\n    state.position += 1;\n  }\n\n  while (state.position < (state.length - 1)) {\n    readDocument(state);\n  }\n\n  return state.documents;\n}\n\n\nfunction loadAll$1(input, iterator, options) {\n  if (iterator !== null && typeof iterator === 'object' && typeof options === 'undefined') {\n    options = iterator;\n    iterator = null;\n  }\n\n  var documents = loadDocuments(input, options);\n\n  if (typeof iterator !== 'function') {\n    return documents;\n  }\n\n  for (var index = 0, length = documents.length; index < length; index += 1) {\n    iterator(documents[index]);\n  }\n}\n\n\nfunction load$1(input, options) {\n  var documents = loadDocuments(input, options);\n\n  if (documents.length === 0) {\n    /*eslint-disable no-undefined*/\n    return undefined;\n  } else if (documents.length === 1) {\n    return documents[0];\n  }\n  throw new exception('expected a single document in the stream, but found more');\n}\n\n\nvar loadAll_1 = loadAll$1;\nvar load_1    = load$1;\n\nvar loader = {\n\tloadAll: loadAll_1,\n\tload: load_1\n};\n\n/*eslint-disable no-use-before-define*/\n\n\n\n\n\nvar _toString       = Object.prototype.toString;\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar CHAR_BOM                  = 0xFEFF;\nvar CHAR_TAB                  = 0x09; /* Tab */\nvar CHAR_LINE_FEED            = 0x0A; /* LF */\nvar CHAR_CARRIAGE_RETURN      = 0x0D; /* CR */\nvar CHAR_SPACE                = 0x20; /* Space */\nvar CHAR_EXCLAMATION          = 0x21; /* ! */\nvar CHAR_DOUBLE_QUOTE         = 0x22; /* \" */\nvar CHAR_SHARP                = 0x23; /* # */\nvar CHAR_PERCENT              = 0x25; /* % */\nvar CHAR_AMPERSAND            = 0x26; /* & */\nvar CHAR_SINGLE_QUOTE         = 0x27; /* ' */\nvar CHAR_ASTERISK             = 0x2A; /* * */\nvar CHAR_COMMA                = 0x2C; /* , */\nvar CHAR_MINUS                = 0x2D; /* - */\nvar CHAR_COLON                = 0x3A; /* : */\nvar CHAR_EQUALS               = 0x3D; /* = */\nvar CHAR_GREATER_THAN         = 0x3E; /* > */\nvar CHAR_QUESTION             = 0x3F; /* ? */\nvar CHAR_COMMERCIAL_AT        = 0x40; /* @ */\nvar CHAR_LEFT_SQUARE_BRACKET  = 0x5B; /* [ */\nvar CHAR_RIGHT_SQUARE_BRACKET = 0x5D; /* ] */\nvar CHAR_GRAVE_ACCENT         = 0x60; /* ` */\nvar CHAR_LEFT_CURLY_BRACKET   = 0x7B; /* { */\nvar CHAR_VERTICAL_LINE        = 0x7C; /* | */\nvar CHAR_RIGHT_CURLY_BRACKET  = 0x7D; /* } */\n\nvar ESCAPE_SEQUENCES = {};\n\nESCAPE_SEQUENCES[0x00]   = '\\\\0';\nESCAPE_SEQUENCES[0x07]   = '\\\\a';\nESCAPE_SEQUENCES[0x08]   = '\\\\b';\nESCAPE_SEQUENCES[0x09]   = '\\\\t';\nESCAPE_SEQUENCES[0x0A]   = '\\\\n';\nESCAPE_SEQUENCES[0x0B]   = '\\\\v';\nESCAPE_SEQUENCES[0x0C]   = '\\\\f';\nESCAPE_SEQUENCES[0x0D]   = '\\\\r';\nESCAPE_SEQUENCES[0x1B]   = '\\\\e';\nESCAPE_SEQUENCES[0x22]   = '\\\\\"';\nESCAPE_SEQUENCES[0x5C]   = '\\\\\\\\';\nESCAPE_SEQUENCES[0x85]   = '\\\\N';\nESCAPE_SEQUENCES[0xA0]   = '\\\\_';\nESCAPE_SEQUENCES[0x2028] = '\\\\L';\nESCAPE_SEQUENCES[0x2029] = '\\\\P';\n\nvar DEPRECATED_BOOLEANS_SYNTAX = [\n  'y', 'Y', 'yes', 'Yes', 'YES', 'on', 'On', 'ON',\n  'n', 'N', 'no', 'No', 'NO', 'off', 'Off', 'OFF'\n];\n\nvar DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\\.[0-9_]*)?$/;\n\nfunction compileStyleMap(schema, map) {\n  var result, keys, index, length, tag, style, type;\n\n  if (map === null) return {};\n\n  result = {};\n  keys = Object.keys(map);\n\n  for (index = 0, length = keys.length; index < length; index += 1) {\n    tag = keys[index];\n    style = String(map[tag]);\n\n    if (tag.slice(0, 2) === '!!') {\n      tag = 'tag:yaml.org,2002:' + tag.slice(2);\n    }\n    type = schema.compiledTypeMap['fallback'][tag];\n\n    if (type && _hasOwnProperty.call(type.styleAliases, style)) {\n      style = type.styleAliases[style];\n    }\n\n    result[tag] = style;\n  }\n\n  return result;\n}\n\nfunction encodeHex(character) {\n  var string, handle, length;\n\n  string = character.toString(16).toUpperCase();\n\n  if (character <= 0xFF) {\n    handle = 'x';\n    length = 2;\n  } else if (character <= 0xFFFF) {\n    handle = 'u';\n    length = 4;\n  } else if (character <= 0xFFFFFFFF) {\n    handle = 'U';\n    length = 8;\n  } else {\n    throw new exception('code point within a string may not be greater than 0xFFFFFFFF');\n  }\n\n  return '\\\\' + handle + common.repeat('0', length - string.length) + string;\n}\n\n\nvar QUOTING_TYPE_SINGLE = 1,\n    QUOTING_TYPE_DOUBLE = 2;\n\nfunction State(options) {\n  this.schema        = options['schema'] || _default;\n  this.indent        = Math.max(1, (options['indent'] || 2));\n  this.noArrayIndent = options['noArrayIndent'] || false;\n  this.skipInvalid   = options['skipInvalid'] || false;\n  this.flowLevel     = (common.isNothing(options['flowLevel']) ? -1 : options['flowLevel']);\n  this.styleMap      = compileStyleMap(this.schema, options['styles'] || null);\n  this.sortKeys      = options['sortKeys'] || false;\n  this.lineWidth     = options['lineWidth'] || 80;\n  this.noRefs        = options['noRefs'] || false;\n  this.noCompatMode  = options['noCompatMode'] || false;\n  this.condenseFlow  = options['condenseFlow'] || false;\n  this.quotingType   = options['quotingType'] === '\"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;\n  this.forceQuotes   = options['forceQuotes'] || false;\n  this.replacer      = typeof options['replacer'] === 'function' ? options['replacer'] : null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.explicitTypes = this.schema.compiledExplicit;\n\n  this.tag = null;\n  this.result = '';\n\n  this.duplicates = [];\n  this.usedDuplicates = null;\n}\n\n// Indents every line in a string. Empty lines (\\n only) are not indented.\nfunction indentString(string, spaces) {\n  var ind = common.repeat(' ', spaces),\n      position = 0,\n      next = -1,\n      result = '',\n      line,\n      length = string.length;\n\n  while (position < length) {\n    next = string.indexOf('\\n', position);\n    if (next === -1) {\n      line = string.slice(position);\n      position = length;\n    } else {\n      line = string.slice(position, next + 1);\n      position = next + 1;\n    }\n\n    if (line.length && line !== '\\n') result += ind;\n\n    result += line;\n  }\n\n  return result;\n}\n\nfunction generateNextLine(state, level) {\n  return '\\n' + common.repeat(' ', state.indent * level);\n}\n\nfunction testImplicitResolving(state, str) {\n  var index, length, type;\n\n  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {\n    type = state.implicitTypes[index];\n\n    if (type.resolve(str)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// [33] s-white ::= s-space | s-tab\nfunction isWhitespace(c) {\n  return c === CHAR_SPACE || c === CHAR_TAB;\n}\n\n// Returns true if the character can be printed without escaping.\n// From YAML 1.2: \"any allowed characters known to be non-printable\n// should also be escaped. [However,] This isn’t mandatory\"\n// Derived from nb-char - \\t - #x85 - #xA0 - #x2028 - #x2029.\nfunction isPrintable(c) {\n  return  (0x00020 <= c && c <= 0x00007E)\n      || ((0x000A1 <= c && c <= 0x00D7FF) && c !== 0x2028 && c !== 0x2029)\n      || ((0x0E000 <= c && c <= 0x00FFFD) && c !== CHAR_BOM)\n      ||  (0x10000 <= c && c <= 0x10FFFF);\n}\n\n// [34] ns-char ::= nb-char - s-white\n// [27] nb-char ::= c-printable - b-char - c-byte-order-mark\n// [26] b-char  ::= b-line-feed | b-carriage-return\n// Including s-white (for some reason, examples doesn't match specs in this aspect)\n// ns-char ::= c-printable - b-line-feed - b-carriage-return - c-byte-order-mark\nfunction isNsCharOrWhitespace(c) {\n  return isPrintable(c)\n    && c !== CHAR_BOM\n    // - b-char\n    && c !== CHAR_CARRIAGE_RETURN\n    && c !== CHAR_LINE_FEED;\n}\n\n// [127]  ns-plain-safe(c) ::= c = flow-out  ⇒ ns-plain-safe-out\n//                             c = flow-in   ⇒ ns-plain-safe-in\n//                             c = block-key ⇒ ns-plain-safe-out\n//                             c = flow-key  ⇒ ns-plain-safe-in\n// [128] ns-plain-safe-out ::= ns-char\n// [129]  ns-plain-safe-in ::= ns-char - c-flow-indicator\n// [130]  ns-plain-char(c) ::=  ( ns-plain-safe(c) - “:” - “#” )\n//                            | ( /* An ns-char preceding */ “#” )\n//                            | ( “:” /* Followed by an ns-plain-safe(c) */ )\nfunction isPlainSafe(c, prev, inblock) {\n  var cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);\n  var cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);\n  return (\n    // ns-plain-safe\n    inblock ? // c = flow-in\n      cIsNsCharOrWhitespace\n      : cIsNsCharOrWhitespace\n        // - c-flow-indicator\n        && c !== CHAR_COMMA\n        && c !== CHAR_LEFT_SQUARE_BRACKET\n        && c !== CHAR_RIGHT_SQUARE_BRACKET\n        && c !== CHAR_LEFT_CURLY_BRACKET\n        && c !== CHAR_RIGHT_CURLY_BRACKET\n  )\n    // ns-plain-char\n    && c !== CHAR_SHARP // false on '#'\n    && !(prev === CHAR_COLON && !cIsNsChar) // false on ': '\n    || (isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP) // change to true on '[^ ]#'\n    || (prev === CHAR_COLON && cIsNsChar); // change to true on ':[^ ]'\n}\n\n// Simplified test for values allowed as the first character in plain style.\nfunction isPlainSafeFirst(c) {\n  // Uses a subset of ns-char - c-indicator\n  // where ns-char = nb-char - s-white.\n  // No support of ( ( “?” | “:” | “-” ) /* Followed by an ns-plain-safe(c)) */ ) part\n  return isPrintable(c) && c !== CHAR_BOM\n    && !isWhitespace(c) // - s-white\n    // - (c-indicator ::=\n    // “-” | “?” | “:” | “,” | “[” | “]” | “{” | “}”\n    && c !== CHAR_MINUS\n    && c !== CHAR_QUESTION\n    && c !== CHAR_COLON\n    && c !== CHAR_COMMA\n    && c !== CHAR_LEFT_SQUARE_BRACKET\n    && c !== CHAR_RIGHT_SQUARE_BRACKET\n    && c !== CHAR_LEFT_CURLY_BRACKET\n    && c !== CHAR_RIGHT_CURLY_BRACKET\n    // | “#” | “&” | “*” | “!” | “|” | “=” | “>” | “'” | “\"”\n    && c !== CHAR_SHARP\n    && c !== CHAR_AMPERSAND\n    && c !== CHAR_ASTERISK\n    && c !== CHAR_EXCLAMATION\n    && c !== CHAR_VERTICAL_LINE\n    && c !== CHAR_EQUALS\n    && c !== CHAR_GREATER_THAN\n    && c !== CHAR_SINGLE_QUOTE\n    && c !== CHAR_DOUBLE_QUOTE\n    // | “%” | “@” | “`”)\n    && c !== CHAR_PERCENT\n    && c !== CHAR_COMMERCIAL_AT\n    && c !== CHAR_GRAVE_ACCENT;\n}\n\n// Simplified test for values allowed as the last character in plain style.\nfunction isPlainSafeLast(c) {\n  // just not whitespace or colon, it will be checked to be plain character later\n  return !isWhitespace(c) && c !== CHAR_COLON;\n}\n\n// Same as 'string'.codePointAt(pos), but works in older browsers.\nfunction codePointAt(string, pos) {\n  var first = string.charCodeAt(pos), second;\n  if (first >= 0xD800 && first <= 0xDBFF && pos + 1 < string.length) {\n    second = string.charCodeAt(pos + 1);\n    if (second >= 0xDC00 && second <= 0xDFFF) {\n      // https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      return (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n    }\n  }\n  return first;\n}\n\n// Determines whether block indentation indicator is required.\nfunction needIndentIndicator(string) {\n  var leadingSpaceRe = /^\\n* /;\n  return leadingSpaceRe.test(string);\n}\n\nvar STYLE_PLAIN   = 1,\n    STYLE_SINGLE  = 2,\n    STYLE_LITERAL = 3,\n    STYLE_FOLDED  = 4,\n    STYLE_DOUBLE  = 5;\n\n// Determines which scalar styles are possible and returns the preferred style.\n// lineWidth = -1 => no limit.\n// Pre-conditions: str.length > 0.\n// Post-conditions:\n//    STYLE_PLAIN or STYLE_SINGLE => no \\n are in the string.\n//    STYLE_LITERAL => no lines are suitable for folding (or lineWidth is -1).\n//    STYLE_FOLDED => a line > lineWidth and can be folded (and lineWidth != -1).\nfunction chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth,\n  testAmbiguousType, quotingType, forceQuotes, inblock) {\n\n  var i;\n  var char = 0;\n  var prevChar = null;\n  var hasLineBreak = false;\n  var hasFoldableLine = false; // only checked if shouldTrackWidth\n  var shouldTrackWidth = lineWidth !== -1;\n  var previousLineBreak = -1; // count the first line correctly\n  var plain = isPlainSafeFirst(codePointAt(string, 0))\n          && isPlainSafeLast(codePointAt(string, string.length - 1));\n\n  if (singleLineOnly || forceQuotes) {\n    // Case: no block styles.\n    // Check for disallowed characters to rule out plain and single.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n  } else {\n    // Case: block styles permitted.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (char === CHAR_LINE_FEED) {\n        hasLineBreak = true;\n        // Check if any line can be folded.\n        if (shouldTrackWidth) {\n          hasFoldableLine = hasFoldableLine ||\n            // Foldable line = too long, and not more-indented.\n            (i - previousLineBreak - 1 > lineWidth &&\n             string[previousLineBreak + 1] !== ' ');\n          previousLineBreak = i;\n        }\n      } else if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n    // in case the end is missing a \\n\n    hasFoldableLine = hasFoldableLine || (shouldTrackWidth &&\n      (i - previousLineBreak - 1 > lineWidth &&\n       string[previousLineBreak + 1] !== ' '));\n  }\n  // Although every style can represent \\n without escaping, prefer block styles\n  // for multiline, since they're more readable and they don't add empty lines.\n  // Also prefer folding a super-long line.\n  if (!hasLineBreak && !hasFoldableLine) {\n    // Strings interpretable as another type have to be quoted;\n    // e.g. the string 'true' vs. the boolean true.\n    if (plain && !forceQuotes && !testAmbiguousType(string)) {\n      return STYLE_PLAIN;\n    }\n    return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n  }\n  // Edge case: block indentation indicator can only have one digit.\n  if (indentPerLevel > 9 && needIndentIndicator(string)) {\n    return STYLE_DOUBLE;\n  }\n  // At this point we know block styles are valid.\n  // Prefer literal style unless we want to fold.\n  if (!forceQuotes) {\n    return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;\n  }\n  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n}\n\n// Note: line breaking/folding is implemented for only the folded style.\n// NB. We drop the last trailing newline (if any) of a returned block scalar\n//  since the dumper adds its own newline. This always works:\n//    • No ending newline => unaffected; already using strip \"-\" chomping.\n//    • Ending newline    => removed then restored.\n//  Importantly, this keeps the \"+\" chomp indicator from gaining an extra line.\nfunction writeScalar(state, string, level, iskey, inblock) {\n  state.dump = (function () {\n    if (string.length === 0) {\n      return state.quotingType === QUOTING_TYPE_DOUBLE ? '\"\"' : \"''\";\n    }\n    if (!state.noCompatMode) {\n      if (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {\n        return state.quotingType === QUOTING_TYPE_DOUBLE ? ('\"' + string + '\"') : (\"'\" + string + \"'\");\n      }\n    }\n\n    var indent = state.indent * Math.max(1, level); // no 0-indent scalars\n    // As indentation gets deeper, let the width decrease monotonically\n    // to the lower bound min(state.lineWidth, 40).\n    // Note that this implies\n    //  state.lineWidth ≤ 40 + state.indent: width is fixed at the lower bound.\n    //  state.lineWidth > 40 + state.indent: width decreases until the lower bound.\n    // This behaves better than a constant minimum width which disallows narrower options,\n    // or an indent threshold which causes the width to suddenly increase.\n    var lineWidth = state.lineWidth === -1\n      ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);\n\n    // Without knowing if keys are implicit/explicit, assume implicit for safety.\n    var singleLineOnly = iskey\n      // No block styles in flow mode.\n      || (state.flowLevel > -1 && level >= state.flowLevel);\n    function testAmbiguity(string) {\n      return testImplicitResolving(state, string);\n    }\n\n    switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth,\n      testAmbiguity, state.quotingType, state.forceQuotes && !iskey, inblock)) {\n\n      case STYLE_PLAIN:\n        return string;\n      case STYLE_SINGLE:\n        return \"'\" + string.replace(/'/g, \"''\") + \"'\";\n      case STYLE_LITERAL:\n        return '|' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(string, indent));\n      case STYLE_FOLDED:\n        return '>' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(foldString(string, lineWidth), indent));\n      case STYLE_DOUBLE:\n        return '\"' + escapeString(string) + '\"';\n      default:\n        throw new exception('impossible error: invalid scalar style');\n    }\n  }());\n}\n\n// Pre-conditions: string is valid for a block scalar, 1 <= indentPerLevel <= 9.\nfunction blockHeader(string, indentPerLevel) {\n  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : '';\n\n  // note the special case: the string '\\n' counts as a \"trailing\" empty line.\n  var clip =          string[string.length - 1] === '\\n';\n  var keep = clip && (string[string.length - 2] === '\\n' || string === '\\n');\n  var chomp = keep ? '+' : (clip ? '' : '-');\n\n  return indentIndicator + chomp + '\\n';\n}\n\n// (See the note for writeScalar.)\nfunction dropEndingNewline(string) {\n  return string[string.length - 1] === '\\n' ? string.slice(0, -1) : string;\n}\n\n// Note: a long line without a suitable break point will exceed the width limit.\n// Pre-conditions: every char in str isPrintable, str.length > 0, width > 0.\nfunction foldString(string, width) {\n  // In folded style, $k$ consecutive newlines output as $k+1$ newlines—\n  // unless they're before or after a more-indented line, or at the very\n  // beginning or end, in which case $k$ maps to $k$.\n  // Therefore, parse each chunk as newline(s) followed by a content line.\n  var lineRe = /(\\n+)([^\\n]*)/g;\n\n  // first line (possibly an empty line)\n  var result = (function () {\n    var nextLF = string.indexOf('\\n');\n    nextLF = nextLF !== -1 ? nextLF : string.length;\n    lineRe.lastIndex = nextLF;\n    return foldLine(string.slice(0, nextLF), width);\n  }());\n  // If we haven't reached the first content line yet, don't add an extra \\n.\n  var prevMoreIndented = string[0] === '\\n' || string[0] === ' ';\n  var moreIndented;\n\n  // rest of the lines\n  var match;\n  while ((match = lineRe.exec(string))) {\n    var prefix = match[1], line = match[2];\n    moreIndented = (line[0] === ' ');\n    result += prefix\n      + (!prevMoreIndented && !moreIndented && line !== ''\n        ? '\\n' : '')\n      + foldLine(line, width);\n    prevMoreIndented = moreIndented;\n  }\n\n  return result;\n}\n\n// Greedy line breaking.\n// Picks the longest line under the limit each time,\n// otherwise settles for the shortest line over the limit.\n// NB. More-indented lines *cannot* be folded, as that would add an extra \\n.\nfunction foldLine(line, width) {\n  if (line === '' || line[0] === ' ') return line;\n\n  // Since a more-indented line adds a \\n, breaks can't be followed by a space.\n  var breakRe = / [^ ]/g; // note: the match index will always be <= length-2.\n  var match;\n  // start is an inclusive index. end, curr, and next are exclusive.\n  var start = 0, end, curr = 0, next = 0;\n  var result = '';\n\n  // Invariants: 0 <= start <= length-1.\n  //   0 <= curr <= next <= max(0, length-2). curr - start <= width.\n  // Inside the loop:\n  //   A match implies length >= 2, so curr and next are <= length-2.\n  while ((match = breakRe.exec(line))) {\n    next = match.index;\n    // maintain invariant: curr - start <= width\n    if (next - start > width) {\n      end = (curr > start) ? curr : next; // derive end <= length-2\n      result += '\\n' + line.slice(start, end);\n      // skip the space that was output as \\n\n      start = end + 1;                    // derive start <= length-1\n    }\n    curr = next;\n  }\n\n  // By the invariants, start <= length-1, so there is something left over.\n  // It is either the whole string or a part starting from non-whitespace.\n  result += '\\n';\n  // Insert a break if the remainder is too long and there is a break available.\n  if (line.length - start > width && curr > start) {\n    result += line.slice(start, curr) + '\\n' + line.slice(curr + 1);\n  } else {\n    result += line.slice(start);\n  }\n\n  return result.slice(1); // drop extra \\n joiner\n}\n\n// Escapes a double-quoted string.\nfunction escapeString(string) {\n  var result = '';\n  var char = 0;\n  var escapeSeq;\n\n  for (var i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n    char = codePointAt(string, i);\n    escapeSeq = ESCAPE_SEQUENCES[char];\n\n    if (!escapeSeq && isPrintable(char)) {\n      result += string[i];\n      if (char >= 0x10000) result += string[i + 1];\n    } else {\n      result += escapeSeq || encodeHex(char);\n    }\n  }\n\n  return result;\n}\n\nfunction writeFlowSequence(state, level, object) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level, value, false, false) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level, null, false, false))) {\n\n      if (_result !== '') _result += ',' + (!state.condenseFlow ? ' ' : '');\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = '[' + _result + ']';\n}\n\nfunction writeBlockSequence(state, level, object, compact) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level + 1, value, true, true, false, true) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level + 1, null, true, true, false, true))) {\n\n      if (!compact || _result !== '') {\n        _result += generateNextLine(state, level);\n      }\n\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        _result += '-';\n      } else {\n        _result += '- ';\n      }\n\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '[]'; // Empty sequence if no valid values.\n}\n\nfunction writeFlowMapping(state, level, object) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      pairBuffer;\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n\n    pairBuffer = '';\n    if (_result !== '') pairBuffer += ', ';\n\n    if (state.condenseFlow) pairBuffer += '\"';\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level, objectKey, false, false)) {\n      continue; // Skip this pair because of invalid key;\n    }\n\n    if (state.dump.length > 1024) pairBuffer += '? ';\n\n    pairBuffer += state.dump + (state.condenseFlow ? '\"' : '') + ':' + (state.condenseFlow ? '' : ' ');\n\n    if (!writeNode(state, level, objectValue, false, false)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = '{' + _result + '}';\n}\n\nfunction writeBlockMapping(state, level, object, compact) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      explicitPair,\n      pairBuffer;\n\n  // Allow sorting keys so that the output file is deterministic\n  if (state.sortKeys === true) {\n    // Default sorting\n    objectKeyList.sort();\n  } else if (typeof state.sortKeys === 'function') {\n    // Custom sort function\n    objectKeyList.sort(state.sortKeys);\n  } else if (state.sortKeys) {\n    // Something is wrong\n    throw new exception('sortKeys must be a boolean or a function');\n  }\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n    pairBuffer = '';\n\n    if (!compact || _result !== '') {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level + 1, objectKey, true, true, true)) {\n      continue; // Skip this pair because of invalid key.\n    }\n\n    explicitPair = (state.tag !== null && state.tag !== '?') ||\n                   (state.dump && state.dump.length > 1024);\n\n    if (explicitPair) {\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        pairBuffer += '?';\n      } else {\n        pairBuffer += '? ';\n      }\n    }\n\n    pairBuffer += state.dump;\n\n    if (explicitPair) {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n      pairBuffer += ':';\n    } else {\n      pairBuffer += ': ';\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '{}'; // Empty mapping if no valid pairs.\n}\n\nfunction detectType(state, object, explicit) {\n  var _result, typeList, index, length, type, style;\n\n  typeList = explicit ? state.explicitTypes : state.implicitTypes;\n\n  for (index = 0, length = typeList.length; index < length; index += 1) {\n    type = typeList[index];\n\n    if ((type.instanceOf  || type.predicate) &&\n        (!type.instanceOf || ((typeof object === 'object') && (object instanceof type.instanceOf))) &&\n        (!type.predicate  || type.predicate(object))) {\n\n      if (explicit) {\n        if (type.multi && type.representName) {\n          state.tag = type.representName(object);\n        } else {\n          state.tag = type.tag;\n        }\n      } else {\n        state.tag = '?';\n      }\n\n      if (type.represent) {\n        style = state.styleMap[type.tag] || type.defaultStyle;\n\n        if (_toString.call(type.represent) === '[object Function]') {\n          _result = type.represent(object, style);\n        } else if (_hasOwnProperty.call(type.represent, style)) {\n          _result = type.represent[style](object, style);\n        } else {\n          throw new exception('!<' + type.tag + '> tag resolver accepts not \"' + style + '\" style');\n        }\n\n        state.dump = _result;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// Serializes `object` and writes it to global `result`.\n// Returns true on success, or false on invalid object.\n//\nfunction writeNode(state, level, object, block, compact, iskey, isblockseq) {\n  state.tag = null;\n  state.dump = object;\n\n  if (!detectType(state, object, false)) {\n    detectType(state, object, true);\n  }\n\n  var type = _toString.call(state.dump);\n  var inblock = block;\n  var tagStr;\n\n  if (block) {\n    block = (state.flowLevel < 0 || state.flowLevel > level);\n  }\n\n  var objectOrArray = type === '[object Object]' || type === '[object Array]',\n      duplicateIndex,\n      duplicate;\n\n  if (objectOrArray) {\n    duplicateIndex = state.duplicates.indexOf(object);\n    duplicate = duplicateIndex !== -1;\n  }\n\n  if ((state.tag !== null && state.tag !== '?') || duplicate || (state.indent !== 2 && level > 0)) {\n    compact = false;\n  }\n\n  if (duplicate && state.usedDuplicates[duplicateIndex]) {\n    state.dump = '*ref_' + duplicateIndex;\n  } else {\n    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {\n      state.usedDuplicates[duplicateIndex] = true;\n    }\n    if (type === '[object Object]') {\n      if (block && (Object.keys(state.dump).length !== 0)) {\n        writeBlockMapping(state, level, state.dump, compact);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowMapping(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object Array]') {\n      if (block && (state.dump.length !== 0)) {\n        if (state.noArrayIndent && !isblockseq && level > 0) {\n          writeBlockSequence(state, level - 1, state.dump, compact);\n        } else {\n          writeBlockSequence(state, level, state.dump, compact);\n        }\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowSequence(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object String]') {\n      if (state.tag !== '?') {\n        writeScalar(state, state.dump, level, iskey, inblock);\n      }\n    } else if (type === '[object Undefined]') {\n      return false;\n    } else {\n      if (state.skipInvalid) return false;\n      throw new exception('unacceptable kind of an object to dump ' + type);\n    }\n\n    if (state.tag !== null && state.tag !== '?') {\n      // Need to encode all characters except those allowed by the spec:\n      //\n      // [35] ns-dec-digit    ::=  [#x30-#x39] /* 0-9 */\n      // [36] ns-hex-digit    ::=  ns-dec-digit\n      //                         | [#x41-#x46] /* A-F */ | [#x61-#x66] /* a-f */\n      // [37] ns-ascii-letter ::=  [#x41-#x5A] /* A-Z */ | [#x61-#x7A] /* a-z */\n      // [38] ns-word-char    ::=  ns-dec-digit | ns-ascii-letter | “-”\n      // [39] ns-uri-char     ::=  “%” ns-hex-digit ns-hex-digit | ns-word-char | “#”\n      //                         | “;” | “/” | “?” | “:” | “@” | “&” | “=” | “+” | “$” | “,”\n      //                         | “_” | “.” | “!” | “~” | “*” | “'” | “(” | “)” | “[” | “]”\n      //\n      // Also need to encode '!' because it has special meaning (end of tag prefix).\n      //\n      tagStr = encodeURI(\n        state.tag[0] === '!' ? state.tag.slice(1) : state.tag\n      ).replace(/!/g, '%21');\n\n      if (state.tag[0] === '!') {\n        tagStr = '!' + tagStr;\n      } else if (tagStr.slice(0, 18) === 'tag:yaml.org,2002:') {\n        tagStr = '!!' + tagStr.slice(18);\n      } else {\n        tagStr = '!<' + tagStr + '>';\n      }\n\n      state.dump = tagStr + ' ' + state.dump;\n    }\n  }\n\n  return true;\n}\n\nfunction getDuplicateReferences(object, state) {\n  var objects = [],\n      duplicatesIndexes = [],\n      index,\n      length;\n\n  inspectNode(object, objects, duplicatesIndexes);\n\n  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {\n    state.duplicates.push(objects[duplicatesIndexes[index]]);\n  }\n  state.usedDuplicates = new Array(length);\n}\n\nfunction inspectNode(object, objects, duplicatesIndexes) {\n  var objectKeyList,\n      index,\n      length;\n\n  if (object !== null && typeof object === 'object') {\n    index = objects.indexOf(object);\n    if (index !== -1) {\n      if (duplicatesIndexes.indexOf(index) === -1) {\n        duplicatesIndexes.push(index);\n      }\n    } else {\n      objects.push(object);\n\n      if (Array.isArray(object)) {\n        for (index = 0, length = object.length; index < length; index += 1) {\n          inspectNode(object[index], objects, duplicatesIndexes);\n        }\n      } else {\n        objectKeyList = Object.keys(object);\n\n        for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);\n        }\n      }\n    }\n  }\n}\n\nfunction dump$1(input, options) {\n  options = options || {};\n\n  var state = new State(options);\n\n  if (!state.noRefs) getDuplicateReferences(input, state);\n\n  var value = input;\n\n  if (state.replacer) {\n    value = state.replacer.call({ '': value }, '', value);\n  }\n\n  if (writeNode(state, 0, value, true, true)) return state.dump + '\\n';\n\n  return '';\n}\n\nvar dump_1 = dump$1;\n\nvar dumper = {\n\tdump: dump_1\n};\n\nfunction renamed(from, to) {\n  return function () {\n    throw new Error('Function yaml.' + from + ' is removed in js-yaml 4. ' +\n      'Use yaml.' + to + ' instead, which is now safe by default.');\n  };\n}\n\n\nvar Type                = type;\nvar Schema              = schema;\nvar FAILSAFE_SCHEMA     = failsafe;\nvar JSON_SCHEMA         = json;\nvar CORE_SCHEMA         = core;\nvar DEFAULT_SCHEMA      = _default;\nvar load                = loader.load;\nvar loadAll             = loader.loadAll;\nvar dump                = dumper.dump;\nvar YAMLException       = exception;\n\n// Re-export all types in case user wants to create custom schema\nvar types = {\n  binary:    binary,\n  float:     float,\n  map:       map,\n  null:      _null,\n  pairs:     pairs,\n  set:       set,\n  timestamp: timestamp,\n  bool:      bool,\n  int:       int,\n  merge:     merge,\n  omap:      omap,\n  seq:       seq,\n  str:       str\n};\n\n// Removed functions from JS-YAML 3.0.x\nvar safeLoad            = renamed('safeLoad', 'load');\nvar safeLoadAll         = renamed('safeLoadAll', 'loadAll');\nvar safeDump            = renamed('safeDump', 'dump');\n\nvar jsYaml = {\n\tType: Type,\n\tSchema: Schema,\n\tFAILSAFE_SCHEMA: FAILSAFE_SCHEMA,\n\tJSON_SCHEMA: JSON_SCHEMA,\n\tCORE_SCHEMA: CORE_SCHEMA,\n\tDEFAULT_SCHEMA: DEFAULT_SCHEMA,\n\tload: load,\n\tloadAll: loadAll,\n\tdump: dump,\n\tYAMLException: YAMLException,\n\ttypes: types,\n\tsafeLoad: safeLoad,\n\tsafeLoadAll: safeLoadAll,\n\tsafeDump: safeDump\n};\n\nexport default jsYaml;\nexport { CORE_SCHEMA, DEFAULT_SCHEMA, FAILSAFE_SCHEMA, JSON_SCHEMA, Schema, Type, YAMLException, dump, load, loadAll, safeDump, safeLoad, safeLoadAll, types };\n", "import { load } from 'js-yaml';\n\nconst textDecoder = new TextDecoder();\nconst textEncoder = new TextEncoder();\nfunction splitFrontmatter(data) {\n  const str = textDecoder.decode(data);\n  const match = str.match(/^---(?:\\r?\\n([^]*?))?\\r?\\n---\\r?\\n?/);\n  if (match) {\n    var _match$;\n    const encoded = textEncoder.encode(match[0]);\n    return {\n      frontmatter: (_match$ = match[1]) !== null && _match$ !== void 0 ? _match$ : '',\n      content: data.slice(encoded.byteLength)\n    };\n  }\n  return null;\n}\nfunction loadDataFile(data, formatInfo) {\n  const parse = formatInfo.data === 'json' ? JSON.parse : load;\n  if (!formatInfo.contentField) {\n    const dataFile = textDecoder.decode(data);\n    return {\n      loaded: parse(dataFile)\n    };\n  }\n  const res = splitFrontmatter(data);\n  return {\n    loaded: res === null ? {} : parse(res.frontmatter),\n    extraFakeFile: {\n      path: `${formatInfo.contentField.key}${formatInfo.contentField.config.contentExtension}`,\n      contents: res === null ? data : res.content\n    }\n  };\n}\n\nexport { loadDataFile as l };\n", "import { jsxs, Fragment, jsx } from 'react/jsx-runtime';\n\nconst historyIcon = /*#__PURE__*/jsxs(Fragment, {\n  children: [/*#__PURE__*/jsx(\"path\", {\n    d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\"\n  }), /*#__PURE__*/jsx(\"path\", {\n    d: \"M3 3v5h5M12 7v5l4 2\"\n  })]\n});\n\nexport { historyIcon };\n", "'use client';\nimport { useSlotId, filterDOMProps } from '@react-aria/utils';\nimport { useRef, useMemo } from 'react';\nimport { checkCircle2Icon } from '@keystar/ui/icon/icons/checkCircle2Icon';\nimport { infoIcon } from '@keystar/ui/icon/icons/infoIcon';\nimport { alertTriangleIcon } from '@keystar/ui/icon/icons/alertTriangleIcon';\nimport { Icon } from '@keystar/ui/icon';\nimport { Grid, minmax } from '@keystar/ui/layout';\nimport { SlotProvider, Content } from '@keystar/ui/slots';\nimport { useHasChild, isReactText } from '@keystar/ui/utils';\nimport { ClassList, useStyleProps, css, tokenSchema } from '@keystar/ui/style';\nimport { Text } from '@keystar/ui/typography';\nimport { jsxs, jsx } from 'react/jsx-runtime';\n\nconst noticeClassList = new ClassList('Notice', ['heading']);\nconst toneToIcon = {\n  caution: alertTriangleIcon,\n  critical: alertTriangleIcon,\n  neutral: infoIcon,\n  positive: checkCircle2Icon\n};\nconst toneToRole = {\n  caution: 'alert',\n  critical: 'alert',\n  neutral: 'status',\n  positive: 'status'\n};\n\n// NOTE: this has been a good exploration, and slots will be useful elsewhere,\n// but in this case where explicit IDs are required for accessibility and\n// composition isn't paramount it may be more appropriate to simply use a\n// prop-based API for the heading etc.\n\n/**\n * Use notices to highlight information that affects a section, feature or page.\n * Draw attention without interrupting users from their current task.\n */\nfunction Notice(props) {\n  const {\n    children,\n    tone = 'neutral',\n    ...otherProps\n  } = props;\n  const ref = useRef(null);\n  const styleProps = useStyleProps(otherProps);\n  const headingClassName = noticeClassList.element('heading');\n  const headingId = useSlotId();\n  const contentId = useSlotId();\n  const hasHeading = useHasChild(noticeClassList.selector('heading'), ref);\n  const coercedTone = tone === 'neutral' ? 'accent' : tone;\n  const icon = toneToIcon[tone];\n  const contentStyles = css({\n    display: 'grid',\n    gap: tokenSchema.size.space.large\n  });\n  const slots = useMemo(() => ({\n    content: {\n      elementType: 'div',\n      gridArea: hasHeading ? 'content' : 'heading-start / heading-start / content-end / content-end',\n      id: contentId,\n      paddingY: hasHeading ? 'regular' : undefined,\n      UNSAFE_className: contentStyles\n    },\n    heading: {\n      elementType: 'div',\n      gridArea: 'heading',\n      id: headingId,\n      UNSAFE_className: headingClassName,\n      size: 'small'\n    },\n    text: {\n      color: coercedTone,\n      weight: 'medium'\n    }\n  }), [coercedTone, contentId, contentStyles, hasHeading, headingClassName, headingId]);\n  return /*#__PURE__*/jsxs(Grid, {\n    \"aria-live\": \"polite\",\n    \"aria-labelledby\": headingId,\n    \"aria-describedby\": contentId,\n    role: toneToRole[tone],\n    ref: ref,\n    tabIndex: 0,\n    UNSAFE_className: styleProps.className,\n    UNSAFE_style: styleProps.style,\n    ...filterDOMProps(otherProps),\n    // appearance\n    backgroundColor: coercedTone,\n    border: coercedTone,\n    borderRadius: \"medium\",\n    minWidth: 0,\n    padding: \"medium\",\n    width: \"100%\"\n    // layout\n    ,\n    alignItems: \"center\",\n    areas: ['icon heading', 'icon content'],\n    columnGap: \"medium\",\n    columns: ['icon.medium', 'auto'],\n    rows: `${minmax('icon.medium', 'auto')} auto`,\n    children: [/*#__PURE__*/jsx(Icon, {\n      src: icon,\n      size: \"medium\",\n      color: coercedTone,\n      gridArea: \"icon\",\n      alignSelf: \"start\"\n    }), /*#__PURE__*/jsx(SlotProvider, {\n      slots: slots,\n      children: isReactText(children) ? /*#__PURE__*/jsx(Content, {\n        children: /*#__PURE__*/jsx(Text, {\n          children: children\n        })\n      }) : children\n    })]\n  });\n}\n\nexport { Notice };\n", "import { jsxs, Fragment, jsx } from 'react/jsx-runtime';\n\nconst copyPlusIcon = /*#__PURE__*/jsxs(Fragment, {\n  children: [/*#__PURE__*/jsx(\"path\", {\n    d: \"M15 12v6M12 15h6\"\n  }), /*#__PURE__*/jsx(\"rect\", {\n    width: 14,\n    height: 14,\n    x: 8,\n    y: 8,\n    rx: 2,\n    ry: 2\n  }), /*#__PURE__*/jsx(\"path\", {\n    d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\"\n  })]\n});\n\nexport { copyPlusIcon };\n", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {AriaBreadcrumbItemProps} from '@react-types/breadcrumbs';\nimport {DOMAttributes, FocusableElement} from '@react-types/shared';\nimport {RefObject} from 'react';\nimport {useLink} from '@react-aria/link';\n\nexport interface BreadcrumbItemAria {\n  /** Props for the breadcrumb item link element. */\n  itemProps: DOMAttributes\n}\n\n/**\n * Provides the behavior and accessibility implementation for an in a breadcrumbs component.\n * See `useBreadcrumbs` for details about breadcrumbs.\n */\nexport function useBreadcrumbItem(props: AriaBreadcrumbItemProps, ref: RefObject<FocusableElement>): BreadcrumbItemAria {\n  let {\n    isCurrent,\n    isDisabled,\n    'aria-current': ariaCurrent,\n    elementType = 'a',\n    ...otherProps\n  } = props;\n\n  let {linkProps} = useLink({isDisabled: isDisabled || isCurrent, elementType, ...otherProps}, ref);\n  let isHeading = /^h[1-6]$/.test(elementType);\n  let itemProps: DOMAttributes = {};\n\n  if (!isHeading) {\n    itemProps = linkProps;\n  }\n\n  if (isCurrent) {\n    itemProps['aria-current'] = ariaCurrent || 'page';\n    // isCurrent sets isDisabled === true for the current item,\n    // so we have to restore the tabIndex in order to support autoFocus.\n    itemProps.tabIndex = props.autoFocus ? -1 : undefined;\n  }\n\n  return {\n    itemProps: {\n      'aria-disabled': isDisabled,\n      ...itemProps\n    }\n  };\n}\n", "{\n  \"breadcrumbs\": \"عناصر الواجهة\"\n}\n", "{\n  \"breadcrumbs\": \"Трохи хляб\"\n}\n", "{\n  \"breadcrumbs\": \"Popis cesty\"\n}\n", "{\n  \"breadcrumbs\": \"Brødkrummer\"\n}\n", "{\n  \"breadcrumbs\": \"Breadcrumbs\"\n}\n", "{\n  \"breadcrumbs\": \"Πλοηγήσεις breadcrumb\"\n}\n", "{\n  \"breadcrumbs\": \"Breadcrumbs\"\n}\n", "{\n  \"breadcrumbs\": \"Migas de pan\"\n}\n", "{\n  \"breadcrumbs\": \"Lingiread\"\n}\n", "{\n  \"breadcrumbs\": \"Navigointilinkit\"\n}\n", "{\n  \"breadcrumbs\": \"Chemin de navigation\"\n}\n", "{\n  \"breadcrumbs\": \"שבילי ניווט\"\n}\n", "{\n  \"breadcrumbs\": \"Navigacijski putovi\"\n}\n", "{\n  \"breadcrumbs\": \"Morzsamenü\"\n}\n", "{\n  \"breadcrumbs\": \"Breadcrumb\"\n}\n", "{\n  \"breadcrumbs\": \"パンくずリスト\"\n}\n", "{\n  \"breadcrumbs\": \"탐색 표시\"\n}\n", "{\n  \"breadcrumbs\": \"Naršymo kelias\"\n}\n", "{\n  \"breadcrumbs\": \"Atpakaļceļi\"\n}\n", "{\n  \"breadcrumbs\": \"Navigasjonsstier\"\n}\n", "{\n  \"breadcrumbs\": \"Broodkruimels\"\n}\n", "{\n  \"breadcrumbs\": \"Struktura nawigacyjna\"\n}\n", "{\n  \"breadcrumbs\": \"Caminho detalhado\"\n}\n", "{\n  \"breadcrumbs\": \"Categorias\"\n}\n", "{\n  \"breadcrumbs\": \"Miez de pâine\"\n}\n", "{\n  \"breadcrumbs\": \"Навигация\"\n}\n", "{\n  \"breadcrumbs\": \"Navigačné prvky Breadcrumbs\"\n}\n", "{\n  \"breadcrumbs\": \"Drobtine\"\n}\n", "{\n  \"breadcrumbs\": \"Putanje navigacije\"\n}\n", "{\n  \"breadcrumbs\": \"Sökvägar\"\n}\n", "{\n  \"breadcrumbs\": \"İçerik haritaları\"\n}\n", "{\n  \"breadcrumbs\": \"Навігаційна стежка\"\n}\n", "{\n  \"breadcrumbs\": \"导航栏\"\n}\n", "{\n  \"breadcrumbs\": \"導覽列\"\n}\n", "const _temp0 = require(\"../intl/ar-AE.json\");\nconst _temp1 = require(\"../intl/bg-BG.json\");\nconst _temp2 = require(\"../intl/cs-CZ.json\");\nconst _temp3 = require(\"../intl/da-DK.json\");\nconst _temp4 = require(\"../intl/de-DE.json\");\nconst _temp5 = require(\"../intl/el-GR.json\");\nconst _temp6 = require(\"../intl/en-US.json\");\nconst _temp7 = require(\"../intl/es-ES.json\");\nconst _temp8 = require(\"../intl/et-EE.json\");\nconst _temp9 = require(\"../intl/fi-FI.json\");\nconst _temp10 = require(\"../intl/fr-FR.json\");\nconst _temp11 = require(\"../intl/he-IL.json\");\nconst _temp12 = require(\"../intl/hr-HR.json\");\nconst _temp13 = require(\"../intl/hu-HU.json\");\nconst _temp14 = require(\"../intl/it-IT.json\");\nconst _temp15 = require(\"../intl/ja-JP.json\");\nconst _temp16 = require(\"../intl/ko-KR.json\");\nconst _temp17 = require(\"../intl/lt-LT.json\");\nconst _temp18 = require(\"../intl/lv-LV.json\");\nconst _temp19 = require(\"../intl/nb-NO.json\");\nconst _temp20 = require(\"../intl/nl-NL.json\");\nconst _temp21 = require(\"../intl/pl-PL.json\");\nconst _temp22 = require(\"../intl/pt-BR.json\");\nconst _temp23 = require(\"../intl/pt-PT.json\");\nconst _temp24 = require(\"../intl/ro-RO.json\");\nconst _temp25 = require(\"../intl/ru-RU.json\");\nconst _temp26 = require(\"../intl/sk-SK.json\");\nconst _temp27 = require(\"../intl/sl-SI.json\");\nconst _temp28 = require(\"../intl/sr-SP.json\");\nconst _temp29 = require(\"../intl/sv-SE.json\");\nconst _temp30 = require(\"../intl/tr-TR.json\");\nconst _temp31 = require(\"../intl/uk-UA.json\");\nconst _temp32 = require(\"../intl/zh-CN.json\");\nconst _temp33 = require(\"../intl/zh-TW.json\");\nmodule.exports = {\n  \"ar-AE\": _temp0,\n  \"bg-BG\": _temp1,\n  \"cs-CZ\": _temp2,\n  \"da-DK\": _temp3,\n  \"de-DE\": _temp4,\n  \"el-GR\": _temp5,\n  \"en-US\": _temp6,\n  \"es-ES\": _temp7,\n  \"et-EE\": _temp8,\n  \"fi-FI\": _temp9,\n  \"fr-FR\": _temp10,\n  \"he-IL\": _temp11,\n  \"hr-HR\": _temp12,\n  \"hu-HU\": _temp13,\n  \"it-IT\": _temp14,\n  \"ja-JP\": _temp15,\n  \"ko-KR\": _temp16,\n  \"lt-LT\": _temp17,\n  \"lv-LV\": _temp18,\n  \"nb-NO\": _temp19,\n  \"nl-NL\": _temp20,\n  \"pl-PL\": _temp21,\n  \"pt-BR\": _temp22,\n  \"pt-PT\": _temp23,\n  \"ro-RO\": _temp24,\n  \"ru-RU\": _temp25,\n  \"sk-SK\": _temp26,\n  \"sl-SI\": _temp27,\n  \"sr-SP\": _temp28,\n  \"sv-SE\": _temp29,\n  \"tr-TR\": _temp30,\n  \"uk-UA\": _temp31,\n  \"zh-CN\": _temp32,\n  \"zh-TW\": _temp33\n}", "/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {AriaBreadcrumbsProps} from '@react-types/breadcrumbs';\nimport {DOMAttributes} from '@react-types/shared';\nimport {filterDOMProps} from '@react-aria/utils';\n// @ts-ignore\nimport intlMessages from '../intl/*.json';\nimport {useLocalizedStringFormatter} from '@react-aria/i18n';\n\nexport interface BreadcrumbsAria {\n  /** Props for the breadcrumbs navigation element. */\n  navProps: DOMAttributes\n}\n\n/**\n * Provides the behavior and accessibility implementation for a breadcrumbs component.\n * Breadcrumbs display a hierarchy of links to the current page or resource in an application.\n */\nexport function useBreadcrumbs(props: AriaBreadcrumbsProps): BreadcrumbsAria {\n  let {\n    'aria-label': ariaLabel,\n    ...otherProps\n  } = props;\n\n  let strings = useLocalizedStringFormatter(intlMessages, '@react-aria/breadcrumbs');\n  return {\n    navProps: {\n      ...filterDOMProps(otherProps, {labelable: true}),\n      'aria-label': ariaLabel || strings.format('breadcrumbs')\n    }\n  };\n}\n", "'use client';\nexport { Item } from '@react-stately/collections';\nimport { useBreadcrumbItem, useBreadcrumbs } from '@react-aria/breadcrumbs';\nimport { mergeProps, useObjectRef, useValueEffect, useResizeObserver, useLayoutEffect } from '@react-aria/utils';\nimport { useRef, useMemo, Fragment, forwardRef, Children, useState, useCallback, createElement, isValidElement } from 'react';\nimport { ActionButton } from '@keystar/ui/button';\nimport { useProviderProps } from '@keystar/ui/core';\nimport { Icon } from '@keystar/ui/icon';\nimport { folderClosedIcon } from '@keystar/ui/icon/icons/folderClosedIcon';\nimport { folderOpenIcon } from '@keystar/ui/icon/icons/folderOpenIcon';\nimport { MenuTrigger, Menu } from '@keystar/ui/menu';\nimport { ClassList, FocusRing, toDataAttributes, classNames, css, tokenSchema, useStyleProps } from '@keystar/ui/style';\nimport { useLocale } from '@react-aria/i18n';\nimport { useHover } from '@react-aria/interactions';\nimport { chevronRightIcon } from '@keystar/ui/icon/icons/chevronRightIcon';\nimport { chevronLeftIcon } from '@keystar/ui/icon/icons/chevronLeftIcon';\nimport { jsxs, jsx } from 'react/jsx-runtime';\n\nconst breadcrumbsClassList = new ClassList('Breadcrumbs', ['item', 'link', 'list', 'separator']);\nfunction BreadcrumbItem(props) {\n  let {\n    children,\n    isCurrent,\n    isDisabled,\n    isMenu,\n    size = 'regular'\n  } = props;\n  let {\n    direction\n  } = useLocale();\n  let ref = useRef(null);\n  let ElementType = props.href ? 'a' : 'span';\n  let {\n    itemProps\n  } = useBreadcrumbItem({\n    ...props,\n    elementType: ElementType\n  }, ref);\n  let {\n    hoverProps,\n    isHovered\n  } = useHover(props);\n  let icon = useMemo(() => {\n    return direction === 'rtl' ? chevronLeftIcon : chevronRightIcon;\n  }, [direction]);\n\n  // if this item contains a menu button, then it shouldn't be a link\n  if (isMenu) {\n    itemProps = {};\n  }\n  return /*#__PURE__*/jsxs(Fragment, {\n    children: [/*#__PURE__*/jsx(FocusRing, {\n      children: /*#__PURE__*/jsx(ElementType, {\n        ...mergeProps(itemProps, hoverProps),\n        ...toDataAttributes({\n          size: size !== 'regular' ? size : undefined,\n          interaction: isHovered ? 'hover' : undefined\n        }),\n        ref: ref,\n        className: classNames(breadcrumbsClassList.element('link'), css({\n          color: tokenSchema.color.foreground.neutral,\n          cursor: 'default',\n          fontSize: tokenSchema.typography.text.regular.size,\n          fontFamily: tokenSchema.typography.fontFamily.base,\n          fontWeight: tokenSchema.typography.fontWeight.medium,\n          outline: 0,\n          MozOsxFontSmoothing: 'auto',\n          WebkitFontSmoothing: 'auto',\n          '&[data-size=small]': {\n            fontSize: tokenSchema.typography.text.small.size\n          },\n          '&[data-size=medium]': {\n            fontSize: tokenSchema.typography.text.medium.size\n          },\n          '&[data-size=large]': {\n            fontSize: tokenSchema.typography.text.large.size\n          },\n          '&:not([aria-current=page])': {\n            '&:not([aria-disabled=true])': {\n              cursor: 'pointer'\n            },\n            '&[data-interaction=hover]': {\n              color: tokenSchema.color.foreground.neutralEmphasis,\n              textDecoration: 'underline'\n            },\n            '&[data-focus=visible]': {\n              color: tokenSchema.color.foreground.neutralEmphasis,\n              textDecoration: 'underline',\n              textDecorationStyle: 'double'\n            },\n            '&[aria-disabled=true]': {\n              color: tokenSchema.color.alias.foregroundDisabled\n            }\n          },\n          '&[aria-current=page]': {\n            color: tokenSchema.color.foreground.neutralEmphasis,\n            fontWeight: tokenSchema.typography.fontWeight.semibold,\n            overflow: 'hidden',\n            textOverflow: 'ellipsis'\n          }\n        }), {\n          'is-hovered': isHovered\n        }),\n        children: children\n      })\n    }), !isCurrent && /*#__PURE__*/jsx(Icon, {\n      src: icon,\n      color: isDisabled ? 'color.alias.foregroundDisabled' : 'neutralSecondary',\n      marginX: \"small\",\n      UNSAFE_className: breadcrumbsClassList.element('separator')\n    })]\n  });\n}\n\nconst MIN_VISIBLE_ITEMS = 1;\nconst MAX_VISIBLE_ITEMS = 4;\nfunction Breadcrumbs(props, ref) {\n  props = useProviderProps(props);\n  let {\n    children,\n    showRoot,\n    size = 'regular',\n    isDisabled,\n    onAction,\n    ...otherProps\n  } = props;\n\n  // Not using React.Children.toArray because it mutates the key prop.\n  let childArray = [];\n  Children.forEach(children, child => {\n    if ( /*#__PURE__*/isValidElement(child)) {\n      childArray.push(child);\n    }\n  });\n  let domRef = useObjectRef(ref);\n  let listRef = useRef(null);\n  let [menuIsOpen, setMenuOpen] = useState(false);\n  let [visibleItems, setVisibleItems] = useValueEffect(childArray.length);\n  let {\n    navProps\n  } = useBreadcrumbs(props);\n  let styleProps = useStyleProps(otherProps);\n  let updateOverflow = useCallback(() => {\n    let computeVisibleItems = visibleItems => {\n      // refs may be null at runtime\n      let currListRef = listRef.current;\n      if (!currListRef) {\n        return visibleItems;\n      }\n      let listItems = Array.from(currListRef.children);\n      if (listItems.length <= 0) {\n        return visibleItems;\n      }\n      let containerWidth = currListRef.offsetWidth;\n      let isShowingMenu = childArray.length > visibleItems;\n      let calculatedWidth = 0;\n      let newVisibleItems = 0;\n      let maxVisibleItems = MAX_VISIBLE_ITEMS;\n      if (showRoot) {\n        calculatedWidth += listItems.shift().offsetWidth;\n        newVisibleItems++;\n      }\n      if (isShowingMenu) {\n        calculatedWidth += listItems.shift().offsetWidth;\n        maxVisibleItems--;\n      }\n      if (showRoot && calculatedWidth >= containerWidth) {\n        newVisibleItems--;\n      }\n      if (listItems.length > 0) {\n        // Ensure the last breadcrumb isn't truncated when we measure it.\n        let last = listItems.pop();\n        last.style.overflow = 'visible';\n        calculatedWidth += last.offsetWidth;\n        if (calculatedWidth < containerWidth) {\n          newVisibleItems++;\n        }\n        last.style.overflow = '';\n      }\n      for (let breadcrumb of listItems.reverse()) {\n        calculatedWidth += breadcrumb.offsetWidth;\n        if (calculatedWidth < containerWidth) {\n          newVisibleItems++;\n        }\n      }\n      return Math.max(MIN_VISIBLE_ITEMS, Math.min(maxVisibleItems, newVisibleItems));\n    };\n    setVisibleItems(function* () {\n      // Update to show all items.\n      yield childArray.length;\n\n      // Measure, and update to show the items that fit.\n      let newVisibleItems = computeVisibleItems(childArray.length);\n      yield newVisibleItems;\n\n      // If the number of items is less than the number of children,\n      // then update again to ensure that the menu fits.\n      if (newVisibleItems < childArray.length && newVisibleItems > 1) {\n        yield computeVisibleItems(newVisibleItems);\n      }\n    });\n  }, [childArray.length, setVisibleItems, showRoot]);\n  useResizeObserver({\n    ref: domRef,\n    onResize: updateOverflow\n  });\n  let lastChildren = useRef(null);\n  useLayoutEffect(() => {\n    if (children !== lastChildren.current) {\n      lastChildren.current = children;\n      updateOverflow();\n    }\n  });\n  let contents = childArray;\n  if (childArray.length > visibleItems) {\n    var _selectedItem$key;\n    let selectedItem = childArray[childArray.length - 1];\n    let selectedKey = (_selectedItem$key = selectedItem.key) !== null && _selectedItem$key !== void 0 ? _selectedItem$key : childArray.length - 1;\n    let onMenuAction = key => {\n      // Don't fire onAction when clicking on the last item\n      if (key !== selectedKey && onAction) {\n        onAction(key);\n      }\n    };\n    let menuItem = /*#__PURE__*/jsx(BreadcrumbItem, {\n      isMenu: true,\n      children: /*#__PURE__*/jsxs(MenuTrigger, {\n        onOpenChange: setMenuOpen,\n        children: [/*#__PURE__*/jsx(ActionButton, {\n          \"aria-label\": \"\\u2026\",\n          prominence: \"low\",\n          isDisabled: isDisabled,\n          children: /*#__PURE__*/jsx(Icon, {\n            src: menuIsOpen ? folderOpenIcon : folderClosedIcon\n          })\n        }), /*#__PURE__*/jsx(Menu, {\n          selectionMode: \"single\",\n          selectedKeys: [selectedKey],\n          onAction: onMenuAction,\n          children: childArray\n        })]\n      })\n    }, \"menu\");\n    contents = [menuItem];\n    let breadcrumbs = [...childArray];\n    let endItems = visibleItems;\n    if (showRoot && visibleItems > 1) {\n      let rootItem = breadcrumbs.shift();\n      if (rootItem) {\n        contents.unshift(rootItem);\n      }\n      endItems--;\n    }\n    contents.push(...breadcrumbs.slice(-endItems));\n  }\n  let lastIndex = contents.length - 1;\n  let breadcrumbItems = contents.map((child, index) => {\n    var _child$key;\n    let isCurrent = index === lastIndex;\n    let key = (_child$key = child.key) !== null && _child$key !== void 0 ? _child$key : index;\n    let onPress = () => {\n      if (onAction) {\n        onAction(key);\n      }\n    };\n    return /*#__PURE__*/jsx(\"li\", {\n      className: classNames(breadcrumbsClassList.element('item'), css({\n        alignItems: 'center',\n        display: 'inline-flex',\n        whiteSpace: 'nowrap',\n        '&:last-child': {\n          overflow: 'hidden'\n        }\n      })),\n      children: /*#__PURE__*/createElement(BreadcrumbItem, {\n        ...child.props,\n        isCurrent: isCurrent,\n        isDisabled: isDisabled,\n        key: key,\n        onPress: onPress,\n        size: size\n      }, child.props.children)\n    }, index);\n  });\n  return /*#__PURE__*/jsx(\"nav\", {\n    ...navProps,\n    ...styleProps,\n    ref: domRef,\n    className: classNames(breadcrumbsClassList.element('root'), styleProps.className),\n    children: /*#__PURE__*/jsx(\"ul\", {\n      ref: listRef,\n      className: classNames(breadcrumbsClassList.element('list'), css({\n        display: 'flex',\n        height: tokenSchema.size.element.regular,\n        justifyContent: 'flex-start'\n      })),\n      children: breadcrumbItems\n    })\n  });\n}\n\n// forwardRef doesn't support generic parameters, so cast the result to the correct type\n// https://stackoverflow.com/questions/58469229/react-with-typescript-generics-while-using-react-forwardref\n\n/**\n * Breadcrumbs show hierarchy and navigational context for a user's location\n * within an application.\n */\nconst _Breadcrumbs = /*#__PURE__*/forwardRef(Breadcrumbs);\n\nexport { _Breadcrumbs as Breadcrumbs };\n", "import { jsx } from 'react/jsx-runtime';\n\nconst folderClosedIcon = /*#__PURE__*/jsx(\"path\", {\n  d: \"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2ZM2 10h20\"\n});\n\nexport { folderClosedIcon };\n", "import { jsx } from 'react/jsx-runtime';\n\nconst folderOpenIcon = /*#__PURE__*/jsx(\"path\", {\n  d: \"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2\"\n});\n\nexport { folderOpenIcon };\n", "import { GraphQLError } from '@0no-co/graphql.web';\nimport type { ErrorLike } from '../types';\n\nconst generateErrorMessage = (\n  networkErr?: Error,\n  graphQlErrs?: GraphQLError[]\n) => {\n  let error = '';\n  if (networkErr) return `[Network] ${networkErr.message}`;\n  if (graphQlErrs) {\n    for (const err of graphQlErrs) {\n      if (error) error += '\\n';\n      error += `[GraphQL] ${err.message}`;\n    }\n  }\n  return error;\n};\n\nconst rehydrateGraphQlError = (error: any): GraphQLError => {\n  if (\n    error &&\n    error.message &&\n    (error.extensions || error.name === 'GraphQLError')\n  ) {\n    return error;\n  } else if (typeof error === 'object' && error.message) {\n    return new GraphQLError(\n      error.message,\n      error.nodes,\n      error.source,\n      error.positions,\n      error.path,\n      error,\n      error.extensions || {}\n    );\n  } else {\n    return new GraphQLError(error as any);\n  }\n};\n\n/** An abstracted `Error` that provides either a `networkError` or `graphQLErrors`.\n *\n * @remarks\n * During a GraphQL request, either the request can fail entirely, causing a network error,\n * or the GraphQL execution or fields can fail, which will cause an {@link ExecutionResult}\n * to contain an array of GraphQL errors.\n *\n * The `CombinedError` abstracts and normalizes both failure cases. When {@link OperationResult.error}\n * is set to this error, the `CombinedError` abstracts all errors, making it easier to handle only\n * a subset of error cases.\n *\n * @see {@link https://urql.dev/goto/docs/basics/errors} for more information on handling\n * GraphQL errors and the `CombinedError`.\n */\nexport class CombinedError extends Error {\n  public name: string;\n  public message: string;\n\n  /** A list of GraphQL errors rehydrated from a {@link ExecutionResult}.\n   *\n   * @remarks\n   * If an {@link ExecutionResult} received from the API contains a list of errors,\n   * the `CombinedError` will rehydrate them, normalize them to\n   * {@link GraphQLError | GraphQLErrors} and list them here.\n   * An empty list indicates that no GraphQL error has been sent by the API.\n   */\n  public graphQLErrors: GraphQLError[];\n\n  /** Set to an error, if a GraphQL request has failed outright.\n   *\n   * @remarks\n   * A GraphQL over HTTP request may fail and not reach the API. Any error that\n   * prevents a GraphQl request outright, will be considered a “network error” and\n   * set here.\n   */\n  public networkError?: Error;\n\n  /** Set to the {@link Response} object a fetch exchange received.\n   *\n   * @remarks\n   * If a built-in fetch {@link Exchange} is used in `urql`, this may\n   * be set to the {@link Response} object of the Fetch API response.\n   * However, since `urql` doesn’t assume that all users will use HTTP\n   * as the only or exclusive transport for GraphQL this property is\n   * neither typed nor guaranteed and may be re-used for other purposes\n   * by non-fetch exchanges.\n   *\n   * Hint: It can be useful to use `response.status` here, however, if\n   * you plan on relying on this being a {@link Response} in your app,\n   * which it is by default, then make sure you add some extra checks\n   * before blindly assuming so!\n   */\n  public response?: any;\n\n  constructor(input: {\n    networkError?: Error;\n    graphQLErrors?: Array<string | ErrorLike>;\n    response?: any;\n  }) {\n    const normalizedGraphQLErrors = (input.graphQLErrors || []).map(\n      rehydrateGraphQlError\n    );\n    const message = generateErrorMessage(\n      input.networkError,\n      normalizedGraphQLErrors\n    );\n\n    super(message);\n\n    this.name = 'CombinedError';\n    this.message = message;\n    this.graphQLErrors = normalizedGraphQLErrors;\n    this.networkError = input.networkError;\n    this.response = input.response;\n  }\n\n  toString() {\n    return this.message;\n  }\n}\n", "/** A hash value as computed by {@link phash}.\n *\n * @remarks\n * Typically `HashValue`s are used as hashes and keys of GraphQL documents,\n * variables, and combined, for GraphQL requests.\n */\nexport type HashValue = number & {\n  /** Marker to indicate that a `HashValue` may not be created by a user.\n   *\n   * @remarks\n   * `HashValue`s are created by {@link phash} and are marked as such to not mix them\n   * up with other numbers and prevent them from being created or used outside of this\n   * hashing function.\n   *\n   * @internal\n   */\n  readonly _opaque: unique symbol;\n};\n\n/** Computes a djb2 hash of the given string.\n *\n * @param x - the string to be hashed\n * @param seed - optionally a prior hash for progressive hashing\n * @returns a hash value, i.e. a number\n *\n * @remark\n * This is the hashing function used throughout `urql`, primarily to compute\n * {@link Operation.key}.\n *\n * @see {@link http://www.cse.yorku.ca/~oz/hash.html#djb2} for a further description of djb2.\n */\nexport const phash = (x: string, seed?: HashValue): HashValue => {\n  let h = (seed || 5381) | 0;\n  for (let i = 0, l = x.length | 0; i < l; i++)\n    h = (h << 5) + h + x.charCodeAt(i);\n  return h as HashValue;\n};\n", "export type FileMap = Map<string, File | Blob>;\n\nconst seen = new Set();\nconst cache = new WeakMap();\n\nconst stringify = (x: any): string => {\n  if (x === null || seen.has(x)) {\n    return 'null';\n  } else if (typeof x !== 'object') {\n    return JSON.stringify(x) || '';\n  } else if (x.toJSON) {\n    return stringify(x.toJSON());\n  } else if (Array.isArray(x)) {\n    let out = '[';\n    for (const value of x) {\n      if (out.length > 1) out += ',';\n      out += stringify(value) || 'null';\n    }\n    out += ']';\n    return out;\n  } else if (\n    (FileConstructor !== NoopConstructor && x instanceof FileConstructor) ||\n    (BlobConstructor !== NoopConstructor && x instanceof BlobConstructor)\n  ) {\n    return 'null';\n  }\n\n  const keys = Object.keys(x).sort();\n  if (\n    !keys.length &&\n    x.constructor &&\n    Object.getPrototypeOf(x).constructor !== Object.prototype.constructor\n  ) {\n    const key = cache.get(x) || Math.random().toString(36).slice(2);\n    cache.set(x, key);\n    return stringify({ __key: key });\n  }\n\n  seen.add(x);\n  let out = '{';\n  for (const key of keys) {\n    const value = stringify(x[key]);\n    if (value) {\n      if (out.length > 1) out += ',';\n      out += stringify(key) + ':' + value;\n    }\n  }\n\n  seen.delete(x);\n  out += '}';\n  return out;\n};\n\nconst extract = (map: FileMap, path: string, x: any) => {\n  if (x == null || typeof x !== 'object' || x.toJSON || seen.has(x)) {\n    /*noop*/\n  } else if (Array.isArray(x)) {\n    for (let i = 0, l = x.length; i < l; i++)\n      extract(map, `${path}.${i}`, x[i]);\n  } else if (x instanceof FileConstructor || x instanceof BlobConstructor) {\n    map.set(path, x as File | Blob);\n  } else {\n    seen.add(x);\n    for (const key of Object.keys(x)) extract(map, `${path}.${key}`, x[key]);\n  }\n};\n\n/** A stable stringifier for GraphQL variables objects.\n *\n * @param x - any JSON-like data.\n * @return A JSON string.\n *\n * @remarks\n * This utility creates a stable JSON string from any passed data,\n * and protects itself from throwing.\n *\n * The JSON string is stable insofar as objects’ keys are sorted,\n * and instances of non-plain objects are replaced with random keys\n * replacing their values, which remain stable for the objects’\n * instance.\n */\nexport const stringifyVariables = (x: any): string => {\n  seen.clear();\n  return stringify(x);\n};\n\nclass NoopConstructor {}\nconst FileConstructor = typeof File !== 'undefined' ? File : NoopConstructor;\nconst BlobConstructor = typeof Blob !== 'undefined' ? Blob : NoopConstructor;\n\nexport const extractFiles = (x: any): FileMap => {\n  const map: FileMap = new Map();\n  if (\n    FileConstructor !== NoopConstructor ||\n    BlobConstructor !== NoopConstructor\n  ) {\n    seen.clear();\n    extract(map, 'variables', x);\n  }\n  return map;\n};\n", "import { Kind, parse, print } from '@0no-co/graphql.web';\nimport type { DocumentNode, DefinitionNode } from './graphql';\nimport type { HashValue } from './hash';\nimport { phash } from './hash';\nimport { stringifyVariables } from './variables';\n\nimport type {\n  DocumentInput,\n  TypedDocumentNode,\n  AnyVariables,\n  GraphQLRequest,\n  RequestExtensions,\n} from '../types';\n\n/** A `DocumentNode` annotated with its hashed key.\n * @internal\n */\nexport type KeyedDocumentNode = TypedDocumentNode & {\n  __key: HashValue;\n};\n\nconst SOURCE_NAME = 'gql';\nconst GRAPHQL_STRING_RE = /(\"{3}[\\s\\S]*\"{3}|\"(?:\\\\.|[^\"])*\")/g;\nconst REPLACE_CHAR_RE = /(?:#[^\\n\\r]+)?(?:[\\r\\n]+|$)/g;\n\nconst replaceOutsideStrings = (str: string, idx: number) =>\n  idx % 2 === 0 ? str.replace(REPLACE_CHAR_RE, '\\n') : str;\n\n/** Sanitizes a GraphQL document string by replacing comments and redundant newlines in it. */\nconst sanitizeDocument = (node: string): string =>\n  node.split(GRAPHQL_STRING_RE).map(replaceOutsideStrings).join('').trim();\n\nconst prints = new Map<DocumentNode | DefinitionNode, string>();\nconst docs = new Map<HashValue, KeyedDocumentNode>();\n\n/** A cached printing function for GraphQL documents.\n *\n * @param node - A string of a document or a {@link DocumentNode}\n * @returns A normalized printed string of the passed GraphQL document.\n *\n * @remarks\n * This function accepts a GraphQL query string or {@link DocumentNode},\n * then prints and sanitizes it. The sanitizer takes care of removing\n * comments, which otherwise alter the key of the document although the\n * document is otherwise equivalent to another.\n *\n * When a {@link DocumentNode} is passed to this function, it caches its\n * output by modifying the `loc.source.body` property on the GraphQL node.\n */\nexport const stringifyDocument = (\n  node: string | DefinitionNode | DocumentNode\n): string => {\n  let printed: string;\n  if (typeof node === 'string') {\n    printed = sanitizeDocument(node);\n  } else if (node.loc && docs.get((node as KeyedDocumentNode).__key) === node) {\n    printed = node.loc.source.body;\n  } else {\n    printed = prints.get(node) || sanitizeDocument(print(node));\n    prints.set(node, printed);\n  }\n\n  if (typeof node !== 'string' && !node.loc) {\n    (node as any).loc = {\n      start: 0,\n      end: printed.length,\n      source: {\n        body: printed,\n        name: SOURCE_NAME,\n        locationOffset: { line: 1, column: 1 },\n      },\n    };\n  }\n\n  return printed;\n};\n\n/** Computes the hash for a document's string using {@link stringifyDocument}'s output.\n *\n * @param node - A string of a document or a {@link DocumentNode}\n * @returns A {@link HashValue}\n *\n * @privateRemarks\n * This function adds the operation name of the document to the hash, since sometimes\n * a merged document with multiple operations may be used. Although `urql` requires a\n * `DocumentNode` to only contain a single operation, when the cached `loc.source.body`\n * of a `DocumentNode` is used, this string may still contain multiple operations and\n * the resulting hash should account for only one at a time.\n */\nconst hashDocument = (\n  node: string | DefinitionNode | DocumentNode\n): HashValue => {\n  let key = phash(stringifyDocument(node));\n  // Add the operation name to the produced hash\n  if ((node as DocumentNode).definitions) {\n    const operationName = getOperationName(node as DocumentNode);\n    if (operationName) key = phash(`\\n# ${operationName}`, key);\n  }\n  return key;\n};\n\n/** Returns a canonical version of the passed `DocumentNode` with an added hash key.\n *\n * @param node - A string of a document or a {@link DocumentNode}\n * @returns A {@link KeyedDocumentNode}\n *\n * @remarks\n * `urql` will always avoid unnecessary work, no matter whether a user passes `DocumentNode`s\n * or strings of GraphQL documents to its APIs.\n *\n * This function will return a canonical version of a {@link KeyedDocumentNode} no matter\n * which kind of input is passed, avoiding parsing or hashing of passed data as needed.\n */\nexport const keyDocument = (node: string | DocumentNode): KeyedDocumentNode => {\n  let key: HashValue;\n  let query: DocumentNode;\n  if (typeof node === 'string') {\n    key = hashDocument(node);\n    query = docs.get(key) || parse(node, { noLocation: true });\n  } else {\n    key = (node as KeyedDocumentNode).__key || hashDocument(node);\n    query = docs.get(key) || node;\n  }\n\n  // Add location information if it's missing\n  if (!query.loc) stringifyDocument(query);\n\n  (query as KeyedDocumentNode).__key = key;\n  docs.set(key, query as KeyedDocumentNode);\n  return query as KeyedDocumentNode;\n};\n\n/** Creates a `GraphQLRequest` from the passed parameters.\n *\n * @param q - A string of a document or a {@link DocumentNode}\n * @param variables - A variables object for the defined GraphQL operation.\n * @returns A {@link GraphQLRequest}\n *\n * @remarks\n * `createRequest` creates a {@link GraphQLRequest} from the passed parameters,\n * while replacing the document as needed with a canonical version of itself,\n * to avoid parsing, printing, or hashing the same input multiple times.\n *\n * If no variables are passed, canonically it'll default to an empty object,\n * which is removed from the resulting hash key.\n */\nexport const createRequest = <\n  Data = any,\n  Variables extends AnyVariables = AnyVariables,\n>(\n  _query: DocumentInput<Data, Variables>,\n  _variables: Variables,\n  extensions?: RequestExtensions | undefined\n): GraphQLRequest<Data, Variables> => {\n  const variables = _variables || ({} as Variables);\n  const query = keyDocument(_query);\n  const printedVars = stringifyVariables(variables);\n  let key = query.__key;\n  if (printedVars !== '{}') key = phash(printedVars, key);\n  return { key, query, variables, extensions };\n};\n\n/** Returns the name of the `DocumentNode`'s operation, if any.\n * @param query - A {@link DocumentNode}\n * @returns the operation's name contained within the document, or `undefined`\n */\nexport const getOperationName = (query: DocumentNode): string | undefined => {\n  for (const node of query.definitions) {\n    if (node.kind === Kind.OPERATION_DEFINITION) {\n      return node.name ? node.name.value : undefined;\n    }\n  }\n};\n\n/** Returns the type of the `DocumentNode`'s operation, if any.\n * @param query - A {@link DocumentNode}\n * @returns the operation's type contained within the document, or `undefined`\n */\nexport const getOperationType = (query: DocumentNode): string | undefined => {\n  for (const node of query.definitions) {\n    if (node.kind === Kind.OPERATION_DEFINITION) {\n      return node.operation;\n    }\n  }\n};\n", "import type {\n  ExecutionResult,\n  Operation,\n  OperationResult,\n  IncrementalPayload,\n} from '../types';\nimport { CombinedError } from './error';\n\n/** Converts the `ExecutionResult` received for a given `Operation` to an `OperationResult`.\n *\n * @param operation - The {@link Operation} for which the API’s result is for.\n * @param result - The GraphQL API’s {@link ExecutionResult}.\n * @param response - Optionally, a raw object representing the API’s result (Typically a {@link Response}).\n * @returns An {@link OperationResult}.\n *\n * @remarks\n * This utility can be used to create {@link OperationResult | OperationResults} in the shape\n * that `urql` expects and defines, and should be used rather than creating the results manually.\n *\n * @throws\n * If no data, or errors are contained within the result, or the result is instead an incremental\n * response containing a `path` property, a “No Content” error is thrown.\n *\n * @see {@link ExecutionResult} for the type definition of GraphQL API results.\n */\nexport const makeResult = (\n  operation: Operation,\n  result: ExecutionResult,\n  response?: any\n): OperationResult => {\n  if (\n    !('data' in result) &&\n    (!('errors' in result) || !Array.isArray(result.errors))\n  ) {\n    throw new Error('No Content');\n  }\n\n  const defaultHasNext = operation.kind === 'subscription';\n  return {\n    operation,\n    data: result.data,\n    error: Array.isArray(result.errors)\n      ? new CombinedError({\n          graphQLErrors: result.errors,\n          response,\n        })\n      : undefined,\n    extensions: result.extensions ? { ...result.extensions } : undefined,\n    hasNext: result.hasNext == null ? defaultHasNext : result.hasNext,\n    stale: false,\n  };\n};\n\nconst deepMerge = (target: any, source: any) => {\n  if (typeof target === 'object' && target != null) {\n    if (\n      !target.constructor ||\n      target.constructor === Object ||\n      Array.isArray(target)\n    ) {\n      target = Array.isArray(target) ? [...target] : { ...target };\n      for (const key of Object.keys(source))\n        target[key] = deepMerge(target[key], source[key]);\n      return target;\n    }\n  }\n  return source;\n};\n\n/** Merges an incrementally delivered `ExecutionResult` into a previous `OperationResult`.\n *\n * @param prevResult - The {@link OperationResult} that preceded this result.\n * @param path - The GraphQL API’s {@link ExecutionResult} that should be patching the `prevResult`.\n * @param response - Optionally, a raw object representing the API’s result (Typically a {@link Response}).\n * @returns A new {@link OperationResult} patched with the incremental result.\n *\n * @remarks\n * This utility should be used to merge subsequent {@link ExecutionResult | ExecutionResults} of\n * incremental responses into a prior {@link OperationResult}.\n *\n * When directives like `@defer`, `@stream`, and `@live` are used, GraphQL may deliver new\n * results that modify previous results. In these cases, it'll set a `path` property to modify\n * the result it sent last. This utility is built to handle these cases and merge these payloads\n * into existing {@link OperationResult | OperationResults}.\n *\n * @see {@link ExecutionResult} for the type definition of GraphQL API results.\n */\nexport const mergeResultPatch = (\n  prevResult: OperationResult,\n  nextResult: ExecutionResult,\n  response?: any,\n  pending?: ExecutionResult['pending']\n): OperationResult => {\n  let errors = prevResult.error ? prevResult.error.graphQLErrors : [];\n  let hasExtensions =\n    !!prevResult.extensions || !!(nextResult.payload || nextResult).extensions;\n  const extensions = {\n    ...prevResult.extensions,\n    ...(nextResult.payload || nextResult).extensions,\n  };\n\n  let incremental = nextResult.incremental;\n\n  // NOTE: We handle the old version of the incremental delivery payloads as well\n  if ('path' in nextResult) {\n    incremental = [nextResult as IncrementalPayload];\n  }\n\n  const withData = { data: prevResult.data };\n  if (incremental) {\n    for (const patch of incremental) {\n      if (Array.isArray(patch.errors)) {\n        errors.push(...(patch.errors as any));\n      }\n\n      if (patch.extensions) {\n        Object.assign(extensions, patch.extensions);\n        hasExtensions = true;\n      }\n\n      let prop: string | number = 'data';\n      let part: Record<string, any> | Array<any> = withData;\n      let path: readonly (string | number)[] = [];\n      if (patch.path) {\n        path = patch.path;\n      } else if (pending) {\n        const res = pending.find(pendingRes => pendingRes.id === patch.id);\n        if (patch.subPath) {\n          path = [...res!.path, ...patch.subPath];\n        } else {\n          path = res!.path;\n        }\n      }\n\n      for (let i = 0, l = path.length; i < l; prop = path[i++]) {\n        part = part[prop] = Array.isArray(part[prop])\n          ? [...part[prop]]\n          : { ...part[prop] };\n      }\n\n      if (patch.items) {\n        const startIndex = +prop >= 0 ? (prop as number) : 0;\n        for (let i = 0, l = patch.items.length; i < l; i++)\n          part[startIndex + i] = deepMerge(\n            part[startIndex + i],\n            patch.items[i]\n          );\n      } else if (patch.data !== undefined) {\n        part[prop] = deepMerge(part[prop], patch.data);\n      }\n    }\n  } else {\n    withData.data = (nextResult.payload || nextResult).data || prevResult.data;\n    errors =\n      (nextResult.errors as any[]) ||\n      (nextResult.payload && nextResult.payload.errors) ||\n      errors;\n  }\n\n  return {\n    operation: prevResult.operation,\n    data: withData.data,\n    error: errors.length\n      ? new CombinedError({ graphQLErrors: errors, response })\n      : undefined,\n    extensions: hasExtensions ? extensions : undefined,\n    hasNext:\n      nextResult.hasNext != null ? nextResult.hasNext : prevResult.hasNext,\n    stale: false,\n  };\n};\n\n/** Creates an `OperationResult` containing a network error for requests that encountered unexpected errors.\n *\n * @param operation - The {@link Operation} for which the API’s result is for.\n * @param error - The network-like error that prevented an API result from being delivered.\n * @param response - Optionally, a raw object representing the API’s result (Typically a {@link Response}).\n * @returns An {@link OperationResult} containing only a {@link CombinedError}.\n *\n * @remarks\n * This utility can be used to create {@link OperationResult | OperationResults} in the shape\n * that `urql` expects and defines, and should be used rather than creating the results manually.\n * This function should be used for when the {@link CombinedError.networkError} property is\n * populated and no GraphQL execution actually occurred.\n */\nexport const makeErrorResult = (\n  operation: Operation,\n  error: Error,\n  response?: any\n): OperationResult => ({\n  operation,\n  data: undefined,\n  error: new CombinedError({\n    networkError: error,\n    response,\n  }),\n  extensions: undefined,\n  hasNext: false,\n  stale: false,\n});\n", "import {\n  stringifyDocument,\n  getOperationName,\n  stringifyVariables,\n  extractFiles,\n} from '../utils';\n\nimport type { AnyVariables, GraphQLRequest, Operation } from '../types';\n\n/** Abstract definition of the JSON data sent during GraphQL HTTP POST requests. */\nexport interface FetchBody {\n  query?: string;\n  documentId?: string;\n  operationName: string | undefined;\n  variables: undefined | Record<string, any>;\n  extensions: undefined | Record<string, any>;\n}\n\n/** Creates a GraphQL over HTTP compliant JSON request body.\n * @param request - An object containing a `query` document and `variables`.\n * @returns A {@link FetchBody}\n * @see {@link https://github.com/graphql/graphql-over-http} for the GraphQL over HTTP spec.\n */\nexport function makeFetchBody<\n  Data = any,\n  Variables extends AnyVariables = AnyVariables,\n>(request: Omit<GraphQLRequest<Data, Variables>, 'key'>): FetchBody {\n  const body: FetchBody = {\n    query: undefined,\n    documentId: undefined,\n    operationName: getOperationName(request.query),\n    variables: request.variables || undefined,\n    extensions: request.extensions,\n  };\n\n  if (\n    'documentId' in request.query &&\n    request.query.documentId &&\n    // NOTE: We have to check that the document will definitely be sent\n    // as a persisted document to avoid breaking changes\n    (!request.query.definitions || !request.query.definitions.length)\n  ) {\n    body.documentId = request.query.documentId;\n  } else if (\n    !request.extensions ||\n    !request.extensions.persistedQuery ||\n    !!request.extensions.persistedQuery.miss\n  ) {\n    body.query = stringifyDocument(request.query);\n  }\n\n  return body;\n}\n\n/** Creates a URL that will be called for a GraphQL HTTP request.\n *\n * @param operation - An {@link Operation} for which to make the request.\n * @param body - A {@link FetchBody} which may be replaced with a URL.\n *\n * @remarks\n * Creates the URL that’ll be called as part of a GraphQL HTTP request.\n * Built-in fetch exchanges support sending GET requests, even for\n * non-persisted full requests, which this function supports by being\n * able to serialize GraphQL requests into the URL.\n */\nexport const makeFetchURL = (\n  operation: Operation,\n  body?: FetchBody\n): string => {\n  const useGETMethod =\n    operation.kind === 'query' && operation.context.preferGetMethod;\n  if (!useGETMethod || !body) return operation.context.url;\n\n  const urlParts = splitOutSearchParams(operation.context.url);\n  for (const key in body) {\n    const value = body[key];\n    if (value) {\n      urlParts[1].set(\n        key,\n        typeof value === 'object' ? stringifyVariables(value) : value\n      );\n    }\n  }\n  const finalUrl = urlParts.join('?');\n  if (finalUrl.length > 2047 && useGETMethod !== 'force') {\n    operation.context.preferGetMethod = false;\n    return operation.context.url;\n  }\n\n  return finalUrl;\n};\n\nconst splitOutSearchParams = (\n  url: string\n): readonly [string, URLSearchParams] => {\n  const start = url.indexOf('?');\n  return start > -1\n    ? [url.slice(0, start), new URLSearchParams(url.slice(start + 1))]\n    : [url, new URLSearchParams()];\n};\n\n/** Serializes a {@link FetchBody} into a {@link RequestInit.body} format. */\nconst serializeBody = (\n  operation: Operation,\n  body?: FetchBody\n): FormData | string | undefined => {\n  const omitBody =\n    operation.kind === 'query' && !!operation.context.preferGetMethod;\n  if (body && !omitBody) {\n    const json = stringifyVariables(body);\n    const files = extractFiles(body.variables);\n    if (files.size) {\n      const form = new FormData();\n      form.append('operations', json);\n      form.append(\n        'map',\n        stringifyVariables({\n          ...[...files.keys()].map(value => [value]),\n        })\n      );\n      let index = 0;\n      for (const file of files.values()) form.append(`${index++}`, file);\n      return form;\n    }\n    return json;\n  }\n};\n\nconst isHeaders = (headers: HeadersInit): headers is Headers =>\n  'has' in headers && !Object.keys(headers).length;\n\n/** Creates a `RequestInit` object for a given `Operation`.\n *\n * @param operation - An {@link Operation} for which to make the request.\n * @param body - A {@link FetchBody} which is added to the options, if the request isn’t a GET request.\n *\n * @remarks\n * Creates the fetch options {@link RequestInit} object that’ll be passed to the Fetch API\n * as part of a GraphQL over HTTP request. It automatically sets a default `Content-Type`\n * header.\n *\n * @see {@link https://github.com/graphql/graphql-over-http} for the GraphQL over HTTP spec.\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API} for the Fetch API spec.\n */\nexport const makeFetchOptions = (\n  operation: Operation,\n  body?: FetchBody\n): RequestInit => {\n  const headers: HeadersInit = {\n    accept:\n      operation.kind === 'subscription'\n        ? 'text/event-stream, multipart/mixed'\n        : 'application/graphql-response+json, application/graphql+json, application/json, text/event-stream, multipart/mixed',\n  };\n  const extraOptions =\n    (typeof operation.context.fetchOptions === 'function'\n      ? operation.context.fetchOptions()\n      : operation.context.fetchOptions) || {};\n  if (extraOptions.headers) {\n    if (isHeaders(extraOptions.headers)) {\n      extraOptions.headers.forEach((value, key) => {\n        headers[key] = value;\n      });\n    } else if (Array.isArray(extraOptions.headers)) {\n      (extraOptions.headers as Array<[string, string]>).forEach(\n        (value, key) => {\n          if (Array.isArray(value)) {\n            if (headers[value[0]]) {\n              headers[value[0]] = `${headers[value[0]]},${value[1]}`;\n            } else {\n              headers[value[0]] = value[1];\n            }\n          } else {\n            headers[key] = value;\n          }\n        }\n      );\n    } else {\n      for (const key in extraOptions.headers) {\n        headers[key.toLowerCase()] = extraOptions.headers[key];\n      }\n    }\n  }\n\n  const serializedBody = serializeBody(operation, body);\n  if (typeof serializedBody === 'string' && !headers['content-type'])\n    headers['content-type'] = 'application/json';\n  return {\n    ...extraOptions,\n    method: serializedBody ? 'POST' : 'GET',\n    body: serializedBody,\n    headers,\n  };\n};\n", "/* Summary: This file handles the HTTP transport via GraphQL over HTTP\n * See: https://graphql.github.io/graphql-over-http/draft/\n *\n * `@urql/core`, by default, implements several RFC'd protocol extensions\n * on top of this. As such, this implementation supports:\n * - [Incremental Delivery](https://github.com/graphql/graphql-over-http/blob/main/rfcs/IncrementalDelivery.md)\n * - [GraphQL over SSE](https://github.com/graphql/graphql-over-http/blob/main/rfcs/GraphQLOverSSE.md)\n *\n * This also supports the \"Defer Stream\" payload format.\n * See: https://github.com/graphql/graphql-wg/blob/main/rfcs/DeferStream.md\n * Implementation for this is located in `../utils/result.ts` in `mergeResultPatch`\n *\n * And; this also supports the GraphQL Multipart spec for file uploads.\n * See: https://github.com/jaydenseric/graphql-multipart-request-spec\n * Implementation for this is located in `../utils/variables.ts` in `extractFiles`,\n * and `./fetchOptions.ts` in `serializeBody`.\n *\n * And; this also supports GET requests (and hence; automatic persisted queries)\n * via the `@urql/exchange-persisted` package.\n *\n * This implementation DOES NOT support Batching.\n * See: https://github.com/graphql/graphql-over-http/blob/main/rfcs/Batching.md\n * Which is deemed out-of-scope, as it's sufficiently unnecessary given\n * modern handling of HTTP requests being in parallel.\n *\n * The implementation in this file needs to make certain accommodations for:\n * - The Web Fetch API\n * - Non-browser or polyfill Fetch APIs\n * - Node.js-like Fetch implementations (see `toString` below)\n *\n * GraphQL over SSE has a reference implementation, which supports non-HTTP/2\n * modes and is a faithful implementation of the spec.\n * See: https://github.com/enisdenjo/graphql-sse\n *\n * GraphQL Inremental Delivery (aka “GraphQL Multipart Responses”) has a\n * reference implementation, which a prior implementation of this file heavily\n * leaned on (See prior attribution comments)\n * See: https://github.com/maraisr/meros\n *\n * This file merges support for all three GraphQL over HTTP response formats\n * via async generators and Wonka’s `fromAsyncIterable`. As part of this, `streamBody`\n * and `split` are the common, cross-compatible base implementations.\n */\n\nimport type { Source } from 'wonka';\nimport { fromAsyncIterable, onEnd, filter, pipe } from 'wonka';\nimport type { Operation, OperationResult, ExecutionResult } from '../types';\nimport { makeResult, makeErrorResult, mergeResultPatch } from '../utils';\n\nconst decoder = typeof TextDecoder !== 'undefined' ? new TextDecoder() : null;\nconst boundaryHeaderRe = /boundary=\"?([^=\";]+)\"?/i;\nconst eventStreamRe = /data: ?([^\\n]+)/;\n\ntype ChunkData = Buffer | Uint8Array;\n\n// NOTE: We're avoiding referencing the `Buffer` global here to prevent\n// auto-polyfilling in Webpack\nconst toString = (input: Buffer | ArrayBuffer): string =>\n  input.constructor.name === 'Buffer'\n    ? (input as Buffer).toString()\n    : decoder!.decode(input as ArrayBuffer);\n\nasync function* streamBody(response: Response): AsyncIterableIterator<string> {\n  if (response.body![Symbol.asyncIterator]) {\n    for await (const chunk of response.body! as any)\n      yield toString(chunk as ChunkData);\n  } else {\n    const reader = response.body!.getReader();\n    let result: ReadableStreamReadResult<ChunkData>;\n    try {\n      while (!(result = await reader.read()).done) yield toString(result.value);\n    } finally {\n      reader.cancel();\n    }\n  }\n}\n\nasync function* split(\n  chunks: AsyncIterableIterator<string>,\n  boundary: string\n): AsyncIterableIterator<string> {\n  let buffer = '';\n  let boundaryIndex: number;\n  for await (const chunk of chunks) {\n    buffer += chunk;\n    while ((boundaryIndex = buffer.indexOf(boundary)) > -1) {\n      yield buffer.slice(0, boundaryIndex);\n      buffer = buffer.slice(boundaryIndex + boundary.length);\n    }\n  }\n}\n\nasync function* parseJSON(\n  response: Response\n): AsyncIterableIterator<ExecutionResult> {\n  yield JSON.parse(await response.text());\n}\n\nasync function* parseEventStream(\n  response: Response\n): AsyncIterableIterator<ExecutionResult> {\n  let payload: any;\n  for await (const chunk of split(streamBody(response), '\\n\\n')) {\n    const match = chunk.match(eventStreamRe);\n    if (match) {\n      const chunk = match[1];\n      try {\n        yield (payload = JSON.parse(chunk));\n      } catch (error) {\n        if (!payload) throw error;\n      }\n      if (payload && payload.hasNext === false) break;\n    }\n  }\n  if (payload && payload.hasNext !== false) {\n    yield { hasNext: false };\n  }\n}\n\nasync function* parseMultipartMixed(\n  contentType: string,\n  response: Response\n): AsyncIterableIterator<ExecutionResult> {\n  const boundaryHeader = contentType.match(boundaryHeaderRe);\n  const boundary = '--' + (boundaryHeader ? boundaryHeader[1] : '-');\n  let isPreamble = true;\n  let payload: any;\n  for await (let chunk of split(streamBody(response), '\\r\\n' + boundary)) {\n    if (isPreamble) {\n      isPreamble = false;\n      const preambleIndex = chunk.indexOf(boundary);\n      if (preambleIndex > -1) {\n        chunk = chunk.slice(preambleIndex + boundary.length);\n      } else {\n        continue;\n      }\n    }\n    try {\n      yield (payload = JSON.parse(chunk.slice(chunk.indexOf('\\r\\n\\r\\n') + 4)));\n    } catch (error) {\n      if (!payload) throw error;\n    }\n    if (payload && payload.hasNext === false) break;\n  }\n  if (payload && payload.hasNext !== false) {\n    yield { hasNext: false };\n  }\n}\n\nasync function* parseMaybeJSON(\n  response: Response\n): AsyncIterableIterator<ExecutionResult> {\n  const text = await response.text();\n  try {\n    const result = JSON.parse(text);\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(\n        `Found response with content-type \"text/plain\" but it had a valid \"application/json\" response.`\n      );\n    }\n    yield result;\n  } catch (e) {\n    throw new Error(text);\n  }\n}\n\nasync function* fetchOperation(\n  operation: Operation,\n  url: string,\n  fetchOptions: RequestInit\n) {\n  let networkMode = true;\n  let result: OperationResult | null = null;\n  let response: Response | undefined;\n\n  try {\n    // Delay for a tick to give the Client a chance to cancel the request\n    // if a teardown comes in immediately\n    yield await Promise.resolve();\n\n    response = await (operation.context.fetch || fetch)(url, fetchOptions);\n    const contentType = response.headers.get('Content-Type') || '';\n\n    let results: AsyncIterable<ExecutionResult>;\n    if (/multipart\\/mixed/i.test(contentType)) {\n      results = parseMultipartMixed(contentType, response);\n    } else if (/text\\/event-stream/i.test(contentType)) {\n      results = parseEventStream(response);\n    } else if (!/text\\//i.test(contentType)) {\n      results = parseJSON(response);\n    } else {\n      results = parseMaybeJSON(response);\n    }\n\n    let pending: ExecutionResult['pending'];\n    for await (const payload of results) {\n      if (payload.pending && !result) {\n        pending = payload.pending;\n      } else if (payload.pending) {\n        pending = [...pending!, ...payload.pending];\n      }\n      result = result\n        ? mergeResultPatch(result, payload, response, pending)\n        : makeResult(operation, payload, response);\n      networkMode = false;\n      yield result;\n      networkMode = true;\n    }\n\n    if (!result) {\n      yield (result = makeResult(operation, {}, response));\n    }\n  } catch (error: any) {\n    if (!networkMode) {\n      throw error;\n    }\n\n    yield makeErrorResult(\n      operation,\n      response &&\n        (response.status < 200 || response.status >= 300) &&\n        response.statusText\n        ? new Error(response.statusText)\n        : error,\n      response\n    );\n  }\n}\n\n/** Makes a GraphQL HTTP request to a given API by wrapping around the Fetch API.\n *\n * @param operation - The {@link Operation} that should be sent via GraphQL over HTTP.\n * @param url - The endpoint URL for the GraphQL HTTP API.\n * @param fetchOptions - The {@link RequestInit} fetch options for the request.\n * @returns A Wonka {@link Source} of {@link OperationResult | OperationResults}.\n *\n * @remarks\n * This utility defines how all built-in fetch exchanges make GraphQL HTTP requests,\n * supporting multipart incremental responses, cancellation and other smaller\n * implementation details.\n *\n * If you’re implementing a modified fetch exchange for a GraphQL over HTTP API\n * it’s recommended you use this utility.\n *\n * Hint: This function does not use the passed `operation` to create or modify the\n * `fetchOptions` and instead expects that the options have already been created\n * using {@link makeFetchOptions} and modified as needed.\n *\n * @throws\n * If the `fetch` polyfill or globally available `fetch` function doesn’t support\n * streamed multipart responses while trying to handle a `multipart/mixed` GraphQL response,\n * the source will throw “Streaming requests unsupported”.\n * This shouldn’t happen in modern browsers and Node.js.\n *\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API} for the Fetch API spec.\n */\nexport function makeFetchSource(\n  operation: Operation,\n  url: string,\n  fetchOptions: RequestInit\n): Source<OperationResult> {\n  let abortController: AbortController | void;\n  if (typeof AbortController !== 'undefined') {\n    fetchOptions.signal = (abortController = new AbortController()).signal;\n  }\n  return pipe(\n    fromAsyncIterable(fetchOperation(operation, url, fetchOptions)),\n    filter((result): result is OperationResult => !!result),\n    onEnd(() => {\n      if (abortController) abortController.abort();\n    })\n  );\n}\n", "interface EntityLike {\n  [key: string]: EntityLike | EntityLike[] | any;\n  __typename: string | null | void;\n}\n\nconst collectTypes = (obj: EntityLike | EntityLike[], types: Set<string>) => {\n  if (Array.isArray(obj)) {\n    for (const item of obj) collectTypes(item, types);\n  } else if (typeof obj === 'object' && obj !== null) {\n    for (const key in obj) {\n      if (key === '__typename' && typeof obj[key] === 'string') {\n        types.add(obj[key] as string);\n      } else {\n        collectTypes(obj[key], types);\n      }\n    }\n  }\n\n  return types;\n};\n\n/** Finds and returns a list of `__typename` fields found in response data.\n *\n * @privateRemarks\n * This is used by `@urql/core`’s document `cacheExchange` to find typenames\n * in a given GraphQL response’s data.\n */\nexport const collectTypenames = (response: object): string[] => [\n  ...collectTypes(response as EntityLike, new Set()),\n];\n", "import type {\n  FieldNode,\n  SelectionNode,\n  DefinitionNode,\n  DirectiveNode,\n} from '@0no-co/graphql.web';\nimport { Kind } from '@0no-co/graphql.web';\nimport type { KeyedDocumentNode } from './request';\nimport { keyDocument } from './request';\nimport type { FormattedNode, TypedDocumentNode } from '../types';\n\nconst formatNode = <\n  T extends SelectionNode | DefinitionNode | TypedDocumentNode<any, any>,\n>(\n  node: T\n): FormattedNode<T> => {\n  if ('definitions' in node) {\n    const definitions: FormattedNode<DefinitionNode>[] = [];\n    for (const definition of node.definitions) {\n      const newDefinition = formatNode(definition);\n      definitions.push(newDefinition);\n    }\n\n    return { ...node, definitions } as FormattedNode<T>;\n  }\n\n  if ('directives' in node && node.directives && node.directives.length) {\n    const directives: DirectiveNode[] = [];\n    const _directives = {};\n    for (const directive of node.directives) {\n      let name = directive.name.value;\n      if (name[0] !== '_') {\n        directives.push(directive);\n      } else {\n        name = name.slice(1);\n      }\n      _directives[name] = directive;\n    }\n    node = { ...node, directives, _directives };\n  }\n\n  if ('selectionSet' in node) {\n    const selections: FormattedNode<SelectionNode>[] = [];\n    let hasTypename = node.kind === Kind.OPERATION_DEFINITION;\n    if (node.selectionSet) {\n      for (const selection of node.selectionSet.selections || []) {\n        hasTypename =\n          hasTypename ||\n          (selection.kind === Kind.FIELD &&\n            selection.name.value === '__typename' &&\n            !selection.alias);\n        const newSelection = formatNode(selection);\n        selections.push(newSelection);\n      }\n\n      if (!hasTypename) {\n        selections.push({\n          kind: Kind.FIELD,\n          name: {\n            kind: Kind.NAME,\n            value: '__typename',\n          },\n          _generated: true,\n        } as FormattedNode<FieldNode>);\n      }\n\n      return {\n        ...node,\n        selectionSet: { ...node.selectionSet, selections },\n      } as FormattedNode<T>;\n    }\n  }\n\n  return node as FormattedNode<T>;\n};\n\nconst formattedDocs = new Map<number, KeyedDocumentNode>();\n\n/** Formats a GraphQL document to add `__typename` fields and process client-side directives.\n *\n * @param node - a {@link DocumentNode}.\n * @returns a {@link FormattedDocument}\n *\n * @remarks\n * Cache {@link Exchange | Exchanges} will require typename introspection to\n * recognize types in a GraphQL response. To retrieve these typenames,\n * this function is used to add the `__typename` fields to non-root\n * selection sets of a GraphQL document.\n *\n * Additionally, this utility will process directives, filter out client-side\n * directives starting with an `_` underscore, and place a `_directives` dictionary\n * on selection nodes.\n *\n * This utility also preserves the internally computed key of the\n * document as created by {@link createRequest} to avoid any\n * formatting from being duplicated.\n *\n * @see {@link https://spec.graphql.org/October2021/#sec-Type-Name-Introspection} for more information\n * on typename introspection via the `__typename` field.\n */\nexport const formatDocument = <T extends TypedDocumentNode<any, any>>(\n  node: T\n): FormattedNode<T> => {\n  const query = keyDocument(node);\n\n  let result = formattedDocs.get(query.__key);\n  if (!result) {\n    formattedDocs.set(\n      query.__key,\n      (result = formatNode(query) as KeyedDocumentNode)\n    );\n    // Ensure that the hash of the resulting document won't suddenly change\n    // we are marking __key as non-enumerable so when external exchanges use visit\n    // to manipulate a document we won't restore the previous query due to the __key\n    // property.\n    Object.defineProperty(result, '__key', {\n      value: query.__key,\n      enumerable: false,\n    });\n  }\n\n  return result as FormattedNode<T>;\n};\n", "/** Used to recursively mark `__typename` fields in data as non-enumerable.\n *\n * @deprecated Not recommended over modelling inputs manually (See #3299)\n *\n * @remarks\n * This utility can be used to recursively copy GraphQl response data and hide\n * all `__typename` fields present on it.\n *\n * Hint: It’s not recommended to do this, unless it's absolutely necessary as\n * cloning and modifying all data of a response can be unnecessarily slow, when\n * a manual and more specific copy/mask is more efficient.\n *\n * @see {@link ClientOptions.maskTypename} for a description of how the `Client` uses this utility.\n */\nexport const maskTypename = (data: any, isRoot?: boolean): any => {\n  if (!data || typeof data !== 'object') {\n    return data;\n  } else if (Array.isArray(data)) {\n    return data.map(d => maskTypename(d));\n  } else if (\n    data &&\n    typeof data === 'object' &&\n    (isRoot || '__typename' in data)\n  ) {\n    const acc = {};\n    for (const key in data) {\n      if (key === '__typename') {\n        Object.defineProperty(acc, '__typename', {\n          enumerable: false,\n          value: data.__typename,\n        });\n      } else {\n        acc[key] = maskTypename(data[key]);\n      }\n    }\n    return acc;\n  } else {\n    return data;\n  }\n};\n", "import type { Sink, Source } from 'wonka';\nimport { subscribe, take, filter, toPromise, pipe } from 'wonka';\nimport type { OperationResult, OperationResultSource } from '../types';\n\n/** Patches a `toPromise` method onto the `Source` passed to it.\n * @param source$ - the Wonka {@link Source} to patch.\n * @returns The passed `source$` with a patched `toPromise` method as a {@link PromisifiedSource}.\n * @internal\n */\nexport function withPromise<T extends OperationResult>(\n  _source$: Source<T>\n): OperationResultSource<T> {\n  const source$ = ((sink: Sink<T>) =>\n    _source$(sink)) as OperationResultSource<T>;\n  source$.toPromise = () =>\n    pipe(\n      source$,\n      filter(result => !result.stale && !result.hasNext),\n      take(1),\n      toPromise\n    );\n  source$.then = (onResolve, onReject) =>\n    source$.toPromise().then(onResolve, onReject);\n  source$.subscribe = onResult => subscribe(onResult)(source$);\n  return source$;\n}\n", "import type {\n  AnyVariables,\n  GraphQLRequest,\n  Operation,\n  OperationContext,\n  OperationType,\n} from '../types';\n\n/** Creates a {@link Operation} from the given parameters.\n *\n * @param kind - The {@link OperationType} of GraphQL operation, i.e. `query`, `mutation`, or `subscription`.\n * @param request - The {@link GraphQLRequest} or {@link Operation} used as a template for the new `Operation`.\n * @param context - The {@link OperationContext} `context` data for the `Operation`.\n * @returns A new {@link Operation}.\n *\n * @remarks\n * This method is both used to create new {@link Operation | Operations} as well as copy and modify existing\n * operations. While it’s not required to use this function to copy an `Operation`, it is recommended, in case\n * additional dynamic logic is added to them in the future.\n *\n * Hint: When an {@link Operation} is passed to the `request` argument, the `context` argument does not have to be\n * a complete {@link OperationContext} and will instead be combined with passed {@link Operation.context}.\n *\n * @example\n * An example of copying an existing `Operation` to modify its `context`:\n *\n * ```ts\n * makeOperation(\n *   operation.kind,\n *   operation,\n *   { requestPolicy: 'cache-first' },\n * );\n * ```\n */\nfunction makeOperation<\n  Data = any,\n  Variables extends AnyVariables = AnyVariables,\n>(\n  kind: OperationType,\n  request: GraphQLRequest<Data, Variables>,\n  context: OperationContext\n): Operation<Data, Variables>;\n\nfunction makeOperation<\n  Data = any,\n  Variables extends AnyVariables = AnyVariables,\n>(\n  kind: OperationType,\n  request: Operation<Data, Variables>,\n  context?: Partial<OperationContext>\n): Operation<Data, Variables>;\n\nfunction makeOperation(kind, request, context) {\n  return {\n    ...request,\n    kind,\n    context: request.context\n      ? {\n          ...request.context,\n          ...context,\n        }\n      : context || request.context,\n  };\n}\n\nexport { makeOperation };\n\n/** Adds additional metadata to an `Operation`'s `context.meta` property while copying it.\n * @see {@link OperationDebugMeta} for more information on the {@link OperationContext.meta} property.\n */\nexport const addMetadata = (\n  operation: Operation,\n  meta: OperationContext['meta']\n) => {\n  return makeOperation(operation.kind, operation, {\n    meta: {\n      ...operation.context.meta,\n      ...meta,\n    },\n  });\n};\n", "export * from './error';\nexport * from './request';\nexport * from './result';\nexport * from './variables';\nexport * from './collectTypenames';\nexport * from './formatDocument';\nexport * from './maskTypename';\nexport * from './streamUtils';\nexport * from './operation';\n\nexport const noop = () => {\n  /* noop */\n};\n", "/* eslint-disable prefer-rest-params */\nimport { Kind } from '@0no-co/graphql.web';\nimport type { DocumentNode, DefinitionNode } from './utils/graphql';\nimport type { AnyVariables, TypedDocumentNode } from './types';\nimport { keyDocument, stringifyDocument } from './utils';\n\n/** A GraphQL parse function, which may be called as a tagged template literal, returning a parsed {@link DocumentNode}.\n *\n * @remarks\n * The `gql` tag or function is used to parse a GraphQL query document into a {@link DocumentNode}.\n *\n * When used as a tagged template, `gql` will automatically merge fragment definitions into the resulting\n * document and deduplicate them.\n *\n * It enforces that all fragments have a unique name. When fragments with different definitions share a name,\n * it will log a warning in development.\n *\n * Hint: It’s recommended to use this `gql` function over other GraphQL parse functions, since it puts the parsed\n * results directly into `@urql/core`’s internal caches and prevents further unnecessary work.\n *\n * @example\n * ```ts\n * const AuthorFragment = gql`\n *   fragment AuthorDisplayComponent on Author {\n *     id\n *     name\n *   }\n * `;\n *\n * const BookFragment = gql`\n *   fragment ListBookComponent on Book {\n *     id\n *     title\n *     author {\n *       ...AuthorDisplayComponent\n *     }\n *   }\n *\n *   ${AuthorFragment}\n * `;\n *\n * const BookQuery = gql`\n *   query Book($id: ID!) {\n *     book(id: $id) {\n *       ...BookFragment\n *     }\n *   }\n *\n *   ${BookFragment}\n * `;\n * ```\n */\nfunction gql<Data = any, Variables extends AnyVariables = AnyVariables>(\n  strings: TemplateStringsArray,\n  ...interpolations: Array<TypedDocumentNode | DocumentNode | string>\n): TypedDocumentNode<Data, Variables>;\n\nfunction gql<Data = any, Variables extends AnyVariables = AnyVariables>(\n  string: string\n): TypedDocumentNode<Data, Variables>;\n\nfunction gql(parts: string | TemplateStringsArray /* arguments */) {\n  const fragmentNames = new Map<string, string>();\n  const definitions: DefinitionNode[] = [];\n  const source: DocumentNode[] = [];\n\n  // Apply the entire tagged template body's definitions\n  let body: string = Array.isArray(parts) ? parts[0] : parts || '';\n  for (let i = 1; i < arguments.length; i++) {\n    const value = arguments[i];\n    if (value && value.definitions) {\n      source.push(value);\n    } else {\n      body += value;\n    }\n\n    body += arguments[0][i];\n  }\n\n  source.unshift(keyDocument(body));\n  for (const document of source) {\n    for (const definition of document.definitions) {\n      if (definition.kind === Kind.FRAGMENT_DEFINITION) {\n        const name = definition.name.value;\n        const value = stringifyDocument(definition);\n        // Fragments will be deduplicated according to this Map\n        if (!fragmentNames.has(name)) {\n          fragmentNames.set(name, value);\n          definitions.push(definition);\n        } else if (\n          process.env.NODE_ENV !== 'production' &&\n          fragmentNames.get(name) !== value\n        ) {\n          // Fragments with the same names is expected to have the same contents\n          console.warn(\n            '[WARNING: Duplicate Fragment] A fragment with name `' +\n              name +\n              '` already exists in this document.\\n' +\n              'While fragment names may not be unique across your source, each name must be unique per document.'\n          );\n        }\n      } else {\n        definitions.push(definition);\n      }\n    }\n  }\n\n  return keyDocument({\n    kind: Kind.DOCUMENT,\n    definitions,\n  });\n}\n\nexport { gql };\n", "/* eslint-disable @typescript-eslint/no-use-before-define */\nimport { filter, map, merge, pipe, tap } from 'wonka';\n\nimport type { Client } from '../client';\nimport type { Exchange, Operation, OperationResult } from '../types';\n\nimport {\n  makeOperation,\n  addMetadata,\n  collectTypenames,\n  formatDocument,\n  makeResult,\n} from '../utils';\n\ntype ResultCache = Map<number, OperationResult>;\ntype OperationCache = Map<string, Set<number>>;\n\nconst shouldSkip = ({ kind }: Operation) =>\n  kind !== 'mutation' && kind !== 'query';\n\n/** Adds unique typenames to query (for invalidating cache entries) */\nexport const mapTypeNames = (operation: Operation): Operation => {\n  const query = formatDocument(operation.query);\n  if (query !== operation.query) {\n    const formattedOperation = makeOperation(operation.kind, operation);\n    formattedOperation.query = query;\n    return formattedOperation;\n  } else {\n    return operation;\n  }\n};\n\n/** Default document cache exchange.\n *\n * @remarks\n * The default document cache in `urql` avoids sending the same GraphQL request\n * multiple times by caching it using the {@link Operation.key}. It will invalidate\n * query results automatically whenever it sees a mutation responses with matching\n * `__typename`s in their responses.\n *\n * The document cache will get the introspected `__typename` fields by modifying\n * your GraphQL operation documents using the {@link formatDocument} utility.\n *\n * This automatic invalidation strategy can fail if your query or mutation don’t\n * contain matching typenames, for instance, because the query contained an\n * empty list.\n * You can manually add hints for this exchange by specifying a list of\n * {@link OperationContext.additionalTypenames} for queries and mutations that\n * should invalidate one another.\n *\n * @see {@link https://urql.dev/goto/docs/basics/document-caching} for more information on this cache.\n */\nexport const cacheExchange: Exchange = ({ forward, client, dispatchDebug }) => {\n  const resultCache: ResultCache = new Map();\n  const operationCache: OperationCache = new Map();\n\n  const isOperationCached = (operation: Operation) =>\n    operation.kind === 'query' &&\n    operation.context.requestPolicy !== 'network-only' &&\n    (operation.context.requestPolicy === 'cache-only' ||\n      resultCache.has(operation.key));\n\n  return ops$ => {\n    const cachedOps$ = pipe(\n      ops$,\n      filter(op => !shouldSkip(op) && isOperationCached(op)),\n      map(operation => {\n        const cachedResult = resultCache.get(operation.key);\n\n        dispatchDebug({\n          operation,\n          ...(cachedResult\n            ? {\n                type: 'cacheHit',\n                message: 'The result was successfully retried from the cache',\n              }\n            : {\n                type: 'cacheMiss',\n                message: 'The result could not be retrieved from the cache',\n              }),\n        });\n\n        let result: OperationResult =\n          cachedResult ||\n          makeResult(operation, {\n            data: null,\n          });\n\n        result = {\n          ...result,\n          operation: addMetadata(operation, {\n            cacheOutcome: cachedResult ? 'hit' : 'miss',\n          }),\n        };\n\n        if (operation.context.requestPolicy === 'cache-and-network') {\n          result.stale = true;\n          reexecuteOperation(client, operation);\n        }\n\n        return result;\n      })\n    );\n\n    const forwardedOps$ = pipe(\n      merge([\n        pipe(\n          ops$,\n          filter(op => !shouldSkip(op) && !isOperationCached(op)),\n          map(mapTypeNames)\n        ),\n        pipe(\n          ops$,\n          filter(op => shouldSkip(op))\n        ),\n      ]),\n      map(op => addMetadata(op, { cacheOutcome: 'miss' })),\n      filter(\n        op => op.kind !== 'query' || op.context.requestPolicy !== 'cache-only'\n      ),\n      forward,\n      tap(response => {\n        let { operation } = response;\n        if (!operation) return;\n\n        let typenames = operation.context.additionalTypenames || [];\n        // NOTE: For now, we only respect `additionalTypenames` from subscriptions to\n        // avoid unexpected breaking changes\n        // We'd expect live queries or other update mechanisms to be more suitable rather\n        // than using subscriptions as “signals” to reexecute queries. However, if they’re\n        // just used as signals, it’s intuitive to hook them up using `additionalTypenames`\n        if (response.operation.kind !== 'subscription') {\n          typenames = collectTypenames(response.data).concat(typenames);\n        }\n\n        // Invalidates the cache given a mutation's response\n        if (\n          response.operation.kind === 'mutation' ||\n          response.operation.kind === 'subscription'\n        ) {\n          const pendingOperations = new Set<number>();\n\n          dispatchDebug({\n            type: 'cacheInvalidation',\n            message: `The following typenames have been invalidated: ${typenames}`,\n            operation,\n            data: { typenames, response },\n          });\n\n          for (let i = 0; i < typenames.length; i++) {\n            const typeName = typenames[i];\n            let operations = operationCache.get(typeName);\n            if (!operations)\n              operationCache.set(typeName, (operations = new Set()));\n            for (const key of operations.values()) pendingOperations.add(key);\n            operations.clear();\n          }\n\n          for (const key of pendingOperations.values()) {\n            if (resultCache.has(key)) {\n              operation = (resultCache.get(key) as OperationResult).operation;\n              resultCache.delete(key);\n              reexecuteOperation(client, operation);\n            }\n          }\n        } else if (operation.kind === 'query' && response.data) {\n          resultCache.set(operation.key, response);\n          for (let i = 0; i < typenames.length; i++) {\n            const typeName = typenames[i];\n            let operations = operationCache.get(typeName);\n            if (!operations)\n              operationCache.set(typeName, (operations = new Set()));\n            operations.add(operation.key);\n          }\n        }\n      })\n    );\n\n    return merge([cachedOps$, forwardedOps$]);\n  };\n};\n\n/** Reexecutes an `Operation` with the `network-only` request policy.\n * @internal\n */\nexport const reexecuteOperation = (client: Client, operation: Operation) => {\n  return client.reexecuteOperation(\n    makeOperation(operation.kind, operation, {\n      requestPolicy: 'network-only',\n    })\n  );\n};\n", "import type { GraphQLError } from '../utils/graphql';\nimport { pipe, filter, merge, map, tap } from 'wonka';\nimport type { Exchange, OperationResult, Operation } from '../types';\nimport { addMetadata, CombinedError } from '../utils';\nimport { reexecuteOperation, mapTypeNames } from './cache';\n\n/** A serialized version of an {@link OperationResult}.\n *\n * @remarks\n * All properties are serialized separately as JSON strings, except for the\n * {@link CombinedError} to speed up JS parsing speed, even if a result doesn’t\n * end up being used.\n *\n * @internal\n */\nexport interface SerializedResult {\n  hasNext?: boolean;\n  /** JSON-serialized version of {@link OperationResult.data}. */\n  data?: string | undefined; // JSON string of data\n  /** JSON-serialized version of {@link OperationResult.extensions}. */\n  extensions?: string | undefined;\n  /** JSON version of {@link CombinedError}. */\n  error?: {\n    graphQLErrors: Array<Partial<GraphQLError> | string>;\n    networkError?: string;\n  };\n}\n\n/** A dictionary of {@link Operation.key} keys to serializable {@link SerializedResult} objects.\n *\n * @remarks\n * It’s not recommended to modify the serialized data manually, however, multiple payloads of\n * this dictionary may safely be merged and combined.\n */\nexport interface SSRData {\n  [key: string]: SerializedResult;\n}\n\n/** Options for the `ssrExchange` allowing it to either operate on the server- or client-side. */\nexport interface SSRExchangeParams {\n  /** Indicates to the {@link SSRExchange} whether it's currently in server-side or client-side mode.\n   *\n   * @remarks\n   * Depending on this option, the {@link SSRExchange} will either capture or replay results.\n   * When `true`, it’s in client-side mode and results will be serialized. When `false`, it’ll\n   * use its deserialized data and replay results from it.\n   */\n  isClient?: boolean;\n  /** May be used on the client-side to pass the {@link SSRExchange} serialized data from the server-side.\n   *\n   * @remarks\n   * Alternatively, {@link SSRExchange.restoreData} may be called to imperatively add serialized data to\n   * the exchange.\n   *\n   * Hint: This method also works on the server-side to add to the initial serialized data, which enables\n   * you to combine multiple {@link SSRExchange} results, as needed.\n   */\n  initialState?: SSRData;\n  /** Forces a new API request to be sent in the background after replaying the deserialized result.\n   *\n   * @remarks\n   * Similarly to the `cache-and-network` {@link RequestPolicy}, this option tells the {@link SSRExchange}\n   * to send a new API request for the {@link Operation} after replaying a serialized result.\n   *\n   * Hint: This is useful when you're caching SSR results and need the client-side to update itself after\n   * rendering the initial serialized SSR results.\n   */\n  staleWhileRevalidate?: boolean;\n  /** Forces {@link OperationResult.extensions} to be serialized alongside the rest of a result.\n   *\n   * @remarks\n   * Entries in the `extension` object of a GraphQL result are often non-standard metdata, and many\n   * APIs use it for data that changes between every request. As such, the {@link SSRExchange} will\n   * not serialize this data by default, unless this flag is set.\n   */\n  includeExtensions?: boolean;\n}\n\n/** An `SSRExchange` either in server-side mode, serializing results, or client-side mode, deserializing and replaying results..\n *\n * @remarks\n * This same {@link Exchange} is used in your code both for the client-side and server-side as it’s “universal”\n * and can be put into either client-side or server-side mode using the {@link SSRExchangeParams.isClient} flag.\n *\n * In server-side mode, the `ssrExchange` will “record” results it sees from your API and provide them for you\n * to send to the client-side using the {@link SSRExchange.extractData} method.\n *\n * In client-side mode, the `ssrExchange` will use these serialized results, rehydrated either using\n * {@link SSRExchange.restoreData} or {@link SSRexchangeParams.initialState}, to replay results the\n * server-side has seen and sent before.\n *\n * Each serialized result will only be replayed once, as it’s assumed that your cache exchange will have the\n * results cached afterwards.\n */\nexport interface SSRExchange extends Exchange {\n  /** Client-side method to add serialized results to the {@link SSRExchange}.\n   * @param data - {@link SSRData},\n   */\n  restoreData(data: SSRData): void;\n  /** Server-side method to get all serialized results the {@link SSRExchange} has captured.\n   * @returns an {@link SSRData} dictionary.\n   */\n  extractData(): SSRData;\n}\n\n/** Serialize an OperationResult to plain JSON */\nconst serializeResult = (\n  result: OperationResult,\n  includeExtensions: boolean\n): SerializedResult => {\n  const serialized: SerializedResult = {\n    data: JSON.stringify(result.data),\n    hasNext: result.hasNext,\n  };\n\n  if (result.data !== undefined) {\n    serialized.data = JSON.stringify(result.data);\n  }\n\n  if (includeExtensions && result.extensions !== undefined) {\n    serialized.extensions = JSON.stringify(result.extensions);\n  }\n\n  if (result.error) {\n    serialized.error = {\n      graphQLErrors: result.error.graphQLErrors.map(error => {\n        if (!error.path && !error.extensions) return error.message;\n\n        return {\n          message: error.message,\n          path: error.path,\n          extensions: error.extensions,\n        };\n      }),\n    };\n\n    if (result.error.networkError) {\n      serialized.error.networkError = '' + result.error.networkError;\n    }\n  }\n\n  return serialized;\n};\n\n/** Deserialize plain JSON to an OperationResult\n * @internal\n */\nconst deserializeResult = (\n  operation: Operation,\n  result: SerializedResult,\n  includeExtensions: boolean\n): OperationResult => ({\n  operation,\n  data: result.data ? JSON.parse(result.data) : undefined,\n  extensions:\n    includeExtensions && result.extensions\n      ? JSON.parse(result.extensions)\n      : undefined,\n  error: result.error\n    ? new CombinedError({\n        networkError: result.error.networkError\n          ? new Error(result.error.networkError)\n          : undefined,\n        graphQLErrors: result.error.graphQLErrors,\n      })\n    : undefined,\n  stale: false,\n  hasNext: !!result.hasNext,\n});\n\nconst revalidated = new Set<number>();\n\n/** Creates a server-side rendering `Exchange` that either captures responses on the server-side or replays them on the client-side.\n *\n * @param params - An {@link SSRExchangeParams} configuration object.\n * @returns the created {@link SSRExchange}\n *\n * @remarks\n * When dealing with server-side rendering, we essentially have two {@link Client | Clients} making requests,\n * the server-side client, and the client-side one. The `ssrExchange` helps implementing a tiny cache on both\n * sides that:\n *\n * - captures results on the server-side which it can serialize,\n * - replays results on the client-side that it deserialized from the server-side.\n *\n * Hint: The `ssrExchange` is basically an exchange that acts like a replacement for any fetch exchange\n * temporarily. As such, you should place it after your cache exchange but in front of any fetch exchange.\n */\nexport const ssrExchange = (params: SSRExchangeParams = {}): SSRExchange => {\n  const staleWhileRevalidate = !!params.staleWhileRevalidate;\n  const includeExtensions = !!params.includeExtensions;\n  const data: Record<string, SerializedResult | null> = {};\n\n  // On the client-side, we delete results from the cache as they're resolved\n  // this is delayed so that concurrent queries don't delete each other's data\n  const invalidateQueue: number[] = [];\n  const invalidate = (result: OperationResult) => {\n    invalidateQueue.push(result.operation.key);\n    if (invalidateQueue.length === 1) {\n      Promise.resolve().then(() => {\n        let key: number | void;\n        while ((key = invalidateQueue.shift())) {\n          data[key] = null;\n        }\n      });\n    }\n  };\n\n  // The SSR Exchange is a temporary cache that can populate results into data for suspense\n  // On the client it can be used to retrieve these temporary results from a rehydrated cache\n  const ssr: SSRExchange =\n    ({ client, forward }) =>\n    ops$ => {\n      // params.isClient tells us whether we're on the client-side\n      // By default we assume that we're on the client if suspense-mode is disabled\n      const isClient =\n        params && typeof params.isClient === 'boolean'\n          ? !!params.isClient\n          : !client.suspense;\n\n      let forwardedOps$ = pipe(\n        ops$,\n        filter(\n          operation =>\n            operation.kind === 'teardown' ||\n            !data[operation.key] ||\n            !!data[operation.key]!.hasNext ||\n            operation.context.requestPolicy === 'network-only'\n        ),\n        map(mapTypeNames),\n        forward\n      );\n\n      // NOTE: Since below we might delete the cached entry after accessing\n      // it once, cachedOps$ needs to be merged after forwardedOps$\n      let cachedOps$ = pipe(\n        ops$,\n        filter(\n          operation =>\n            operation.kind !== 'teardown' &&\n            !!data[operation.key] &&\n            operation.context.requestPolicy !== 'network-only'\n        ),\n        map(op => {\n          const serialized = data[op.key]!;\n          const cachedResult = deserializeResult(\n            op,\n            serialized,\n            includeExtensions\n          );\n\n          if (staleWhileRevalidate && !revalidated.has(op.key)) {\n            cachedResult.stale = true;\n            revalidated.add(op.key);\n            reexecuteOperation(client, op);\n          }\n\n          const result: OperationResult = {\n            ...cachedResult,\n            operation: addMetadata(op, {\n              cacheOutcome: 'hit',\n            }),\n          };\n          return result;\n        })\n      );\n\n      if (!isClient) {\n        // On the server we cache results in the cache as they're resolved\n        forwardedOps$ = pipe(\n          forwardedOps$,\n          tap((result: OperationResult) => {\n            const { operation } = result;\n            if (operation.kind !== 'mutation') {\n              const serialized = serializeResult(result, includeExtensions);\n              data[operation.key] = serialized;\n            }\n          })\n        );\n      } else {\n        // On the client we delete results from the cache as they're resolved\n        cachedOps$ = pipe(cachedOps$, tap(invalidate));\n      }\n\n      return merge([forwardedOps$, cachedOps$]);\n    };\n\n  ssr.restoreData = (restore: SSRData) => {\n    for (const key in restore) {\n      // We only restore data that hasn't been previously invalidated\n      if (data[key] !== null) {\n        data[key] = restore[key];\n      }\n    }\n  };\n\n  ssr.extractData = () => {\n    const result: SSRData = {};\n    for (const key in data) if (data[key] != null) result[key] = data[key]!;\n    return result;\n  };\n\n  if (params && params.initialState) {\n    ssr.restoreData(params.initialState);\n  }\n\n  return ssr;\n};\n", "import type { Subscription, Source } from 'wonka';\nimport { filter, make, merge, mergeMap, pipe, takeUntil } from 'wonka';\n\nimport {\n  makeResult,\n  mergeResultPatch,\n  makeErrorResult,\n  makeOperation,\n} from '../utils';\n\nimport type {\n  Exchange,\n  ExecutionResult,\n  Operation,\n  OperationResult,\n} from '../types';\n\nimport type { FetchBody } from '../internal';\nimport { makeFetchBody } from '../internal';\n\n/** An abstract observer-like interface.\n *\n * @remarks\n * Observer-like interfaces are passed to {@link ObservableLike.subscribe} to provide them\n * with callbacks for their events.\n *\n * @see {@link https://github.com/tc39/proposal-observable} for the full TC39 Observable proposal.\n */\nexport interface ObserverLike<T> {\n  /** Callback for values an {@link ObservableLike} emits. */\n  next: (value: T) => void;\n  /** Callback for an error an {@link ObservableLike} emits, which ends the subscription. */\n  error: (err: any) => void;\n  /** Callback for the completion of an {@link ObservableLike}, which ends the subscription. */\n  complete: () => void;\n}\n\n/** An abstract observable-like interface.\n *\n * @remarks\n * Observable, or Observable-like interfaces, are often used by GraphQL transports to abstract\n * how they send {@link ExecutionResult | ExecutionResults} to consumers. These generally contain\n * a `subscribe` method accepting an {@link ObserverLike} structure.\n *\n * @see {@link https://github.com/tc39/proposal-observable} for the full TC39 Observable proposal.\n */\nexport interface ObservableLike<T> {\n  /** Start the Observable-like subscription and returns a subscription handle.\n   *\n   * @param observer - an {@link ObserverLike} object with result, error, and completion callbacks.\n   * @returns a subscription handle providing an `unsubscribe` method to stop the subscription.\n   */\n  subscribe(observer: ObserverLike<T>): {\n    unsubscribe: () => void;\n  };\n}\n\n/** A more cross-compatible version of the {@link GraphQLRequest} structure.\n * {@link FetchBody} for more details\n */\nexport type SubscriptionOperation = FetchBody;\n\n/** A subscription forwarding function, which must accept a {@link SubscriptionOperation}.\n *\n * @param operation - A {@link SubscriptionOperation}\n * @returns An {@link ObservableLike} object issuing {@link ExecutionResult | ExecutionResults}.\n */\nexport type SubscriptionForwarder = (\n  request: FetchBody,\n  operation: Operation\n) => ObservableLike<ExecutionResult>;\n\n/** This is called to create a subscription and needs to be hooked up to a transport client. */\nexport interface SubscriptionExchangeOpts {\n  /** A subscription forwarding function, which must accept a {@link SubscriptionOperation}.\n   *\n   * @param operation - A {@link SubscriptionOperation}\n   * @returns An {@link ObservableLike} object issuing {@link ExecutionResult | ExecutionResults}.\n   *\n   * @remarks\n   * This callback is called for each {@link Operation} that this `subscriptionExchange` will\n   * handle. It receives the {@link SubscriptionOperation}, which is a more compatible version\n   * of the raw {@link Operation} objects and must return an {@link ObservableLike} of results.\n   */\n  forwardSubscription: SubscriptionForwarder;\n\n  /** Flag to enable this exchange to handle all types of GraphQL operations.\n   *\n   * @remarks\n   * When you aren’t using fetch exchanges and GraphQL over HTTP as a transport for your GraphQL requests,\n   * or you have a third-party GraphQL transport implementation, which must also be used for queries and\n   * mutations, this flag may be used to allow this exchange to handle all kinds of GraphQL operations.\n   *\n   * By default, this flag is `false` and the exchange will only handle GraphQL subscription operations.\n   */\n  enableAllOperations?: boolean;\n\n  /** A predicate function that causes an operation to be handled by this `subscriptionExchange` if `true` is returned.\n   *\n   * @param operation - an {@link Operation}\n   * @returns true when the operation is handled by this exchange.\n   *\n   * @remarks\n   * In some cases, a `subscriptionExchange` will be used to only handle some {@link Operation | Operations},\n   * e.g. all that contain `@live` directive. For these cases, this function may be passed to precisely\n   * determine which `Operation`s this exchange should handle, instead of forwarding.\n   *\n   * When specified, the {@link SubscriptionExchangeOpts.enableAllOperations} flag is disregarded.\n   */\n  isSubscriptionOperation?: (operation: Operation) => boolean;\n}\n\n/** Generic subscription exchange factory used to either create an exchange handling just subscriptions or all operation kinds.\n *\n * @remarks\n * `subscriptionExchange` can be used to create an {@link Exchange} that either\n * handles just GraphQL subscription operations, or optionally all operations,\n * when the {@link SubscriptionExchangeOpts.enableAllOperations} flag is passed.\n *\n * The {@link SubscriptionExchangeOpts.forwardSubscription} function must\n * be provided and provides a generic input that's based on {@link Operation}\n * but is compatible with many libraries implementing GraphQL request or\n * subscription interfaces.\n */\nexport const subscriptionExchange =\n  ({\n    forwardSubscription,\n    enableAllOperations,\n    isSubscriptionOperation,\n  }: SubscriptionExchangeOpts): Exchange =>\n  ({ client, forward }) => {\n    const createSubscriptionSource = (\n      operation: Operation\n    ): Source<OperationResult> => {\n      const observableish = forwardSubscription(\n        makeFetchBody(operation),\n        operation\n      );\n\n      return make<OperationResult>(observer => {\n        let isComplete = false;\n        let sub: Subscription | void;\n        let result: OperationResult | void;\n\n        function nextResult(value: ExecutionResult) {\n          observer.next(\n            (result = result\n              ? mergeResultPatch(result, value)\n              : makeResult(operation, value))\n          );\n        }\n\n        Promise.resolve().then(() => {\n          if (isComplete) return;\n\n          sub = observableish.subscribe({\n            next: nextResult,\n            error(error) {\n              if (Array.isArray(error)) {\n                // NOTE: This is an exception for transports that deliver `GraphQLError[]`, as part\n                // of the observer’s error callback (may happen as part of `graphql-ws`).\n                // We only check for arrays here, as this is an extremely “unexpected” case as the\n                // shape of `ExecutionResult` is instead strictly defined.\n                nextResult({ errors: error });\n              } else {\n                observer.next(makeErrorResult(operation, error));\n              }\n              observer.complete();\n            },\n            complete() {\n              if (!isComplete) {\n                isComplete = true;\n                if (operation.kind === 'subscription') {\n                  client.reexecuteOperation(\n                    makeOperation('teardown', operation, operation.context)\n                  );\n                }\n                if (result && result.hasNext) {\n                  nextResult({ hasNext: false });\n                }\n                observer.complete();\n              }\n            },\n          });\n        });\n\n        return () => {\n          isComplete = true;\n          if (sub) sub.unsubscribe();\n        };\n      });\n    };\n\n    const isSubscriptionOperationFn =\n      isSubscriptionOperation ||\n      (operation =>\n        operation.kind === 'subscription' ||\n        (!!enableAllOperations &&\n          (operation.kind === 'query' || operation.kind === 'mutation')));\n\n    return ops$ => {\n      const subscriptionResults$ = pipe(\n        ops$,\n        filter(\n          operation =>\n            operation.kind !== 'teardown' &&\n            isSubscriptionOperationFn(operation)\n        ),\n        mergeMap(operation => {\n          const { key } = operation;\n          const teardown$ = pipe(\n            ops$,\n            filter(op => op.kind === 'teardown' && op.key === key)\n          );\n\n          return pipe(\n            createSubscriptionSource(operation),\n            takeUntil(teardown$)\n          );\n        })\n      );\n\n      const forward$ = pipe(\n        ops$,\n        filter(\n          operation =>\n            operation.kind === 'teardown' ||\n            !isSubscriptionOperationFn(operation)\n        ),\n        forward\n      );\n\n      return merge([subscriptionResults$, forward$]);\n    };\n  };\n", "import { pipe, tap } from 'wonka';\nimport type { Exchange } from '../types';\n\n/** Simple log debugger exchange.\n *\n * @remarks\n * An exchange that logs incoming {@link Operation | Operations} and\n * {@link OperationResult | OperationResults} in development.\n *\n * This exchange is a no-op in production and often used in issue reporting\n * to understand certain usage patterns of `urql` without having access to\n * the original source code.\n *\n * Hint: When you report an issue you’re having with `urql`, adding\n * this as your first exchange and posting its output can speed up\n * issue triaging a lot!\n */\nexport const debugExchange: Exchange = ({ forward }) => {\n  if (process.env.NODE_ENV === 'production') {\n    return ops$ => forward(ops$);\n  } else {\n    return ops$ =>\n      pipe(\n        ops$,\n        // eslint-disable-next-line no-console\n        tap(op => console.log('[Exchange debug]: Incoming operation: ', op)),\n        forward,\n        tap(result =>\n          // eslint-disable-next-line no-console\n          console.log('[Exchange debug]: Completed operation: ', result)\n        )\n      );\n  }\n};\n", "import type { Exchange } from '../types';\n\n/** Default deduplication exchange.\n * @deprecated\n * This exchange's functionality is now built into the {@link Client}.\n */\nexport const dedupExchange: Exchange =\n  ({ forward }) =>\n  ops$ =>\n    forward(ops$);\n", "/* eslint-disable @typescript-eslint/no-use-before-define */\nimport { filter, merge, mergeMap, pipe, takeUntil, onPush } from 'wonka';\n\nimport type { Exchange } from '../types';\nimport {\n  makeFetchBody,\n  makeFetchURL,\n  makeFetchOptions,\n  makeFetchSource,\n} from '../internal';\n\n/** Default GraphQL over HTTP fetch exchange.\n *\n * @remarks\n * The default fetch exchange in `urql` supports sending GraphQL over HTTP\n * requests, can optionally send GraphQL queries as GET requests, and\n * handles incremental multipart responses.\n *\n * This exchange does not handle persisted queries or multipart uploads.\n * Support for the former can be added using `@urql/exchange-persisted-fetch`\n * and the latter using `@urql/exchange-multipart-fetch`.\n *\n * Hint: The `fetchExchange` and the two other exchanges all use the built-in fetch\n * utilities in `@urql/core/internal`, which you can also use to implement\n * a customized fetch exchange.\n *\n * @see {@link makeFetchSource} for the shared utility calling the Fetch API.\n */\nexport const fetchExchange: Exchange = ({ forward, dispatchDebug }) => {\n  return ops$ => {\n    const fetchResults$ = pipe(\n      ops$,\n      filter(operation => {\n        return (\n          operation.kind !== 'teardown' &&\n          (operation.kind !== 'subscription' ||\n            !!operation.context.fetchSubscriptions)\n        );\n      }),\n      mergeMap(operation => {\n        const body = makeFetchBody(operation);\n        const url = makeFetchURL(operation, body);\n        const fetchOptions = makeFetchOptions(operation, body);\n\n        dispatchDebug({\n          type: 'fetchRequest',\n          message: 'A fetch request is being executed.',\n          operation,\n          data: {\n            url,\n            fetchOptions,\n          },\n        });\n\n        const source = pipe(\n          makeFetchSource(operation, url, fetchOptions),\n          takeUntil(\n            pipe(\n              ops$,\n              filter(op => op.kind === 'teardown' && op.key === operation.key)\n            )\n          )\n        );\n\n        if (process.env.NODE_ENV !== 'production') {\n          return pipe(\n            source,\n            onPush(result => {\n              const error = !result.data ? result.error : undefined;\n\n              dispatchDebug({\n                type: error ? 'fetchError' : 'fetchSuccess',\n                message: `A ${\n                  error ? 'failed' : 'successful'\n                } fetch response has been returned.`,\n                operation,\n                data: {\n                  url,\n                  fetchOptions,\n                  value: error || result,\n                },\n              });\n            })\n          );\n        }\n\n        return source;\n      })\n    );\n\n    const forward$ = pipe(\n      ops$,\n      filter(operation => {\n        return (\n          operation.kind === 'teardown' ||\n          (operation.kind === 'subscription' &&\n            !operation.context.fetchSubscriptions)\n        );\n      }),\n      forward\n    );\n\n    return merge([fetchResults$, forward$]);\n  };\n};\n", "import { share } from 'wonka';\nimport type { ExchangeIO, Exchange, ExchangeInput } from '../types';\n\n/** Composes an array of Exchanges into a single one.\n *\n * @param exchanges - An array of {@link Exchange | Exchanges}.\n * @returns - A composed {@link Exchange}.\n *\n * @remarks\n * `composeExchanges` returns an {@link Exchange} that when instantiated\n * composes the array of passed `Exchange`s into one, calling them from\n * right to left, with the prior `Exchange`’s {@link ExchangeIO} function\n * as the {@link ExchangeInput.forward} input.\n *\n * This simply merges all exchanges into one and is used by the {@link Client}\n * to merge the `exchanges` option it receives.\n *\n * @throws\n * In development, if {@link ExchangeInput.forward} is called repeatedly\n * by an {@link Exchange} an error is thrown, since `forward()` must only\n * be called once per `Exchange`.\n */\nexport const composeExchanges =\n  (exchanges: Exchange[]): Exchange =>\n  ({ client, forward, dispatchDebug }: ExchangeInput): ExchangeIO =>\n    exchanges.reduceRight((forward, exchange) => {\n      let forwarded = false;\n      return exchange({\n        client,\n        forward(operations$) {\n          if (process.env.NODE_ENV !== 'production') {\n            if (forwarded)\n              throw new Error(\n                'forward() must only be called once in each Exchange.'\n              );\n            forwarded = true;\n          }\n          return share(forward(share(operations$)));\n        },\n        dispatchDebug(event) {\n          dispatchDebug({\n            timestamp: Date.now(),\n            source: exchange.name,\n            ...event,\n          });\n        },\n      });\n    }, forward);\n", "import { mergeMap, fromValue, fromPromise, pipe } from 'wonka';\nimport type { Operation, OperationResult, Exchange } from '../types';\nimport type { CombinedError } from '../utils';\n\n/** Options for the `mapExchange` allowing it to react to incoming operations, results, or errors. */\nexport interface MapExchangeOpts {\n  /** Accepts a callback for incoming `Operation`s.\n   *\n   * @param operation - An {@link Operation} that the {@link mapExchange} received.\n   * @returns optionally a new {@link Operation} replacing the original.\n   *\n   * @remarks\n   * You may return new {@link Operation | Operations} from this function replacing\n   * the original that the {@link mapExchange} received.\n   * It’s recommended that you use the {@link makeOperation} utility to create a copy\n   * of the original when you do this. (However, this isn’t required)\n   *\n   * Hint: The callback may also be promisified and return a new {@link Operation} asynchronously,\n   * provided you place your {@link mapExchange} after all synchronous {@link Exchange | Exchanges},\n   * like after your `cacheExchange`.\n   */\n  onOperation?(operation: Operation): Promise<Operation> | Operation | void;\n  /** Accepts a callback for incoming `OperationResult`s.\n   *\n   * @param result - An {@link OperationResult} that the {@link mapExchange} received.\n   * @returns optionally a new {@link OperationResult} replacing the original.\n   *\n   * @remarks\n   * This callback may optionally return a new {@link OperationResult} that replaces the original,\n   * which you can use to modify incoming API results.\n   *\n   * Hint: The callback may also be promisified and return a new {@link Operation} asynchronously,\n   * provided you place your {@link mapExchange} after all synchronous {@link Exchange | Exchanges},\n   * like after your `cacheExchange`.\n   */\n  onResult?(\n    result: OperationResult\n  ): Promise<OperationResult> | OperationResult | void;\n  /** Accepts a callback for incoming `CombinedError`s.\n   *\n   * @param error - A {@link CombinedError} that an incoming {@link OperationResult} contained.\n   * @param operation - The {@link Operation} of the incoming {@link OperationResult}.\n   *\n   * @remarks\n   * The callback may also be promisified and return a new {@link Operation} asynchronously,\n   * provided you place your {@link mapExchange} after all synchronous {@link Exchange | Exchanges},\n   * like after your `cacheExchange`.\n   */\n  onError?(error: CombinedError, operation: Operation): void;\n}\n\n/** Creates an `Exchange` mapping over incoming operations, results, and/or errors.\n *\n * @param opts - A {@link MapExchangeOpts} configuration object, containing the callbacks the `mapExchange` will use.\n * @returns the created {@link Exchange}\n *\n * @remarks\n * The `mapExchange` may be used to react to or modify incoming {@link Operation | Operations}\n * and {@link OperationResult | OperationResults}. Optionally, it can also modify these\n * asynchronously, when a promise is returned from the callbacks.\n *\n * This is useful to, for instance, add an authentication token to a given request, when\n * the `@urql/exchange-auth` package would be overkill.\n *\n * It can also accept an `onError` callback, which can be used to react to incoming\n * {@link CombinedError | CombinedErrors} on results, and trigger side-effects.\n *\n */\nexport const mapExchange = ({\n  onOperation,\n  onResult,\n  onError,\n}: MapExchangeOpts): Exchange => {\n  return ({ forward }) =>\n    ops$ => {\n      return pipe(\n        pipe(\n          ops$,\n          mergeMap(operation => {\n            const newOperation =\n              (onOperation && onOperation(operation)) || operation;\n            return 'then' in newOperation\n              ? fromPromise(newOperation)\n              : fromValue(newOperation);\n          })\n        ),\n        forward,\n        mergeMap(result => {\n          if (onError && result.error) onError(result.error, result.operation);\n          const newResult = (onResult && onResult(result)) || result;\n          return 'then' in newResult\n            ? fromPromise(newResult)\n            : fromValue(newResult);\n        })\n      );\n    };\n};\n", "import { filter, pipe, tap } from 'wonka';\nimport type { ExchangeIO, ExchangeInput } from '../types';\n\n/** Used by the `Client` as the last exchange to warn about unhandled operations.\n *\n * @remarks\n * In a normal setup, some operations may go unhandled when a {@link Client} isn’t set up\n * with the right exchanges.\n * For instance, a `Client` may be missing a fetch exchange, or an exchange handling subscriptions.\n * This {@link Exchange} is added by the `Client` automatically to log warnings about unhandled\n * {@link Operaiton | Operations} in development.\n */\nexport const fallbackExchange: ({\n  dispatchDebug,\n}: Pick<ExchangeInput, 'dispatchDebug'>) => ExchangeIO =\n  ({ dispatchDebug }) =>\n  ops$ => {\n    if (process.env.NODE_ENV !== 'production') {\n      ops$ = pipe(\n        ops$,\n        tap(operation => {\n          if (\n            operation.kind !== 'teardown' &&\n            process.env.NODE_ENV !== 'production'\n          ) {\n            const message = `No exchange has handled operations of kind \"${operation.kind}\". Check whether you've added an exchange responsible for these operations.`;\n\n            dispatchDebug({\n              type: 'fallbackCatch',\n              message,\n              operation,\n            });\n            console.warn(message);\n          }\n        })\n      );\n    }\n\n    // All operations that skipped through the entire exchange chain should be filtered from the output\n    return filter((_x): _x is never => false)(ops$);\n  };\n", "/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport type { Source, Subscription } from 'wonka';\nimport {\n  lazy,\n  filter,\n  makeSubject,\n  onEnd,\n  onPush,\n  onStart,\n  pipe,\n  share,\n  take,\n  takeUntil,\n  takeWhile,\n  publish,\n  subscribe,\n  switchMap,\n  fromValue,\n  merge,\n  map,\n} from 'wonka';\n\nimport { composeExchanges } from './exchanges';\nimport { fallbackExchange } from './exchanges/fallback';\n\nimport type {\n  DocumentInput,\n  AnyVariables,\n  Exchange,\n  ExchangeInput,\n  GraphQLRequest,\n  Operation,\n  OperationInstance,\n  OperationContext,\n  OperationResult,\n  OperationResultSource,\n  OperationType,\n  RequestPolicy,\n  DebugEvent,\n} from './types';\n\nimport {\n  createRequest,\n  withPromise,\n  maskTypename,\n  noop,\n  makeOperation,\n  getOperationType,\n} from './utils';\n\n/** Configuration options passed when creating a new {@link Client}.\n *\n * @remarks\n * The `ClientOptions` are passed when creating a new {@link Client}, and\n * are used to instantiate the pipeline of {@link Exchange | Exchanges}, configure\n * options used to initialize {@link OperationContext | OperationContexts}, or to\n * change the general behaviour of the {@link Client}.\n */\nexport interface ClientOptions {\n  /** Target URL used by fetch exchanges to make GraphQL API requests to.\n   *\n   * @remarks\n   * This is the URL that fetch exchanges will call to make GraphQL API requests.\n   * This value is copied to {@link OperationContext.url}.\n   */\n  url: string;\n  /** Additional options used by fetch exchanges that'll be passed to the `fetch` call on API requests.\n   *\n   * @remarks\n   * The options in this object or an object returned by a callback function will be merged into the\n   * {@link RequestInit} options passed to the `fetch` call.\n   *\n   * Hint: If you're trying to implement more complex changes per {@link Operation}, it's worth considering\n   * to use the {@link mapExchange} instead, which allows you to change `Operation`s and `OperationResult`s.\n   *\n   * Hint: If you're trying to use this as a function for authentication, consider checking out\n   * `@urql/exchange-auth` instead, which allows you to handle refresh auth flows, and more\n   * complex auth flows.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/fetch} for a description of this object.\n   */\n  fetchOptions?: RequestInit | (() => RequestInit);\n  /** A `fetch` function polyfill used by fetch exchanges to make API calls.\n   *\n   * @remarks\n   * This is the fetch polyfill used by any fetch exchange to make an API request. By default, when this\n   * option isn't set, any fetch exchange will attempt to use the globally available `fetch` function\n   * to make a request instead.\n   *\n   * It's recommended to only pass a polyfill, if any of the environments you're running the {@link Client}\n   * in don't support the Fetch API natively.\n   *\n   * Hint: If you're using the \"Incremental Delivery\" multipart spec, for instance with `@defer` directives,\n   * you're better off using the native `fetch` function, or must ensure that your polyfill supports streamed\n   * results. However, a \"Streaming requests unsupported\" error will be thrown, to let you know that your `fetch`\n   * API doesn't support incrementally streamed responses, if this mode is used.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API} for the Fetch API spec.\n   */\n  fetch?: typeof fetch;\n  /** Allows a subscription to be executed using a `fetch` API request.\n   *\n   * @remarks\n   * If your API supports the `text/event-stream` and/or `multipart/mixed` response protocol, and you use\n   * this protocol to handle subscriptions, then you may switch this flag to `true`.\n   *\n   * This means you won’t have to create a {@link subscriptionExchange} to handle subscriptions with an\n   * external transport, and will instead be able to use GraphQL over HTTP transports.\n   */\n  fetchSubscriptions?: boolean;\n  /** A list of `Exchange`s that will be used to create the `Client`'s execution pipeline.\n   *\n   * @remarks\n   * The {@link Client} accepts and composes a list of {@link Exchange | Exchanges} into an “exchange pipeline”\n   * which receive a stream of {@link Operation | Operations} the `Client` wishes to execute, and return a stream\n   * of {@link OperationResult | OperationResults}.\n   *\n   * This is the basis for how `urql` handles GraphQL operations, and exchanges handle the creation, execution,\n   * and control flow of exchanges for the `Client`.\n   *\n   * To easily get started you should consider using the {@link dedupExchange}, {@link cacheExchange} and {@link fetchExchange}\n   * these are all exported from the core package.\n   *\n   * @see {@link https://urql.dev/goto/docs/architecture/#the-client-and-exchanges} for more information\n   * on what `Exchange`s are and how they work.\n   */\n  exchanges: Exchange[];\n  /** A configuration flag indicating whether support for \"Suspense\" is activated.\n   *\n   * @remarks\n   * This configuration flag is only relevant for using `urql` with the React or Preact bindings.\n   * When activated it allows `useQuery` to \"suspend\" instead of returning a loading state, which\n   * will stop updates in a querying component and instead cascade\n   * to a higher suspense boundary for a loading state.\n   *\n   * Hint: While, when this option is enabled, by default all `useQuery` hooks will suspense, you can\n   * disable Suspense selectively for each hook.\n   *\n   * @see {@link https://beta.reactjs.org/blog/2022/03/29/react-v18#new-suspense-features} for more information on React Suspense.\n   */\n  suspense?: boolean;\n  /** The request and caching strategy that all `Operation`s on this `Client` will use by default.\n   *\n   * @remarks\n   * The {@link RequestPolicy} instructs cache exchanges how to use and treat their cached results.\n   * By default `cache-first` is set and used, which will use cache results, and only make an API request\n   * on a cache miss.\n   *\n   * The `requestPolicy` can be overriden per operation, since it's added to the {@link OperationContext},\n   * which allows you to change the policy per `Operation`, rather than changing it by default here.\n   *\n   * Hint: We don’t recommend changing this from the default `cache-first` option, unless you know what\n   * you‘re doing. Setting this to `cache-and-network` is not recommend and may not lead to the behaviour\n   * you expect. If you’re looking to always update your cache frequently, use `@urql/exchange-request-policy`\n   * instead.\n   */\n  requestPolicy?: RequestPolicy;\n  /** Instructs fetch exchanges to use a GET request.\n   *\n   * @remarks\n   * This changes the {@link OperationContext.preferGetMethod} option, which tells fetch exchanges\n   * to use GET requests for queries instead of POST requests.\n   *\n   * When set to `true` or `'within-url-limit'`, built-in fetch exchanges will always attempt to send query\n   * operations as GET requests, unless the resulting URL exceeds a length of 2,048 characters.\n   * If you want to bypass this restriction, set this option to `'force'` instead, to always send GET.\n   * requests for queries.\n   */\n  preferGetMethod?: boolean | 'force' | 'within-url-limit';\n  /** Instructs the `Client` to remove `__typename` properties on all results.\n   *\n   * @deprecated Not recommended over modelling inputs manually (See #3299)\n   *\n   * @remarks\n   * By default, cache exchanges will alter your GraphQL documents to request `__typename` fields\n   * for all selections. However, this means that your GraphQL data will now contain `__typename` fields you\n   * didn't ask for. This is why the {@link Client} supports “masking” this field by marking it\n   * as non-enumerable via this option.\n   *\n   * Only use this option if you absolutely have to. It's popular to model mutation inputs in\n   * GraphQL schemas after the object types they modify, and if you're using this option to make\n   * it possible to directly pass objects from results as inputs to your mutation variables, it's\n   * more performant and idomatic to instead create a new input object.\n   *\n   * Hint: With `@urql/exchange-graphcache` you will never need this option, as it selects fields on\n   * the client-side according to which fields you specified, rather than the fields it modified.\n   *\n   * @see {@link https://spec.graphql.org/October2021/#sec-Type-Name-Introspection} for more information\n   * on typename introspection via the `__typename` field.\n   */\n  maskTypename?: boolean;\n}\n\n/** The `Client` is the central hub for your GraphQL operations and holds `urql`'s state.\n *\n * @remarks\n * The `Client` manages your active GraphQL operations and their state, and contains the\n * {@link Exchange} pipeline to execute your GraphQL operations.\n *\n * It contains methods that allow you to execute GraphQL operations manually, but the `Client`\n * is also interacted with by bindings (for React, Preact, Vue, Svelte, etc) to execute GraphQL\n * operations.\n *\n * While {@link Exchange | Exchanges} are ultimately responsible for the control flow of operations,\n * sending API requests, and caching, the `Client` still has the important responsibility for\n * creating operations, managing consumers of active operations, sharing results for operations,\n * and more tasks as a “central hub”.\n *\n * @see {@link https://urql.dev/goto/docs/architecture/#requests-and-operations-on-the-client} for more information\n * on what the `Client` is and does.\n */\nexport interface Client {\n  new (options: ClientOptions): Client;\n\n  /** Exposes the stream of `Operation`s that is passed to the `Exchange` pipeline.\n   *\n   * @remarks\n   * This is a Wonka {@link Source} that issues the {@link Operation | Operations} going into\n   * the exchange pipeline.\n   * @internal\n   */\n  operations$: Source<Operation>;\n\n  /** Flag indicating whether support for “Suspense” is activated.\n   *\n   * @remarks\n   * This flag indicates whether support for “Suspense” has been activated via the\n   * {@link ClientOptions.suspense} flag.\n   *\n   * When this is enabled, the {@link Client} itself doesn’t function any differently, and the flag\n   * only serves as an instructions for the React/Preact bindings to change their behaviour.\n   *\n   * @see {@link ClientOptions.suspense} for more information.\n   * @internal\n   */\n  suspense: boolean;\n\n  /** Dispatches an `Operation` to the `Exchange` pipeline, if this `Operation` is active.\n   *\n   * @remarks\n   * This method is frequently used in {@link Exchange | Exchanges}, for instance caches, to reexecute\n   * an operation. It’s often either called because an `Operation` will need to be queried against the\n   * cache again, if a cache result has changed or been invalidated, or it’s called with an {@link Operation}'s\n   * {@link RequestPolicy} set to `network-only` to issue a network request.\n   *\n   * This method will only dispatch an {@link Operation} if it has active consumers, meaning,\n   * active subscribers to the sources of {@link OperationResult}. For instance, if no bindings\n   * (e.g. `useQuery`) is subscribed to the `Operation`, then `reexecuteOperation` will do nothing.\n   *\n   * All operations are put onto a queue and executed after a micro-tick. The queue of operations is\n   * emptied eagerly and synchronously, similar to a trampoline scheduler.\n   */\n  reexecuteOperation(operation: Operation): void;\n\n  /** Subscribe method to add an event listener to debug events.\n   *\n   * @param onEvent - A callback called with new debug events, each time an `Exchange` issues them.\n   * @returns A Wonka {@link Subscription} which is used to optionally terminate the event listener.\n   *\n   * @remarks\n   * This is a method that's only available in development, and allows the `urql-devtools` to receive\n   * to debug events that are issued by exchanges, giving the devtools more information about the flow\n   * and execution of {@link Operation | Operations}.\n   *\n   * @see {@link DebugEventTypes} for a description of all debug events.\n   * @internal\n   */\n  subscribeToDebugTarget?(onEvent: (event: DebugEvent) => void): Subscription;\n\n  /** Creates an `Operation` from a `GraphQLRequest` and optionally, overriding `OperationContext` options.\n   *\n   * @param kind - The {@link OperationType} of GraphQL operation, i.e. `query`, `mutation`, or `subscription`.\n   * @param request - A {@link GraphQLRequest} created prior to calling this method.\n   * @param opts - {@link OperationContext} options that'll override and be merged with options from the {@link ClientOptions}.\n   * @returns An {@link Operation} created from the parameters.\n   *\n   * @remarks\n   * This method is expected to be called with a `kind` set to the `OperationType` of the GraphQL operation.\n   * In development, this is enforced by checking that the GraphQL document's operation matches this `kind`.\n   *\n   * Hint: While bindings will use this method combined with {@link Client.executeRequestOperation}, if\n   * you’re executing operations manually, you can use one of the other convenience methods instead.\n   *\n   * @see {@link Client.executeRequestOperation} for the method used to execute operations.\n   * @see {@link createRequest} which creates a `GraphQLRequest` from a `DocumentNode` and variables.\n   */\n  createRequestOperation<\n    Data = any,\n    Variables extends AnyVariables = AnyVariables,\n  >(\n    kind: OperationType,\n    request: GraphQLRequest<Data, Variables>,\n    opts?: Partial<OperationContext> | undefined\n  ): Operation<Data, Variables>;\n\n  /** Creates a `Source` that executes the `Operation` and issues `OperationResult`s for this `Operation`.\n   *\n   * @param operation - {@link Operation} that will be executed.\n   * @returns A Wonka {@link Source} of {@link OperationResult | OperationResults} for the passed `Operation`.\n   *\n   * @remarks\n   * The {@link Operation} will be dispatched to the pipeline of {@link Exchange | Exchanges} when\n   * subscribing to the returned {@link Source}, which issues {@link OperationResult | OperationResults}\n   * belonging to this `Operation`.\n   *\n   * Internally, {@link OperationResult | OperationResults} are filtered and deliverd to this source by\n   * comparing the {@link Operation.key} on the operation and the {@link OperationResult.operation}.\n   * For mutations, the {@link OperationContext._instance | `OperationContext._instance`} will additionally be compared, since two mutations\n   * with, even given the same variables, will have two distinct results and will be executed separately.\n   *\n   * The {@link Client} dispatches the {@link Operation} when we subscribe to the returned {@link Source}\n   * and will from then on consider the `Operation` as “active” until we unsubscribe. When all consumers unsubscribe\n   * from an `Operation` and it becomes “inactive” a `teardown` signal will be dispatched to the\n   * {@link Exchange | Exchanges}.\n   *\n   * Hint: While bindings will use this method, if you’re executing operations manually, you can use one\n   * of the other convenience methods instead, like {@link Client.executeQuery} et al.\n   */\n  executeRequestOperation<\n    Data = any,\n    Variables extends AnyVariables = AnyVariables,\n  >(\n    operation: Operation<Data, Variables>\n  ): OperationResultSource<OperationResult<Data, Variables>>;\n\n  /** Creates a `Source` that executes the GraphQL query operation created from the passed parameters.\n   *\n   * @param query - a GraphQL document containing the query operation that will be executed.\n   * @param variables - the variables used to execute the operation.\n   * @param opts - {@link OperationContext} options that'll override and be merged with options from the {@link ClientOptions}.\n   * @returns A {@link OperationResultSource} issuing the {@link OperationResult | OperationResults} for the GraphQL operation.\n   *\n   * @remarks\n   * The `Client.query` method is useful to programmatically create and issue a GraphQL query operation.\n   * It automatically calls {@link createRequest}, {@link client.createRequestOperation}, and\n   * {@link client.executeRequestOperation} for you, and is a convenience method.\n   *\n   * Since it returns a {@link OperationResultSource} it may be chained with a `toPromise()` call to only\n   * await a single result in an async function.\n   *\n   * Hint: This is the recommended way to create queries programmatically when not using the bindings,\n   * or when you’re trying to get a single, promisified result.\n   *\n   * @example\n   * ```ts\n   * const getBookQuery = gql`\n   *   query GetBook($id: ID!) {\n   *     book(id: $id) {\n   *       id\n   *       name\n   *       author {\n   *         name\n   *       }\n   *     }\n   *   }\n   * `;\n   *\n   * async function getBook(id) {\n   *   const result = await client.query(getBookQuery, { id }).toPromise();\n   *   if (result.error) {\n   *     throw result.error;\n   *   }\n   *\n   *   return result.data.book;\n   * }\n   * ```\n   */\n  query<Data = any, Variables extends AnyVariables = AnyVariables>(\n    query: DocumentInput<Data, Variables>,\n    variables: Variables,\n    context?: Partial<OperationContext>\n  ): OperationResultSource<OperationResult<Data, Variables>>;\n\n  /** Returns the first synchronous result a `Client` provides for a given operation.\n   *\n   * @param query - a GraphQL document containing the query operation that will be executed.\n   * @param variables - the variables used to execute the operation.\n   * @param opts - {@link OperationContext} options that'll override and be merged with options from the {@link ClientOptions}.\n   * @returns An {@link OperationResult} if one became available synchronously or `null`.\n   *\n   * @remarks\n   * The `Client.readQuery` method returns a result synchronously or defaults to `null`. This is useful\n   * as it limits the result for a query operation to whatever the cache {@link Exchange} of a {@link Client}\n   * had stored and available at that moment.\n   *\n   * In `urql`, it's expected that cache exchanges return their results synchronously. The bindings\n   * and this method exploit this by using synchronous results, like these, to check what data is already\n   * in the cache.\n   *\n   * This method is similar to what all bindings do to synchronously provide the initial state for queries,\n   * regardless of whether effects afterwards that subscribe to the query operation update this state synchronously\n   * or asynchronously.\n   */\n  readQuery<Data = any, Variables extends AnyVariables = AnyVariables>(\n    query: DocumentInput<Data, Variables>,\n    variables: Variables,\n    context?: Partial<OperationContext>\n  ): OperationResult<Data, Variables> | null;\n\n  /** Creates a `Source` that executes the GraphQL query operation for the passed `GraphQLRequest`.\n   *\n   * @param query - a {@link GraphQLRequest}\n   * @param opts - {@link OperationContext} options that'll override and be merged with options from the {@link ClientOptions}.\n   * @returns A {@link PromisifiedSource} issuing the {@link OperationResult | OperationResults} for the GraphQL operation.\n   *\n   * @remarks\n   * The `Client.executeQuery` method is used to programmatically issue a GraphQL query operation.\n   * It automatically calls {@link client.createRequestOperation} and {@link client.executeRequestOperation} for you,\n   * but requires you to create a {@link GraphQLRequest} using {@link createRequest} yourself first.\n   *\n   * @see {@link Client.query} for a method that doesn't require calling {@link createRequest} yourself.\n   */\n  executeQuery<Data = any, Variables extends AnyVariables = AnyVariables>(\n    query: GraphQLRequest<Data, Variables>,\n    opts?: Partial<OperationContext> | undefined\n  ): OperationResultSource<OperationResult<Data, Variables>>;\n\n  /** Creates a `Source` that executes the GraphQL subscription operation created from the passed parameters.\n   *\n   * @param query - a GraphQL document containing the subscription operation that will be executed.\n   * @param variables - the variables used to execute the operation.\n   * @param opts - {@link OperationContext} options that'll override and be merged with options from the {@link ClientOptions}.\n   * @returns A Wonka {@link Source} issuing the {@link OperationResult | OperationResults} for the GraphQL operation.\n   *\n   * @remarks\n   * The `Client.subscription` method is useful to programmatically create and issue a GraphQL subscription operation.\n   * It automatically calls {@link createRequest}, {@link client.createRequestOperation}, and\n   * {@link client.executeRequestOperation} for you, and is a convenience method.\n   *\n   * Hint: This is the recommended way to create subscriptions programmatically when not using the bindings.\n   *\n   * @example\n   * ```ts\n   * import { pipe, subscribe } from 'wonka';\n   *\n   * const getNewsSubscription = gql`\n   *   subscription GetNews {\n   *     breakingNews {\n   *       id\n   *       text\n   *       createdAt\n   *     }\n   *   }\n   * `;\n   *\n   * function subscribeToBreakingNews() {\n   *   const subscription = pipe(\n   *     client.subscription(getNewsSubscription, {}),\n   *     subscribe(result => {\n   *       if (result.data) {\n   *         console.log(result.data.breakingNews.text);\n   *       }\n   *     })\n   *   );\n   *\n   *   return subscription.unsubscribe;\n   * }\n   * ```\n   */\n  subscription<Data = any, Variables extends AnyVariables = AnyVariables>(\n    query: DocumentInput<Data, Variables>,\n    variables: Variables,\n    context?: Partial<OperationContext>\n  ): OperationResultSource<OperationResult<Data, Variables>>;\n\n  /** Creates a `Source` that executes the GraphQL subscription operation for the passed `GraphQLRequest`.\n   *\n   * @param query - a {@link GraphQLRequest}\n   * @param opts - {@link OperationContext} options that'll override and be merged with options from the {@link ClientOptions}.\n   * @returns A {@link PromisifiedSource} issuing the {@link OperationResult | OperationResults} for the GraphQL operation.\n   *\n   * @remarks\n   * The `Client.executeSubscription` method is used to programmatically issue a GraphQL subscription operation.\n   * It automatically calls {@link client.createRequestOperation} and {@link client.executeRequestOperation} for you,\n   * but requires you to create a {@link GraphQLRequest} using {@link createRequest} yourself first.\n   *\n   * @see {@link Client.subscription} for a method that doesn't require calling {@link createRequest} yourself.\n   */\n  executeSubscription<\n    Data = any,\n    Variables extends AnyVariables = AnyVariables,\n  >(\n    query: GraphQLRequest<Data, Variables>,\n    opts?: Partial<OperationContext> | undefined\n  ): OperationResultSource<OperationResult<Data, Variables>>;\n\n  /** Creates a `Source` that executes the GraphQL mutation operation created from the passed parameters.\n   *\n   * @param query - a GraphQL document containing the mutation operation that will be executed.\n   * @param variables - the variables used to execute the operation.\n   * @param opts - {@link OperationContext} options that'll override and be merged with options from the {@link ClientOptions}.\n   * @returns A {@link PromisifiedSource} issuing the {@link OperationResult | OperationResults} for the GraphQL operation.\n   *\n   * @remarks\n   * The `Client.mutation` method is useful to programmatically create and issue a GraphQL mutation operation.\n   * It automatically calls {@link createRequest}, {@link client.createRequestOperation}, and\n   * {@link client.executeRequestOperation} for you, and is a convenience method.\n   *\n   * Since it returns a {@link PromisifiedSource} it may be chained with a `toPromise()` call to only\n   * await a single result in an async function. Since mutations will only typically issue one result,\n   * using this method is recommended.\n   *\n   * Hint: This is the recommended way to create mutations programmatically when not using the bindings,\n   * or when you’re trying to get a single, promisified result.\n   *\n   * @example\n   * ```ts\n   * const createPostMutation = gql`\n   *   mutation CreatePost($text: String!) {\n   *     createPost(text: $text) {\n   *       id\n   *       text\n   *     }\n   *   }\n   * `;\n   *\n   * async function createPost(text) {\n   *   const result = await client.mutation(createPostMutation, {\n   *     text,\n   *   }).toPromise();\n   *   if (result.error) {\n   *     throw result.error;\n   *   }\n   *\n   *   return result.data.createPost;\n   * }\n   * ```\n   */\n  mutation<Data = any, Variables extends AnyVariables = AnyVariables>(\n    query: DocumentInput<Data, Variables>,\n    variables: Variables,\n    context?: Partial<OperationContext>\n  ): OperationResultSource<OperationResult<Data, Variables>>;\n\n  /** Creates a `Source` that executes the GraphQL mutation operation for the passed `GraphQLRequest`.\n   *\n   * @param query - a {@link GraphQLRequest}\n   * @param opts - {@link OperationContext} options that'll override and be merged with options from the {@link ClientOptions}.\n   * @returns A {@link PromisifiedSource} issuing the {@link OperationResult | OperationResults} for the GraphQL operation.\n   *\n   * @remarks\n   * The `Client.executeMutation` method is used to programmatically issue a GraphQL mutation operation.\n   * It automatically calls {@link client.createRequestOperation} and {@link client.executeRequestOperation} for you,\n   * but requires you to create a {@link GraphQLRequest} using {@link createRequest} yourself first.\n   *\n   * @see {@link Client.mutation} for a method that doesn't require calling {@link createRequest} yourself.\n   */\n  executeMutation<Data = any, Variables extends AnyVariables = AnyVariables>(\n    query: GraphQLRequest<Data, Variables>,\n    opts?: Partial<OperationContext> | undefined\n  ): OperationResultSource<OperationResult<Data, Variables>>;\n}\n\nexport const Client: new (opts: ClientOptions) => Client = function Client(\n  this: Client | {},\n  opts: ClientOptions\n) {\n  if (process.env.NODE_ENV !== 'production' && !opts.url) {\n    throw new Error('You are creating an urql-client without a url.');\n  }\n\n  let ids = 0;\n\n  const replays = new Map<number, OperationResult>();\n  const active: Map<number, Source<OperationResult>> = new Map();\n  const dispatched = new Set<number>();\n  const queue: Operation[] = [];\n\n  const baseOpts = {\n    url: opts.url,\n    fetchSubscriptions: opts.fetchSubscriptions,\n    fetchOptions: opts.fetchOptions,\n    fetch: opts.fetch,\n    preferGetMethod: opts.preferGetMethod,\n    requestPolicy: opts.requestPolicy || 'cache-first',\n  };\n\n  // This subject forms the input of operations; executeOperation may be\n  // called to dispatch a new operation on the subject\n  const operations = makeSubject<Operation>();\n\n  function nextOperation(operation: Operation) {\n    if (\n      operation.kind === 'mutation' ||\n      operation.kind === 'teardown' ||\n      !dispatched.has(operation.key)\n    ) {\n      if (operation.kind === 'teardown') {\n        dispatched.delete(operation.key);\n      } else if (operation.kind !== 'mutation') {\n        dispatched.add(operation.key);\n      }\n      operations.next(operation);\n    }\n  }\n\n  // We define a queued dispatcher on the subject, which empties the queue when it's\n  // activated to allow `reexecuteOperation` to be trampoline-scheduled\n  let isOperationBatchActive = false;\n  function dispatchOperation(operation?: Operation | void) {\n    if (operation) nextOperation(operation);\n\n    if (!isOperationBatchActive) {\n      isOperationBatchActive = true;\n      while (isOperationBatchActive && (operation = queue.shift()))\n        nextOperation(operation);\n      isOperationBatchActive = false;\n    }\n  }\n\n  /** Defines how result streams are created */\n  const makeResultSource = (operation: Operation) => {\n    let result$ = pipe(\n      results$,\n      // Filter by matching key (or _instance if it’s set)\n      filter(\n        (res: OperationResult) =>\n          res.operation.kind === operation.kind &&\n          res.operation.key === operation.key &&\n          (!res.operation.context._instance ||\n            res.operation.context._instance === operation.context._instance)\n      ),\n      // End the results stream when an active teardown event is sent\n      takeUntil(\n        pipe(\n          operations.source,\n          filter(op => op.kind === 'teardown' && op.key === operation.key)\n        )\n      )\n    );\n\n    // Mask typename properties if the option for it is turned on\n    if (opts.maskTypename) {\n      result$ = pipe(\n        result$,\n        map(res => ({ ...res, data: maskTypename(res.data, true) }))\n      );\n    }\n\n    if (operation.kind !== 'query') {\n      // Interrupt subscriptions and mutations when they have no more results\n      result$ = pipe(\n        result$,\n        takeWhile(result => !!result.hasNext, true)\n      );\n    } else {\n      result$ = pipe(\n        result$,\n        // Add `stale: true` flag when a new operation is sent for queries\n        switchMap(result => {\n          const value$ = fromValue(result);\n          return result.stale || result.hasNext\n            ? value$\n            : merge([\n                value$,\n                pipe(\n                  operations.source,\n                  filter(op => op.key === operation.key),\n                  take(1),\n                  map(() => {\n                    result.stale = true;\n                    return result;\n                  })\n                ),\n              ]);\n        })\n      );\n    }\n\n    if (operation.kind !== 'mutation') {\n      result$ = pipe(\n        result$,\n        // Store replay result\n        onPush(result => {\n          if (result.stale) {\n            // If the current result has queued up an operation of the same\n            // key, then `stale` refers to it\n            for (const operation of queue) {\n              if (operation.key === result.operation.key) {\n                dispatched.delete(operation.key);\n                break;\n              }\n            }\n          } else if (!result.hasNext) {\n            dispatched.delete(operation.key);\n          }\n          replays.set(operation.key, result);\n        }),\n        // Cleanup active states on end of source\n        onEnd(() => {\n          // Delete the active operation handle\n          dispatched.delete(operation.key);\n          replays.delete(operation.key);\n          active.delete(operation.key);\n          // Interrupt active queue\n          isOperationBatchActive = false;\n          // Delete all queued up operations of the same key on end\n          for (let i = queue.length - 1; i >= 0; i--)\n            if (queue[i].key === operation.key) queue.splice(i, 1);\n          // Dispatch a teardown signal for the stopped operation\n          nextOperation(\n            makeOperation('teardown', operation, operation.context)\n          );\n        })\n      );\n    } else {\n      result$ = pipe(\n        result$,\n        // Send mutation operation on start\n        onStart(() => {\n          nextOperation(operation);\n        })\n      );\n    }\n\n    return share(result$);\n  };\n\n  const instance: Client =\n    this instanceof Client ? this : Object.create(Client.prototype);\n  const client: Client = Object.assign(instance, {\n    suspense: !!opts.suspense,\n    operations$: operations.source,\n\n    reexecuteOperation(operation: Operation) {\n      // Reexecute operation only if any subscribers are still subscribed to the\n      // operation's exchange results\n      if (operation.kind === 'teardown') {\n        dispatchOperation(operation);\n      } else if (operation.kind === 'mutation' || active.has(operation.key)) {\n        let queued = false;\n        for (let i = 0; i < queue.length; i++)\n          queued = queued || queue[i].key === operation.key;\n        if (!queued) dispatched.delete(operation.key);\n        queue.push(operation);\n        Promise.resolve().then(dispatchOperation);\n      }\n    },\n\n    createRequestOperation(kind, request, opts) {\n      if (!opts) opts = {};\n\n      let requestOperationType: string | undefined;\n      if (\n        process.env.NODE_ENV !== 'production' &&\n        kind !== 'teardown' &&\n        (requestOperationType = getOperationType(request.query)) !== kind\n      ) {\n        throw new Error(\n          `Expected operation of type \"${kind}\" but found \"${requestOperationType}\"`\n        );\n      }\n\n      return makeOperation(kind, request, {\n        _instance:\n          kind === 'mutation'\n            ? ((ids = (ids + 1) | 0) as OperationInstance)\n            : undefined,\n        ...baseOpts,\n        ...opts,\n        requestPolicy: opts.requestPolicy || baseOpts.requestPolicy,\n        suspense: opts.suspense || (opts.suspense !== false && client.suspense),\n      });\n    },\n\n    executeRequestOperation(operation) {\n      if (operation.kind === 'mutation') {\n        return withPromise(makeResultSource(operation));\n      }\n\n      return withPromise(\n        lazy<OperationResult>(() => {\n          let source = active.get(operation.key);\n          if (!source) {\n            active.set(operation.key, (source = makeResultSource(operation)));\n          }\n\n          source = pipe(\n            source,\n            onStart(() => {\n              dispatchOperation(operation);\n            })\n          );\n\n          const replay = replays.get(operation.key);\n          if (\n            operation.kind === 'query' &&\n            replay &&\n            (replay.stale || replay.hasNext)\n          ) {\n            return pipe(\n              merge([\n                source,\n                pipe(\n                  fromValue(replay),\n                  filter(replay => replay === replays.get(operation.key))\n                ),\n              ]),\n              switchMap(fromValue)\n            );\n          } else {\n            return source;\n          }\n        })\n      );\n    },\n\n    executeQuery(query, opts) {\n      const operation = client.createRequestOperation('query', query, opts);\n      return client.executeRequestOperation(operation);\n    },\n\n    executeSubscription(query, opts) {\n      const operation = client.createRequestOperation(\n        'subscription',\n        query,\n        opts\n      );\n      return client.executeRequestOperation(operation);\n    },\n\n    executeMutation(query, opts) {\n      const operation = client.createRequestOperation('mutation', query, opts);\n      return client.executeRequestOperation(operation);\n    },\n\n    readQuery(query, variables, context) {\n      let result: OperationResult | null = null;\n\n      pipe(\n        client.query(query, variables, context),\n        subscribe(res => {\n          result = res;\n        })\n      ).unsubscribe();\n\n      return result;\n    },\n\n    query(query, variables, context) {\n      return client.executeQuery(createRequest(query, variables), context);\n    },\n\n    subscription(query, variables, context) {\n      return client.executeSubscription(\n        createRequest(query, variables),\n        context\n      );\n    },\n\n    mutation(query, variables, context) {\n      return client.executeMutation(createRequest(query, variables), context);\n    },\n  } as Client);\n\n  let dispatchDebug: ExchangeInput['dispatchDebug'] = noop;\n  if (process.env.NODE_ENV !== 'production') {\n    const { next, source } = makeSubject<DebugEvent>();\n    client.subscribeToDebugTarget = (onEvent: (e: DebugEvent) => void) =>\n      pipe(source, subscribe(onEvent));\n    dispatchDebug = next as ExchangeInput['dispatchDebug'];\n  }\n\n  // All exchange are composed into a single one and are called using the constructed client\n  // and the fallback exchange stream\n  const composedExchange = composeExchanges(opts.exchanges);\n\n  // All exchanges receive inputs using which they can forward operations to the next exchange\n  // and receive a stream of results in return, access the client, or dispatch debugging events\n  // All operations then run through the Exchange IOs in a pipeline-like fashion\n  const results$ = share(\n    composedExchange({\n      client,\n      dispatchDebug,\n      forward: fallbackExchange({ dispatchDebug }),\n    })(operations.source)\n  );\n\n  // Prevent the `results$` exchange pipeline from being closed by active\n  // cancellations cascading up from components\n  pipe(results$, publish);\n\n  return client;\n} as any;\n\n/** Accepts `ClientOptions` and creates a `Client`.\n * @param opts - A {@link ClientOptions} objects with options for the `Client`.\n * @returns A {@link Client} instantiated with `opts`.\n */\nexport const createClient = Client as any as (opts: ClientOptions) => Client;\n", "// These are guards that are used throughout the codebase to warn or error on\n// unexpected behaviour or conditions.\n// Every warning and error comes with a number that uniquely identifies them.\n// You can read more about the messages themselves in `docs/graphcache/errors.md`\n\nimport type {\n  ExecutableDefinitionNode,\n  InlineFragmentNode,\n} from '@0no-co/graphql.web';\nimport type { Logger } from '../types';\nimport { Kind } from '@0no-co/graphql.web';\n\nexport type ErrorCode =\n  | 1\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | 11\n  | 12\n  | 13\n  | 14\n  | 15\n  | 16\n  | 17\n  | 18\n  | 19\n  | 20\n  | 21\n  | 22\n  | 23\n  | 24\n  | 25\n  | 26\n  | 27\n  | 28;\n\ntype DebugNode = ExecutableDefinitionNode | InlineFragmentNode;\n\n// URL unfurls to https://formidable.com/open-source/urql/docs/graphcache/errors/\nconst helpUrl = '\\nhttps://bit.ly/2XbVrpR#';\nconst cache = new Set<string>();\n\nexport const currentDebugStack: string[] = [];\n\nexport const popDebugNode = () => currentDebugStack.pop();\n\nexport const pushDebugNode = (typename: void | string, node: DebugNode) => {\n  let identifier = '';\n  if (node.kind === Kind.INLINE_FRAGMENT) {\n    identifier = typename\n      ? `Inline Fragment on \"${typename}\"`\n      : 'Inline Fragment';\n  } else if (node.kind === Kind.OPERATION_DEFINITION) {\n    const name = node.name ? `\"${node.name.value}\"` : 'Unnamed';\n    identifier = `${name} ${node.operation}`;\n  } else if (node.kind === Kind.FRAGMENT_DEFINITION) {\n    identifier = `\"${node.name.value}\" Fragment`;\n  }\n\n  if (identifier) {\n    currentDebugStack.push(identifier);\n  }\n};\n\nconst getDebugOutput = (): string =>\n  currentDebugStack.length\n    ? '\\n(Caused At: ' + currentDebugStack.join(', ') + ')'\n    : '';\n\nexport function invariant(\n  condition: any,\n  message: string,\n  code: ErrorCode\n): asserts condition {\n  if (!condition) {\n    let errorMessage = message || 'Minfied Error #' + code + '\\n';\n    if (process.env.NODE_ENV !== 'production') {\n      errorMessage += getDebugOutput();\n    }\n\n    const error = new Error(errorMessage + helpUrl + code);\n    error.name = 'Graphcache Error';\n    throw error;\n  }\n}\n\nexport function warn(\n  message: string,\n  code: ErrorCode,\n  logger: Logger | undefined\n) {\n  if (!cache.has(message)) {\n    if (logger) {\n      logger('warn', message + getDebugOutput() + helpUrl + code);\n    } else {\n      console.warn(message + getDebugOutput() + helpUrl + code);\n    }\n    cache.add(message);\n  }\n}\n", "import type {\n  NamedTypeNode,\n  NameNode,\n  DirectiveNode,\n  SelectionNode,\n  SelectionSetNode,\n  FieldNode,\n  FragmentDefinitionNode,\n} from '@0no-co/graphql.web';\n\nimport type { FormattedNode } from '@urql/core';\n\nexport type SelectionSet = readonly FormattedNode<SelectionNode>[];\n\nconst EMPTY_DIRECTIVES: Record<string, DirectiveNode | undefined> = {};\n\n/** Returns the directives dictionary of a given node */\nexport const getDirectives = (node: {\n  _directives?: Record<string, DirectiveNode | undefined>;\n}) => node._directives || EMPTY_DIRECTIVES;\n\n/** Returns the name of a given node */\nexport const getName = (node: { name: NameNode }): string => node.name.value;\n\nexport const getFragmentTypeName = (node: FragmentDefinitionNode): string =>\n  node.typeCondition.name.value;\n\n/** Returns either the field's name or the field's alias */\nexport const getFieldAlias = (node: FieldNode): string =>\n  node.alias ? node.alias.value : node.name.value;\n\nconst emptySelectionSet: SelectionSet = [];\n\n/** Returns the SelectionSet for a given inline or defined fragment node */\nexport const getSelectionSet = (node: {\n  selectionSet?: FormattedNode<SelectionSetNode>;\n}): FormattedNode<SelectionSet> =>\n  (node.selectionSet\n    ? node.selectionSet.selections\n    : emptySelectionSet) as FormattedNode<SelectionSet>;\n\nexport const getTypeCondition = (node: {\n  typeCondition?: NamedTypeNode;\n}): string | null =>\n  node.typeCondition ? node.typeCondition.name.value : null;\n", "import type {\n  FieldNode,\n  DirectiveNode,\n  OperationDefinitionNode,\n} from '@0no-co/graphql.web';\nimport { valueFromASTUntyped } from '@0no-co/graphql.web';\n\nimport { getName } from './node';\n\nimport type { Variables } from '../types';\n\n/** Evaluates a fields arguments taking vars into account */\nexport const getFieldArguments = (\n  node: FieldNode | DirectiveNode,\n  vars: Variables\n): null | Variables => {\n  let args: null | Variables = null;\n  if (node.arguments) {\n    for (let i = 0, l = node.arguments.length; i < l; i++) {\n      const arg = node.arguments[i];\n      const value = valueFromASTUntyped(arg.value, vars);\n      if (value !== undefined && value !== null) {\n        if (!args) args = {};\n        args[getName(arg)] = value as any;\n      }\n    }\n  }\n  return args;\n};\n\n/** Returns a filtered form of variables with values missing that the query doesn't require */\nexport const filterVariables = (\n  node: OperationDefinitionNode,\n  input: void | object\n) => {\n  if (!input || !node.variableDefinitions) {\n    return undefined;\n  }\n\n  const vars = {};\n  for (let i = 0, l = node.variableDefinitions.length; i < l; i++) {\n    const name = getName(node.variableDefinitions[i].variable);\n    vars[name] = input[name];\n  }\n\n  return vars;\n};\n\n/** Returns a normalized form of variables with defaulted values */\nexport const normalizeVariables = (\n  node: OperationDefinitionNode,\n  input: void | Record<string, unknown>\n): Variables => {\n  const vars = {};\n  if (!input) return vars;\n\n  if (node.variableDefinitions) {\n    for (let i = 0, l = node.variableDefinitions.length; i < l; i++) {\n      const def = node.variableDefinitions[i];\n      const name = getName(def.variable);\n      vars[name] =\n        input[name] === undefined && def.defaultValue\n          ? valueFromASTUntyped(def.defaultValue, input)\n          : input[name];\n    }\n  }\n\n  for (const key in input) {\n    if (!(key in vars)) vars[key] = input[key];\n  }\n\n  return vars;\n};\n", "import type {\n  SelectionNode,\n  DocumentNode,\n  OperationDefinitionNode,\n  FragmentSpreadNode,\n  InlineFragmentNode,\n} from '@0no-co/graphql.web';\nimport { valueFromASTUntyped, Kind } from '@0no-co/graphql.web';\n\nimport type { FormattedNode } from '@urql/core';\nimport { getName, getDirectives } from './node';\nimport { invariant } from '../helpers/help';\nimport type { Fragments, Variables } from '../types';\n\nfunction getMainOperation(\n  doc: FormattedNode<DocumentNode>\n): FormattedNode<OperationDefinitionNode>;\nfunction getMainOperation(doc: DocumentNode): OperationDefinitionNode;\n\n/** Returns the main operation's definition */\nfunction getMainOperation(doc: DocumentNode): OperationDefinitionNode {\n  for (let i = 0; i < doc.definitions.length; i++) {\n    if (doc.definitions[i].kind === Kind.OPERATION_DEFINITION) {\n      return doc.definitions[i] as FormattedNode<OperationDefinitionNode>;\n    }\n  }\n\n  invariant(\n    false,\n    'Invalid GraphQL document: All GraphQL documents must contain an OperationDefinition' +\n      'node for a query, subscription, or mutation.',\n    1\n  );\n}\n\nexport { getMainOperation };\n\n/** Returns a mapping from fragment names to their selections */\nexport const getFragments = (doc: FormattedNode<DocumentNode>): Fragments => {\n  const fragments: Fragments = {};\n  for (let i = 0; i < doc.definitions.length; i++) {\n    const node = doc.definitions[i];\n    if (node.kind === Kind.FRAGMENT_DEFINITION) {\n      fragments[getName(node)] = node;\n    }\n  }\n\n  return fragments;\n};\n\n/** Resolves @include and @skip directives to determine whether field is included. */\nexport const shouldInclude = (\n  node: FormattedNode<SelectionNode>,\n  vars: Variables\n): boolean => {\n  const directives = getDirectives(node);\n  if (directives.include || directives.skip) {\n    // Finds any @include or @skip directive that forces the node to be skipped\n    for (const name in directives) {\n      const directive = directives[name];\n      if (\n        directive &&\n        (name === 'include' || name === 'skip') &&\n        directive.arguments &&\n        directive.arguments[0] &&\n        getName(directive.arguments[0]) === 'if'\n      ) {\n        // Return whether this directive forces us to skip\n        // `@include(if: false)` or `@skip(if: true)`\n        const value = valueFromASTUntyped(directive.arguments[0].value, vars);\n        return name === 'include' ? !!value : !value;\n      }\n    }\n  }\n  return true;\n};\n\n/** Resolves @defer directive to determine whether a fragment is potentially skipped. */\nexport const isDeferred = (\n  node: FormattedNode<FragmentSpreadNode | InlineFragmentNode>,\n  vars: Variables\n): boolean => {\n  const { defer } = getDirectives(node);\n  if (defer) {\n    for (const argument of defer.arguments || []) {\n      if (getName(argument) === 'if') {\n        // Return whether `@defer(if: )` is enabled\n        return !!valueFromASTUntyped(argument.value, vars);\n      }\n    }\n    return true;\n  }\n\n  return false;\n};\n\n/** Resolves @_optional and @_required directive to determine whether the fields in a fragment are conaidered optional. */\nexport const isOptional = (\n  node: FormattedNode<FragmentSpreadNode | InlineFragmentNode>\n): boolean | undefined => {\n  const { optional, required } = getDirectives(node);\n  if (required) {\n    return false;\n  }\n\n  if (optional) {\n    return true;\n  }\n\n  return undefined;\n};\n", "import type {\n  InlineFragmentNode,\n  FragmentDefinitionNode,\n} from '@0no-co/graphql.web';\n\nimport { warn, invariant } from '../helpers/help';\nimport { getTypeCondition } from './node';\nimport type { SchemaIntrospector, SchemaObject } from './schema';\n\nimport type {\n  KeyingConfig,\n  UpdatesConfig,\n  ResolverConfig,\n  OptimisticMutationConfig,\n  Logger,\n} from '../types';\n\nconst BUILTIN_NAME = '__';\n\nexport const isFieldNullable = (\n  schema: SchemaIntrospector,\n  typename: string,\n  fieldName: string,\n  logger: Logger | undefined\n): boolean => {\n  const field = getField(schema, typename, fieldName, logger);\n  return !!field && field.type.kind !== 'NON_NULL';\n};\n\nexport const isListNullable = (\n  schema: SchemaIntrospector,\n  typename: string,\n  fieldName: string,\n  logger: Logger | undefined\n): boolean => {\n  const field = getField(schema, typename, fieldName, logger);\n  if (!field) return false;\n  const ofType =\n    field.type.kind === 'NON_NULL' ? field.type.ofType : field.type;\n  return ofType.kind === 'LIST' && ofType.ofType.kind !== 'NON_NULL';\n};\n\nexport const isFieldAvailableOnType = (\n  schema: SchemaIntrospector,\n  typename: string,\n  fieldName: string,\n  logger: Logger | undefined\n): boolean =>\n  fieldName.indexOf(BUILTIN_NAME) === 0 ||\n  typename.indexOf(BUILTIN_NAME) === 0 ||\n  !!getField(schema, typename, fieldName, logger);\n\nexport const isInterfaceOfType = (\n  schema: SchemaIntrospector,\n  node: InlineFragmentNode | FragmentDefinitionNode,\n  typename: string | void\n): boolean => {\n  if (!typename) return false;\n  const typeCondition = getTypeCondition(node);\n  if (!typeCondition || typename === typeCondition) {\n    return true;\n  } else if (\n    schema.types!.has(typeCondition) &&\n    schema.types!.get(typeCondition)!.kind === 'OBJECT'\n  ) {\n    return typeCondition === typename;\n  }\n\n  expectAbstractType(schema, typeCondition!);\n  expectObjectType(schema, typename!);\n  return schema.isSubType(typeCondition, typename);\n};\n\nconst getField = (\n  schema: SchemaIntrospector,\n  typename: string,\n  fieldName: string,\n  logger: Logger | undefined\n) => {\n  if (\n    fieldName.indexOf(BUILTIN_NAME) === 0 ||\n    typename.indexOf(BUILTIN_NAME) === 0\n  )\n    return;\n\n  expectObjectType(schema, typename);\n  const object = schema.types!.get(typename) as SchemaObject;\n  const field = object.fields()[fieldName];\n  if (!field) {\n    warn(\n      'Invalid field: The field `' +\n        fieldName +\n        '` does not exist on `' +\n        typename +\n        '`, ' +\n        'but the GraphQL document expects it to exist.\\n' +\n        'Traversal will continue, however this may lead to undefined behavior!',\n      4,\n      logger\n    );\n  }\n\n  return field;\n};\n\nfunction expectObjectType(schema: SchemaIntrospector, typename: string) {\n  invariant(\n    schema.types!.has(typename) &&\n      schema.types!.get(typename)!.kind === 'OBJECT',\n    'Invalid Object type: The type `' +\n      typename +\n      '` is not an object in the defined schema, ' +\n      'but the GraphQL document is traversing it.',\n    3\n  );\n}\n\nfunction expectAbstractType(schema: SchemaIntrospector, typename: string) {\n  invariant(\n    schema.types!.has(typename) &&\n      (schema.types!.get(typename)!.kind === 'INTERFACE' ||\n        schema.types!.get(typename)!.kind === 'UNION'),\n    'Invalid Abstract type: The type `' +\n      typename +\n      '` is not an Interface or Union type in the defined schema, ' +\n      'but a fragment in the GraphQL document is using it as a type condition.',\n    5\n  );\n}\n\nexport function expectValidKeyingConfig(\n  schema: SchemaIntrospector,\n  keys: KeyingConfig,\n  logger: Logger | undefined\n): void {\n  if (process.env.NODE_ENV !== 'production') {\n    for (const key in keys) {\n      if (!schema.types!.has(key)) {\n        warn(\n          'Invalid Object type: The type `' +\n            key +\n            '` is not an object in the defined schema, but the `keys` option is referencing it.',\n          20,\n          logger\n        );\n      }\n    }\n  }\n}\n\nexport function expectValidUpdatesConfig(\n  schema: SchemaIntrospector,\n  updates: UpdatesConfig,\n  logger: Logger | undefined\n): void {\n  if (process.env.NODE_ENV === 'production') {\n    return;\n  }\n\n  for (const typename in updates) {\n    if (!updates[typename]) {\n      continue;\n    } else if (!schema.types!.has(typename)) {\n      let addition = '';\n\n      if (\n        typename === 'Mutation' &&\n        schema.mutation &&\n        schema.mutation !== 'Mutation'\n      ) {\n        addition +=\n          '\\nMaybe your config should reference `' + schema.mutation + '`?';\n      } else if (\n        typename === 'Subscription' &&\n        schema.subscription &&\n        schema.subscription !== 'Subscription'\n      ) {\n        addition +=\n          '\\nMaybe your config should reference `' + schema.subscription + '`?';\n      }\n\n      return warn(\n        'Invalid updates type: The type `' +\n          typename +\n          '` is not an object in the defined schema, but the `updates` config is referencing it.' +\n          addition,\n        21,\n        logger\n      );\n    }\n\n    const fields = (schema.types!.get(typename)! as SchemaObject).fields();\n    for (const fieldName in updates[typename]!) {\n      if (!fields[fieldName]) {\n        warn(\n          'Invalid updates field: `' +\n            fieldName +\n            '` on `' +\n            typename +\n            '` is not in the defined schema, but the `updates` config is referencing it.',\n          22,\n          logger\n        );\n      }\n    }\n  }\n}\n\nfunction warnAboutResolver(name: string, logger: Logger | undefined): void {\n  warn(\n    `Invalid resolver: \\`${name}\\` is not in the defined schema, but the \\`resolvers\\` option is referencing it.`,\n    23,\n    logger\n  );\n}\n\nfunction warnAboutAbstractResolver(\n  name: string,\n  kind: 'UNION' | 'INTERFACE',\n  logger: Logger | undefined\n): void {\n  warn(\n    `Invalid resolver: \\`${name}\\` does not match to a concrete type in the schema, but the \\`resolvers\\` option is referencing it. Implement the resolver for the types that ${\n      kind === 'UNION' ? 'make up the union' : 'implement the interface'\n    } instead.`,\n    26,\n    logger\n  );\n}\n\nexport function expectValidResolversConfig(\n  schema: SchemaIntrospector,\n  resolvers: ResolverConfig,\n  logger: Logger | undefined\n): void {\n  if (process.env.NODE_ENV === 'production') {\n    return;\n  }\n\n  for (const key in resolvers) {\n    if (key === 'Query') {\n      if (schema.query) {\n        const validQueries = (\n          schema.types!.get(schema.query) as SchemaObject\n        ).fields();\n        for (const resolverQuery in resolvers.Query || {}) {\n          if (!validQueries[resolverQuery]) {\n            warnAboutResolver('Query.' + resolverQuery, logger);\n          }\n        }\n      } else {\n        warnAboutResolver('Query', logger);\n      }\n    } else {\n      if (!schema.types!.has(key)) {\n        warnAboutResolver(key, logger);\n      } else if (\n        schema.types!.get(key)!.kind === 'INTERFACE' ||\n        schema.types!.get(key)!.kind === 'UNION'\n      ) {\n        warnAboutAbstractResolver(\n          key,\n          schema.types!.get(key)!.kind as 'INTERFACE' | 'UNION',\n          logger\n        );\n      } else {\n        const validTypeProperties = (\n          schema.types!.get(key) as SchemaObject\n        ).fields();\n        for (const resolverProperty in resolvers[key] || {}) {\n          if (!validTypeProperties[resolverProperty]) {\n            warnAboutResolver(key + '.' + resolverProperty, logger);\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function expectValidOptimisticMutationsConfig(\n  schema: SchemaIntrospector,\n  optimisticMutations: OptimisticMutationConfig,\n  logger: Logger | undefined\n): void {\n  if (process.env.NODE_ENV === 'production') {\n    return;\n  }\n\n  if (schema.mutation) {\n    const validMutations = (\n      schema.types!.get(schema.mutation) as SchemaObject\n    ).fields();\n    for (const mutation in optimisticMutations) {\n      if (!validMutations[mutation]) {\n        warn(\n          `Invalid optimistic mutation field: \\`${mutation}\\` is not a mutation field in the defined schema, but the \\`optimistic\\` option is referencing it.`,\n          24,\n          logger\n        );\n      }\n    }\n  }\n}\n", "import { stringifyVariables } from '@urql/core';\nimport type { FieldArgs, FieldInfo, KeyInfo } from '../types';\n\nexport const keyOfField = (fieldName: string, args?: FieldArgs) =>\n  args ? `${fieldName}(${stringifyVariables(args)})` : fieldName;\n\nexport const joinKeys = (parentKey: string, key: string) =>\n  `${parentKey}.${key}`;\n\nexport const fieldInfoOfKey = (fieldKey: string): FieldInfo => {\n  const parenIndex = fieldKey.indexOf('(');\n  if (parenIndex > -1) {\n    return {\n      fieldKey,\n      fieldName: fieldKey.slice(0, parenIndex),\n      arguments: JSON.parse(fieldKey.slice(parenIndex + 1, -1)),\n    };\n  } else {\n    return {\n      fieldKey,\n      fieldName: fieldKey,\n      arguments: null,\n    };\n  }\n};\n\nexport const serializeKeys = (entityKey: string, fieldKey: string) =>\n  `${entityKey.replace(/\\./g, '%2e')}.${fieldKey}`;\n\nexport const deserializeKeyInfo = (key: string): KeyInfo => {\n  const dotIndex = key.indexOf('.');\n  const entityKey = key.slice(0, dotIndex).replace(/%2e/g, '.');\n  const fieldKey = key.slice(dotIndex + 1);\n  return { entityKey, fieldKey };\n};\n", "import { stringifyVariables } from '@urql/core';\n\nimport type {\n  Link,\n  EntityField,\n  FieldInfo,\n  StorageAdapter,\n  SerializedEntries,\n  Dependencies,\n  OperationType,\n  DataField,\n  Data,\n} from '../types';\n\nimport {\n  serializeKeys,\n  deserializeKeyInfo,\n  fieldInfoOfKey,\n  joinKeys,\n} from './keys';\n\nimport { invariant, currentDebugStack } from '../helpers/help';\n\ntype Dict<T> = Record<string, T>;\ntype KeyMap<T> = Map<string, T>;\ntype OperationMap<T> = Map<number, T>;\n\ninterface NodeMap<T> {\n  optimistic: OperationMap<KeyMap<Dict<T | undefined>>>;\n  base: KeyMap<Dict<T>>;\n}\n\nexport interface InMemoryData {\n  /** Flag for whether the data is waiting for hydration */\n  hydrating: boolean;\n  /** Flag for whether deferred tasks have been scheduled yet */\n  defer: boolean;\n  /** A list of entities that have been flagged for gargabe collection since no references to them are left */\n  gc: Set<string>;\n  /** A list of entity+field keys that will be persisted */\n  persist: Set<string>;\n  /** The API's \"Query\" typename which is needed to filter dependencies */\n  queryRootKey: string;\n  /** Number of references to each entity (except \"Query\") */\n  refCount: KeyMap<number>;\n  /** A map of entity fields (key-value entries per entity) */\n  records: NodeMap<EntityField>;\n  /** A map of entity links which are connections from one entity to another (key-value entries per entity) */\n  links: NodeMap<Link>;\n  /** A map of typename to a list of entity-keys belonging to said type */\n  types: Map<string, Set<string>>;\n  /** A set of Query operation keys that are in-flight and deferred/streamed */\n  deferredKeys: Set<number>;\n  /** A set of Query operation keys that are in-flight and awaiting a result */\n  commutativeKeys: Set<number>;\n  /** A set of Query operation keys that have been written to */\n  dirtyKeys: Set<number>;\n  /** The order of optimistic layers */\n  optimisticOrder: number[];\n  /** This may be a persistence adapter that will receive changes in a batch */\n  storage: StorageAdapter | null;\n}\n\nlet currentOwnership: null | WeakSet<any> = null;\nlet currentDataMapping: null | WeakMap<any, any> = null;\nlet currentData: null | InMemoryData = null;\nlet currentOptimisticKey: null | number = null;\nexport let currentOperation: null | OperationType = null;\nexport let currentDependencies: null | Dependencies = null;\nexport let currentForeignData = false;\nexport let currentOptimistic = false;\n\nexport function makeData(data: DataField | void, isArray?: false): Data;\nexport function makeData(data: DataField | void, isArray: true): DataField[];\n\n/** Creates a new data object unless it's been created in this data run */\nexport function makeData(data?: DataField | void, isArray?: boolean) {\n  let newData: Data | Data[] | undefined;\n  if (data) {\n    if (currentOwnership!.has(data)) return data;\n    newData = currentDataMapping!.get(data) as any;\n  }\n\n  if (newData == null) {\n    newData = (isArray ? [] : {}) as any;\n  }\n\n  if (data) {\n    currentDataMapping!.set(data, newData);\n  }\n\n  currentOwnership!.add(newData);\n  return newData;\n}\n\nexport const ownsData = (data?: Data): boolean =>\n  !!data && currentOwnership!.has(data);\n\n/** Before reading or writing the global state needs to be initialised */\nexport const initDataState = (\n  operationType: OperationType,\n  data: InMemoryData,\n  layerKey?: number | null,\n  isOptimistic?: boolean,\n  isForeignData?: boolean\n) => {\n  currentOwnership = new WeakSet();\n  currentDataMapping = new WeakMap();\n  currentOperation = operationType;\n  currentData = data;\n  currentDependencies = new Set();\n  currentOptimistic = !!isOptimistic;\n  currentForeignData = !!isForeignData;\n  if (process.env.NODE_ENV !== 'production') {\n    currentDebugStack.length = 0;\n  }\n\n  if (!layerKey) {\n    currentOptimisticKey = null;\n  } else if (currentOperation === 'read') {\n    // We don't create new layers for read operations and instead simply\n    // apply the currently available layer, if any\n    currentOptimisticKey = layerKey;\n  } else if (\n    isOptimistic ||\n    data.hydrating ||\n    data.optimisticOrder.length > 1\n  ) {\n    // If this operation isn't optimistic and we see it for the first time,\n    // then it must've been optimistic in the past, so we can proactively\n    // clear the optimistic data before writing\n    if (!isOptimistic && !data.commutativeKeys.has(layerKey)) {\n      reserveLayer(data, layerKey);\n    } else if (isOptimistic) {\n      if (\n        data.optimisticOrder.indexOf(layerKey) !== -1 &&\n        !data.commutativeKeys.has(layerKey)\n      ) {\n        data.optimisticOrder.splice(data.optimisticOrder.indexOf(layerKey), 1);\n      }\n      // NOTE: This optimally shouldn't happen as it implies that an optimistic\n      // write is being performed after a concrete write.\n      data.commutativeKeys.delete(layerKey);\n    }\n\n    // An optimistic update of a mutation may force an optimistic layer,\n    // or this Query update may be applied optimistically since it's part\n    // of a commutative chain\n    currentOptimisticKey = layerKey;\n    createLayer(data, layerKey);\n  } else {\n    // Otherwise we don't create an optimistic layer and clear the\n    // operation's one if it already exists\n    // We also do this when only one layer exists to avoid having to squash\n    // any layers at the end of writing this layer\n    currentOptimisticKey = null;\n    deleteLayer(data, layerKey);\n  }\n};\n\n/** Reset the data state after read/write is complete */\nexport const clearDataState = () => {\n  // NOTE: This is only called to check for the invariant to pass\n  if (process.env.NODE_ENV !== 'production') {\n    getCurrentDependencies();\n  }\n\n  const data = currentData!;\n  const layerKey = currentOptimisticKey;\n  currentOptimistic = false;\n  currentOptimisticKey = null;\n\n  // Determine whether the current operation has been a commutative layer\n  if (\n    !data.hydrating &&\n    layerKey &&\n    data.optimisticOrder.indexOf(layerKey) > -1\n  ) {\n    // Squash all layers in reverse order (low priority upwards) that have\n    // been written already\n    let i = data.optimisticOrder.length;\n    while (\n      --i >= 0 &&\n      data.dirtyKeys.has(data.optimisticOrder[i]) &&\n      data.commutativeKeys.has(data.optimisticOrder[i])\n    )\n      squashLayer(data.optimisticOrder[i]);\n  }\n\n  currentOwnership = null;\n  currentDataMapping = null;\n  currentOperation = null;\n  currentData = null;\n  currentDependencies = null;\n  if (process.env.NODE_ENV !== 'production') {\n    currentDebugStack.length = 0;\n  }\n\n  if (process.env.NODE_ENV !== 'test') {\n    // Schedule deferred tasks if we haven't already, and if either a persist or GC run\n    // are likely to be needed\n    if (!data.defer && (data.storage || !data.optimisticOrder.length)) {\n      data.defer = true;\n      setTimeout(() => {\n        initDataState('read', data, null);\n        gc();\n        persistData();\n        clearDataState();\n        data.defer = false;\n      });\n    }\n  }\n};\n\n/** Initialises then resets the data state, which may squash this layer if necessary */\nexport const noopDataState = (\n  data: InMemoryData,\n  layerKey: number | null,\n  isOptimistic?: boolean\n) => {\n  if (layerKey && !isOptimistic) data.deferredKeys.delete(layerKey);\n  initDataState('write', data, layerKey, isOptimistic);\n  clearDataState();\n};\n\n/** As we're writing, we keep around all the records and links we've read or have written to */\nexport const getCurrentDependencies = (): Dependencies => {\n  invariant(\n    currentDependencies !== null,\n    'Invalid Cache call: The cache may only be accessed or mutated during' +\n      'operations like write or query, or as part of its resolvers, updaters, ' +\n      'or optimistic configs.',\n    2\n  );\n\n  return currentDependencies;\n};\n\nconst DEFAULT_EMPTY_SET = new Set<string>();\nexport const make = (queryRootKey: string): InMemoryData => ({\n  hydrating: false,\n  defer: false,\n  gc: new Set(),\n  types: new Map(),\n  persist: new Set(),\n  queryRootKey,\n  refCount: new Map(),\n  links: {\n    optimistic: new Map(),\n    base: new Map(),\n  },\n  records: {\n    optimistic: new Map(),\n    base: new Map(),\n  },\n  deferredKeys: new Set(),\n  commutativeKeys: new Set(),\n  dirtyKeys: new Set(),\n  optimisticOrder: [],\n  storage: null,\n});\n\n/** Adds a node value to a NodeMap (taking optimistic values into account */\nconst setNode = <T>(\n  map: NodeMap<T>,\n  entityKey: string,\n  fieldKey: string,\n  value: T\n) => {\n  if (process.env.NODE_ENV !== 'production') {\n    invariant(\n      currentOperation !== 'read',\n      'Invalid Cache write: You may not write to the cache during cache reads. ' +\n        ' Accesses to `cache.writeFragment`, `cache.updateQuery`, and `cache.link` may ' +\n        ' not be made inside `resolvers` for instance.',\n      27\n    );\n  }\n\n  // Optimistic values are written to a map in the optimistic dict\n  // All other values are written to the base map\n  const keymap: KeyMap<Dict<T | undefined>> = currentOptimisticKey\n    ? map.optimistic.get(currentOptimisticKey)!\n    : map.base;\n\n  // On the map itself we get or create the entity as a dict\n  let entity = keymap.get(entityKey) as Dict<T | undefined>;\n  if (entity === undefined) {\n    keymap.set(entityKey, (entity = Object.create(null)));\n  }\n\n  // If we're setting undefined we delete the node's entry\n  // On optimistic layers we actually set undefined so it can\n  // override the base value\n  if (value === undefined && !currentOptimisticKey) {\n    delete entity[fieldKey];\n  } else {\n    entity[fieldKey] = value;\n  }\n};\n\n/** Gets a node value from a NodeMap (taking optimistic values into account */\nconst getNode = <T>(\n  map: NodeMap<T>,\n  entityKey: string,\n  fieldKey: string\n): T | undefined => {\n  let node: Dict<T | undefined> | undefined;\n  // A read may be initialised to skip layers until its own, which is useful for\n  // reading back written data. It won't skip over optimistic layers however\n  let skip =\n    !currentOptimistic &&\n    currentOperation === 'read' &&\n    currentOptimisticKey &&\n    currentData!.commutativeKeys.has(currentOptimisticKey);\n  // This first iterates over optimistic layers (in order)\n  for (let i = 0, l = currentData!.optimisticOrder.length; i < l; i++) {\n    const layerKey = currentData!.optimisticOrder[i];\n    const optimistic = map.optimistic.get(layerKey);\n    // If we're reading starting from a specific layer, we skip until a match\n    skip = skip && layerKey !== currentOptimisticKey;\n    // If the node and node value exists it is returned, including undefined\n    if (\n      optimistic &&\n      (!skip || !currentData!.commutativeKeys.has(layerKey)) &&\n      (!currentOptimistic ||\n        currentOperation === 'write' ||\n        currentData!.commutativeKeys.has(layerKey)) &&\n      (node = optimistic.get(entityKey)) !== undefined &&\n      fieldKey in node\n    ) {\n      return node[fieldKey];\n    }\n  }\n\n  // Otherwise we read the non-optimistic base value\n  node = map.base.get(entityKey);\n  return node !== undefined ? node[fieldKey] : undefined;\n};\n\n/** Adjusts the reference count of an entity on a refCount dict by \"by\" and updates the gc */\nconst updateRCForEntity = (entityKey: string, by: number): void => {\n  // Retrieve the reference count and adjust it by \"by\"\n  const count = currentData!.refCount.get(entityKey) || 0;\n  const newCount = count + by > 0 ? count + by : 0;\n  currentData!.refCount.set(entityKey, newCount);\n  // Add it to the garbage collection batch if it needs to be deleted or remove it\n  // from the batch if it needs to be kept\n  if (!newCount) currentData!.gc.add(entityKey);\n  else if (!count && newCount) currentData!.gc.delete(entityKey);\n};\n\n/** Adjusts the reference counts of all entities of a link on a refCount dict by \"by\" and updates the gc */\nconst updateRCForLink = (link: Link | undefined, by: number): void => {\n  if (Array.isArray(link)) {\n    for (let i = 0, l = link.length; i < l; i++) updateRCForLink(link[i], by);\n  } else if (typeof link === 'string') {\n    updateRCForEntity(link, by);\n  }\n};\n\n/** Writes all parsed FieldInfo objects of a given node dict to a given array if it hasn't been seen */\nconst extractNodeFields = <T>(\n  fieldInfos: FieldInfo[],\n  seenFieldKeys: Set<string>,\n  node: Dict<T> | undefined\n): void => {\n  if (node !== undefined) {\n    for (const fieldKey in node) {\n      if (!seenFieldKeys.has(fieldKey)) {\n        // If the node hasn't been seen the serialized fieldKey is turnt back into\n        // a rich FieldInfo object that also contains the field's name and arguments\n        fieldInfos.push(fieldInfoOfKey(fieldKey));\n        seenFieldKeys.add(fieldKey);\n      }\n    }\n  }\n};\n\n/** Writes all parsed FieldInfo objects of all nodes in a NodeMap to a given array */\nconst extractNodeMapFields = <T>(\n  fieldInfos: FieldInfo[],\n  seenFieldKeys: Set<string>,\n  entityKey: string,\n  map: NodeMap<T>\n) => {\n  // Extracts FieldInfo for the entity in the base map\n  extractNodeFields(fieldInfos, seenFieldKeys, map.base.get(entityKey));\n\n  // Then extracts FieldInfo for the entity from the optimistic maps\n  for (let i = 0, l = currentData!.optimisticOrder.length; i < l; i++) {\n    const optimistic = map.optimistic.get(currentData!.optimisticOrder[i]);\n    if (optimistic !== undefined) {\n      extractNodeFields(fieldInfos, seenFieldKeys, optimistic.get(entityKey));\n    }\n  }\n};\n\n/** Garbage collects all entities that have been marked as having no references */\nexport const gc = () => {\n  // If we're currently awaiting deferred results, abort GC run\n  if (currentData!.optimisticOrder.length) return;\n\n  // Iterate over all entities that have been marked for deletion\n  // Entities have been marked for deletion in `updateRCForEntity` if\n  // their reference count dropped to 0\n  for (const entityKey of currentData!.gc.keys()) {\n    // Remove the current key from the GC batch\n    currentData!.gc.delete(entityKey);\n\n    // Check first whether the entity has any references,\n    // if so, we skip it from the GC run\n    const rc = currentData!.refCount.get(entityKey) || 0;\n    if (rc > 0) continue;\n\n    const record = currentData!.records.base.get(entityKey);\n    // Delete the reference count, and delete the entity from the GC batch\n    currentData!.refCount.delete(entityKey);\n    currentData!.records.base.delete(entityKey);\n\n    const typename = (record && record.__typename) as string | undefined;\n    if (typename) {\n      const type = currentData!.types.get(typename);\n      if (type) type.delete(entityKey);\n    }\n\n    const linkNode = currentData!.links.base.get(entityKey);\n    if (linkNode) {\n      currentData!.links.base.delete(entityKey);\n      for (const fieldKey in linkNode) updateRCForLink(linkNode[fieldKey], -1);\n    }\n  }\n};\n\nconst updateDependencies = (entityKey: string, fieldKey?: string) => {\n  if (entityKey !== currentData!.queryRootKey) {\n    currentDependencies!.add(entityKey);\n  } else if (fieldKey !== undefined && fieldKey !== '__typename') {\n    currentDependencies!.add(joinKeys(entityKey, fieldKey));\n  }\n};\n\nconst updatePersist = (entityKey: string, fieldKey: string) => {\n  if (!currentOptimistic && currentData!.storage) {\n    currentData!.persist.add(serializeKeys(entityKey, fieldKey));\n  }\n};\n\n/** Reads an entity's field (a \"record\") from data */\nexport const readRecord = (\n  entityKey: string,\n  fieldKey: string\n): EntityField => {\n  updateDependencies(entityKey, fieldKey);\n  return getNode(currentData!.records, entityKey, fieldKey);\n};\n\n/** Reads an entity's link from data */\nexport const readLink = (\n  entityKey: string,\n  fieldKey: string\n): Link | undefined => {\n  updateDependencies(entityKey, fieldKey);\n  return getNode(currentData!.links, entityKey, fieldKey);\n};\n\nexport const getEntitiesForType = (typename: string): Set<string> =>\n  currentData!.types.get(typename) || DEFAULT_EMPTY_SET;\n\nexport const writeType = (typename: string, entityKey: string) => {\n  const existingTypes = currentData!.types.get(typename);\n  if (!existingTypes) {\n    const typeSet = new Set<string>();\n    typeSet.add(entityKey);\n    currentData!.types.set(typename, typeSet);\n  } else {\n    existingTypes.add(entityKey);\n  }\n};\n\n/** Writes an entity's field (a \"record\") to data */\nexport const writeRecord = (\n  entityKey: string,\n  fieldKey: string,\n  value?: EntityField\n) => {\n  updateDependencies(entityKey, fieldKey);\n  updatePersist(entityKey, fieldKey);\n  setNode(currentData!.records, entityKey, fieldKey, value);\n};\n\nexport const hasField = (entityKey: string, fieldKey: string): boolean =>\n  readRecord(entityKey, fieldKey) !== undefined ||\n  readLink(entityKey, fieldKey) !== undefined;\n\n/** Writes an entity's link to data */\nexport const writeLink = (\n  entityKey: string,\n  fieldKey: string,\n  link?: Link | undefined\n) => {\n  // Retrieve the link NodeMap from either an optimistic or the base layer\n  const links = currentOptimisticKey\n    ? currentData!.links.optimistic.get(currentOptimisticKey)\n    : currentData!.links.base;\n  // Update the reference count for the link\n  if (!currentOptimisticKey) {\n    const entityLinks = links && links.get(entityKey);\n    updateRCForLink(entityLinks && entityLinks[fieldKey], -1);\n    updateRCForLink(link, 1);\n  }\n  // Update persistence batch and dependencies\n  updateDependencies(entityKey, fieldKey);\n  updatePersist(entityKey, fieldKey);\n  // Update the link\n  setNode(currentData!.links, entityKey, fieldKey, link);\n};\n\n/** Reserves an optimistic layer and preorders it */\nexport const reserveLayer = (\n  data: InMemoryData,\n  layerKey: number,\n  hasNext?: boolean\n) => {\n  // Find the current index for the layer, and remove it from\n  // the order if it exists already\n  let index = data.optimisticOrder.indexOf(layerKey);\n  if (index > -1) data.optimisticOrder.splice(index, 1);\n\n  if (hasNext) {\n    data.deferredKeys.add(layerKey);\n    // If the layer has future results then we'll move it past any layer that's\n    // still empty, so currently pending operations will take precedence over it\n    for (\n      index = index > -1 ? index : 0;\n      index < data.optimisticOrder.length &&\n      !data.deferredKeys.has(data.optimisticOrder[index]) &&\n      (!data.dirtyKeys.has(data.optimisticOrder[index]) ||\n        !data.commutativeKeys.has(data.optimisticOrder[index]));\n      index++\n    );\n  } else {\n    data.deferredKeys.delete(layerKey);\n    // Protect optimistic layers from being turned into non-optimistic layers\n    // while preserving optimistic data\n    if (index > -1 && !data.commutativeKeys.has(layerKey))\n      clearLayer(data, layerKey);\n    index = 0;\n  }\n\n  // Register the layer with the deferred or \"top\" index and\n  // mark it as commutative\n  data.optimisticOrder.splice(index, 0, layerKey);\n  data.commutativeKeys.add(layerKey);\n};\n\n/** Checks whether a given layer exists */\nexport const hasLayer = (data: InMemoryData, layerKey: number) =>\n  data.commutativeKeys.has(layerKey) ||\n  data.optimisticOrder.indexOf(layerKey) > -1;\n\n/** Creates an optimistic layer of links and records */\nconst createLayer = (data: InMemoryData, layerKey: number) => {\n  if (data.optimisticOrder.indexOf(layerKey) === -1) {\n    data.optimisticOrder.unshift(layerKey);\n  }\n\n  if (!data.dirtyKeys.has(layerKey)) {\n    data.dirtyKeys.add(layerKey);\n    data.links.optimistic.set(layerKey, new Map());\n    data.records.optimistic.set(layerKey, new Map());\n  }\n};\n\n/** Clears all links and records of an optimistic layer */\nconst clearLayer = (data: InMemoryData, layerKey: number) => {\n  if (data.dirtyKeys.has(layerKey)) {\n    data.dirtyKeys.delete(layerKey);\n    data.records.optimistic.delete(layerKey);\n    data.links.optimistic.delete(layerKey);\n    data.deferredKeys.delete(layerKey);\n  }\n};\n\n/** Deletes links and records of an optimistic layer, and the layer itself */\nconst deleteLayer = (data: InMemoryData, layerKey: number) => {\n  const index = data.optimisticOrder.indexOf(layerKey);\n  if (index > -1) {\n    data.optimisticOrder.splice(index, 1);\n    data.commutativeKeys.delete(layerKey);\n  }\n\n  clearLayer(data, layerKey);\n};\n\n/** Merges an optimistic layer of links and records into the base data */\nconst squashLayer = (layerKey: number) => {\n  // Hide current dependencies from squashing operations\n  const previousDependencies = currentDependencies;\n  currentDependencies = new Set();\n  currentOperation = 'write';\n\n  const links = currentData!.links.optimistic.get(layerKey);\n  if (links) {\n    for (const entry of links.entries()) {\n      const entityKey = entry[0];\n      const keyMap = entry[1];\n      for (const fieldKey in keyMap)\n        writeLink(entityKey, fieldKey, keyMap[fieldKey]);\n    }\n  }\n\n  const records = currentData!.records.optimistic.get(layerKey);\n  if (records) {\n    for (const entry of records.entries()) {\n      const entityKey = entry[0];\n      const keyMap = entry[1];\n      for (const fieldKey in keyMap)\n        writeRecord(entityKey, fieldKey, keyMap[fieldKey]);\n    }\n  }\n\n  currentDependencies = previousDependencies;\n  deleteLayer(currentData!, layerKey);\n};\n\n/** Return an array of FieldInfo (info on all the fields and their arguments) for a given entity */\nexport const inspectFields = (entityKey: string): FieldInfo[] => {\n  const { links, records } = currentData!;\n  const fieldInfos: FieldInfo[] = [];\n  const seenFieldKeys: Set<string> = new Set();\n  // Update dependencies\n  updateDependencies(entityKey);\n  // Extract FieldInfos to the fieldInfos array for links and records\n  // This also deduplicates by keeping track of fieldKeys in the seenFieldKeys Set\n  extractNodeMapFields(fieldInfos, seenFieldKeys, entityKey, links);\n  extractNodeMapFields(fieldInfos, seenFieldKeys, entityKey, records);\n  return fieldInfos;\n};\n\nexport const persistData = () => {\n  if (currentData!.storage) {\n    currentOptimistic = true;\n    currentOperation = 'read';\n    const entries: SerializedEntries = {};\n    for (const key of currentData!.persist.keys()) {\n      const { entityKey, fieldKey } = deserializeKeyInfo(key);\n      let x: void | Link | EntityField;\n      if ((x = readLink(entityKey, fieldKey)) !== undefined) {\n        entries[key] = `:${stringifyVariables(x)}`;\n      } else if ((x = readRecord(entityKey, fieldKey)) !== undefined) {\n        entries[key] = stringifyVariables(x);\n      } else {\n        entries[key] = undefined;\n      }\n    }\n\n    currentOptimistic = false;\n    currentData!.storage.writeData(entries);\n    currentData!.persist.clear();\n  }\n};\n\nexport const hydrateData = (\n  data: InMemoryData,\n  storage: StorageAdapter,\n  entries: SerializedEntries\n) => {\n  initDataState('write', data, null);\n\n  for (const key in entries) {\n    const value = entries[key];\n    if (value !== undefined) {\n      const { entityKey, fieldKey } = deserializeKeyInfo(key);\n      if (value[0] === ':') {\n        if (readLink(entityKey, fieldKey) === undefined)\n          writeLink(entityKey, fieldKey, JSON.parse(value.slice(1)));\n      } else {\n        if (readRecord(entityKey, fieldKey) === undefined)\n          writeRecord(entityKey, fieldKey, JSON.parse(value));\n      }\n    }\n  }\n\n  data.storage = storage;\n  data.hydrating = false;\n  clearDataState();\n};\n", "import type { CombinedError, ErrorLike, FormattedNode } from '@urql/core';\n\nimport type {\n  FieldNode,\n  InlineFragmentNode,\n  FragmentDefinitionNode,\n} from '@0no-co/graphql.web';\nimport { Kind } from '@0no-co/graphql.web';\n\nimport type { SelectionSet } from '../ast';\nimport {\n  isDeferred,\n  getTypeCondition,\n  getSelectionSet,\n  getName,\n  isOptional,\n} from '../ast';\n\nimport { warn, pushDebugNode, popDebugNode } from '../helpers/help';\nimport { hasField, currentOperation, currentOptimistic } from '../store/data';\nimport { keyOfField } from '../store/keys';\nimport type { Store } from '../store/store';\n\nimport { getFieldArguments, shouldInclude, isInterfaceOfType } from '../ast';\n\nimport type {\n  Fragments,\n  Variables,\n  DataField,\n  NullArray,\n  Link,\n  Entity,\n  Data,\n  Logger,\n} from '../types';\n\nexport interface Context {\n  store: Store;\n  variables: Variables;\n  fragments: Fragments;\n  parentTypeName: string;\n  parentKey: string;\n  parentFieldKey: string;\n  parent: Data;\n  fieldName: string;\n  error: ErrorLike | undefined;\n  partial: boolean;\n  hasNext: boolean;\n  optimistic: boolean;\n  __internal: {\n    path: Array<string | number>;\n    errorMap: { [path: string]: ErrorLike } | undefined;\n  };\n}\n\nexport let contextRef: Context | null = null;\nexport let deferRef = false;\nexport let optionalRef: boolean | undefined = undefined;\n\n// Checks whether the current data field is a cache miss because of a GraphQLError\nexport const getFieldError = (ctx: Context): ErrorLike | undefined =>\n  ctx.__internal.path.length > 0 && ctx.__internal.errorMap\n    ? ctx.__internal.errorMap[ctx.__internal.path.join('.')]\n    : undefined;\n\nexport const makeContext = (\n  store: Store,\n  variables: Variables,\n  fragments: Fragments,\n  typename: string,\n  entityKey: string,\n  error: CombinedError | undefined\n): Context => {\n  const ctx: Context = {\n    store,\n    variables,\n    fragments,\n    parent: { __typename: typename },\n    parentTypeName: typename,\n    parentKey: entityKey,\n    parentFieldKey: '',\n    fieldName: '',\n    error: undefined,\n    partial: false,\n    hasNext: false,\n    optimistic: currentOptimistic,\n    __internal: {\n      path: [],\n      errorMap: undefined,\n    },\n  };\n\n  if (error && error.graphQLErrors) {\n    for (let i = 0; i < error.graphQLErrors.length; i++) {\n      const graphQLError = error.graphQLErrors[i];\n      if (graphQLError.path && graphQLError.path.length) {\n        if (!ctx.__internal.errorMap)\n          ctx.__internal.errorMap = Object.create(null);\n        ctx.__internal.errorMap![graphQLError.path.join('.')] = graphQLError;\n      }\n    }\n  }\n\n  return ctx;\n};\n\nexport const updateContext = (\n  ctx: Context,\n  data: Data,\n  typename: string,\n  entityKey: string,\n  fieldKey: string,\n  fieldName: string\n) => {\n  contextRef = ctx;\n  ctx.parent = data;\n  ctx.parentTypeName = typename;\n  ctx.parentKey = entityKey;\n  ctx.parentFieldKey = fieldKey;\n  ctx.fieldName = fieldName;\n  ctx.error = getFieldError(ctx);\n};\n\nconst isFragmentHeuristicallyMatching = (\n  node: FormattedNode<InlineFragmentNode | FragmentDefinitionNode>,\n  typename: void | string,\n  entityKey: string,\n  vars: Variables,\n  logger?: Logger\n) => {\n  if (!typename) return false;\n  const typeCondition = getTypeCondition(node);\n  if (!typeCondition || typename === typeCondition) return true;\n\n  warn(\n    'Heuristic Fragment Matching: A fragment is trying to match against the `' +\n      typename +\n      '` type, ' +\n      'but the type condition is `' +\n      typeCondition +\n      '`. Since GraphQL allows for interfaces `' +\n      typeCondition +\n      '` may be an ' +\n      'interface.\\nA schema needs to be defined for this match to be deterministic, ' +\n      'otherwise the fragment will be matched heuristically!',\n    16,\n    logger\n  );\n\n  return (\n    currentOperation === 'write' ||\n    !getSelectionSet(node).some(node => {\n      if (node.kind !== Kind.FIELD) return false;\n      const fieldKey = keyOfField(getName(node), getFieldArguments(node, vars));\n      return !hasField(entityKey, fieldKey);\n    })\n  );\n};\n\ninterface SelectionIterator {\n  (): FormattedNode<FieldNode> | undefined;\n}\n\n// NOTE: Outside of this file, we expect `_defer` to always be reset to `false`\nexport function makeSelectionIterator(\n  typename: undefined | string,\n  entityKey: string,\n  _defer: false,\n  _optional: undefined,\n  selectionSet: FormattedNode<SelectionSet>,\n  ctx: Context\n): SelectionIterator;\n// NOTE: Inside this file we expect the state to be recursively passed on\nexport function makeSelectionIterator(\n  typename: undefined | string,\n  entityKey: string,\n  _defer: boolean,\n  _optional: undefined | boolean,\n  selectionSet: FormattedNode<SelectionSet>,\n  ctx: Context\n): SelectionIterator;\n\nexport function makeSelectionIterator(\n  typename: undefined | string,\n  entityKey: string,\n  _defer: boolean,\n  _optional: boolean | undefined,\n  selectionSet: FormattedNode<SelectionSet>,\n  ctx: Context\n): SelectionIterator {\n  let child: SelectionIterator | void;\n  let index = 0;\n\n  return function next() {\n    let node: FormattedNode<FieldNode> | undefined;\n    while (child || index < selectionSet.length) {\n      node = undefined;\n      deferRef = _defer;\n      optionalRef = _optional;\n      if (child) {\n        if ((node = child())) {\n          return node;\n        } else {\n          child = undefined;\n          if (process.env.NODE_ENV !== 'production') popDebugNode();\n        }\n      } else {\n        const select = selectionSet[index++];\n        if (!shouldInclude(select, ctx.variables)) {\n          /*noop*/\n        } else if (select.kind !== Kind.FIELD) {\n          // A fragment is either referred to by FragmentSpread or inline\n          const fragment =\n            select.kind !== Kind.INLINE_FRAGMENT\n              ? ctx.fragments[getName(select)]\n              : select;\n          if (fragment) {\n            const isMatching =\n              !fragment.typeCondition ||\n              (ctx.store.schema\n                ? isInterfaceOfType(ctx.store.schema, fragment, typename)\n                : isFragmentHeuristicallyMatching(\n                    fragment,\n                    typename,\n                    entityKey,\n                    ctx.variables,\n                    ctx.store.logger\n                  ));\n            if (isMatching) {\n              if (process.env.NODE_ENV !== 'production')\n                pushDebugNode(typename, fragment);\n              const isFragmentOptional = isOptional(select);\n              child = makeSelectionIterator(\n                typename,\n                entityKey,\n                _defer || isDeferred(select, ctx.variables),\n                isFragmentOptional !== undefined\n                  ? isFragmentOptional\n                  : _optional,\n                getSelectionSet(fragment),\n                ctx\n              );\n            }\n          }\n        } else if (currentOperation === 'write' || !select._generated) {\n          return select;\n        }\n      }\n    }\n  };\n}\n\nexport const ensureData = (x: DataField): Data | NullArray<Data> | null =>\n  x == null ? null : (x as Data | NullArray<Data>);\n\nexport const ensureLink = (store: Store, ref: Link<Entity>): Link => {\n  if (!ref) {\n    return ref || null;\n  } else if (Array.isArray(ref)) {\n    const link = new Array(ref.length);\n    for (let i = 0, l = link.length; i < l; i++)\n      link[i] = ensureLink(store, ref[i]);\n    return link;\n  }\n\n  const link = store.keyOfEntity(ref);\n  if (!link && ref && typeof ref === 'object') {\n    warn(\n      \"Can't generate a key for link(...) item.\" +\n        '\\nYou have to pass an `id` or `_id` field or create a custom `keys` config for `' +\n        ref.__typename +\n        '`.',\n      12,\n      store.logger\n    );\n  }\n\n  return link;\n};\n", "import type { FormattedNode, CombinedError } from '@urql/core';\nimport { formatDocument } from '@urql/core';\n\nimport type {\n  FieldNode,\n  DocumentNode,\n  FragmentDefinitionNode,\n} from '@0no-co/graphql.web';\n\nimport type { SelectionSet } from '../ast';\nimport {\n  getSelectionSet,\n  getName,\n  getFragmentTypeName,\n  getFieldAlias,\n  getFragments,\n  getMainOperation,\n  normalizeVariables,\n  getFieldArguments,\n  getDirectives,\n} from '../ast';\n\nimport type {\n  Variables,\n  Data,\n  DataField,\n  Link,\n  OperationRequest,\n  Dependencies,\n  Resolver,\n} from '../types';\n\nimport { joinKeys, keyOfField } from '../store/keys';\nimport type { Store } from '../store/store';\nimport * as InMemoryData from '../store/data';\nimport { warn, pushDebugNode, popDebugNode } from '../helpers/help';\n\nimport type { Context } from './shared';\nimport {\n  makeSelectionIterator,\n  ensureData,\n  makeContext,\n  updateContext,\n  getFieldError,\n  deferRef,\n  optionalRef,\n} from './shared';\n\nimport {\n  isFieldAvailableOnType,\n  isFieldNullable,\n  isListNullable,\n} from '../ast';\n\nexport interface QueryResult {\n  dependencies: Dependencies;\n  partial: boolean;\n  hasNext: boolean;\n  data: null | Data;\n}\n\n/** Reads a GraphQL query from the cache.\n * @internal\n */\nexport const __initAnd_query = (\n  store: Store,\n  request: OperationRequest,\n  data?: Data | null | undefined,\n  error?: CombinedError | undefined,\n  key?: number\n): QueryResult => {\n  InMemoryData.initDataState('read', store.data, key);\n  const result = _query(store, request, data, error);\n  InMemoryData.clearDataState();\n  return result;\n};\n\n/** Reads a GraphQL query from the cache.\n * @internal\n */\nexport const _query = (\n  store: Store,\n  request: OperationRequest,\n  input?: Data | null | undefined,\n  error?: CombinedError | undefined\n): QueryResult => {\n  const query = formatDocument(request.query);\n  const operation = getMainOperation(query);\n  const rootKey = store.rootFields[operation.operation];\n  const rootSelect = getSelectionSet(operation);\n\n  const ctx = makeContext(\n    store,\n    normalizeVariables(operation, request.variables),\n    getFragments(query),\n    rootKey,\n    rootKey,\n    error\n  );\n\n  if (process.env.NODE_ENV !== 'production') {\n    pushDebugNode(rootKey, operation);\n  }\n\n  // NOTE: This may reuse \"previous result data\" as indicated by the\n  // `originalData` argument in readRoot(). This behaviour isn't used\n  // for readSelection() however, which always produces results from\n  // scratch\n  const data =\n    rootKey !== ctx.store.rootFields['query']\n      ? readRoot(ctx, rootKey, rootSelect, input || InMemoryData.makeData())\n      : readSelection(\n          ctx,\n          rootKey,\n          rootSelect,\n          input || InMemoryData.makeData()\n        );\n\n  if (process.env.NODE_ENV !== 'production') {\n    popDebugNode();\n    InMemoryData.getCurrentDependencies();\n  }\n\n  return {\n    dependencies: InMemoryData.currentDependencies!,\n    partial: ctx.partial || !data,\n    hasNext: ctx.hasNext,\n    data: data || null,\n  };\n};\n\nconst readRoot = (\n  ctx: Context,\n  entityKey: string,\n  select: FormattedNode<SelectionSet>,\n  input: Data\n): Data => {\n  const typename = ctx.store.rootNames[entityKey]\n    ? entityKey\n    : input.__typename;\n  if (typeof typename !== 'string') {\n    return input;\n  }\n\n  const iterate = makeSelectionIterator(\n    entityKey,\n    entityKey,\n    false,\n    undefined,\n    select,\n    ctx\n  );\n\n  let node: FormattedNode<FieldNode> | void;\n  let hasChanged = InMemoryData.currentForeignData;\n  const output = InMemoryData.makeData(input);\n  while ((node = iterate())) {\n    const fieldAlias = getFieldAlias(node);\n    const fieldValue = input[fieldAlias];\n    // Add the current alias to the walked path before processing the field's value\n    ctx.__internal.path.push(fieldAlias);\n    // We temporarily store the data field in here, but undefined\n    // means that the value is missing from the cache\n    let dataFieldValue: void | DataField;\n    if (node.selectionSet && fieldValue !== null) {\n      dataFieldValue = readRootField(\n        ctx,\n        getSelectionSet(node),\n        ensureData(fieldValue)\n      );\n    } else {\n      dataFieldValue = fieldValue;\n    }\n\n    // Check for any referential changes in the field's value\n    hasChanged = hasChanged || dataFieldValue !== fieldValue;\n    if (dataFieldValue !== undefined) output[fieldAlias] = dataFieldValue!;\n\n    // After processing the field, remove the current alias from the path again\n    ctx.__internal.path.pop();\n  }\n\n  return hasChanged ? output : input;\n};\n\nconst readRootField = (\n  ctx: Context,\n  select: FormattedNode<SelectionSet>,\n  originalData: Link<Data>\n): Link<Data> => {\n  if (Array.isArray(originalData)) {\n    const newData = new Array(originalData.length);\n    let hasChanged = InMemoryData.currentForeignData;\n    for (let i = 0, l = originalData.length; i < l; i++) {\n      // Add the current index to the walked path before reading the field's value\n      ctx.__internal.path.push(i);\n      // Recursively read the root field's value\n      newData[i] = readRootField(ctx, select, originalData[i]);\n      hasChanged = hasChanged || newData[i] !== originalData[i];\n      // After processing the field, remove the current index from the path\n      ctx.__internal.path.pop();\n    }\n\n    return hasChanged ? newData : originalData;\n  } else if (originalData === null) {\n    return null;\n  }\n\n  // Write entity to key that falls back to the given parentFieldKey\n  const entityKey = ctx.store.keyOfEntity(originalData);\n  if (entityKey !== null) {\n    // We assume that since this is used for result data this can never be undefined,\n    // since the result data has already been written to the cache\n    return readSelection(ctx, entityKey, select, originalData) || null;\n  } else {\n    return readRoot(ctx, originalData.__typename, select, originalData);\n  }\n};\n\nexport const _queryFragment = (\n  store: Store,\n  query: FormattedNode<DocumentNode>,\n  entity: Partial<Data> | string,\n  variables?: Variables,\n  fragmentName?: string\n): Data | null => {\n  const fragments = getFragments(query);\n\n  let fragment: FormattedNode<FragmentDefinitionNode>;\n  if (fragmentName) {\n    fragment = fragments[fragmentName]!;\n    if (!fragment) {\n      warn(\n        'readFragment(...) was called with a fragment name that does not exist.\\n' +\n          'You provided ' +\n          fragmentName +\n          ' but could only find ' +\n          Object.keys(fragments).join(', ') +\n          '.',\n        6,\n        store.logger\n      );\n\n      return null;\n    }\n  } else {\n    const names = Object.keys(fragments);\n    fragment = fragments[names[0]]!;\n    if (!fragment) {\n      warn(\n        'readFragment(...) was called with an empty fragment.\\n' +\n          'You have to call it with at least one fragment in your GraphQL document.',\n        6,\n        store.logger\n      );\n\n      return null;\n    }\n  }\n\n  const typename = getFragmentTypeName(fragment);\n  if (typeof entity !== 'string' && !entity.__typename)\n    entity.__typename = typename;\n  const entityKey = store.keyOfEntity(entity as Data);\n  if (!entityKey) {\n    warn(\n      \"Can't generate a key for readFragment(...).\\n\" +\n        'You have to pass an `id` or `_id` field or create a custom `keys` config for `' +\n        typename +\n        '`.',\n      7,\n      store.logger\n    );\n\n    return null;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    pushDebugNode(typename, fragment);\n  }\n\n  const ctx = makeContext(\n    store,\n    variables || {},\n    fragments,\n    typename,\n    entityKey,\n    undefined\n  );\n\n  const result =\n    readSelection(\n      ctx,\n      entityKey,\n      getSelectionSet(fragment),\n      InMemoryData.makeData()\n    ) || null;\n\n  if (process.env.NODE_ENV !== 'production') {\n    popDebugNode();\n  }\n\n  return result;\n};\n\nfunction getFieldResolver(\n  directives: ReturnType<typeof getDirectives>,\n  typename: string,\n  fieldName: string,\n  ctx: Context\n): Resolver | void {\n  const resolvers = ctx.store.resolvers[typename];\n  const fieldResolver = resolvers && resolvers[fieldName];\n\n  let directiveResolver: Resolver | undefined;\n  for (const name in directives) {\n    const directiveNode = directives[name];\n    if (\n      directiveNode &&\n      name !== 'include' &&\n      name !== 'skip' &&\n      ctx.store.directives[name]\n    ) {\n      directiveResolver = ctx.store.directives[name](\n        getFieldArguments(directiveNode, ctx.variables)\n      );\n      if (process.env.NODE_ENV === 'production') return directiveResolver;\n      break;\n    }\n  }\n\n  if (fieldResolver && directiveResolver) {\n    warn(\n      `A resolver and directive is being used at \"${typename}.${fieldName}\" simultaneously. Only the directive will apply.`,\n      28,\n      ctx.store.logger\n    );\n  }\n\n  return directiveResolver || fieldResolver;\n}\n\nconst readSelection = (\n  ctx: Context,\n  key: string,\n  select: FormattedNode<SelectionSet>,\n  input: Data,\n  result?: Data\n): Data | undefined => {\n  const { store } = ctx;\n  const isQuery = key === store.rootFields.query;\n\n  const entityKey = (result && store.keyOfEntity(result)) || key;\n  if (!isQuery && !!ctx.store.rootNames[entityKey]) {\n    warn(\n      'Invalid root traversal: A selection was being read on `' +\n        entityKey +\n        '` which is an uncached root type.\\n' +\n        'The `' +\n        ctx.store.rootFields.mutation +\n        '` and `' +\n        ctx.store.rootFields.subscription +\n        '` types are special ' +\n        'Operation Root Types and cannot be read back from the cache.',\n      25,\n      store.logger\n    );\n  }\n\n  const typename = !isQuery\n    ? InMemoryData.readRecord(entityKey, '__typename') ||\n      (result && result.__typename)\n    : key;\n\n  if (typeof typename !== 'string') {\n    return;\n  } else if (result && typename !== result.__typename) {\n    warn(\n      'Invalid resolver data: The resolver at `' +\n        entityKey +\n        '` returned an ' +\n        'invalid typename that could not be reconciled with the cache.',\n      8,\n      store.logger\n    );\n\n    return;\n  }\n\n  const iterate = makeSelectionIterator(\n    typename,\n    entityKey,\n    false,\n    undefined,\n    select,\n    ctx\n  );\n\n  let hasFields = false;\n  let hasNext = false;\n  let hasChanged = InMemoryData.currentForeignData;\n  let node: FormattedNode<FieldNode> | void;\n  const hasPartials = ctx.partial;\n  const output = InMemoryData.makeData(input);\n  while ((node = iterate()) !== undefined) {\n    // Derive the needed data from our node.\n    const fieldName = getName(node);\n    const fieldArgs = getFieldArguments(node, ctx.variables);\n    const fieldAlias = getFieldAlias(node);\n    const directives = getDirectives(node);\n    const resolver = getFieldResolver(directives, typename, fieldName, ctx);\n    const fieldKey = keyOfField(fieldName, fieldArgs);\n    const key = joinKeys(entityKey, fieldKey);\n    const fieldValue = InMemoryData.readRecord(entityKey, fieldKey);\n    const resultValue = result ? result[fieldName] : undefined;\n\n    if (process.env.NODE_ENV !== 'production' && store.schema && typename) {\n      isFieldAvailableOnType(\n        store.schema,\n        typename,\n        fieldName,\n        ctx.store.logger\n      );\n    }\n\n    // Add the current alias to the walked path before processing the field's value\n    ctx.__internal.path.push(fieldAlias);\n    // We temporarily store the data field in here, but undefined\n    // means that the value is missing from the cache\n    let dataFieldValue: void | DataField = undefined;\n\n    if (fieldName === '__typename') {\n      // We directly assign the typename as it's already available\n      dataFieldValue = typename;\n    } else if (resultValue !== undefined && node.selectionSet === undefined) {\n      // The field is a scalar and can be retrieved directly from the result\n      dataFieldValue = resultValue;\n    } else if (InMemoryData.currentOperation === 'read' && resolver) {\n      // We have a resolver for this field.\n      // Prepare the actual fieldValue, so that the resolver can use it,\n      // as to avoid the user having to do `cache.resolve(parent, info.fieldKey)`\n      // only to get a scalar value.\n      let parent = output;\n      if (node.selectionSet === undefined && fieldValue !== undefined) {\n        parent = {\n          ...output,\n          [fieldAlias]: fieldValue,\n          [fieldName]: fieldValue,\n        };\n      }\n\n      // We have to update the information in context to reflect the info\n      // that the resolver will receive\n      updateContext(ctx, parent, typename, entityKey, fieldKey, fieldName);\n\n      dataFieldValue = resolver(\n        parent,\n        fieldArgs || ({} as Variables),\n        store,\n        ctx\n      );\n\n      if (node.selectionSet) {\n        // When it has a selection set we are resolving an entity with a\n        // subselection. This can either be a list or an object.\n        dataFieldValue = resolveResolverResult(\n          ctx,\n          typename,\n          fieldName,\n          key,\n          getSelectionSet(node),\n          (output[fieldAlias] !== undefined\n            ? output[fieldAlias]\n            : input[fieldAlias]) as Data,\n          dataFieldValue,\n          InMemoryData.ownsData(input)\n        );\n      }\n\n      if (\n        store.schema &&\n        dataFieldValue === null &&\n        !isFieldNullable(store.schema, typename, fieldName, ctx.store.logger)\n      ) {\n        // Special case for when null is not a valid value for the\n        // current field\n        return undefined;\n      }\n    } else if (!node.selectionSet) {\n      // The field is a scalar but isn't on the result, so it's retrieved from the cache\n      dataFieldValue = fieldValue;\n    } else if (resultValue !== undefined) {\n      // We start walking the nested resolver result here\n      dataFieldValue = resolveResolverResult(\n        ctx,\n        typename,\n        fieldName,\n        key,\n        getSelectionSet(node),\n        (output[fieldAlias] !== undefined\n          ? output[fieldAlias]\n          : input[fieldAlias]) as Data,\n        resultValue,\n        InMemoryData.ownsData(input)\n      );\n    } else {\n      // Otherwise we attempt to get the missing field from the cache\n      const link = InMemoryData.readLink(entityKey, fieldKey);\n\n      if (link !== undefined) {\n        dataFieldValue = resolveLink(\n          ctx,\n          link,\n          typename,\n          fieldName,\n          getSelectionSet(node),\n          (output[fieldAlias] !== undefined\n            ? output[fieldAlias]\n            : input[fieldAlias]) as Data,\n          InMemoryData.ownsData(input)\n        );\n      } else if (typeof fieldValue === 'object' && fieldValue !== null) {\n        // The entity on the field was invalid but can still be recovered\n        dataFieldValue = fieldValue;\n      }\n    }\n\n    // Now that dataFieldValue has been retrieved it'll be set on data\n    // If it's uncached (undefined) but nullable we can continue assembling\n    // a partial query result\n    if (\n      !deferRef &&\n      dataFieldValue === undefined &&\n      (directives.optional ||\n        (optionalRef && !directives.required) ||\n        !!getFieldError(ctx) ||\n        (store.schema &&\n          isFieldNullable(store.schema, typename, fieldName, ctx.store.logger)))\n    ) {\n      // The field is uncached or has errored, so it'll be set to null and skipped\n      ctx.partial = true;\n      dataFieldValue = null;\n    } else if (\n      dataFieldValue === null &&\n      (directives.required || optionalRef === false)\n    ) {\n      if (\n        ctx.store.logger &&\n        process.env.NODE_ENV !== 'production' &&\n        InMemoryData.currentOperation === 'read'\n      ) {\n        ctx.store.logger(\n          'debug',\n          `Got value \"null\" for required field \"${fieldName}\"${\n            fieldArgs ? ` with args ${JSON.stringify(fieldArgs)}` : ''\n          } on entity \"${entityKey}\"`\n        );\n      }\n      dataFieldValue = undefined;\n    } else {\n      hasFields = hasFields || fieldName !== '__typename';\n    }\n\n    // After processing the field, remove the current alias from the path again\n    ctx.__internal.path.pop();\n    // Check for any referential changes in the field's value\n    hasChanged = hasChanged || dataFieldValue !== input[fieldAlias];\n    if (dataFieldValue !== undefined) {\n      output[fieldAlias] = dataFieldValue;\n    } else if (deferRef) {\n      hasNext = true;\n    } else {\n      if (\n        ctx.store.logger &&\n        process.env.NODE_ENV !== 'production' &&\n        InMemoryData.currentOperation === 'read'\n      ) {\n        ctx.store.logger(\n          'debug',\n          `No value for field \"${fieldName}\"${\n            fieldArgs ? ` with args ${JSON.stringify(fieldArgs)}` : ''\n          } on entity \"${entityKey}\"`\n        );\n      }\n      // If the field isn't deferred or partial then we have to abort and also reset\n      // the partial field\n      ctx.partial = hasPartials;\n      return undefined;\n    }\n  }\n\n  ctx.partial = ctx.partial || hasPartials;\n  ctx.hasNext = ctx.hasNext || hasNext;\n  return isQuery && ctx.partial && !hasFields\n    ? undefined\n    : hasChanged\n    ? output\n    : input;\n};\n\nconst resolveResolverResult = (\n  ctx: Context,\n  typename: string,\n  fieldName: string,\n  key: string,\n  select: FormattedNode<SelectionSet>,\n  prevData: void | null | Data | Data[],\n  result: void | DataField,\n  isOwnedData: boolean\n): DataField | void => {\n  if (Array.isArray(result)) {\n    const { store } = ctx;\n    // Check whether values of the list may be null; for resolvers we assume\n    // that they can be, since it's user-provided data\n    const _isListNullable = store.schema\n      ? isListNullable(store.schema, typename, fieldName, ctx.store.logger)\n      : false;\n    const hasPartials = ctx.partial;\n    const data = InMemoryData.makeData(prevData, true);\n    let hasChanged =\n      InMemoryData.currentForeignData ||\n      !Array.isArray(prevData) ||\n      result.length !== prevData.length;\n    for (let i = 0, l = result.length; i < l; i++) {\n      // Add the current index to the walked path before reading the field's value\n      ctx.__internal.path.push(i);\n      // Recursively read resolver result\n      const childResult = resolveResolverResult(\n        ctx,\n        typename,\n        fieldName,\n        joinKeys(key, `${i}`),\n        select,\n        prevData != null ? prevData[i] : undefined,\n        result[i],\n        isOwnedData\n      );\n      // After processing the field, remove the current index from the path\n      ctx.__internal.path.pop();\n      // Check the result for cache-missed values\n      if (childResult === undefined && !_isListNullable) {\n        ctx.partial = hasPartials;\n        return undefined;\n      } else {\n        ctx.partial =\n          ctx.partial || (childResult === undefined && _isListNullable);\n        data[i] = childResult != null ? childResult : null;\n        hasChanged = hasChanged || data[i] !== prevData![i];\n      }\n    }\n\n    return hasChanged ? data : prevData;\n  } else if (result === null || result === undefined) {\n    return result;\n  } else if (isOwnedData && prevData === null) {\n    return null;\n  } else if (isDataOrKey(result)) {\n    const data = (prevData || InMemoryData.makeData(prevData)) as Data;\n    return typeof result === 'string'\n      ? readSelection(ctx, result, select, data)\n      : readSelection(ctx, key, select, data, result);\n  } else {\n    warn(\n      'Invalid resolver value: The field at `' +\n        key +\n        '` is a scalar (number, boolean, etc)' +\n        ', but the GraphQL query expects a selection set for this field.',\n      9,\n      ctx.store.logger\n    );\n\n    return undefined;\n  }\n};\n\nconst resolveLink = (\n  ctx: Context,\n  link: Link | Link[],\n  typename: string,\n  fieldName: string,\n  select: FormattedNode<SelectionSet>,\n  prevData: void | null | Data | Data[],\n  isOwnedData: boolean\n): DataField | undefined => {\n  if (Array.isArray(link)) {\n    const { store } = ctx;\n    const _isListNullable = store.schema\n      ? isListNullable(store.schema, typename, fieldName, ctx.store.logger)\n      : false;\n    const newLink = InMemoryData.makeData(prevData, true);\n    const hasPartials = ctx.partial;\n    let hasChanged =\n      InMemoryData.currentForeignData ||\n      !Array.isArray(prevData) ||\n      link.length !== prevData.length;\n    for (let i = 0, l = link.length; i < l; i++) {\n      // Add the current index to the walked path before reading the field's value\n      ctx.__internal.path.push(i);\n      // Recursively read the link\n      const childLink = resolveLink(\n        ctx,\n        link[i],\n        typename,\n        fieldName,\n        select,\n        prevData != null ? prevData[i] : undefined,\n        isOwnedData\n      );\n      // After processing the field, remove the current index from the path\n      ctx.__internal.path.pop();\n      // Check the result for cache-missed values\n      if (childLink === undefined && !_isListNullable) {\n        ctx.partial = hasPartials;\n        return undefined;\n      } else {\n        ctx.partial =\n          ctx.partial || (childLink === undefined && _isListNullable);\n        newLink[i] = childLink || null;\n        hasChanged = hasChanged || newLink[i] !== prevData![i];\n      }\n    }\n\n    return hasChanged ? newLink : (prevData as Data[]);\n  } else if (link === null || (prevData === null && isOwnedData)) {\n    return null;\n  }\n\n  return readSelection(\n    ctx,\n    link,\n    select,\n    (prevData || InMemoryData.makeData(prevData)) as Data\n  );\n};\n\nconst isDataOrKey = (x: any): x is string | Data =>\n  typeof x === 'string' ||\n  (typeof x === 'object' && typeof (x as any).__typename === 'string');\n", "import type { FormattedNode, CombinedError } from '@urql/core';\nimport { formatDocument } from '@urql/core';\n\nimport type {\n  FieldNode,\n  DocumentNode,\n  FragmentDefinitionNode,\n} from '@0no-co/graphql.web';\n\nimport type { SelectionSet } from '../ast';\nimport {\n  getFragments,\n  getMainOperation,\n  normalizeVariables,\n  getFieldArguments,\n  isFieldAvailableOnType,\n  getSelectionSet,\n  getName,\n  getFragmentTypeName,\n  getFieldAlias,\n} from '../ast';\n\nimport { invariant, warn, pushDebugNode, popDebugNode } from '../helpers/help';\n\nimport type {\n  NullArray,\n  Variables,\n  Data,\n  Link,\n  OperationRequest,\n  Dependencies,\n  EntityField,\n  OptimisticMutationResolver,\n} from '../types';\n\nimport { joinKeys, keyOfField } from '../store/keys';\nimport type { Store } from '../store/store';\nimport * as InMemoryData from '../store/data';\n\nimport type { Context } from './shared';\nimport {\n  makeSelectionIterator,\n  ensureData,\n  makeContext,\n  updateContext,\n  getFieldError,\n  deferRef,\n} from './shared';\n\nexport interface WriteResult {\n  data: null | Data;\n  dependencies: Dependencies;\n}\n\n/** Writes a GraphQL response to the cache.\n * @internal\n */\nexport const __initAnd_write = (\n  store: Store,\n  request: OperationRequest,\n  data: Data,\n  error?: CombinedError | undefined,\n  key?: number\n): WriteResult => {\n  InMemoryData.initDataState('write', store.data, key || null);\n  const result = _write(store, request, data, error);\n  InMemoryData.clearDataState();\n  return result;\n};\n\nexport const __initAnd_writeOptimistic = (\n  store: Store,\n  request: OperationRequest,\n  key: number\n): WriteResult => {\n  if (process.env.NODE_ENV !== 'production') {\n    invariant(\n      getMainOperation(request.query).operation === 'mutation',\n      'writeOptimistic(...) was called with an operation that is not a mutation.\\n' +\n        'This case is unsupported and should never occur.',\n      10\n    );\n  }\n\n  InMemoryData.initDataState('write', store.data, key, true);\n  const result = _write(store, request, {} as Data, undefined);\n  InMemoryData.clearDataState();\n  return result;\n};\n\nexport const _write = (\n  store: Store,\n  request: OperationRequest,\n  data?: Data,\n  error?: CombinedError | undefined\n) => {\n  if (process.env.NODE_ENV !== 'production') {\n    InMemoryData.getCurrentDependencies();\n  }\n\n  const query = formatDocument(request.query);\n  const operation = getMainOperation(query);\n  const result: WriteResult = {\n    data: data || InMemoryData.makeData(),\n    dependencies: InMemoryData.currentDependencies!,\n  };\n  const kind = store.rootFields[operation.operation];\n\n  const ctx = makeContext(\n    store,\n    normalizeVariables(operation, request.variables),\n    getFragments(query),\n    kind,\n    kind,\n    error\n  );\n\n  if (process.env.NODE_ENV !== 'production') {\n    pushDebugNode(kind, operation);\n  }\n\n  writeSelection(ctx, kind, getSelectionSet(operation), result.data!);\n\n  if (process.env.NODE_ENV !== 'production') {\n    popDebugNode();\n  }\n\n  return result;\n};\n\nexport const _writeFragment = (\n  store: Store,\n  query: FormattedNode<DocumentNode>,\n  data: Partial<Data>,\n  variables?: Variables,\n  fragmentName?: string\n) => {\n  const fragments = getFragments(query);\n  let fragment: FormattedNode<FragmentDefinitionNode>;\n  if (fragmentName) {\n    fragment = fragments[fragmentName]!;\n    if (!fragment) {\n      warn(\n        'writeFragment(...) was called with a fragment name that does not exist.\\n' +\n          'You provided ' +\n          fragmentName +\n          ' but could only find ' +\n          Object.keys(fragments).join(', ') +\n          '.',\n        11,\n        store.logger\n      );\n\n      return null;\n    }\n  } else {\n    const names = Object.keys(fragments);\n    fragment = fragments[names[0]]!;\n    if (!fragment) {\n      warn(\n        'writeFragment(...) was called with an empty fragment.\\n' +\n          'You have to call it with at least one fragment in your GraphQL document.',\n        11,\n        store.logger\n      );\n\n      return null;\n    }\n  }\n\n  const typename = getFragmentTypeName(fragment);\n  const dataToWrite = { __typename: typename, ...data } as Data;\n  const entityKey = store.keyOfEntity(dataToWrite);\n  if (!entityKey) {\n    return warn(\n      \"Can't generate a key for writeFragment(...) data.\\n\" +\n        'You have to pass an `id` or `_id` field or create a custom `keys` config for `' +\n        typename +\n        '`.',\n      12,\n      store.logger\n    );\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    pushDebugNode(typename, fragment);\n  }\n\n  const ctx = makeContext(\n    store,\n    variables || {},\n    fragments,\n    typename,\n    entityKey,\n    undefined\n  );\n\n  writeSelection(ctx, entityKey, getSelectionSet(fragment), dataToWrite);\n\n  if (process.env.NODE_ENV !== 'production') {\n    popDebugNode();\n  }\n};\n\nconst writeSelection = (\n  ctx: Context,\n  entityKey: undefined | string,\n  select: FormattedNode<SelectionSet>,\n  data: Data\n) => {\n  // These fields determine how we write. The `Query` root type is written\n  // like a normal entity, hence, we use `rootField` with a default to determine\n  // this. All other root names (Subscription & Mutation) are in a different\n  // write mode\n  const rootField = ctx.store.rootNames[entityKey!] || 'query';\n  const isRoot = !!ctx.store.rootNames[entityKey!];\n\n  let typename = isRoot ? entityKey : data.__typename;\n  if (!typename && entityKey && ctx.optimistic) {\n    typename = InMemoryData.readRecord(entityKey, '__typename') as\n      | string\n      | undefined;\n  }\n\n  if (!typename) {\n    warn(\n      \"Couldn't find __typename when writing.\\n\" +\n        \"If you're writing to the cache manually have to pass a `__typename` property on each entity in your data.\",\n      14,\n      ctx.store.logger\n    );\n    return;\n  } else if (!isRoot && entityKey) {\n    InMemoryData.writeRecord(entityKey, '__typename', typename);\n    InMemoryData.writeType(typename, entityKey);\n  }\n\n  const updates = ctx.store.updates[typename];\n  const iterate = makeSelectionIterator(\n    typename,\n    entityKey || typename,\n    false,\n    undefined,\n    select,\n    ctx\n  );\n\n  let node: FormattedNode<FieldNode> | void;\n  while ((node = iterate())) {\n    const fieldName = getName(node);\n    const fieldArgs = getFieldArguments(node, ctx.variables);\n    const fieldKey = keyOfField(fieldName, fieldArgs);\n    const fieldAlias = getFieldAlias(node);\n    let fieldValue = data[ctx.optimistic ? fieldName : fieldAlias];\n\n    if (\n      // Skip typename fields and assume they've already been written above\n      fieldName === '__typename' ||\n      // Fields marked as deferred that aren't defined must be skipped\n      // Otherwise, we also ignore undefined values in optimistic updaters\n      (fieldValue === undefined &&\n        (deferRef || (ctx.optimistic && rootField === 'query')))\n    ) {\n      continue;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (ctx.store.schema && typename && fieldName !== '__typename') {\n        isFieldAvailableOnType(\n          ctx.store.schema,\n          typename,\n          fieldName,\n          ctx.store.logger\n        );\n      }\n    }\n\n    // Add the current alias to the walked path before processing the field's value\n    ctx.__internal.path.push(fieldAlias);\n\n    // Execute optimistic mutation functions on root fields, or execute recursive functions\n    // that have been returned on optimistic objects\n    let resolver: OptimisticMutationResolver | undefined;\n    if (ctx.optimistic && rootField === 'mutation') {\n      resolver = ctx.store.optimisticMutations[fieldName];\n      if (!resolver) continue;\n    } else if (ctx.optimistic && typeof fieldValue === 'function') {\n      resolver = fieldValue as any;\n    }\n\n    // Execute the field-level resolver to retrieve its data\n    if (resolver) {\n      // We have to update the context to reflect up-to-date ResolveInfo\n      updateContext(\n        ctx,\n        data,\n        typename,\n        entityKey || typename,\n        fieldKey,\n        fieldName\n      );\n      fieldValue = ensureData(resolver(fieldArgs || {}, ctx.store, ctx));\n    }\n\n    if (fieldValue === undefined) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (\n          !entityKey ||\n          !InMemoryData.hasField(entityKey, fieldKey) ||\n          (ctx.optimistic && !InMemoryData.readRecord(entityKey, '__typename'))\n        ) {\n          const expected =\n            node.selectionSet === undefined\n              ? 'scalar (number, boolean, etc)'\n              : 'selection set';\n\n          warn(\n            'Invalid undefined: The field at `' +\n              fieldKey +\n              '` is `undefined`, but the GraphQL query expects a ' +\n              expected +\n              ' for this field.',\n            13,\n            ctx.store.logger\n          );\n        }\n      }\n\n      continue; // Skip this field\n    }\n\n    if (node.selectionSet) {\n      // Process the field and write links for the child entities that have been written\n      if (entityKey && rootField === 'query') {\n        const key = joinKeys(entityKey, fieldKey);\n        const link = writeField(\n          ctx,\n          getSelectionSet(node),\n          ensureData(fieldValue),\n          key,\n          ctx.optimistic\n            ? InMemoryData.readLink(entityKey || typename, fieldKey)\n            : undefined\n        );\n        InMemoryData.writeLink(entityKey || typename, fieldKey, link);\n      } else {\n        writeField(ctx, getSelectionSet(node), ensureData(fieldValue));\n      }\n    } else if (entityKey && rootField === 'query') {\n      // This is a leaf node, so we're setting the field's value directly\n      InMemoryData.writeRecord(\n        entityKey || typename,\n        fieldKey,\n        (fieldValue !== null || !getFieldError(ctx)\n          ? fieldValue\n          : undefined) as EntityField\n      );\n    }\n\n    // We run side-effect updates after the default, normalized updates\n    // so that the data is already available in-store if necessary\n    const updater = updates && updates[fieldName];\n    if (updater) {\n      // We have to update the context to reflect up-to-date ResolveInfo\n      updateContext(\n        ctx,\n        data,\n        typename,\n        entityKey || typename,\n        fieldKey,\n        fieldName\n      );\n\n      data[fieldName] = fieldValue;\n      updater(data, fieldArgs || {}, ctx.store, ctx);\n    }\n\n    // After processing the field, remove the current alias from the path again\n    ctx.__internal.path.pop();\n  }\n};\n\n// A pattern to match typenames of types that are likely never keyable\nconst KEYLESS_TYPE_RE = /^__|PageInfo|(Connection|Edge)$/;\n\nconst writeField = (\n  ctx: Context,\n  select: FormattedNode<SelectionSet>,\n  data: null | Data | NullArray<Data>,\n  parentFieldKey?: string,\n  prevLink?: Link\n): Link | undefined => {\n  if (Array.isArray(data)) {\n    const newData = new Array(data.length);\n    for (let i = 0, l = data.length; i < l; i++) {\n      // Add the current index to the walked path before processing the link\n      ctx.__internal.path.push(i);\n      // Append the current index to the parentFieldKey fallback\n      const indexKey = parentFieldKey\n        ? joinKeys(parentFieldKey, `${i}`)\n        : undefined;\n      // Recursively write array data\n      const prevIndex = prevLink != null ? prevLink[i] : undefined;\n      const links = writeField(ctx, select, data[i], indexKey, prevIndex);\n      // Link cannot be expressed as a recursive type\n      newData[i] = links as string | null;\n      // After processing the field, remove the current index from the path\n      ctx.__internal.path.pop();\n    }\n\n    return newData;\n  } else if (data === null) {\n    return getFieldError(ctx) ? undefined : null;\n  }\n\n  const entityKey =\n    ctx.store.keyOfEntity(data) ||\n    (typeof prevLink === 'string' ? prevLink : null);\n  const typename = data.__typename;\n\n  if (\n    parentFieldKey &&\n    !ctx.store.keys[data.__typename] &&\n    entityKey === null &&\n    typeof typename === 'string' &&\n    !KEYLESS_TYPE_RE.test(typename)\n  ) {\n    warn(\n      'Invalid key: The GraphQL query at the field at `' +\n        parentFieldKey +\n        '` has a selection set, ' +\n        'but no key could be generated for the data at this field.\\n' +\n        'You have to request `id` or `_id` fields for all selection sets or create ' +\n        'a custom `keys` config for `' +\n        typename +\n        '`.\\n' +\n        'Entities without keys will be embedded directly on the parent entity. ' +\n        'If this is intentional, create a `keys` config for `' +\n        typename +\n        '` that always returns null.',\n      15,\n      ctx.store.logger\n    );\n  }\n\n  const childKey = entityKey || parentFieldKey;\n  writeSelection(ctx, childKey, select, data);\n  return childKey || null;\n};\n", "import * as InMemoryData from '../store/data';\nimport { keyOfField } from '../store/keys';\nimport type { FieldArgs } from '../types';\n\ninterface PartialFieldInfo {\n  fieldKey: string;\n}\n\nexport const invalidateEntity = (\n  entityKey: string,\n  field?: string,\n  args?: FieldArgs\n) => {\n  const fields: PartialFieldInfo[] = field\n    ? [{ fieldKey: keyOfField(field, args) }]\n    : InMemoryData.inspectFields(entityKey);\n\n  for (let i = 0, l = fields.length; i < l; i++) {\n    const { fieldKey } = fields[i];\n    if (InMemoryData.readLink(entityKey, fieldKey) !== undefined) {\n      InMemoryData.writeLink(entityKey, fieldKey, undefined);\n    } else {\n      InMemoryData.writeRecord(entityKey, fieldKey, undefined);\n    }\n  }\n};\n\nexport const invalidateType = (typename: string) => {\n  const types = InMemoryData.getEntitiesForType(typename);\n  for (const entity of types) {\n    invalidateEntity(entity);\n  }\n};\n", "import type { TypedDocumentNode } from '@urql/core';\nimport { formatDocument, createRequest } from '@urql/core';\n\nimport type {\n  Cache,\n  FieldInfo,\n  ResolverConfig,\n  DataField,\n  Variables,\n  FieldArgs,\n  Link,\n  Data,\n  QueryInput,\n  UpdatesConfig,\n  OptimisticMutationConfig,\n  KeyingConfig,\n  Entity,\n  CacheExchangeOpts,\n  DirectivesConfig,\n  Logger,\n} from '../types';\n\nimport { invariant } from '../helpers/help';\nimport { contextRef, ensureLink } from '../operations/shared';\nimport { _query, _queryFragment } from '../operations/query';\nimport { _write, _writeFragment } from '../operations/write';\nimport { invalidateEntity, invalidateType } from '../operations/invalidate';\nimport { keyOfField } from './keys';\nimport * as InMemoryData from './data';\n\nimport type { SchemaIntrospector } from '../ast';\nimport {\n  buildClientSchema,\n  expectValidKeyingConfig,\n  expectValidUpdatesConfig,\n  expectValidResolversConfig,\n  expectValidOptimisticMutationsConfig,\n} from '../ast';\n\ntype DocumentNode = TypedDocumentNode<any, any>;\ntype RootField = 'query' | 'mutation' | 'subscription';\n\n/** Implementation of the {@link Cache} interface as created internally by the {@link cacheExchange}.\n * @internal\n */\nexport class Store<\n  C extends Partial<CacheExchangeOpts> = Partial<CacheExchangeOpts>,\n> implements Cache\n{\n  data: InMemoryData.InMemoryData;\n\n  logger?: Logger;\n  directives: DirectivesConfig;\n  resolvers: ResolverConfig;\n  updates: UpdatesConfig;\n  optimisticMutations: OptimisticMutationConfig;\n  keys: KeyingConfig;\n  globalIDs: Set<string> | boolean;\n  schema?: SchemaIntrospector;\n\n  rootFields: { query: string; mutation: string; subscription: string };\n  rootNames: { [name: string]: RootField | void };\n\n  constructor(opts?: C) {\n    if (!opts) opts = {} as C;\n\n    this.logger = opts.logger;\n    this.resolvers = opts.resolvers || {};\n    this.directives = opts.directives || {};\n    this.optimisticMutations = opts.optimistic || {};\n    this.keys = opts.keys || {};\n\n    this.globalIDs = Array.isArray(opts.globalIDs)\n      ? new Set(opts.globalIDs)\n      : !!opts.globalIDs;\n\n    let queryName = 'Query';\n    let mutationName = 'Mutation';\n    let subscriptionName = 'Subscription';\n    if (opts.schema) {\n      const schema = buildClientSchema(opts.schema);\n      queryName = schema.query || queryName;\n      mutationName = schema.mutation || mutationName;\n      subscriptionName = schema.subscription || subscriptionName;\n      // Only add schema introspector if it has types info\n      if (schema.types) this.schema = schema;\n    }\n\n    this.updates = opts.updates || {};\n\n    this.rootFields = {\n      query: queryName,\n      mutation: mutationName,\n      subscription: subscriptionName,\n    };\n\n    this.rootNames = {\n      [queryName]: 'query',\n      [mutationName]: 'mutation',\n      [subscriptionName]: 'subscription',\n    };\n\n    this.data = InMemoryData.make(queryName);\n\n    if (this.schema && process.env.NODE_ENV !== 'production') {\n      expectValidKeyingConfig(this.schema, this.keys, this.logger);\n      expectValidUpdatesConfig(this.schema, this.updates, this.logger);\n      expectValidResolversConfig(this.schema, this.resolvers, this.logger);\n      expectValidOptimisticMutationsConfig(\n        this.schema,\n        this.optimisticMutations,\n        this.logger\n      );\n    }\n  }\n\n  keyOfField(fieldName: string, fieldArgs?: FieldArgs) {\n    return keyOfField(fieldName, fieldArgs);\n  }\n\n  keyOfEntity(data: Entity) {\n    // In resolvers and updaters we may have a specific parent\n    // object available that can be used to skip to a specific parent\n    // key directly without looking at its incomplete properties\n    if (contextRef && data === contextRef.parent) {\n      return contextRef.parentKey;\n    } else if (data == null || typeof data === 'string') {\n      return data || null;\n    } else if (!data.__typename) {\n      return null;\n    } else if (this.rootNames[data.__typename]) {\n      return data.__typename;\n    }\n\n    let key: string | null = null;\n    if (this.keys[data.__typename]) {\n      key = this.keys[data.__typename](data) || null;\n    } else if (data.id != null) {\n      key = `${data.id}`;\n    } else if (data._id != null) {\n      key = `${data._id}`;\n    }\n\n    const typename = data.__typename;\n    const globalID =\n      this.globalIDs === true ||\n      (this.globalIDs && this.globalIDs.has(typename));\n    return globalID || !key ? key : `${typename}:${key}`;\n  }\n\n  resolve(\n    entity: Entity,\n    field: string,\n    args?: FieldArgs\n  ): DataField | undefined {\n    const entityKey = this.keyOfEntity(entity);\n    if (entityKey) {\n      const fieldKey = keyOfField(field, args);\n      const fieldValue = InMemoryData.readRecord(entityKey, fieldKey);\n      if (fieldValue !== undefined) return fieldValue;\n      let fieldLink = InMemoryData.readLink(entityKey, fieldKey);\n      if (fieldLink !== undefined) fieldLink = ensureLink(this, fieldLink);\n      return fieldLink;\n    }\n  }\n\n  resolveFieldByKey(entity: Entity, field: string, args?: FieldArgs) {\n    return this.resolve(entity, field, args);\n  }\n\n  invalidate(entity: Entity, field?: string, args?: FieldArgs) {\n    const entityKey = this.keyOfEntity(entity);\n    const shouldInvalidateType =\n      entity &&\n      typeof entity === 'string' &&\n      !field &&\n      !args &&\n      !this.resolve(entity, '__typename');\n\n    if (shouldInvalidateType) {\n      invalidateType(entity);\n    } else {\n      invariant(\n        entityKey,\n        \"Can't generate a key for invalidate(...).\\n\" +\n          'You have to pass an id or _id field or create a custom `keys` field for `' +\n          (typeof entity === 'object'\n            ? (entity as Data).__typename\n            : entity + '`.'),\n        19\n      );\n\n      invalidateEntity(entityKey, field, args);\n    }\n  }\n\n  inspectFields(entity: Entity): FieldInfo[] {\n    const entityKey = this.keyOfEntity(entity);\n    return entityKey ? InMemoryData.inspectFields(entityKey) : [];\n  }\n\n  updateQuery<T = Data, V = Variables>(\n    input: QueryInput<T, V>,\n    updater: (data: T | null) => T | null\n  ): void {\n    const request = createRequest(input.query, input.variables!);\n    const output = updater(this.readQuery(request));\n    if (output !== null) {\n      _write(this, request, output as any, undefined);\n    }\n  }\n\n  readQuery<T = Data, V = Variables>(input: QueryInput<T, V>): T | null {\n    const request = createRequest(input.query, input.variables!);\n    return _query(this, request, undefined, undefined).data as T | null;\n  }\n\n  readFragment<T = Data, V = Variables>(\n    fragment: DocumentNode | TypedDocumentNode<T, V>,\n    entity: string | Data | T,\n    variables?: V,\n    fragmentName?: string\n  ): T | null {\n    return _queryFragment(\n      this,\n      formatDocument(fragment),\n      entity as Data,\n      variables as any,\n      fragmentName\n    ) as T | null;\n  }\n\n  writeFragment<T = Data, V = Variables>(\n    fragment: DocumentNode | TypedDocumentNode<T, V>,\n    data: T,\n    variables?: V,\n    fragmentName?: string\n  ): void {\n    _writeFragment(\n      this,\n      formatDocument(fragment),\n      data as Data,\n      variables as any,\n      fragmentName\n    );\n  }\n\n  link(\n    entity: Entity,\n    field: string,\n    args: FieldArgs,\n    link: Link<Entity>\n  ): void;\n\n  link(entity: Entity, field: string, link: Link<Entity>): void;\n\n  link(\n    entity: Entity,\n    field: string,\n    ...rest: [FieldArgs, Link<Entity>] | [Link<Entity>]\n  ): void {\n    const args = rest.length === 2 ? rest[0] : null;\n    const link = rest.length === 2 ? rest[1] : rest[0];\n    const entityKey = this.keyOfEntity(entity);\n    if (entityKey) {\n      InMemoryData.writeLink(\n        entityKey,\n        keyOfField(field, args),\n        ensureLink(this, link)\n      );\n    }\n  }\n}\n", "import type {\n  IntrospectionQuery,\n  IntrospectionTypeRef,\n  IntrospectionInputValue,\n  IntrospectionType,\n} from './graphql';\n\nexport interface SchemaField {\n  name: string;\n  type: IntrospectionTypeRef;\n  args(): Record<string, IntrospectionInputValue | void>;\n}\n\nexport interface SchemaObject {\n  name: string;\n  kind: 'INTERFACE' | 'OBJECT';\n  interfaces(): Record<string, unknown>;\n  fields(): Record<string, SchemaField | void>;\n}\n\nexport interface SchemaUnion {\n  name: string;\n  kind: 'UNION';\n  types(): Record<string, unknown>;\n}\n\nexport interface SchemaIntrospector {\n  query: string | null;\n  mutation: string | null;\n  subscription: string | null;\n  types?: Map<string, SchemaObject | SchemaUnion>;\n  isSubType(abstract: string, possible: string): boolean;\n}\n\nexport interface PartialIntrospectionSchema {\n  queryType: { name: string; kind?: any };\n  mutationType?: { name: string; kind?: any } | null;\n  subscriptionType?: { name: string; kind?: any } | null;\n  types?: readonly any[];\n}\n\nexport type IntrospectionData =\n  | IntrospectionQuery\n  | { __schema: PartialIntrospectionSchema };\n\nexport const buildClientSchema = ({\n  __schema,\n}: IntrospectionData): SchemaIntrospector => {\n  const typemap: Map<string, SchemaObject | SchemaUnion> = new Map();\n\n  const buildNameMap = <T extends { name: string }>(\n    arr: ReadonlyArray<T>\n  ): (() => { [name: string]: T }) => {\n    let map: Record<string, T> | void;\n    return () => {\n      if (!map) {\n        map = {};\n        for (let i = 0; i < arr.length; i++) map[arr[i].name] = arr[i];\n      }\n      return map;\n    };\n  };\n\n  const buildType = (\n    type: IntrospectionType\n  ): SchemaObject | SchemaUnion | void => {\n    switch (type.kind) {\n      case 'OBJECT':\n      case 'INTERFACE':\n        return {\n          name: type.name,\n          kind: type.kind as 'OBJECT' | 'INTERFACE',\n          interfaces: buildNameMap(type.interfaces || []),\n          fields: buildNameMap(\n            type.fields!.map((field: any) => ({\n              name: field.name,\n              type: field.type,\n              args: buildNameMap(field.args),\n            }))\n          ),\n        } as SchemaObject;\n      case 'UNION':\n        return {\n          name: type.name,\n          kind: type.kind as 'UNION',\n          types: buildNameMap(type.possibleTypes || []),\n        } as SchemaUnion;\n    }\n  };\n\n  const schema: SchemaIntrospector = {\n    query: __schema.queryType ? __schema.queryType.name : null,\n    mutation: __schema.mutationType ? __schema.mutationType.name : null,\n    subscription: __schema.subscriptionType\n      ? __schema.subscriptionType.name\n      : null,\n    types: undefined,\n    isSubType(abstract: string, possible: string) {\n      const abstractType = typemap.get(abstract);\n      const possibleType = typemap.get(possible);\n      if (!abstractType || !possibleType) {\n        return false;\n      } else if (abstractType.kind === 'UNION') {\n        return !!abstractType.types()[possible];\n      } else if (\n        abstractType.kind !== 'OBJECT' &&\n        possibleType.kind === 'OBJECT'\n      ) {\n        return !!possibleType.interfaces()[abstract];\n      } else {\n        return abstract === possible;\n      }\n    },\n  };\n\n  if (__schema.types) {\n    schema.types = typemap;\n    for (let i = 0; i < __schema.types.length; i++) {\n      const type = __schema.types[i];\n      if (type && type.name) {\n        const out = buildType(type);\n        if (out) typemap.set(type.name, out);\n      }\n    }\n  }\n\n  return schema;\n};\n", "import type { Operation, RequestPolicy, OperationDebugMeta } from '@urql/core';\nimport { makeOperation } from '@urql/core';\n\n// Returns the given operation result with added cacheOutcome meta field\nexport const addMetadata = (\n  operation: Operation,\n  meta: OperationDebugMeta\n): Operation =>\n  makeOperation(operation.kind, operation, {\n    ...operation.context,\n    meta: {\n      ...operation.context.meta,\n      ...meta,\n    },\n  });\n\n// Copy an operation and change the requestPolicy to skip the cache\nexport const toRequestPolicy = (\n  operation: Operation,\n  requestPolicy: RequestPolicy\n): Operation => {\n  return makeOperation(operation.kind, operation, {\n    ...operation.context,\n    requestPolicy,\n  });\n};\n", "import type {\n  Exchange,\n  Operation,\n  OperationResult,\n  RequestPolicy,\n  CacheOutcome,\n} from '@urql/core';\nimport { formatDocument, makeOperation } from '@urql/core';\n\nimport type { Source } from 'wonka';\nimport {\n  filter,\n  map,\n  merge,\n  pipe,\n  share,\n  fromArray,\n  mergeMap,\n  empty,\n} from 'wonka';\n\nimport { _query } from './operations/query';\nimport { _write } from './operations/write';\nimport { addMetadata, toRequestPolicy } from './helpers/operation';\nimport { filterVariables, getMainOperation } from './ast';\nimport { Store } from './store/store';\nimport type { Data, Dependencies, CacheExchangeOpts } from './types';\n\nimport {\n  initDataState,\n  clearDataState,\n  noopDataState,\n  hydrateData,\n  reserveLayer,\n  hasLayer,\n} from './store/data';\n\ninterface OperationResultWithMeta extends Partial<OperationResult> {\n  operation: Operation;\n  outcome: CacheOutcome;\n  dependencies: Dependencies;\n  hasNext: boolean;\n}\n\ntype Operations = Set<number>;\ntype OperationMap = Map<number, Operation>;\ntype ResultMap = Map<number, Data | null>;\ntype OptimisticDependencies = Map<number, Dependencies>;\ntype DependentOperations = Map<string, Operations>;\n\n/** Exchange factory that creates a normalized cache exchange.\n *\n * @param opts - A {@link CacheExchangeOpts} configuration object.\n * @returns the created normalized cache {@link Exchange}.\n *\n * @remarks\n * Graphcache is a normalized cache, enabled by using the `cacheExchange`\n * in place of `@urql/core`’s. A normalized GraphQL cache uses typenames\n * and key fields in the result to share a single copy for each unique\n * entity across all queries.\n *\n * The `cacheExchange` may be passed a {@link CacheExchangeOpts} object\n * to define custom resolvers, custom updates for mutations,\n * optimistic updates, or to add custom key fields per type.\n *\n * @see {@link https://urql.dev/goto/docs/graphcache} for the full Graphcache docs.\n */\nexport const cacheExchange =\n  <C extends Partial<CacheExchangeOpts>>(opts?: C): Exchange =>\n  ({ forward, client, dispatchDebug }) => {\n    const store = new Store<C>(opts);\n\n    if (opts && opts.storage) {\n      store.data.hydrating = true;\n      opts.storage.readData().then(entries => {\n        hydrateData(store.data, opts!.storage!, entries);\n        if (opts.storage!.onCacheHydrated) opts.storage!.onCacheHydrated();\n      });\n    }\n\n    const optimisticKeysToDependencies: OptimisticDependencies = new Map();\n    const mutationResultBuffer: OperationResult[] = [];\n    const operations: OperationMap = new Map();\n    const results: ResultMap = new Map();\n    const blockedDependencies: Dependencies = new Set();\n    const requestedRefetch: Operations = new Set();\n    const deps: DependentOperations = new Map();\n\n    let reexecutingOperations: Operations = new Set();\n    let dependentOperations: Operations = new Set();\n\n    const isBlockedByOptimisticUpdate = (\n      dependencies: Dependencies\n    ): boolean => {\n      for (const dep of dependencies.values())\n        if (blockedDependencies.has(dep)) return true;\n      return false;\n    };\n\n    const collectPendingOperations = (\n      pendingOperations: Operations,\n      dependencies: undefined | Dependencies\n    ) => {\n      if (dependencies) {\n        // Collect operations that will be updated due to cache changes\n        for (const dep of dependencies.values()) {\n          const keys = deps.get(dep);\n          if (keys) for (const key of keys.values()) pendingOperations.add(key);\n        }\n      }\n    };\n\n    const executePendingOperations = (\n      operation: Operation,\n      pendingOperations: Operations,\n      isOptimistic: boolean\n    ) => {\n      // Reexecute collected operations and delete them from the mapping\n      for (const key of pendingOperations.values()) {\n        if (key !== operation.key) {\n          const op = operations.get(key);\n          if (op) {\n            // Collect all dependent operations if the reexecuting operation is a query\n            if (operation.kind === 'query') dependentOperations.add(key);\n            let policy: RequestPolicy = 'cache-first';\n            if (requestedRefetch.has(key)) {\n              requestedRefetch.delete(key);\n              policy = 'cache-and-network';\n            }\n            client.reexecuteOperation(toRequestPolicy(op, policy));\n          }\n        }\n      }\n\n      if (!isOptimistic) {\n        // Upon completion, all dependent operations become reexecuting operations, preventing\n        // them from reexecuting prior operations again, causing infinite loops\n        const _reexecutingOperations = reexecutingOperations;\n        if (operation.kind === 'query') {\n          (reexecutingOperations = dependentOperations).add(operation.key);\n        }\n        (dependentOperations = _reexecutingOperations).clear();\n      }\n    };\n\n    // This registers queries with the data layer to ensure commutativity\n    const prepareForwardedOperation = (operation: Operation) => {\n      let optimistic = false;\n      if (operation.kind === 'query') {\n        // Pre-reserve the position of the result layer\n        reserveLayer(store.data, operation.key);\n        operations.set(operation.key, operation);\n      } else if (operation.kind === 'teardown') {\n        // Delete reference to operation if any exists to release it\n        operations.delete(operation.key);\n        results.delete(operation.key);\n        reexecutingOperations.delete(operation.key);\n        // Mark operation layer as done\n        noopDataState(store.data, operation.key);\n        return operation;\n      } else if (\n        operation.kind === 'mutation' &&\n        operation.context.requestPolicy !== 'network-only'\n      ) {\n        operations.set(operation.key, operation);\n        // This executes an optimistic update for mutations and registers it if necessary\n        initDataState('write', store.data, operation.key, true, false);\n        const { dependencies } = _write(\n          store,\n          operation as any,\n          undefined,\n          undefined\n        );\n        clearDataState();\n        if (dependencies.size) {\n          // Update blocked optimistic dependencies\n          for (const dep of dependencies.values()) blockedDependencies.add(dep);\n          // Store optimistic dependencies for update\n          optimisticKeysToDependencies.set(operation.key, dependencies);\n          // Update related queries\n          const pendingOperations: Operations = new Set();\n          collectPendingOperations(pendingOperations, dependencies);\n          executePendingOperations(operation, pendingOperations, true);\n          // Mark operation as optimistic\n          optimistic = true;\n        }\n      }\n\n      return makeOperation(\n        operation.kind,\n        {\n          key: operation.key,\n          query: formatDocument(operation.query),\n          variables: operation.variables\n            ? filterVariables(\n                getMainOperation(operation.query),\n                operation.variables\n              )\n            : operation.variables,\n        },\n        { ...operation.context, optimistic }\n      );\n    };\n\n    // This updates the known dependencies for the passed operation\n    const updateDependencies = (op: Operation, dependencies: Dependencies) => {\n      for (const dep of dependencies.values()) {\n        let depOps = deps.get(dep);\n        if (!depOps) deps.set(dep, (depOps = new Set()));\n        depOps.add(op.key);\n      }\n    };\n\n    // Retrieves a query result from cache and adds an `isComplete` hint\n    // This hint indicates whether the result is \"complete\" or not\n    const operationResultFromCache = (\n      operation: Operation\n    ): OperationResultWithMeta => {\n      initDataState('read', store.data, undefined, false, false);\n      const result = _query(\n        store,\n        operation,\n        results.get(operation.key),\n        undefined\n      );\n      clearDataState();\n      const cacheOutcome: CacheOutcome = result.data\n        ? !result.partial && !result.hasNext\n          ? 'hit'\n          : 'partial'\n        : 'miss';\n\n      results.set(operation.key, result.data);\n      operations.set(operation.key, operation);\n      updateDependencies(operation, result.dependencies);\n\n      return {\n        outcome: cacheOutcome,\n        operation,\n        data: result.data,\n        dependencies: result.dependencies,\n        hasNext: result.hasNext,\n      };\n    };\n\n    // Take any OperationResult and update the cache with it\n    const updateCacheWithResult = (\n      result: OperationResult,\n      pendingOperations: Operations\n    ): OperationResult => {\n      // Retrieve the original operation to get unfiltered variables\n      const operation =\n        operations.get(result.operation.key) || result.operation;\n      if (operation.kind === 'mutation') {\n        // Collect previous dependencies that have been written for optimistic updates\n        const dependencies = optimisticKeysToDependencies.get(operation.key);\n        collectPendingOperations(pendingOperations, dependencies);\n        optimisticKeysToDependencies.delete(operation.key);\n      }\n\n      if (operation.kind === 'subscription' || result.hasNext)\n        reserveLayer(store.data, operation.key, true);\n\n      let queryDependencies: undefined | Dependencies;\n      let data: Data | null = result.data;\n      if (data) {\n        // Write the result to cache and collect all dependencies that need to be\n        // updated\n        initDataState('write', store.data, operation.key, false, false);\n        const writeDependencies = _write(\n          store,\n          operation,\n          data,\n          result.error\n        ).dependencies;\n        clearDataState();\n        collectPendingOperations(pendingOperations, writeDependencies);\n        const prevData =\n          operation.kind === 'query' ? results.get(operation.key) : null;\n        initDataState(\n          'read',\n          store.data,\n          operation.key,\n          false,\n          prevData !== data\n        );\n        const queryResult = _query(\n          store,\n          operation,\n          prevData || data,\n          result.error\n        );\n        clearDataState();\n        data = queryResult.data;\n        if (operation.kind === 'query') {\n          // Collect the query's dependencies for future pending operation updates\n          queryDependencies = queryResult.dependencies;\n          collectPendingOperations(pendingOperations, queryDependencies);\n          results.set(operation.key, data);\n        }\n      } else {\n        noopDataState(store.data, operation.key);\n      }\n\n      // Update this operation's dependencies if it's a query\n      if (queryDependencies) {\n        updateDependencies(result.operation, queryDependencies);\n      }\n\n      return {\n        operation,\n        data,\n        error: result.error,\n        extensions: result.extensions,\n        hasNext: result.hasNext,\n        stale: result.stale,\n      };\n    };\n\n    return operations$ => {\n      // Filter by operations that are cacheable and attempt to query them from the cache\n      const cacheOps$ = pipe(\n        operations$,\n        filter(\n          op =>\n            op.kind === 'query' && op.context.requestPolicy !== 'network-only'\n        ),\n        map(operationResultFromCache),\n        share\n      );\n\n      const nonCacheOps$ = pipe(\n        operations$,\n        filter(\n          op =>\n            op.kind !== 'query' || op.context.requestPolicy === 'network-only'\n        )\n      );\n\n      // Rebound operations that are incomplete, i.e. couldn't be queried just from the cache\n      const cacheMissOps$ = pipe(\n        cacheOps$,\n        filter(\n          res =>\n            res.outcome === 'miss' &&\n            res.operation.context.requestPolicy !== 'cache-only' &&\n            !isBlockedByOptimisticUpdate(res.dependencies) &&\n            !reexecutingOperations.has(res.operation.key)\n        ),\n        map(res => {\n          dispatchDebug({\n            type: 'cacheMiss',\n            message: 'The result could not be retrieved from the cache',\n            operation: res.operation,\n          });\n          return addMetadata(res.operation, { cacheOutcome: 'miss' });\n        })\n      );\n\n      // Resolve OperationResults that the cache was able to assemble completely and trigger\n      // a network request if the current operation's policy is cache-and-network\n      const cacheResult$ = pipe(\n        cacheOps$,\n        filter(\n          res =>\n            res.outcome !== 'miss' ||\n            res.operation.context.requestPolicy === 'cache-only'\n        ),\n        map((res: OperationResultWithMeta): OperationResult => {\n          const { requestPolicy } = res.operation.context;\n\n          // We reexecute requests marked as `cache-and-network`, and partial responses,\n          // if we wouldn't cause a request loop\n          const shouldReexecute =\n            requestPolicy !== 'cache-only' &&\n            (res.hasNext ||\n              requestPolicy === 'cache-and-network' ||\n              (requestPolicy === 'cache-first' &&\n                res.outcome === 'partial' &&\n                !reexecutingOperations.has(res.operation.key)));\n          // Set stale to true anyway, even if the reexecute will be blocked, if the operation\n          // is in progress. We can be reasonably sure of that if a layer has been reserved for it.\n          const stale =\n            requestPolicy !== 'cache-only' &&\n            (shouldReexecute ||\n              (res.outcome === 'partial' &&\n                reexecutingOperations.has(res.operation.key) &&\n                hasLayer(store.data, res.operation.key)));\n\n          const result: OperationResult = {\n            operation: addMetadata(res.operation, {\n              cacheOutcome: res.outcome,\n            }),\n            data: res.data,\n            error: res.error,\n            extensions: res.extensions,\n            stale: stale && !res.hasNext,\n            hasNext: shouldReexecute && res.hasNext,\n          };\n\n          if (!shouldReexecute) {\n            /*noop*/\n          } else if (!isBlockedByOptimisticUpdate(res.dependencies)) {\n            client.reexecuteOperation(\n              toRequestPolicy(\n                operations.get(res.operation.key) || res.operation,\n                'network-only'\n              )\n            );\n          } else if (requestPolicy === 'cache-and-network') {\n            requestedRefetch.add(res.operation.key);\n          }\n\n          dispatchDebug({\n            type: 'cacheHit',\n            message: `A requested operation was found and returned from the cache.`,\n            operation: res.operation,\n            data: {\n              value: result,\n            },\n          });\n\n          return result;\n        })\n      );\n\n      // Forward operations that aren't cacheable and rebound operations\n      // Also update the cache with any network results\n      const result$ = pipe(\n        merge([nonCacheOps$, cacheMissOps$]),\n        map(prepareForwardedOperation),\n        forward\n      );\n\n      // Results that can immediately be resolved\n      const nonOptimisticResults$ = pipe(\n        result$,\n        filter(\n          result => !optimisticKeysToDependencies.has(result.operation.key)\n        ),\n        map(result => {\n          const pendingOperations: Operations = new Set();\n          // Update the cache with the incoming API result\n          const cacheResult = updateCacheWithResult(result, pendingOperations);\n          // Execute all dependent queries\n          executePendingOperations(result.operation, pendingOperations, false);\n          return cacheResult;\n        })\n      );\n\n      // Prevent mutations that were previously optimistic from being flushed\n      // immediately and instead clear them out slowly\n      const optimisticMutationCompletion$ = pipe(\n        result$,\n        filter(result =>\n          optimisticKeysToDependencies.has(result.operation.key)\n        ),\n        mergeMap((result: OperationResult): Source<OperationResult> => {\n          const length = mutationResultBuffer.push(result);\n          if (length < optimisticKeysToDependencies.size) {\n            return empty;\n          }\n\n          for (let i = 0; i < mutationResultBuffer.length; i++) {\n            reserveLayer(store.data, mutationResultBuffer[i].operation.key);\n          }\n\n          blockedDependencies.clear();\n\n          const results: OperationResult[] = [];\n          const pendingOperations: Operations = new Set();\n\n          let bufferedResult: OperationResult | void;\n          while ((bufferedResult = mutationResultBuffer.shift()))\n            results.push(\n              updateCacheWithResult(bufferedResult, pendingOperations)\n            );\n\n          // Execute all dependent queries as a single batch\n          executePendingOperations(result.operation, pendingOperations, false);\n\n          return fromArray(results);\n        })\n      );\n\n      return merge([\n        nonOptimisticResults$,\n        optimisticMutationCompletion$,\n        cacheResult$,\n      ]);\n    };\n  };\n", "import { pipe, share, merge, makeSubject, filter, onPush } from 'wonka';\n\nimport type {\n  Operation,\n  OperationResult,\n  Exchange,\n  ExchangeIO,\n  CombinedError,\n  RequestPolicy,\n} from '@urql/core';\nimport { stringifyDocument, createRequest, makeOperation } from '@urql/core';\n\nimport type {\n  SerializedRequest,\n  CacheExchangeOpts,\n  StorageAdapter,\n} from './types';\nimport { cacheExchange } from './cacheExchange';\nimport { toRequestPolicy } from './helpers/operation';\n\nconst policyLevel = {\n  'cache-only': 0,\n  'cache-first': 1,\n  'network-only': 2,\n  'cache-and-network': 3,\n} as const;\n\n/** Input parameters for the {@link offlineExchange}.\n * @remarks\n * This configuration object extends the {@link CacheExchangeOpts}\n * as the `offlineExchange` extends the regular {@link cacheExchange}.\n */\nexport interface OfflineExchangeOpts extends CacheExchangeOpts {\n  /** Configures an offline storage adapter for Graphcache.\n   *\n   * @remarks\n   * A {@link StorageAdapter} allows Graphcache to write data to an external,\n   * asynchronous storage, and hydrate data from it when it first loads.\n   * This allows you to preserve normalized data between restarts/reloads.\n   *\n   * @see {@link https://urql.dev/goto/docs/graphcache/offline} for the full Offline Support docs.\n   */\n  storage: StorageAdapter;\n  /** Predicate function to determine whether a {@link CombinedError} hints at a network error.\n   *\n   * @remarks\n   * Not ever {@link CombinedError} means that the device is offline and by default\n   * the `offlineExchange` will check for common network error messages and check\n   * `navigator.onLine`. However, when `isOfflineError` is passed it can replace\n   * the default offline detection.\n   */\n  isOfflineError?(\n    error: undefined | CombinedError,\n    result: OperationResult\n  ): boolean;\n}\n\n/** Exchange factory that creates a normalized cache exchange in Offline Support mode.\n *\n * @param opts - A {@link OfflineExchangeOpts} configuration object.\n * @returns the created normalized, offline cache {@link Exchange}.\n *\n * @remarks\n * The `offlineExchange` is a wrapper around the regular {@link cacheExchange}\n * which adds logic via the {@link OfflineExchangeOpts.storage} adapter to\n * recognize when it’s offline, when to retry failed mutations, and how\n * to handle longer periods of being offline.\n *\n * @see {@link https://urql.dev/goto/docs/graphcache/offline} for the full Offline Support docs.\n */\nexport const offlineExchange =\n  <C extends OfflineExchangeOpts>(opts: C): Exchange =>\n  input => {\n    const { storage } = opts;\n\n    const isOfflineError =\n      opts.isOfflineError ||\n      ((error: undefined | CombinedError) =>\n        error &&\n        error.networkError &&\n        !error.response &&\n        ((typeof navigator !== 'undefined' && navigator.onLine === false) ||\n          /request failed|failed to fetch|network\\s?error/i.test(\n            error.networkError.message\n          )));\n\n    if (\n      storage &&\n      storage.onOnline &&\n      storage.readMetadata &&\n      storage.writeMetadata\n    ) {\n      const { forward: outerForward, client, dispatchDebug } = input;\n      const { source: reboundOps$, next } = makeSubject<Operation>();\n      const failedQueue: Operation[] = [];\n      let hasRehydrated = false;\n      let isFlushingQueue = false;\n\n      const updateMetadata = () => {\n        if (hasRehydrated) {\n          const requests: SerializedRequest[] = [];\n          for (let i = 0; i < failedQueue.length; i++) {\n            const operation = failedQueue[i];\n            if (operation.kind === 'mutation') {\n              requests.push({\n                query: stringifyDocument(operation.query),\n                variables: operation.variables,\n                extensions: operation.extensions,\n              });\n            }\n          }\n          storage.writeMetadata!(requests);\n        }\n      };\n\n      const filterQueue = (key: number) => {\n        for (let i = failedQueue.length - 1; i >= 0; i--)\n          if (failedQueue[i].key === key) failedQueue.splice(i, 1);\n      };\n\n      const flushQueue = () => {\n        if (!isFlushingQueue) {\n          const sent = new Set<number>();\n          isFlushingQueue = true;\n          for (let i = 0; i < failedQueue.length; i++) {\n            const operation = failedQueue[i];\n            if (operation.kind === 'mutation' || !sent.has(operation.key)) {\n              sent.add(operation.key);\n              if (operation.kind !== 'subscription') {\n                next(makeOperation('teardown', operation));\n                let overridePolicy: RequestPolicy = 'cache-first';\n                for (let i = 0; i < failedQueue.length; i++) {\n                  const { requestPolicy } = failedQueue[i].context;\n                  if (policyLevel[requestPolicy] > policyLevel[overridePolicy])\n                    overridePolicy = requestPolicy;\n                }\n                next(toRequestPolicy(operation, overridePolicy));\n              } else {\n                next(toRequestPolicy(operation, 'cache-first'));\n              }\n            }\n          }\n          isFlushingQueue = false;\n          failedQueue.length = 0;\n          updateMetadata();\n        }\n      };\n\n      const forward: ExchangeIO = ops$ => {\n        return pipe(\n          outerForward(ops$),\n          filter(res => {\n            if (\n              hasRehydrated &&\n              res.operation.kind === 'mutation' &&\n              res.operation.context.optimistic &&\n              isOfflineError(res.error, res)\n            ) {\n              failedQueue.push(res.operation);\n              updateMetadata();\n              return false;\n            }\n\n            return true;\n          }),\n          share\n        );\n      };\n\n      const cacheResults$ = cacheExchange({\n        ...opts,\n        storage: {\n          ...storage,\n          readData() {\n            const hydrate = storage.readData();\n            return {\n              async then(onEntries) {\n                const mutations = await storage.readMetadata!();\n                for (let i = 0; mutations && i < mutations.length; i++) {\n                  failedQueue.push(\n                    client.createRequestOperation(\n                      'mutation',\n                      createRequest(mutations[i].query, mutations[i].variables),\n                      mutations[i].extensions\n                    )\n                  );\n                }\n                onEntries!(await hydrate);\n                storage.onOnline!(flushQueue);\n                hasRehydrated = true;\n                flushQueue();\n              },\n            };\n          },\n        },\n      })({\n        client,\n        dispatchDebug,\n        forward,\n      });\n\n      return operations$ => {\n        const opsAndRebound$ = merge([\n          reboundOps$,\n          pipe(\n            operations$,\n            onPush(operation => {\n              if (operation.kind === 'query' && !hasRehydrated) {\n                failedQueue.push(operation);\n              } else if (operation.kind === 'teardown') {\n                filterQueue(operation.key);\n              }\n            })\n          ),\n        ]);\n\n        return pipe(\n          cacheResults$(opsAndRebound$),\n          filter(res => {\n            if (res.operation.kind === 'query') {\n              if (isOfflineError(res.error, res)) {\n                next(toRequestPolicy(res.operation, 'cache-only'));\n                failedQueue.push(res.operation);\n                return false;\n              } else if (!hasRehydrated) {\n                filterQueue(res.operation.key);\n              }\n            }\n            return true;\n          })\n        );\n      };\n    }\n\n    return cacheExchange(opts)(input);\n  };\n", "import {\n  Source,\n  pipe,\n  map,\n  filter,\n  onStart,\n  take,\n  makeSubject,\n  toPromise,\n  merge,\n} from 'wonka';\n\nimport {\n  createRequest,\n  makeOperation,\n  makeErrorResult,\n  Operation,\n  OperationContext,\n  OperationResult,\n  CombinedError,\n  Exchange,\n  DocumentInput,\n  AnyVariables,\n  OperationInstance,\n} from '@urql/core';\n\n/** Utilities to use while refreshing authentication tokens. */\nexport interface AuthUtilities {\n  /** Sends a mutation to your GraphQL API, bypassing earlier exchanges and authentication.\n   *\n   * @param query - a GraphQL document containing the mutation operation that will be executed.\n   * @param variables - the variables used to execute the operation.\n   * @param context - {@link OperationContext} options that'll be used in future exchanges.\n   * @returns A `Promise` of an {@link OperationResult} for the GraphQL mutation.\n   *\n   * @remarks\n   * The `mutation()` utility method is useful when your authentication requires you to make a GraphQL mutation\n   * request to update your authentication tokens. In these cases, you likely wish to bypass prior exchanges and\n   * the authentication in the `authExchange` itself.\n   *\n   * This method bypasses the usual mutation flow of the `Client` and instead issues the mutation as directly\n   * as possible. This also means that it doesn’t carry your `Client`'s default {@link OperationContext}\n   * options, so you may have to pass them again, if needed.\n   */\n  mutate<Data = any, Variables extends AnyVariables = AnyVariables>(\n    query: DocumentInput<Data, Variables>,\n    variables: Variables,\n    context?: Partial<OperationContext>\n  ): Promise<OperationResult<Data>>;\n\n  /** Adds additional HTTP headers to an `Operation`.\n   *\n   * @param operation - An {@link Operation} to add headers to.\n   * @param headers - The HTTP headers to add to the `Operation`.\n   * @returns The passed {@link Operation} with the headers added to it.\n   *\n   * @remarks\n   * The `appendHeaders()` utility method is useful to add additional HTTP headers\n   * to an {@link Operation}. It’s a simple convenience function that takes\n   * `operation.context.fetchOptions` into account, since adding headers for\n   * authentication is common.\n   */\n  appendHeaders(\n    operation: Operation,\n    headers: Record<string, string>\n  ): Operation;\n}\n\n/** Configuration for the `authExchange` returned by the initializer function you write. */\nexport interface AuthConfig {\n  /** Called for every operation to add authentication data to your operation.\n   *\n   * @param operation - An {@link Operation} that needs authentication tokens added.\n   * @returns a new {@link Operation} with added authentication tokens.\n   *\n   * @remarks\n   * The {@link authExchange} will call this function you provide and expects that you\n   * add your authentication tokens to your operation here, on the {@link Operation}\n   * that is returned.\n   *\n   * Hint: You likely want to modify your `fetchOptions.headers` here, for instance to\n   * add an `Authorization` header.\n   */\n  addAuthToOperation(operation: Operation): Operation;\n\n  /** Called before an operation is forwaded onwards to make a request.\n   *\n   * @param operation - An {@link Operation} that needs authentication tokens added.\n   * @returns a boolean, if true, authentication must be refreshed.\n   *\n   * @remarks\n   * The {@link authExchange} will call this function before an {@link Operation} is\n   * forwarded onwards to your following exchanges.\n   *\n   * When this function returns `true`, the `authExchange` will call\n   * {@link AuthConfig.refreshAuth} before forwarding more operations\n   * to prompt you to update your authentication tokens.\n   *\n   * Hint: If you define this function, you can use it to check whether your authentication\n   * tokens have expired.\n   */\n  willAuthError?(operation: Operation): boolean;\n\n  /** Called after receiving an operation result to check whether it has failed with an authentication error.\n   *\n   * @param error - A {@link CombinedError} that a result has come back with.\n   * @param operation - The {@link Operation} of that has failed.\n   * @returns a boolean, if true, authentication must be refreshed.\n   *\n   * @remarks\n   * The {@link authExchange} will call this function if it sees an {@link OperationResult}\n   * with a {@link CombinedError} on it, implying that it may have failed due to an authentication\n   * error.\n   *\n   * When this function returns `true`, the `authExchange` will call\n   * {@link AuthConfig.refreshAuth} before forwarding more operations\n   * to prompt you to update your authentication tokens.\n   * Afterwards, this operation will be retried once.\n   *\n   * Hint: You should define a function that detects your API’s authentication\n   * errors, e.g. using `result.extensions`.\n   */\n  didAuthError(error: CombinedError, operation: Operation): boolean;\n\n  /** Called to refresh the authentication state.\n   *\n   * @remarks\n   * The {@link authExchange} will call this function if either {@link AuthConfig.willAuthError}\n   * or {@link AuthConfig.didAuthError} have returned `true` prior, which indicates that the\n   * authentication state you hold has expired or is out-of-date.\n   *\n   * When this function is called, you should refresh your authentication state.\n   * For instance, if you have a refresh token and an access token, you should rotate\n   * these tokens with your API by sending the refresh token.\n   *\n   * Hint: You can use the {@link fetch} API here, or use {@link AuthUtilities.mutate}\n   * if your API requires a GraphQL mutation to refresh your authentication state.\n   */\n  refreshAuth(): Promise<void>;\n}\n\nconst addAuthAttemptToOperation = (\n  operation: Operation,\n  authAttempt: boolean\n) =>\n  makeOperation(operation.kind, operation, {\n    ...operation.context,\n    authAttempt,\n  });\n\n/** Creates an `Exchange` handling control flow for authentication.\n *\n * @param init - An initializer function that returns an {@link AuthConfig} wrapped in a `Promise`.\n * @returns the created authentication {@link Exchange}.\n *\n * @remarks\n * The `authExchange` is used to create an exchange handling authentication and\n * the control flow of refresh authentication.\n *\n * You must pass an initializer function, which receives {@link AuthUtilities} and\n * must return an {@link AuthConfig} wrapped in a `Promise`.\n * When this exchange is used in your `Client`, it will first call your initializer\n * function, which gives you an opportunity to get your authentication state, e.g.\n * from local storage.\n *\n * You may then choose to validate this authentication state and update it, and must\n * then return an {@link AuthConfig}.\n *\n * This configuration defines how you add authentication state to {@link Operation | Operations},\n * when your authentication state expires, when an {@link OperationResult} has errored\n * with an authentication error, and how to refresh your authentication state.\n *\n * @example\n * ```ts\n * authExchange(async (utils) => {\n *   let token = localStorage.getItem('token');\n *   let refreshToken = localStorage.getItem('refreshToken');\n *   return {\n *     addAuthToOperation(operation) {\n *       return utils.appendHeaders(operation, {\n *         Authorization: `Bearer ${token}`,\n *       });\n *     },\n *     didAuthError(error) {\n *       return error.graphQLErrors.some(e => e.extensions?.code === 'FORBIDDEN');\n *     },\n *     async refreshAuth() {\n *       const result = await utils.mutate(REFRESH, { token });\n *       if (result.data?.refreshLogin) {\n *         token = result.data.refreshLogin.token;\n *         refreshToken = result.data.refreshLogin.refreshToken;\n *         localStorage.setItem('token', token);\n *         localStorage.setItem('refreshToken', refreshToken);\n *       }\n *     },\n *   };\n * });\n * ```\n */\nexport function authExchange(\n  init: (utilities: AuthUtilities) => Promise<AuthConfig>\n): Exchange {\n  return ({ client, forward }) => {\n    const bypassQueue = new Set<OperationInstance | undefined>();\n    const retries = makeSubject<Operation>();\n    const errors = makeSubject<OperationResult>();\n\n    let retryQueue = new Map<number, Operation>();\n\n    function flushQueue() {\n      authPromise = undefined;\n      const queue = retryQueue;\n      retryQueue = new Map();\n      queue.forEach(retries.next);\n    }\n\n    function errorQueue(error: Error) {\n      authPromise = undefined;\n      const queue = retryQueue;\n      retryQueue = new Map();\n      queue.forEach(operation => {\n        errors.next(makeErrorResult(operation, error));\n      });\n    }\n\n    let authPromise: Promise<void> | void;\n    let config: AuthConfig | null = null;\n\n    return operations$ => {\n      function initAuth() {\n        authPromise = Promise.resolve()\n          .then(() =>\n            init({\n              mutate<Data = any, Variables extends AnyVariables = AnyVariables>(\n                query: DocumentInput<Data, Variables>,\n                variables: Variables,\n                context?: Partial<OperationContext>\n              ): Promise<OperationResult<Data>> {\n                const baseOperation = client.createRequestOperation(\n                  'mutation',\n                  createRequest(query, variables),\n                  context\n                );\n                return pipe(\n                  result$,\n                  onStart(() => {\n                    const operation = addAuthToOperation(baseOperation);\n                    bypassQueue.add(\n                      operation.context._instance as OperationInstance\n                    );\n                    retries.next(operation);\n                  }),\n                  filter(\n                    result =>\n                      result.operation.key === baseOperation.key &&\n                      baseOperation.context._instance ===\n                        result.operation.context._instance\n                  ),\n                  take(1),\n                  toPromise\n                );\n              },\n              appendHeaders(\n                operation: Operation,\n                headers: Record<string, string>\n              ) {\n                const fetchOptions =\n                  typeof operation.context.fetchOptions === 'function'\n                    ? operation.context.fetchOptions()\n                    : operation.context.fetchOptions || {};\n                return makeOperation(operation.kind, operation, {\n                  ...operation.context,\n                  fetchOptions: {\n                    ...fetchOptions,\n                    headers: {\n                      ...fetchOptions.headers,\n                      ...headers,\n                    },\n                  },\n                });\n              },\n            })\n          )\n          .then((_config: AuthConfig) => {\n            if (_config) config = _config;\n            flushQueue();\n          })\n          .catch((error: Error) => {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(\n                'authExchange()’s initialization function has failed, which is unexpected.\\n' +\n                  'If your initialization function is expected to throw/reject, catch this error and handle it explicitly.\\n' +\n                  'Unless this error is handled it’ll be passed onto any `OperationResult` instantly and authExchange() will block further operations and retry.',\n                error\n              );\n            }\n\n            errorQueue(error);\n          });\n      }\n\n      initAuth();\n\n      function refreshAuth(operation: Operation) {\n        // add to retry queue to try again later\n        retryQueue.set(\n          operation.key,\n          addAuthAttemptToOperation(operation, true)\n        );\n\n        // check that another operation isn't already doing refresh\n        if (config && !authPromise) {\n          authPromise = config.refreshAuth().then(flushQueue).catch(errorQueue);\n        }\n      }\n\n      function willAuthError(operation: Operation) {\n        return (\n          !operation.context.authAttempt &&\n          config &&\n          config.willAuthError &&\n          config.willAuthError(operation)\n        );\n      }\n\n      function didAuthError(result: OperationResult) {\n        return (\n          config &&\n          config.didAuthError &&\n          config.didAuthError(result.error!, result.operation)\n        );\n      }\n\n      function addAuthToOperation(operation: Operation) {\n        return config ? config.addAuthToOperation(operation) : operation;\n      }\n\n      const opsWithAuth$ = pipe(\n        merge([retries.source, operations$]),\n        map(operation => {\n          if (operation.kind === 'teardown') {\n            retryQueue.delete(operation.key);\n            return operation;\n          } else if (\n            operation.context._instance &&\n            bypassQueue.has(operation.context._instance)\n          ) {\n            return operation;\n          } else if (operation.context.authAttempt) {\n            return addAuthToOperation(operation);\n          } else if (authPromise || !config) {\n            if (!authPromise) initAuth();\n\n            if (!retryQueue.has(operation.key))\n              retryQueue.set(\n                operation.key,\n                addAuthAttemptToOperation(operation, false)\n              );\n\n            return null;\n          } else if (willAuthError(operation)) {\n            refreshAuth(operation);\n            return null;\n          }\n\n          return addAuthToOperation(\n            addAuthAttemptToOperation(operation, false)\n          );\n        }),\n        filter(Boolean)\n      ) as Source<Operation>;\n\n      const result$ = pipe(opsWithAuth$, forward);\n\n      return merge([\n        errors.source,\n        pipe(\n          result$,\n          filter(result => {\n            if (\n              !bypassQueue.has(result.operation.context._instance) &&\n              result.error &&\n              didAuthError(result) &&\n              !result.operation.context.authAttempt\n            ) {\n              refreshAuth(result.operation);\n              return false;\n            }\n\n            if (bypassQueue.has(result.operation.context._instance)) {\n              bypassQueue.delete(result.operation.context._instance);\n            }\n\n            return true;\n          })\n        ),\n      ]);\n    };\n  };\n}\n", "const webCrypto = (\n  typeof window !== 'undefined'\n    ? window.crypto\n    : typeof self !== 'undefined'\n    ? self.crypto\n    : null\n) as typeof globalThis.crypto | null;\n\nlet nodeCrypto: Promise<typeof import('crypto') | void> | void;\n\nconst getNodeCrypto = async (): Promise<typeof import('crypto') | void> => {\n  if (!nodeCrypto) {\n    // Indirect eval'd require/import to guarantee no side-effects in module scope\n    // (optimization for minifiers)\n    try {\n      nodeCrypto = new Function('require', 'return require(\"crypto\")')(require);\n    } catch (_error) {\n      try {\n        nodeCrypto = new Function('return import(\"crypto\")')();\n      } catch (_error) {}\n    }\n  }\n  return nodeCrypto;\n};\n\nexport const hash = async (query: string): Promise<string> => {\n  if (webCrypto && webCrypto.subtle) {\n    const digest = await webCrypto.subtle.digest(\n      { name: 'SHA-256' },\n      new TextEncoder().encode(query)\n    );\n    return new Uint8Array(digest).reduce(\n      (prev, byte) => prev + byte.toString(16).padStart(2, '0'),\n      ''\n    );\n  } else if (await getNodeCrypto()) {\n    // Node.js support\n    return (await nodeCrypto)!.createHash('sha256').update(query).digest('hex');\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    console.warn(\n      '[@urql/exchange-persisted-fetch]: The Node Crypto and Web Crypto APIs are not available.\\n' +\n        'This is an unexpected error. Please report it by filing a GitHub Issue.'\n    );\n  }\n\n  return '';\n};\n", "import {\n  map,\n  makeSubject,\n  fromPromise,\n  filter,\n  merge,\n  mergeMap,\n  takeUntil,\n  pipe,\n} from 'wonka';\n\nimport type {\n  PersistedRequestExtensions,\n  TypedDocumentNode,\n  OperationResult,\n  CombinedError,\n  Exchange,\n  Operation,\n  OperationContext,\n} from '@urql/core';\nimport { makeOperation, stringifyDocument } from '@urql/core';\n\nimport { hash } from './sha256';\n\nconst isPersistedMiss = (error: CombinedError): boolean =>\n  error.graphQLErrors.some(x => x.message === 'PersistedQueryNotFound');\n\nconst isPersistedUnsupported = (error: CombinedError): boolean =>\n  error.graphQLErrors.some(x => x.message === 'PersistedQueryNotSupported');\n\n/** Input parameters for the {@link persistedExchange}. */\nexport interface PersistedExchangeOptions {\n  /** Controls whether GET method requests will be made for Persisted Queries.\n   *\n   * @remarks\n   * When set to `true` or `'within-url-limit'`, the `persistedExchange`\n   * will use GET requests on persisted queries when the request URL\n   * doesn't exceed the 2048 character limit.\n   *\n   * When set to `force`, the `persistedExchange` will set\n   * `OperationContext.preferGetMethod` to `'force'` on persisted queries,\n   * which will force requests to be made using a GET request.\n   *\n   * GET requests are frequently used to make GraphQL requests more\n   * cacheable on CDNs.\n   *\n   * @defaultValue `undefined` - disabled\n   */\n  preferGetForPersistedQueries?: OperationContext['preferGetMethod'];\n  /** Enforces non-automatic persisted queries by ignoring APQ errors.\n   *\n   * @remarks\n   * When enabled, the `persistedExchange` will ignore `PersistedQueryNotFound`\n   * and `PersistedQueryNotSupported` errors and assume that all persisted\n   * queries are already known to the API.\n   *\n   * This is used to switch from Automatic Persisted Queries to\n   * Persisted Queries. This is commonly used to obfuscate GraphQL\n   * APIs.\n   */\n  enforcePersistedQueries?: boolean;\n  /** Custom hashing function for persisted queries.\n   *\n   * @remarks\n   * By default, `persistedExchange` will create a SHA-256 hash for\n   * persisted queries automatically. If you're instead generating\n   * hashes at compile-time, or need to use a custom SHA-256 function,\n   * you may pass one here.\n   *\n   * If `generateHash` returns either `null` or `undefined`, the\n   * operation will not be treated as a persisted operation, which\n   * essentially skips this exchange’s logic for a given operation.\n   *\n   * Hint: The default SHA-256 function uses the WebCrypto API. This\n   * API is unavailable on React Native, which may require you to\n   * pass a custom function here.\n   */\n  generateHash?(\n    query: string,\n    document: TypedDocumentNode<any, any>\n  ): Promise<string | undefined | null>;\n  /** Enables persisted queries to be used for mutations.\n   *\n   * @remarks\n   * When enabled, the `persistedExchange` will also use the persisted queries\n   * logic for mutation operations.\n   *\n   * This is disabled by default, but often used on APIs that obfuscate\n   * their GraphQL APIs.\n   */\n  enableForMutation?: boolean;\n  /** Enables persisted queries to be used for subscriptions.\n   *\n   * @remarks\n   * When enabled, the `persistedExchange` will also use the persisted queries\n   * logic for subscription operations.\n   *\n   * This is disabled by default, but often used on APIs that obfuscate\n   * their GraphQL APIs.\n   */\n  enableForSubscriptions?: boolean;\n}\n\n/** Exchange factory that adds support for Persisted Queries.\n *\n * @param options - A {@link PersistedExchangeOptions} configuration object.\n * @returns the created persisted queries {@link Exchange}.\n *\n * @remarks\n * The `persistedExchange` adds support for (Automatic) Persisted Queries\n * to any `fetchExchange`, `subscriptionExchange`, or other API exchanges\n * following it.\n *\n * It does so by adding the `persistedQuery` extensions field to GraphQL\n * requests and handles `PersistedQueryNotFound` and\n * `PersistedQueryNotSupported` errors.\n *\n * @example\n * ```ts\n * import { Client, cacheExchange, fetchExchange } from '@urql/core';\n * import { persistedExchange } from '@urql/exchange-persisted';\n *\n * const client = new Client({\n *   url: 'URL',\n *   exchanges: [\n *     cacheExchange,\n *     persistedExchange({\n *       preferGetForPersistedQueries: true,\n *     }),\n *     fetchExchange\n *   ],\n * });\n * ```\n */\nexport const persistedExchange =\n  (options?: PersistedExchangeOptions): Exchange =>\n  ({ forward }) => {\n    if (!options) options = {};\n\n    const preferGetForPersistedQueries = options.preferGetForPersistedQueries;\n    const enforcePersistedQueries = !!options.enforcePersistedQueries;\n    const hashFn = options.generateHash || hash;\n    const enableForMutation = !!options.enableForMutation;\n    const enableForSubscriptions = !!options.enableForSubscriptions;\n    let supportsPersistedQueries = true;\n\n    const operationFilter = (operation: Operation) =>\n      supportsPersistedQueries &&\n      !operation.context.persistAttempt &&\n      ((enableForMutation && operation.kind === 'mutation') ||\n        (enableForSubscriptions && operation.kind === 'subscription') ||\n        operation.kind === 'query');\n\n    const getPersistedOperation = async (operation: Operation) => {\n      const persistedOperation = makeOperation(operation.kind, operation, {\n        ...operation.context,\n        persistAttempt: true,\n      });\n\n      const sha256Hash = await hashFn(\n        stringifyDocument(operation.query),\n        operation.query\n      );\n      if (sha256Hash) {\n        persistedOperation.extensions = {\n          ...persistedOperation.extensions,\n          persistedQuery: {\n            version: 1,\n            sha256Hash,\n          },\n        };\n        if (\n          persistedOperation.kind === 'query' &&\n          preferGetForPersistedQueries\n        ) {\n          persistedOperation.context.preferGetMethod =\n            preferGetForPersistedQueries;\n        }\n      }\n\n      return persistedOperation;\n    };\n\n    return operations$ => {\n      const retries = makeSubject<Operation>();\n\n      const forwardedOps$ = pipe(\n        operations$,\n        filter(operation => !operationFilter(operation))\n      );\n\n      const persistedOps$ = pipe(\n        operations$,\n        filter(operationFilter),\n        mergeMap(operation => {\n          const persistedOperation$ = getPersistedOperation(operation);\n          return pipe(\n            fromPromise(persistedOperation$),\n            takeUntil(\n              pipe(\n                operations$,\n                filter(op => op.kind === 'teardown' && op.key === operation.key)\n              )\n            )\n          );\n        })\n      );\n\n      return pipe(\n        merge([persistedOps$, forwardedOps$, retries.source]),\n        forward,\n        map(result => {\n          if (\n            !enforcePersistedQueries &&\n            result.operation.extensions &&\n            result.operation.extensions.persistedQuery\n          ) {\n            if (result.error && isPersistedUnsupported(result.error)) {\n              // Disable future persisted queries if they're not enforced\n              supportsPersistedQueries = false;\n              // Update operation with unsupported attempt\n              const followupOperation = makeOperation(\n                result.operation.kind,\n                result.operation\n              );\n              if (followupOperation.extensions)\n                delete followupOperation.extensions.persistedQuery;\n              retries.next(followupOperation);\n              return null;\n            } else if (result.error && isPersistedMiss(result.error)) {\n              if (result.operation.extensions.persistedQuery.miss) {\n                if (process.env.NODE_ENV !== 'production') {\n                  console.warn(\n                    'persistedExchange()’s results include two misses for the same operation.\\n' +\n                      'This is not expected as it means a persisted error has been delivered for a non-persisted query!\\n' +\n                      'Another exchange with a cache may be delivering an outdated result. For example, a server-side ssrExchange() may be caching an errored result.\\n' +\n                      'Try moving the persistedExchange() in past these exchanges, for example in front of your fetchExchange.'\n                  );\n                }\n\n                return result;\n              }\n              // Update operation with unsupported attempt\n              const followupOperation = makeOperation(\n                result.operation.kind,\n                result.operation\n              );\n              // Mark as missed persisted query\n              followupOperation.extensions = {\n                ...followupOperation.extensions,\n                persistedQuery: {\n                  ...(followupOperation.extensions || {}).persistedQuery,\n                  miss: true,\n                } as PersistedRequestExtensions,\n              };\n              retries.next(followupOperation);\n              return null;\n            }\n          }\n          return result;\n        }),\n        filter((result): result is OperationResult => !!result)\n      );\n    };\n  };\n", "import { stringifyVariables } from '@urql/core';\nimport type { Cache, Resolver, Variables, NullArray } from '../types';\n\nexport type MergeMode = 'outwards' | 'inwards';\n\n/** Input parameters for the {@link relayPagination} factory. */\nexport interface PaginationParams {\n  /** Flip between inwards and outwards pagination.\n   *\n   * @remarks\n   * This is only relevant if you’re querying pages using forwards and\n   * backwards pagination at the same time.\n   * When set to `'inwards'`, its default, pages that have been queried\n   * forward are placed in front of all pages that were queried backwards.\n   * When set to `'outwards'`, the two sets are merged in reverse.\n   */\n  mergeMode?: MergeMode;\n}\n\ninterface PageInfo {\n  __typename: string;\n  endCursor: null | string;\n  startCursor: null | string;\n  hasNextPage: boolean;\n  hasPreviousPage: boolean;\n}\n\ninterface Page {\n  __typename: string;\n  edges: NullArray<string>;\n  nodes: NullArray<string>;\n  pageInfo: PageInfo;\n}\n\nconst defaultPageInfo: PageInfo = {\n  __typename: 'PageInfo',\n  endCursor: null,\n  startCursor: null,\n  hasNextPage: false,\n  hasPreviousPage: false,\n};\n\nconst ensureKey = (x: any): string | null => (typeof x === 'string' ? x : null);\n\nconst concatEdges = (\n  cache: Cache,\n  leftEdges: NullArray<string>,\n  rightEdges: NullArray<string>\n) => {\n  const ids = new Set<string>();\n  for (let i = 0, l = leftEdges.length; i < l; i++) {\n    const edge = leftEdges[i] as string | null;\n    const node = cache.resolve(edge, 'node');\n    if (typeof node === 'string') ids.add(node);\n  }\n\n  const newEdges = leftEdges.slice();\n  for (let i = 0, l = rightEdges.length; i < l; i++) {\n    const edge = rightEdges[i] as string | null;\n    const node = cache.resolve(edge, 'node');\n    if (typeof node === 'string' && !ids.has(node)) {\n      ids.add(node);\n      newEdges.push(edge);\n    }\n  }\n\n  return newEdges;\n};\n\nconst concatNodes = (\n  leftNodes: NullArray<string>,\n  rightNodes: NullArray<string>\n) => {\n  const ids = new Set<string>();\n  for (let i = 0, l = leftNodes.length; i < l; i++) {\n    const node = leftNodes[i];\n    if (typeof node === 'string') ids.add(node);\n  }\n\n  const newNodes = leftNodes.slice();\n  for (let i = 0, l = rightNodes.length; i < l; i++) {\n    const node = rightNodes[i];\n    if (typeof node === 'string' && !ids.has(node)) {\n      ids.add(node);\n      newNodes.push(node);\n    }\n  }\n\n  return newNodes;\n};\n\nconst compareArgs = (\n  fieldArgs: Variables,\n  connectionArgs: Variables\n): boolean => {\n  for (const key in connectionArgs) {\n    if (\n      key === 'first' ||\n      key === 'last' ||\n      key === 'after' ||\n      key === 'before'\n    ) {\n      continue;\n    } else if (!(key in fieldArgs)) {\n      return false;\n    }\n\n    const argA = fieldArgs[key];\n    const argB = connectionArgs[key];\n\n    if (\n      typeof argA !== typeof argB || typeof argA !== 'object'\n        ? argA !== argB\n        : stringifyVariables(argA) !== stringifyVariables(argB)\n    ) {\n      return false;\n    }\n  }\n\n  for (const key in fieldArgs) {\n    if (\n      key === 'first' ||\n      key === 'last' ||\n      key === 'after' ||\n      key === 'before'\n    ) {\n      continue;\n    }\n\n    if (!(key in connectionArgs)) return false;\n  }\n\n  return true;\n};\n\nconst getPage = (\n  cache: Cache,\n  entityKey: string,\n  fieldKey: string\n): Page | null => {\n  const link = ensureKey(cache.resolve(entityKey, fieldKey));\n  if (!link) return null;\n\n  const typename = cache.resolve(link, '__typename') as string;\n  const edges = (cache.resolve(link, 'edges') || []) as NullArray<string>;\n  const nodes = (cache.resolve(link, 'nodes') || []) as NullArray<string>;\n  if (typeof typename !== 'string') {\n    return null;\n  }\n\n  const page: Page = {\n    __typename: typename,\n    edges,\n    nodes,\n    pageInfo: defaultPageInfo,\n  };\n\n  const pageInfoKey = cache.resolve(link, 'pageInfo');\n  if (typeof pageInfoKey === 'string') {\n    const pageInfoType = ensureKey(cache.resolve(pageInfoKey, '__typename'));\n    const endCursor = ensureKey(cache.resolve(pageInfoKey, 'endCursor'));\n    const startCursor = ensureKey(cache.resolve(pageInfoKey, 'startCursor'));\n    const hasNextPage = cache.resolve(pageInfoKey, 'hasNextPage');\n    const hasPreviousPage = cache.resolve(pageInfoKey, 'hasPreviousPage');\n\n    const pageInfo: PageInfo = (page.pageInfo = {\n      __typename: typeof pageInfoType === 'string' ? pageInfoType : 'PageInfo',\n      hasNextPage: typeof hasNextPage === 'boolean' ? hasNextPage : !!endCursor,\n      hasPreviousPage:\n        typeof hasPreviousPage === 'boolean' ? hasPreviousPage : !!startCursor,\n      endCursor,\n      startCursor,\n    });\n\n    if (pageInfo.endCursor === null) {\n      const edge = edges[edges.length - 1] as string | null;\n      if (edge) {\n        const endCursor = cache.resolve(edge, 'cursor');\n        pageInfo.endCursor = ensureKey(endCursor);\n      }\n    }\n\n    if (pageInfo.startCursor === null) {\n      const edge = edges[0] as string | null;\n      if (edge) {\n        const startCursor = cache.resolve(edge, 'cursor');\n        pageInfo.startCursor = ensureKey(startCursor);\n      }\n    }\n  }\n\n  return page;\n};\n\n/** Creates a {@link Resolver} that combines pages that comply to the Relay pagination spec.\n *\n * @param params - A {@link PaginationParams} configuration object.\n * @returns the created Relay pagination {@link Resolver}.\n *\n * @remarks\n * `relayPagination` is a factory that creates a {@link Resolver} that can combine\n * multiple pages on a field that complies to the Relay pagination spec into a single,\n * combined list for infinite scrolling.\n *\n * This resolver will only work on fields that return a `Connection` GraphQL object\n * type, according to the Relay pagination spec.\n *\n * Hint: It's not recommended to use this when you can handle infinite scrolling\n * in your UI code instead.\n *\n * @see {@link https://urql.dev/goto/docs/graphcache/local-resolvers#relay-pagination} for more information.\n * @see {@link https://urql.dev/goto/docs/basics/ui-patterns/#infinite-scrolling} for an alternate approach.\n */\nexport const relayPagination = (\n  params: PaginationParams = {}\n): Resolver<any, any, any> => {\n  const mergeMode = params.mergeMode || 'inwards';\n\n  return (_parent, fieldArgs, cache, info) => {\n    const { parentKey: entityKey, fieldName } = info;\n\n    const allFields = cache.inspectFields(entityKey);\n    const fieldInfos = allFields.filter(info => info.fieldName === fieldName);\n    const size = fieldInfos.length;\n    if (size === 0) {\n      return undefined;\n    }\n\n    let typename: string | null = null;\n    let startEdges: NullArray<string> = [];\n    let endEdges: NullArray<string> = [];\n    let startNodes: NullArray<string> = [];\n    let endNodes: NullArray<string> = [];\n    let pageInfo: PageInfo = { ...defaultPageInfo };\n\n    for (let i = 0; i < size; i++) {\n      const { fieldKey, arguments: args } = fieldInfos[i];\n      if (args === null || !compareArgs(fieldArgs, args)) {\n        continue;\n      }\n\n      const page = getPage(cache, entityKey, fieldKey);\n      if (page === null) {\n        continue;\n      }\n      if (page.nodes.length === 0 && page.edges.length === 0 && typename) {\n        continue;\n      }\n\n      if (\n        mergeMode === 'inwards' &&\n        typeof args.last === 'number' &&\n        typeof args.first === 'number'\n      ) {\n        const firstEdges = page.edges.slice(0, args.first + 1);\n        const lastEdges = page.edges.slice(-args.last);\n        const firstNodes = page.nodes.slice(0, args.first + 1);\n        const lastNodes = page.nodes.slice(-args.last);\n\n        startEdges = concatEdges(cache, startEdges, firstEdges);\n        endEdges = concatEdges(cache, lastEdges, endEdges);\n        startNodes = concatNodes(startNodes, firstNodes);\n        endNodes = concatNodes(lastNodes, endNodes);\n\n        pageInfo = page.pageInfo;\n      } else if (args.after) {\n        startEdges = concatEdges(cache, startEdges, page.edges);\n        startNodes = concatNodes(startNodes, page.nodes);\n        pageInfo.endCursor = page.pageInfo.endCursor;\n        pageInfo.hasNextPage = page.pageInfo.hasNextPage;\n      } else if (args.before) {\n        endEdges = concatEdges(cache, page.edges, endEdges);\n        endNodes = concatNodes(page.nodes, endNodes);\n        pageInfo.startCursor = page.pageInfo.startCursor;\n        pageInfo.hasPreviousPage = page.pageInfo.hasPreviousPage;\n      } else if (typeof args.last === 'number') {\n        endEdges = concatEdges(cache, page.edges, endEdges);\n        endNodes = concatNodes(page.nodes, endNodes);\n        pageInfo = page.pageInfo;\n      } else {\n        startEdges = concatEdges(cache, startEdges, page.edges);\n        startNodes = concatNodes(startNodes, page.nodes);\n        pageInfo = page.pageInfo;\n      }\n\n      if (page.pageInfo.__typename !== pageInfo.__typename)\n        pageInfo.__typename = page.pageInfo.__typename;\n      if (typename !== page.__typename) typename = page.__typename;\n    }\n\n    if (typeof typename !== 'string') {\n      return undefined;\n    }\n\n    const hasCurrentPage = !!ensureKey(\n      cache.resolve(entityKey, fieldName, fieldArgs)\n    );\n    if (!hasCurrentPage) {\n      if (!(info as any).store.schema) {\n        return undefined;\n      } else {\n        info.partial = true;\n      }\n    }\n\n    return {\n      __typename: typename,\n      edges:\n        mergeMode === 'inwards'\n          ? concatEdges(cache, startEdges, endEdges)\n          : concatEdges(cache, endEdges, startEdges),\n      nodes:\n        mergeMode === 'inwards'\n          ? concatNodes(startNodes, endNodes)\n          : concatNodes(endNodes, startNodes),\n      pageInfo: {\n        __typename: pageInfo.__typename,\n        endCursor: pageInfo.endCursor,\n        startCursor: pageInfo.startCursor,\n        hasNextPage: pageInfo.hasNextPage,\n        hasPreviousPage: pageInfo.hasPreviousPage,\n      },\n    };\n  };\n};\n", "import { stringifyVariables } from '@urql/core';\nimport type { Resolver, Variables, NullArray } from '../types';\n\nexport type MergeMode = 'before' | 'after';\n\n/** Input parameters for the {@link simplePagination} factory. */\nexport interface PaginationParams {\n  /** The name of the field argument used to define the page’s offset. */\n  offsetArgument?: string;\n  /** The name of the field argument used to define the page’s length. */\n  limitArgument?: string;\n  /** Flip between forward and backwards pagination.\n   *\n   * @remarks\n   * When set to `'after'`, its default, pages are merged forwards and in order.\n   * When set to `'before'`, pages are merged in reverse, putting later pages\n   * in front of earlier ones.\n   */\n  mergeMode?: MergeMode;\n}\n\n/** Creates a {@link Resolver} that combines pages of a primitive pagination field.\n *\n * @param options - A {@link PaginationParams} configuration object.\n * @returns the created pagination {@link Resolver}.\n *\n * @remarks\n * `simplePagination` is a factory that creates a {@link Resolver} that can combine\n * multiple lists on a paginated field into a single, combined list for infinite\n * scrolling.\n *\n * Hint: It's not recommended to use this when you can handle infinite scrolling\n * in your UI code instead.\n *\n * @see {@link https://urql.dev/goto/docs/graphcache/local-resolvers#simple-pagination} for more information.\n * @see {@link https://urql.dev/goto/docs/basics/ui-patterns/#infinite-scrolling} for an alternate approach.\n */\nexport const simplePagination = ({\n  offsetArgument = 'skip',\n  limitArgument = 'limit',\n  mergeMode = 'after',\n}: PaginationParams = {}): Resolver<any, any, any> => {\n  const compareArgs = (\n    fieldArgs: Variables,\n    connectionArgs: Variables\n  ): boolean => {\n    for (const key in connectionArgs) {\n      if (key === offsetArgument || key === limitArgument) {\n        continue;\n      } else if (!(key in fieldArgs)) {\n        return false;\n      }\n\n      const argA = fieldArgs[key];\n      const argB = connectionArgs[key];\n\n      if (\n        typeof argA !== typeof argB || typeof argA !== 'object'\n          ? argA !== argB\n          : stringifyVariables(argA) !== stringifyVariables(argB)\n      ) {\n        return false;\n      }\n    }\n\n    for (const key in fieldArgs) {\n      if (key === offsetArgument || key === limitArgument) {\n        continue;\n      }\n      if (!(key in connectionArgs)) return false;\n    }\n\n    return true;\n  };\n\n  return (_parent, fieldArgs, cache, info) => {\n    const { parentKey: entityKey, fieldName } = info;\n\n    const allFields = cache.inspectFields(entityKey);\n    const fieldInfos = allFields.filter(info => info.fieldName === fieldName);\n    const size = fieldInfos.length;\n    if (size === 0) {\n      return undefined;\n    }\n\n    const visited = new Set();\n    let result: NullArray<string> = [];\n    let prevOffset: number | null = null;\n\n    for (let i = 0; i < size; i++) {\n      const { fieldKey, arguments: args } = fieldInfos[i];\n      if (args === null || !compareArgs(fieldArgs, args)) {\n        continue;\n      }\n\n      const links = cache.resolve(entityKey, fieldKey) as string[];\n      const currentOffset = args[offsetArgument];\n\n      if (\n        links === null ||\n        links.length === 0 ||\n        typeof currentOffset !== 'number'\n      ) {\n        continue;\n      }\n\n      const tempResult: NullArray<string> = [];\n\n      for (let j = 0; j < links.length; j++) {\n        const link = links[j];\n        if (visited.has(link)) continue;\n        tempResult.push(link);\n        visited.add(link);\n      }\n\n      if (\n        (!prevOffset || currentOffset > prevOffset) ===\n        (mergeMode === 'after')\n      ) {\n        result = [...result, ...tempResult];\n      } else {\n        result = [...tempResult, ...result];\n      }\n\n      prevOffset = currentOffset;\n    }\n\n    const hasCurrentPage = cache.resolve(entityKey, fieldName, fieldArgs);\n    if (hasCurrentPage) {\n      return result;\n    } else if (!(info as any).store.schema) {\n      return undefined;\n    } else {\n      info.partial = true;\n      return result;\n    }\n  };\n};\n"],
  "mappings": "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",
  "names": ["b", "i", "import_react", "import_jsx_runtime", "import_jsx_runtime", "import_jsx_runtime", "import_jsx_runtime", "import_jsx_runtime", "import_jsx_runtime", "import_jsx_runtime", "type", "e", "import_jsx_runtime", "SearchField", "float", "i", "col", "width", "$7nPCv$useMemo", "$7nPCv$useRef", "$7nPCv$useEffect", "_", "last", "i", "column", "i", "c", "p", "$1YSEb$useState", "$1YSEb$useMemo", "$1YSEb$useCallback", "columns", "$20k3Y$react", "getCollectionNode", "items", "$6tF2U$react", "getCollectionNode", "$kIQ5E$react", "childColumns", "updateContext", "context", "getCollectionNode", "$7GIZw$react", "c", "i", "getCollectionNode", "import_react", "i", "collator", "$dDeJM$useMemo", "$parcel$interopDefault", "c", "$parcel$interopDefault", "$cjB6b$useEffect", "e", "$parcel$interopDefault", "import_jsx_runtime", "import_jsx_runtime", "type", "TableHeaderWrapper", "import_jsx_runtime", "string", "number", "exception", "i", "map", "type", "schema", "extend", "object", "c", "date", "merge", "str", "str", "parse", "import_jsx_runtime", "import_react", "import_jsx_runtime", "import_jsx_runtime", "$parcel$interopDefault", "import_react", "import_jsx_runtime", "import_jsx_runtime", "import_jsx_runtime", "visibleItems", "rehydrateGraphQlError", "error", "message", "extensions", "name", "GraphQLError", "nodes", "source", "positions", "path", "CombinedError", "Error", "constructor", "input", "normalizedGraphQLErrors", "graphQLErrors", "map", "generateErrorMessage", "networkErr", "graphQlErrs", "err", "networkError", "super", "this", "response", "toString", "phash", "x", "seed", "h", "i", "l", "length", "charCodeAt", "seen", "Set", "cache", "WeakMap", "stringify", "has", "JSON", "toJSON", "Array", "isArray", "out", "value", "FileConstructor", "NoopConstructor", "BlobConstructor", "keys", "Object", "sort", "getPrototypeOf", "prototype", "key", "get", "Math", "random", "slice", "set", "__key", "add", "delete", "stringifyVariables", "x", "seen", "clear", "stringify", "NoopConstructor", "FileConstructor", "File", "BlobConstructor", "Blob", "GRAPHQL_STRING_RE", "REPLACE_CHAR_RE", "replaceOutsideStrings", "str", "idx", "replace", "sanitizeDocument", "node", "split", "map", "join", "trim", "prints", "Map", "docs", "stringifyDocument", "printed", "loc", "get", "__key", "source", "body", "print", "set", "start", "end", "length", "name", "locationOffset", "line", "column", "hashDocument", "key", "phash", "definitions", "operationName", "getOperationName", "keyDocument", "query", "parse", "noLocation", "createRequest", "_query", "_variables", "extensions", "variables", "printedVars", "kind", "Kind", "OPERATION_DEFINITION", "value", "makeErrorResult", "operation", "error", "response", "data", "CombinedError", "networkError", "extensions", "hasNext", "stale", "decoder", "TextDecoder", "formatNode", "node", "definitions", "definition", "newDefinition", "push", "directives", "length", "_directives", "directive", "name", "value", "slice", "selections", "hasTypename", "kind", "Kind", "OPERATION_DEFINITION", "selectionSet", "selection", "FIELD", "alias", "newSelection", "NAME", "_generated", "formattedDocs", "Map", "formatDocument", "query", "keyDocument", "result", "get", "__key", "set", "Object", "defineProperty", "enumerable", "makeOperation", "kind", "request", "context", "helpUrl", "cache", "Set", "currentDebugStack", "popDebugNode", "pop", "pushDebugNode", "typename", "node", "identifier", "kind", "Kind", "INLINE_FRAGMENT", "OPERATION_DEFINITION", "name", "value", "operation", "FRAGMENT_DEFINITION", "push", "getDebugOutput", "length", "join", "invariant", "condition", "message", "code", "errorMessage", "NODE_ENV", "error", "Error", "warn", "logger", "has", "console", "add", "EMPTY_DIRECTIVES", "getDirectives", "_directives", "getName", "getFragmentTypeName", "typeCondition", "getFieldAlias", "alias", "emptySelectionSet", "getSelectionSet", "selectionSet", "selections", "getTypeCondition", "getFieldArguments", "vars", "args", "arguments", "i", "l", "arg", "valueFromASTUntyped", "filterVariables", "input", "variableDefinitions", "variable", "normalizeVariables", "def", "defaultValue", "key", "getMainOperation", "doc", "definitions", "getFragments", "fragments", "shouldInclude", "directives", "include", "skip", "directive", "isDeferred", "defer", "argument", "isOptional", "optional", "required", "BUILTIN_NAME", "isFieldNullable", "schema", "fieldName", "field", "getField", "type", "isListNullable", "ofType", "isFieldAvailableOnType", "indexOf", "isInterfaceOfType", "types", "get", "expectAbstractType", "expectObjectType", "isSubType", "fields", "warnAboutResolver", "warnAboutAbstractResolver", "keyOfField", "stringifyVariables", "joinKeys", "parentKey", "fieldInfoOfKey", "fieldKey", "parenIndex", "slice", "JSON", "parse", "deserializeKeyInfo", "dotIndex", "entityKey", "replace", "currentOwnership", "currentDataMapping", "currentData", "currentOptimisticKey", "currentOperation", "currentDependencies", "currentForeignData", "currentOptimistic", "makeData", "data", "isArray", "newData", "set", "ownsData", "initDataState", "operationType", "layerKey", "isOptimistic", "isForeignData", "WeakSet", "WeakMap", "hydrating", "optimisticOrder", "commutativeKeys", "reserveLayer", "splice", "delete", "createLayer", "deleteLayer", "clearDataState", "getCurrentDependencies", "dirtyKeys", "squashLayer", "storage", "setTimeout", "gc", "persistData", "noopDataState", "deferredKeys", "DEFAULT_EMPTY_SET", "setNode", "map", "keymap", "optimistic", "base", "entity", "Object", "create", "getNode", "updateRCForLink", "link", "by", "Array", "updateRCForEntity", "count", "refCount", "newCount", "extractNodeFields", "fieldInfos", "seenFieldKeys", "extractNodeMapFields", "keys", "record", "records", "__typename", "linkNode", "links", "updateDependencies", "queryRootKey", "updatePersist", "persist", "serializeKeys", "readRecord", "readLink", "writeRecord", "hasField", "writeLink", "entityLinks", "hasNext", "index", "clearLayer", "unshift", "Map", "previousDependencies", "entry", "entries", "keyMap", "inspectFields", "x", "writeData", "clear", "contextRef", "deferRef", "optionalRef", "getFieldError", "ctx", "__internal", "path", "errorMap", "makeContext", "store", "variables", "parent", "parentTypeName", "parentFieldKey", "partial", "graphQLErrors", "graphQLError", "updateContext", "isFragmentHeuristicallyMatching", "some", "FIELD", "makeSelectionIterator", "_defer", "_optional", "child", "next", "select", "fragment", "isFragmentOptional", "_generated", "ensureData", "ensureLink", "ref", "keyOfEntity", "_query", "request", "query", "formatDocument", "rootKey", "rootFields", "rootSelect", "readRoot", "InMemoryData", "readSelection", "dependencies", "rootNames", "iterate", "hasChanged", "output", "fieldAlias", "fieldValue", "dataFieldValue", "readRootField", "originalData", "getFieldResolver", "resolvers", "fieldResolver", "directiveResolver", "directiveNode", "result", "isQuery", "mutation", "subscription", "hasFields", "hasPartials", "fieldArgs", "resolver", "resultValue", "resolveResolverResult", "resolveLink", "stringify", "prevData", "isOwnedData", "_isListNullable", "childResult", "isDataOrKey", "newLink", "childLink", "_write", "writeSelection", "rootField", "isRoot", "writeType", "existingTypes", "typeSet", "updates", "optimisticMutations", "writeField", "undefined", "updater", "KEYLESS_TYPE_RE", "prevLink", "indexKey", "test", "childKey", "invalidateEntity", "invalidateType", "Store", "constructor", "opts", "this", "globalIDs", "queryName", "mutationName", "subscriptionName", "buildClientSchema", "__schema", "typemap", "buildNameMap", "arr", "buildType", "interfaces", "possibleTypes", "queryType", "mutationType", "subscriptionType", "abstract", "possible", "abstractType", "possibleType", "out", "expectValidKeyingConfig", "expectValidUpdatesConfig", "addition", "expectValidResolversConfig", "validQueries", "resolverQuery", "Query", "validTypeProperties", "resolverProperty", "expectValidOptimisticMutationsConfig", "validMutations", "id", "_id", "resolve", "fieldLink", "resolveFieldByKey", "invalidate", "updateQuery", "createRequest", "readQuery", "readFragment", "fragmentName", "_queryFragment", "writeFragment", "_writeFragment", "dataToWrite", "rest", "addMetadata", "meta", "makeOperation", "context", "toRequestPolicy", "requestPolicy", "cacheExchange", "forward", "client", "dispatchDebug", "readData", "then", "hydrateData", "onCacheHydrated", "optimisticKeysToDependencies", "mutationResultBuffer", "operations", "results", "blockedDependencies", "requestedRefetch", "deps", "reexecutingOperations", "dependentOperations", "isBlockedByOptimisticUpdate", "dep", "values", "collectPendingOperations", "pendingOperations", "executePendingOperations", "op", "policy", "reexecuteOperation", "_reexecutingOperations", "prepareForwardedOperation", "size", "depOps", "operationResultFromCache", "cacheOutcome", "outcome", "updateCacheWithResult", "queryDependencies", "writeDependencies", "queryResult", "extensions", "stale", "operations$", "cacheOps$", "share", "filter", "nonCacheOps$", "cacheMissOps$", "res", "source", "cacheResult$", "shouldReexecute", "hasLayer", "result$", "merge", "nonOptimisticResults$", "cacheResult", "optimisticMutationCompletion$", "mergeMap", "empty", "bufferedResult", "shift", "fromArray", "addAuthAttemptToOperation", "operation", "authAttempt", "makeOperation", "kind", "context", "authExchange", "init", "client", "forward", "bypassQueue", "Set", "retries", "makeSubject", "errors", "retryQueue", "Map", "flushQueue", "authPromise", "queue", "forEach", "next", "errorQueue", "error", "makeErrorResult", "config", "operations$", "initAuth", "Promise", "resolve", "then", "mutate", "query", "variables", "baseOperation", "createRequestOperation", "createRequest", "toPromise", "take", "filter", "result", "key", "_instance", "onStart", "addAuthToOperation", "add", "result$", "appendHeaders", "headers", "fetchOptions", "_config", "catch", "NODE_ENV", "console", "warn", "refreshAuth", "set", "opsWithAuth$", "Boolean", "map", "delete", "has", "willAuthError", "merge", "source", "didAuthError", "webCrypto", "window", "crypto", "self", "nodeCrypto", "hash", "async", "subtle", "digest", "name", "TextEncoder", "encode", "query", "Uint8Array", "reduce", "prev", "byte", "toString", "padStart", "Function", "require", "_error", "getNodeCrypto", "createHash", "update", "NODE_ENV", "console", "warn", "persistedExchange", "options", "forward", "preferGetForPersistedQueries", "enforcePersistedQueries", "hashFn", "generateHash", "enableForMutation", "enableForSubscriptions", "supportsPersistedQueries", "operationFilter", "operation", "context", "persistAttempt", "kind", "operations$", "retries", "makeSubject", "forwardedOps$", "filter", "persistedOps$", "mergeMap", "persistedOperation$", "persistedOperation", "makeOperation", "sha256Hash", "stringifyDocument", "extensions", "persistedQuery", "version", "preferGetMethod", "takeUntil", "op", "key", "fromPromise", "result", "map", "error", "graphQLErrors", "some", "x", "message", "followupOperation", "next", "miss", "merge", "source", "defaultPageInfo", "__typename", "endCursor", "startCursor", "hasNextPage", "hasPreviousPage", "ensureKey", "x", "concatEdges", "cache", "leftEdges", "rightEdges", "ids", "Set", "i", "l", "length", "node", "resolve", "add", "newEdges", "slice", "edge", "has", "push", "concatNodes", "leftNodes", "rightNodes", "newNodes", "compareArgs", "fieldArgs", "connectionArgs", "key", "argA", "argB", "stringifyVariables", "getPage", "entityKey", "fieldKey", "link", "typename", "edges", "nodes", "page", "pageInfo", "pageInfoKey", "pageInfoType", "relayPagination", "params", "mergeMode", "_parent", "info", "parentKey", "fieldName", "fieldInfos", "inspectFields", "filter", "size", "startEdges", "endEdges", "startNodes", "endNodes", "arguments", "args", "last", "first", "firstEdges", "lastEdges", "firstNodes", "lastNodes", "after", "before", "store", "schema", "partial", "b", "React", "object", "schema", "blob", "x", "other", "map", "i", "oldIndex", "val", "keys", "element", "value", "state", "memoState", "textEncoder", "isEqual", "type", "key", "storedState", "error"]
}
