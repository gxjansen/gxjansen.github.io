{
  "version": 3,
  "sources": ["../../@keystatic/core/dist/index-4fcf9271.js"],
  "sourcesContent": ["import { aX as basicFormFieldWithSimpleReaderParse, an as FieldDataError, b3 as assertRequired } from './index-cf1193f7.js';\nimport { NumberField } from '@keystar/ui/number-field';\nimport { useReducer } from 'react';\nimport { jsx } from 'react/jsx-runtime';\n\nfunction validateInteger(validation, value, label) {\n  if (value !== null && (typeof value !== 'number' || !Number.isInteger(value))) {\n    return `${label} must be a whole number`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if (value !== null) {\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined && value < validation.min) {\n      return `${label} must be at least ${validation.min}`;\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined && value > validation.max) {\n      return `${label} must be at most ${validation.max}`;\n    }\n  }\n}\n\nfunction IntegerFieldInput(props) {\n  var _props$validation;\n  const [blurred, onBlur] = useReducer(() => true, false);\n  return /*#__PURE__*/jsx(NumberField, {\n    label: props.label,\n    description: props.description,\n    isRequired: (_props$validation = props.validation) === null || _props$validation === void 0 ? void 0 : _props$validation.isRequired,\n    errorMessage: props.forceValidation || blurred ? validateInteger(props.validation, props.value, props.label) : undefined,\n    onBlur: onBlur,\n    autoFocus: props.autoFocus,\n    value: props.value === null ? undefined : props.value,\n    onChange: val => {\n      props.onChange(val === undefined ? null : val);\n    }\n  });\n}\n\nfunction integer({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return basicFormFieldWithSimpleReaderParse({\n    label,\n    Input(props) {\n      return /*#__PURE__*/jsx(IntegerFieldInput, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue !== null && defaultValue !== void 0 ? defaultValue : null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value === 'number') {\n        return value;\n      }\n      throw new FieldDataError('Must be a number');\n    },\n    validate(value) {\n      const message = validateInteger(validation, value, label);\n      if (message !== undefined) {\n        throw new FieldDataError(message);\n      }\n      assertRequired(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nexport { integer as i };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAEA,mBAA2B;AAC3B,yBAAoB;AAEpB,SAAS,gBAAgB,YAAY,OAAO,OAAO;AACjD,MAAI,UAAU,SAAS,OAAO,UAAU,YAAY,CAAC,OAAO,UAAU,KAAK,IAAI;AAC7E,WAAO,GAAG,KAAK;AAAA,EACjB;AACA,MAAI,eAAe,QAAQ,eAAe,UAAU,WAAW,cAAc,UAAU,MAAM;AAC3F,WAAO,GAAG,KAAK;AAAA,EACjB;AACA,MAAI,UAAU,MAAM;AAClB,SAAK,eAAe,QAAQ,eAAe,SAAS,SAAS,WAAW,SAAS,UAAa,QAAQ,WAAW,KAAK;AACpH,aAAO,GAAG,KAAK,qBAAqB,WAAW,GAAG;AAAA,IACpD;AACA,SAAK,eAAe,QAAQ,eAAe,SAAS,SAAS,WAAW,SAAS,UAAa,QAAQ,WAAW,KAAK;AACpH,aAAO,GAAG,KAAK,oBAAoB,WAAW,GAAG;AAAA,IACnD;AAAA,EACF;AACF;AAEA,SAAS,kBAAkB,OAAO;AAChC,MAAI;AACJ,QAAM,CAAC,SAAS,MAAM,QAAI,yBAAW,MAAM,MAAM,KAAK;AACtD,aAAoB,wBAAI,aAAa;AAAA,IACnC,OAAO,MAAM;AAAA,IACb,aAAa,MAAM;AAAA,IACnB,aAAa,oBAAoB,MAAM,gBAAgB,QAAQ,sBAAsB,SAAS,SAAS,kBAAkB;AAAA,IACzH,cAAc,MAAM,mBAAmB,UAAU,gBAAgB,MAAM,YAAY,MAAM,OAAO,MAAM,KAAK,IAAI;AAAA,IAC/G;AAAA,IACA,WAAW,MAAM;AAAA,IACjB,OAAO,MAAM,UAAU,OAAO,SAAY,MAAM;AAAA,IAChD,UAAU,SAAO;AACf,YAAM,SAAS,QAAQ,SAAY,OAAO,GAAG;AAAA,IAC/C;AAAA,EACF,CAAC;AACH;AAEA,SAAS,QAAQ;AAAA,EACf;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAAG;AACD,SAAO,oCAAoC;AAAA,IACzC;AAAA,IACA,MAAM,OAAO;AACX,iBAAoB,wBAAI,mBAAmB;AAAA,QACzC;AAAA,QACA;AAAA,QACA;AAAA,QACA,GAAG;AAAA,MACL,CAAC;AAAA,IACH;AAAA,IACA,eAAe;AACb,aAAO,iBAAiB,QAAQ,iBAAiB,SAAS,eAAe;AAAA,IAC3E;AAAA,IACA,MAAM,OAAO;AACX,UAAI,UAAU,QAAW;AACvB,eAAO;AAAA,MACT;AACA,UAAI,OAAO,UAAU,UAAU;AAC7B,eAAO;AAAA,MACT;AACA,YAAM,IAAI,eAAe,kBAAkB;AAAA,IAC7C;AAAA,IACA,SAAS,OAAO;AACd,YAAM,UAAU,gBAAgB,YAAY,OAAO,KAAK;AACxD,UAAI,YAAY,QAAW;AACzB,cAAM,IAAI,eAAe,OAAO;AAAA,MAClC;AACA,qBAAe,OAAO,YAAY,KAAK;AACvC,aAAO;AAAA,IACT;AAAA,IACA,UAAU,OAAO;AACf,aAAO;AAAA,QACL,OAAO,UAAU,OAAO,SAAY;AAAA,MACtC;AAAA,IACF;AAAA,EACF,CAAC;AACH;",
  "names": []
}
