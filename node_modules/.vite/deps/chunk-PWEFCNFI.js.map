{
  "version": 3,
  "sources": ["../../@keystatic/core/dist/index-65b27f1d.js"],
  "sourcesContent": ["import { a$ as basicFormFieldWithSimpleReaderParse, ar as FieldDataError, b7 as assertRequired } from './index-330df5ae.js';\nimport { c } from './react-compiler-runtime-0011f46e.js';\nimport { NumberField } from '@keystar/ui/number-field';\nimport { useReducer } from 'react';\nimport { jsx } from 'react/jsx-runtime';\n\nfunction validateInteger(validation, value, label) {\n  if (value !== null && (typeof value !== 'number' || !Number.isInteger(value))) {\n    return `${label} must be a whole number`;\n  }\n  if (validation !== null && validation !== void 0 && validation.isRequired && value === null) {\n    return `${label} is required`;\n  }\n  if (value !== null) {\n    if ((validation === null || validation === void 0 ? void 0 : validation.min) !== undefined && value < validation.min) {\n      return `${label} must be at least ${validation.min}`;\n    }\n    if ((validation === null || validation === void 0 ? void 0 : validation.max) !== undefined && value > validation.max) {\n      return `${label} must be at most ${validation.max}`;\n    }\n  }\n}\n\nfunction IntegerFieldInput(props) {\n  var _props$validation;\n  const $ = c(15);\n  let t0;\n  if ($[0] === Symbol.for(\"react.memo_cache_sentinel\")) {\n    t0 = () => true;\n    $[0] = t0;\n  } else {\n    t0 = $[0];\n  }\n  const [blurred, onBlur] = useReducer(t0, false);\n  const t1 = (_props$validation = props.validation) === null || _props$validation === void 0 ? void 0 : _props$validation.isRequired;\n  let t2;\n  if ($[1] !== props || $[2] !== blurred) {\n    t2 = props.forceValidation || blurred ? validateInteger(props.validation, props.value, props.label) : undefined;\n    $[1] = props;\n    $[2] = blurred;\n    $[3] = t2;\n  } else {\n    t2 = $[3];\n  }\n  const t3 = props.value === null ? undefined : props.value;\n  let t4;\n  if ($[4] !== props) {\n    t4 = val => {\n      props.onChange(val === undefined ? null : val);\n    };\n    $[4] = props;\n    $[5] = t4;\n  } else {\n    t4 = $[5];\n  }\n  let t5;\n  if ($[6] !== props.label || $[7] !== props.description || $[8] !== props.autoFocus || $[9] !== t1 || $[10] !== t2 || $[11] !== onBlur || $[12] !== t3 || $[13] !== t4) {\n    t5 = /*#__PURE__*/jsx(NumberField, {\n      label: props.label,\n      description: props.description,\n      isRequired: t1,\n      errorMessage: t2,\n      onBlur: onBlur,\n      autoFocus: props.autoFocus,\n      value: t3,\n      onChange: t4\n    });\n    $[6] = props.label;\n    $[7] = props.description;\n    $[8] = props.autoFocus;\n    $[9] = t1;\n    $[10] = t2;\n    $[11] = onBlur;\n    $[12] = t3;\n    $[13] = t4;\n    $[14] = t5;\n  } else {\n    t5 = $[14];\n  }\n  return t5;\n}\n\nfunction integer({\n  label,\n  defaultValue,\n  validation,\n  description\n}) {\n  return basicFormFieldWithSimpleReaderParse({\n    label,\n    Input(props) {\n      return /*#__PURE__*/jsx(IntegerFieldInput, {\n        label: label,\n        description: description,\n        validation: validation,\n        ...props\n      });\n    },\n    defaultValue() {\n      return defaultValue !== null && defaultValue !== void 0 ? defaultValue : null;\n    },\n    parse(value) {\n      if (value === undefined) {\n        return null;\n      }\n      if (typeof value === 'number') {\n        return value;\n      }\n      throw new FieldDataError('Must be a number');\n    },\n    validate(value) {\n      const message = validateInteger(validation, value, label);\n      if (message !== undefined) {\n        throw new FieldDataError(message);\n      }\n      assertRequired(value, validation, label);\n      return value;\n    },\n    serialize(value) {\n      return {\n        value: value === null ? undefined : value\n      };\n    }\n  });\n}\n\nexport { integer as i };\n"],
  "mappings": "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",
  "names": []
}
