/* Import Component Styles */
@use './utilities/utilities';
@use './components/alerts';
@use './components/cards';
@use './components/links';
@use './base/typography';
@use './prose';

/* Base Styles */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base Typography */
@layer base {
  html {
    font-size: 16px;
    
    @screen md {
      font-size: 22.4px; /* 1.4rem */
    }
  }
}

/* Layer Components */
@layer components {
  /* Card Base Styles */
  .card {
    @apply bg-white dark:bg-base-900 rounded-xl shadow-lg transition-all duration-300 overflow-hidden;
  }

  .card-content {
    @apply p-6 sm:p-8 flex flex-col;
  }

  .card-title {
    @apply text-xl font-semibold mb-4 text-base-900 dark:text-base-100;
  }

  .card-meta {
    @apply text-sm text-base-500 dark:text-base-400 flex flex-wrap gap-2 mb-4;
  }

  .cards-grid {
    @apply grid gap-6 md:grid-cols-2 lg:grid-cols-3;
  }

  /* Card Image */
  .card img:first-child {
    @apply aspect-video object-cover;
  }

  /* Horizontal Scroll Container */
  .scroll-container {
    @apply flex overflow-x-auto gap-4 pb-6 snap-x snap-mandatory;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
    scroll-behavior: smooth;
    mask-image: linear-gradient(to right, 
      black calc(100% - 100px),
      transparent calc(100% - 20px)
    );

    &::-webkit-scrollbar {
      display: none;
    }
  }

  /* Hide the mask when at the end */
  .scroll-container-wrapper[data-at-end='true'] .scroll-container {
    mask-image: none;
  }

  .scroll-container-wrapper {
    @apply relative;

    &::after {
      content: '❯';
      @apply absolute top-1/2 -translate-y-1/2 right-2 w-12 h-12 pointer-events-none;
      @apply bg-white/95 dark:bg-gray-800/95 rounded-full;
      @apply grid place-items-center text-3xl;
      @apply text-gray-800 dark:text-gray-200;
      @apply opacity-95 transition-all duration-300;
      @apply shadow-lg;
      animation: pulseRight 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      aria-hidden: true; /* Hide from screen readers since we have descriptive text */
    }

    @keyframes pulseRight {
      0%, 100% {
        transform: translateX(0) translateY(-50%);
        opacity: 0.95;
      }
      50% {
        transform: translateX(6px) translateY(-50%);
        opacity: 1;
        box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
      }
    }

    &[data-at-end='true']::after {
      @apply hidden;
    }
  }

  .scroll-item {
    @apply flex-none snap-start;
    width: calc(100% - 2rem);
    
    @screen sm {
      width: calc(50% - 1rem);
    }
    
    @screen lg {
      width: calc(33.333% - 1rem);
    }
  }

  .site-container {
    @apply mx-auto max-w-7xl;
  }

  /* Background Patterns */
  .bg-grid-pattern {
    background-image: url('/assets/grid-pattern-light.svg');
    background-position: center;
    background-repeat: repeat;
  }

  :root[class~="dark"] .bg-grid-pattern {
    background-image: url('/assets/grid-pattern-dark.svg');
  }

  /* Grid pattern container with faded edges */
  .grid-pattern-container {
    @apply relative min-h-[200px];
    pointer-events: none;

    &::before {
      content: "";
      @apply absolute inset-0 bg-grid-pattern;
      mask-image: radial-gradient(
        ellipse at center,
        black 30%,
        transparent 80%
      );
      z-index: -1;
      pointer-events: none;
    }

    > * {
      pointer-events: auto;
    }
  }

  /* Enhanced Gradient Effects */
  .gradient-top-left {
    @apply fixed -top-[600px] -left-[600px] h-[1600px] w-[1600px];
    @apply bg-[radial-gradient(circle_at_30%_30%,rgba(20,184,166,0.25)_0%,rgba(20,184,166,0.2)_10%,rgba(20,184,166,0.15)_20%,rgba(20,184,166,0.1)_30%,rgba(20,184,166,0.05)_40%,rgba(20,184,166,0.025)_50%,transparent_70%)];
    @apply dark:bg-[radial-gradient(circle_at_30%_30%,rgba(20,184,166,0.15)_0%,rgba(20,184,166,0.12)_10%,rgba(20,184,166,0.09)_20%,rgba(20,184,166,0.06)_30%,rgba(20,184,166,0.03)_40%,rgba(20,184,166,0.015)_50%,transparent_70%)];
  }

  .gradient-bottom-right {
    @apply fixed -bottom-[600px] -right-[600px] h-[1600px] w-[1600px];
    @apply bg-[radial-gradient(circle_at_70%_70%,rgba(20,184,166,0.25)_0%,rgba(20,184,166,0.2)_10%,rgba(20,184,166,0.15)_20%,rgba(20,184,166,0.1)_30%,rgba(20,184,166,0.05)_40%,rgba(20,184,166,0.025)_50%,transparent_70%)];
    @apply dark:bg-[radial-gradient(circle_at_70%_70%,rgba(20,184,166,0.15)_0%,rgba(20,184,166,0.12)_10%,rgba(20,184,166,0.09)_20%,rgba(20,184,166,0.06)_30%,rgba(20,184,166,0.03)_40%,rgba(20,184,166,0.015)_50%,transparent_70%)];
  }

  /* Z-index Management */
  .z-background {
    @apply -z-10;
  }

  .z-base {
    @apply z-0;
  }

  .z-nav {
    @apply z-10;
  }

  .z-overlay {
    @apply z-20;
  }

  .z-modal {
    @apply z-30;
  }

  .z-toast {
    @apply z-40;
  }

  .z-tooltip {
    @apply z-50;
  }
}
