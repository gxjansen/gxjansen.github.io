---
import { Icon } from "astro-icon";
import { Image } from "astro:assets";
import Button from "@components/Button/Button.astro";

interface Props {
  name: string;
  description: string;
  mainImage: string;
  link: string;
  iconBgColor: string;
  license?: string;
  tagline?: string;
  githubUrl?: string;
}

const {
  name,
  description,
  mainImage,
  link,
  iconBgColor,
  license,
  tagline,
  githubUrl,
} = Astro.props;
---

<article class="card group px-3 py-3 sm:px-4 sm:py-4">
  <div class="grid grid-cols-1 gap-8 md:grid-cols-[auto,1fr] md:gap-6">
    <div class="mx-auto flex-shrink-0 pt-4 md:mx-0 md:pt-0">
      <div
        class={`rounded-lg ${iconBgColor} p-4 w-20 h-20 flex items-center justify-center transition-transform duration-300 group-hover:scale-105`}
      >
        {
          mainImage.startsWith("/") ? (
            <Image
              src={mainImage}
              alt={`${name} icon`}
              width={48}
              height={48}
              class="h-12 w-12"
            />
          ) : (
            <Icon
              name={mainImage}
              class="h-12 w-12 text-base-50"
              aria-hidden="true"
            />
          )
        }
      </div>
    </div>
    <div class="flex flex-col text-center md:text-left">
      <h2 class="h2 mb-2">
        {
          link ? (
            <a
              href={link}
              target="_blank"
              rel="noopener noreferrer"
              class="hover:text-primary transition-colors duration-200"
            >
              {name}
            </a>
          ) : (
            name
          )
        }
      </h2>
      {
        (tagline || license) && (
          <p class="mb-2 text-sm text-base-400">
            {tagline || `License: ${license}`}
          </p>
        )
      }
      <p class="card-description prose text-lg" set:html={description} />
      <div class="mt-8 flex items-center justify-center gap-4 md:justify-start">
        {
          link && (
            <Button
              href={link}
              variant="primary"
              arrow="right"
              target="_blank"
              rel="noopener noreferrer"
            >
              View Project
              <span class="sr-only">View {name} project</span>
            </Button>
          )
        }
        {
          githubUrl && (
            <Button
              href={githubUrl}
              variant="outline"
              target="_blank"
              rel="noopener noreferrer"
            >
              <span class="flex items-center gap-2">
                <Icon
                  name="tabler/filled/brand-github"
                  class="h-5 w-5"
                  aria-hidden="true"
                />
                <span>Available on GitHub</span>
              </span>
            </Button>
          )
        }
      </div>
    </div>
  </div>
</article>
