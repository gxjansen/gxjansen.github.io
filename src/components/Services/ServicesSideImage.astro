---
/**
 * * These are alternating side cards with titles, text, and images
 * Recommend using 2 or 3 cards in a row
 */
import { Icon } from "astro-icon";

// components
import ServiceCard from "@components/ServiceCard/ServiceCardSideImage.astro";
import Badge from "@components/Badge/Badge.astro";

// images
import image1 from "@images/house.jpg";
import image2 from "@images/living-room.jpg";
import image3 from "@images/paint-swatches.jpg";
import image4 from "@images/customerday.jpg";

interface ServiceItem {
  image: ImageMetadata;
  title: string;
  details: string;
  href?: string;
  ctaText?: string;
  showCta?: boolean;
  href2?: string;
  ctaText2?: string;
}

const serviceData: ServiceItem[] = [
  {
    image: image1,
    title: "Childhood",
    href: "https://www.linkedin.com/in/guido/",
    ctaText: "View my journey",
    showCta: false,
    details: `I was born in 1982 in Zwolle, in the Netherlands. I lived in Hattem, Tiel, Amersfoort, Utrecht, Breukelen (yes, Brooklyn), Hoofddorp, Amsterdam and I now live in Ouderkerk aan de Amstel (a suburb of Amsterdam).

Until 2004 I spent most of my time swimming, won several Dutch championships and participated in European championship tournaments.`,
  },
  {
    image: image2,
    title: "University",
    href: "https://www.linkedin.com/in/guido/",
    ctaText: "See my education",
    showCta: true,
    details: `I studied Applied Cognitive Psychology at the University of Utrecht. I was board member of the Student Group of Social Sciences (SGS) in 2006/2007. For more info about my study/CV you can take a look at my LinkedIn Profile.`,
  },
  {
    image: image3,
    title: "Professional experience",
    href: "/authors/gxjansen/",
    ctaText: "View my credentials, awards & articles",
    showCta: true,
    details: `I don't just manage communities. I design bridges between what ecosystem truly needs and what organizations can sustainably deliver. A systematic approach to understanding and serving external audiences has generated consistent results across every role, from running 500+ experiments at Randstad to launching innovative community programs for enterprise platforms.

What makes my approach unique is that I combine cognitive psychology expertise with automation advocacy to build systems that scale human understanding. Whether using AI to identify behavioral patterns across millions of interactions or automating community touchpoints while maintaining authentic connection, I believe the future belongs to leaders who can bridge human psychology with technological leverage.

Currently serving as Global Business & Technology Evangelist for Spryker, a major commerce platform, where I lead developer ecosystem growth and strategic community initiatives.`,
  },
  {
    image: image4,
    title: "Online Communities & Events",
    href: "/events",
    ctaText: "See events I'm involved in",
    href2: "/communities",
    ctaText2: "View my community track record",
    showCta: true,
    details: `My main involvement lies with web-based software applications and the communities involved with it. I founded one of the largest local Joomla! communities worldwide and I was a Dutch translation coordinator for the platform for quite some time. I also organized the two-day event Joomladays in 2009.

I switched focus to e-commerce and between 2008 and 2021 focussed on one system in particular: Magento.  I organized the first worldwide Meet Magento event in 2009, organized 11 events in total and expanded the conference to over 550 yearly participants. This makes it one of the biggest Magento events worldwide and the start of a global movement of over 60 events.

In 2021 it was time to focus on something new and I became the Global Business & Technology Evangelist at the digital commerce visionairy Spryker.`,
  },
];

// Check for reduced motion preference
const reducedMotionQuery = "(prefers-reduced-motion: reduce)";
const shouldReduceMotion = typeof window !== "undefined" 
  ? window.matchMedia(reducedMotionQuery).matches 
  : false;
---

<section 
  id="services-side-image" 
  class="overflow-hidden pb-24 md:pb-28"
  aria-labelledby="about-heading"
>
  <div 
    class="grid-pattern-container relative"
    role="presentation"
  >
    <h2 id="about-heading" class="sr-only">About Guido Xavier Jansen</h2>
    
    <!-- Name explanation block -->
    <div 
      class="alert alert-accent"
      role="complementary"
      aria-label="Name explanation"
    >
      <div class="alert-content px-8 py-4">
        <div class="flex flex-col md:flex-row items-center justify-center gap-4">
          <div 
            class="flex items-center justify-center"
            aria-hidden="true"
          >
            <Icon
              name="tabler:letter-g"
              class="w-10 h-10 text-white"
              stroke-width="1"
              stroke="currentColor"
              fill="none"
              role="presentation"
            />
            <Icon
              name="tabler:letter-x"
              class="w-14 h-14 text-base-100 -ml-3"
              stroke-width="8"
              stroke="currentColor"
              fill="none"
              role="presentation"
            />
            <Icon
              name="tabler:letter-j"
              class="w-10 h-10 text-white -ml-4"
              stroke-width="1"
              stroke="currentColor"
              fill="none"
              role="presentation"
            />
            <Icon 
              name="tabler:question-mark" 
              class="w-12 h-12 text-white -ml-2" 
              stroke-width="3"
              stroke="currentColor"
              fill="none"
              role="presentation"
            />
          </div>
          <p class="text-lg !text-white text-center md:text-left">
            To answer a common question right out of the gate: Yes, the <span class="text-black font-bold">X</span> in my name is not just there for decorative reasons: my second name is <span class="font-bold">Xavier</span>!
          </p>
        </div>
      </div>
    </div>

    <!-- Biography sections -->
    <div 
      class="flex flex-col gap-16 md:mt-16 md:gap-24"
      role="list"
      aria-label="Biography sections"
    >
      {
        serviceData.map((feature, idx) => (
          <ServiceCard
            title={feature.title}
            details={feature.details}
            image={feature.image}
            href={feature.href ?? '#'}
            imageSide={idx % 2 === 0 ? "right" : "left"}
            idx={idx}
            ctaText={feature.ctaText}
            showCta={feature.showCta}
            href2={feature.href2}
            ctaText2={feature.ctaText2}
            data-aos={shouldReduceMotion ? "" : (idx % 2 === 0 ? "fade-right" : "fade-left")}
          />
        ))
      }
    </div>
  </div>
</section>

<script>
  // Handle reduced motion preference changes
  if (typeof window !== 'undefined') {
    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    
    function handleMotionPreference(e: MediaQueryListEvent | MediaQueryList) {
      const elements = document.querySelectorAll('[data-aos]');
      elements.forEach(element => {
        if (e.matches) {
          element.setAttribute('data-aos', '');
        } else {
          const index = Array.from(document.querySelectorAll('[role="listitem"]')).indexOf(element);
          element.setAttribute('data-aos', index % 2 === 0 ? 'fade-right' : 'fade-left');
        }
      });
    }

    mediaQuery.addEventListener('change', handleMotionPreference);
    handleMotionPreference(mediaQuery);
  }
</script>
