---
/**
 * * Three row image marquee
 * JS allows the animation to pause while you hover over it.
 */

import { Image } from "astro:assets";
import { Icon } from "astro-icon";

// components
import Badge from "@components/Badge/Badge.astro";

// images
import image1 from "@assets/images/gallery/couch2.jpg";
import image2 from "@assets/images/gallery/customerday.jpg";
import image3 from "@assets/images/gallery/excite2022.webp";
import image4 from "@assets/images/gallery/hackathon.jpg";
import image5 from "@assets/images/gallery/office1.webp";
import image6 from "@assets/images/gallery/office2.webp";
import image7 from "@assets/images/gallery/oskar.jpg";
import image8 from "@assets/images/gallery/MNOT.jpeg";
import image9 from "@assets/images/gallery/presenting.jpg";
import image10 from "@assets/images/gallery/sprykerwall.jpg";
import image11 from "@assets/images/gallery/alumio.jpg";
import image12 from "@assets/images/gallery/podcast.jpg";
import image13 from "@assets/images/gallery/artwall.jpeg";
import image14 from "@assets/images/gallery/presenting2.png";
import image15 from "@assets/images/gallery/crocafe.jpeg";
import image16 from "@assets/images/gallery/phelps2.jpeg";
import image17 from "@assets/images/gallery/phelps3.jpeg";
import image18 from "@assets/images/gallery/excite2.jpeg";
import image19 from "@assets/images/gallery/meetcommerce.jpeg";
import image20 from "@assets/images/gallery/Spryker_Day02-0637.jpg";
import image21 from "@assets/images/gallery/Spryker_Day02-2851.jpg";
import image22 from "@assets/images/gallery/Spryker_Day02-2876.jpg";
import image23 from "@assets/images/gallery/Spryker_Day02-3166.jpg";

interface GalleryImage {
  image: ImageMetadata;
  alt: string;
}

interface MarqueeImages {
  images: GalleryImage[];
}

// Gallery images with descriptive alt text for accessibility
const marqueeTop: MarqueeImages = {
  images: [
    { image: image1, alt: "Guido working on a couch during a casual work session" },
    { image: image2, alt: "Guido at Customer Day event" },
    { image: image16, alt: "Guido with Peep Laja at a conference" },
    { image: image4, alt: "Guido participating in a hackathon event" },
    { image: image7, alt: "Guido with colleague Oskar at the office" },
    { image: image19, alt: "Guido presenting at Meet Commerce event" },
    { image: image20, alt: "Guido presenting at Spryker Day conference" },
  ],
};

const marqueeMiddle: MarqueeImages = {
  images: [
    { image: image6, alt: "Guido working at the office" },
    { image: image9, alt: "Guido presenting at a conference" },
    { image: image10, alt: "Guido at the Spryker office wall" },
    { image: image11, alt: "Guido at Alumio event" },
    { image: image3, alt: "Guido at Excite Conference 2022" },
    { image: image13, alt: "Guido at the office art wall" },
    { image: image5, alt: "Guido in the office environment" },
    { image: image21, alt: "Guido at Spryker Day conference" },
    { image: image22, alt: "Guido networking at Spryker Day" },
  ],
};

const marqueeBottom: MarqueeImages = {
  images: [
    { image: image14, alt: "Guido presenting at an industry event" },
    { image: image15, alt: "Guido at CRO Cafe meetup" },
    { image: image12, alt: "Guido recording a podcast episode" },
    { image: image17, alt: "Guido with Peep Laja discussing CRO" },
    { image: image8, alt: "Guido with Mark Nottingham at a tech conference" },
    { image: image18, alt: "Guido at Excite Conference" },
    { image: image23, alt: "Guido engaging with attendees at Spryker Day" },
  ],
};
---

<section
  id="feature-gallery-marquee"
  class="py-24 md:py-28"
>
  <div class="site-container">
    <div class="relative">
      <div class="relative">
        <div class="mx-auto mb-16 text-center md:max-w-4xl" data-reveal="fade-up">
          <Badge>Gallery</Badge>
          <h2 class="h2">Me at work</h2>
          <!-- <p class="description mt-4 text-pretty text-lg md:text-xl">
            Lorem ipsum dolor sit amet consectetur, adipisicing elit.
          </p> -->
        </div>

            <div class="relative flex flex-col gap-6 overflow-hidden md:gap-10 mask-gradient">
          {/* Gradient overlays for fade effect - using multi-step gradients for smoother transition */}
          <div class="gradient-fade-left z-dropdown"></div>
          <div class="gradient-fade-right z-dropdown"></div>

          <!-- marquee top row -->
          <div class="marquee-top relative flex gap-6 overflow-hidden md:gap-10">
            <div
              class="flex min-w-full shrink-0 animate-marquee items-center justify-around gap-6 md:gap-10"
            >
              {
                marqueeTop.images.map((item) => (
                  <Image
                    src={item.image}
                    alt={item.alt}
                    loading="lazy"
                    width={400}
                    height={300}
                    quality={75}
                    format="webp"
                    sizes="(max-width: 768px) 10rem, 20rem"
                    class="aspect-[4/3] max-w-[clamp(10rem,28vmin,20rem)] rounded-md object-cover shadow-md"
                  />
                ))
              }
            </div>
            <div
              aria-hidden="true"
              class="flex min-w-full shrink-0 animate-marquee items-center justify-around gap-6 md:gap-10"
            >
              {
                marqueeTop.images.map((item) => (
                  <Image
                    src={item.image}
                    alt={item.alt}
                    loading="lazy"
                    width={400}
                    height={300}
                    quality={75}
                    format="webp"
                    sizes="(max-width: 768px) 10rem, 20rem"
                    class="aspect-[4/3] max-w-[clamp(10rem,28vmin,20rem)] rounded-md object-cover shadow-md"
                  />
                ))
              }
            </div>
          </div>

          <!-- marquee middle row -->
          <div class="marquee-middle relative flex gap-6 overflow-hidden md:gap-10">
            <div
              class="flex min-w-full shrink-0 animate-marquee items-center justify-around gap-6 [animation-direction:reverse] md:gap-10"
            >
              {
                marqueeMiddle.images.map((item) => (
                  <Image
                    src={item.image}
                    alt={item.alt}
                    loading="lazy"
                    width={400}
                    height={300}
                    quality={75}
                    format="webp"
                    sizes="(max-width: 768px) 10rem, 20rem"
                    class="aspect-[4/3] max-w-[clamp(10rem,28vmin,20rem)] rounded-md object-cover shadow-md"
                  />
                ))
              }
            </div>
            <div
              aria-hidden="true"
              class="flex min-w-full shrink-0 animate-marquee items-center justify-around gap-6 [animation-direction:reverse] md:gap-10"
            >
              {
                marqueeMiddle.images.map((item) => (
                  <Image
                    src={item.image}
                    alt={item.alt}
                    loading="lazy"
                    width={400}
                    height={300}
                    quality={75}
                    format="webp"
                    sizes="(max-width: 768px) 10rem, 20rem"
                    class="aspect-[4/3] max-w-[clamp(10rem,28vmin,20rem)] rounded-md object-cover shadow-md"
                  />
                ))
              }
            </div>
          </div>

          <!-- marquee bottom row -->
          <div class="marquee-bottom relative flex gap-6 overflow-hidden md:gap-10">
            <div
              class="flex min-w-full shrink-0 animate-marquee items-center justify-around gap-6 md:gap-10"
            >
              {
                marqueeBottom.images.map((item) => (
                  <Image
                    src={item.image}
                    alt={item.alt}
                    loading="lazy"
                    width={400}
                    height={300}
                    quality={75}
                    format="webp"
                    sizes="(max-width: 768px) 10rem, 20rem"
                    class="aspect-[4/3] max-w-[clamp(10rem,28vmin,20rem)] rounded-md object-cover shadow-md"
                  />
                ))
              }
            </div>
            <div
              aria-hidden="true"
              class="flex min-w-full shrink-0 animate-marquee items-center justify-around gap-6 md:gap-10"
            >
              {
                marqueeBottom.images.map((item) => (
                  <Image
                    src={item.image}
                    alt={item.alt}
                    loading="lazy"
                    width={400}
                    height={300}
                    quality={75}
                    format="webp"
                    sizes="(max-width: 768px) 10rem, 20rem"
                    class="aspect-[4/3] max-w-[clamp(10rem,28vmin,20rem)] rounded-md object-cover shadow-md"
                  />
                ))
              }
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  const setupMarquee = () => {
    const marqueeTop = document.querySelector(".marquee-top");
    const marqueeMiddle = document.querySelector(".marquee-middle");
    const marqueeBottom = document.querySelector(".marquee-bottom");

    // add the clauss "pause" when the mouse enters the marquee
    marqueeTop?.addEventListener("mouseover", () => {
      marqueeTop.querySelectorAll(".animate-marquee").forEach((el) => {
        el.classList.add("pause");
      });
    });
    marqueeMiddle?.addEventListener("mouseover", () => {
      marqueeMiddle.querySelectorAll(".animate-marquee").forEach((el) => {
        el.classList.add("pause");
      });
    });
    marqueeBottom?.addEventListener("mouseover", () => {
      marqueeBottom.querySelectorAll(".animate-marquee").forEach((el) => {
        el.classList.add("pause");
      });
    });

    // remove the class "pause" when the mouse leaves the marquee
    marqueeTop?.addEventListener("mouseout", () => {
      marqueeTop.querySelectorAll(".animate-marquee").forEach((el) => {
        el.classList.remove("pause");
      });
    });
    marqueeMiddle?.addEventListener("mouseout", () => {
      marqueeMiddle.querySelectorAll(".animate-marquee").forEach((el) => {
        el.classList.remove("pause");
      });
    });
    marqueeBottom?.addEventListener("mouseout", () => {
      marqueeBottom.querySelectorAll(".animate-marquee").forEach((el) => {
        el.classList.remove("pause");
      });
    });
  };

  // runs on initial page load
  setupMarquee();

  // runs on view transitions navigation
  document.addEventListener("astro:after-swap", setupMarquee);
</script>
