---
/**
 * * Header section for the About page with responsive image placement
 * Desktop: Text left-aligned with image on the right
 * Mobile: Text followed by image below
 */
import Badge from "@components/Badge/Badge.astro";

// Define the path to the images
const desktopImagePath = "/images/guido-left.png";
const mobileImagePath = "/images/guido-up.png";

// Check for reduced motion preference
const reducedMotionQuery = "(prefers-reduced-motion: reduce)";
const shouldReduceMotion = typeof window !== "undefined" 
  ? window.matchMedia(reducedMotionQuery).matches 
  : false;
---

<section 
  class="overflow-hidden pt-24 md:pt-28"
  aria-labelledby="about-header-heading"
  role="region"
>
  <div 
    class="relative"
    role="presentation"
  >
    <div 
      class="flex flex-col md:flex-row md:items-start md:gap-12" 
      data-aos={shouldReduceMotion ? "" : "fade-up"}
    >
      <!-- Text Content -->
      <div 
        class="md:w-2/3 text-left"
        aria-labelledby="about-header-heading"
      >
        <Badge>About</Badge>
        <h2 
          id="about-header-heading" 
          class="h2 mb-6"
        >
          Hi, I'm Guido <span role="img" aria-label="waving hand">ðŸ‘‹</span>
        </h2>
        <div 
          class="space-y-6 text-lg md:text-xl"
          aria-label="Professional introduction"
        >
          <p class="description">
            I'm a <span class="text-primary-500 font-semibold">cognitive psychologist</span> and <span class="text-primary-500 font-semibold">customer experience optimization</span> specialist.
          </p>
          <p class="description">
            With a track record in <span class="text-primary-500 font-semibold">e-commerce</span> since 2008, I'm currently the <span class="text-primary-500 font-semibold">Global Business & Technology Evangelist</span> at Spryker.
          </p>
          <p class="description">
            Notable achievements include building <span class="text-primary-500 font-semibold">optimization teams</span>, directing <span class="text-primary-500 font-semibold">global communities</span>, and hosting an award-winning podcast, <span class="text-primary-500 font-semibold">CRO.CAFE</span>.
          </p>
          <p class="description">
            I have a knack for transforming <span class="text-primary-500 font-semibold">user data</span> into <span class="text-primary-500 font-semibold">customer success</span> and <span class="text-primary-500 font-semibold">business growth</span>.
          </p>
          <p class="description">
            A well-known figure on the <span class="text-primary-500 font-semibold">international stage</span>, and I love to regularly share my expertise at <span class="text-primary-500 font-semibold">global events</span>.
          </p>
        </div>
      </div>

      <!-- Image Container -->
      <div 
        class="md:w-1/3 md:self-center"
        role="complementary"
        aria-label="Profile images"
      >
        <!-- Desktop Image -->
        <figure class="hidden md:block">
          <img 
            src={desktopImagePath} 
            alt="Guido Jansen, a cognitive psychologist and CX optimization specialist, standing confidently in a professional setting" 
            class="w-full h-auto max-h-[600px] object-contain"
            loading="eager"
            width="600"
            height="900"
          />
        </figure>

        <!-- Mobile Image -->
        <figure class="mt-8 md:hidden">
          <img 
            src={mobileImagePath} 
            alt="Guido Jansen, a cognitive psychologist and CX optimization specialist, in a casual professional pose" 
            class="w-full h-auto max-h-[400px] object-contain"
            loading="eager"
            width="400"
            height="600"
          />
        </figure>
      </div>
    </div>
  </div>
</section>

<style>
  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    [data-aos] {
      transition: none !important;
      transform: none !important;
    }
  }

  /* High contrast mode enhancements */
  @media (forced-colors: active) {
    .text-primary-500 {
      color: CanvasText;
      font-weight: bold;
    }
  }

  /* Ensure proper focus visibility */
  :focus-visible {
    outline: 2px solid var(--focus-ring-color, theme('colors.primary.500'));
    outline-offset: 2px;
  }
</style>

<script>
  // Handle reduced motion preference changes
  if (typeof window !== 'undefined') {
    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    
    function handleMotionPreference(e: MediaQueryListEvent | MediaQueryList) {
      const elements = document.querySelectorAll('[data-aos]');
      elements.forEach(element => {
        if (e.matches) {
          element.setAttribute('data-aos', '');
        } else {
          element.setAttribute('data-aos', 'fade-up');
        }
      });
    }

    mediaQuery.addEventListener('change', handleMotionPreference);
    handleMotionPreference(mediaQuery);
  }
</script>
