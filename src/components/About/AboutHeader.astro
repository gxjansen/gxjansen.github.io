---
/**
 * * Header section for the About page with responsive image placement
 * Desktop: Text left-aligned with image on the right
 * Mobile: Text followed by image below
 */
import Badge from "@components/Badge/Badge.astro";

// Define the path to the images
const desktopImagePath = "/images/guido-left.png";
const mobileImagePath = "/images/guido-up.png";

// Check for reduced motion preference
const reducedMotionQuery = "(prefers-reduced-motion: reduce)";
const shouldReduceMotion = typeof window !== "undefined" 
  ? window.matchMedia(reducedMotionQuery).matches 
  : false;
---

<section 
  class="overflow-hidden pt-24 pb-12 md:pt-28 md:pb-16"
  aria-labelledby="about-header-heading"
  role="region"
>
  <div 
    class="site-container px-4 relative"
    role="presentation"
  >
    <div
      class="flex flex-col md:flex-row md:items-start md:gap-12"
    >
      <!-- Text Content -->
      <div 
        class="md:w-2/3 text-left"
        aria-labelledby="about-header-heading"
      >
        <Badge>About</Badge>
        <h1
          id="about-header-heading"
          class="h1 mb-6"
        >
          Hi, I'm Guido<span role="img" aria-label="waving hand">ðŸ‘‹</span>
        </h1>
        <div
          class="space-y-6 text-lg md:text-xl"
          aria-label="Professional introduction"
        >
          <p class="description">
            I build <span class="text-primary-500 font-semibold">communities that matter to the business</span>, not just to the community itself. Where other might optimize for engagement metrics, I design systems that translate <span class="text-primary-500 font-semibold">developer and customer intelligence</span> into product strategy, reduce support costs, and create competitive moats built on trust.
          </p>
          <p class="description">
            I've done this from zero multiple times: as founder of <span class="text-primary-500 font-semibold">Dutchento/Meet Magento Netherlands</span> (scaling to 600+ annual attendees), as creator of <span class="text-primary-500 font-semibold">CRO.CAFE</span> (200+ episodes, Experimentation Culture Award), and as community leader at <span class="text-primary-500 font-semibold">Spryker</span> (serving 130+ enterprise clients). My psychology background helps me paint a better picture why technical users behave the way they do, and how to design interventions that actually work.
          </p>
        </div>
      </div>

      <!-- Image Container -->
      <div 
        class="md:w-1/3"
        role="complementary"
        aria-label="Profile images"
      >
        <!-- Desktop Image -->
        <figure class="hidden md:block md:absolute md:bottom-0 md:right-4">
          <img 
            src={desktopImagePath} 
            alt="Guido Jansen, a cognitive psychologist and CX optimization specialist, standing confidently in a professional setting" 
            class="w-full h-auto max-h-[700px] object-contain"
            loading="eager"
            width="600"
            height="900"
          />
        </figure>

        <!-- Mobile Image -->
        <figure class="mt-8 md:hidden">
          <img 
            src={mobileImagePath} 
            alt="Guido Jansen, a cognitive psychologist and CX optimization specialist, in a casual professional pose" 
            class="w-full h-auto max-h-[400px] object-contain"
            loading="eager"
            width="400"
            height="600"
          />
        </figure>
      </div>
    </div>
  </div>
</section>

<style>
  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    [data-aos] {
      transition: none !important;
      transform: none !important;
    }
  }

  /* High contrast mode enhancements */
  @media (forced-colors: active) {
    .text-primary-500 {
      color: CanvasText;
      font-weight: bold;
    }
  }

  /* Ensure proper focus visibility */
  :focus-visible {
    outline: 2px solid var(--focus-ring-color, theme('colors.primary.500'));
    outline-offset: 2px;
  }
</style>

<script>
  // Handle reduced motion preference changes
  if (typeof window !== 'undefined') {
    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    
    function handleMotionPreference(e: MediaQueryListEvent | MediaQueryList) {
      const elements = document.querySelectorAll('[data-aos]');
      elements.forEach(element => {
        if (e.matches) {
          element.setAttribute('data-aos', '');
        } else {
          element.setAttribute('data-aos', 'fade-up');
        }
      });
    }

    mediaQuery.addEventListener('change', handleMotionPreference);
    handleMotionPreference(mediaQuery);
  }
</script>
