---
/**
 * * The Pattern section - Shows repeatable community building success
 * Section 2 of the About page restructure
 */
import Badge from "@components/Badge/Badge.astro";
import { Icon } from "astro-icon";

interface CommunityItem {
  name: string;
  period: string;
  description: string;
  icon: string;
}

const communities: CommunityItem[] = [
  {
    name: "Joomla!",
    period: "2004-2008",
    description: "My first community experience. Contributed to the Mambo open source CMS, then followed the fork that became Joomla!. Foundation for everything that followed.",
    icon: "tabler:code"
  },
  {
    name: "Dutchento / Meet Magento Netherlands",
    period: "2008-2021",
    description: "Founded the Dutch Magento community when no local hub existed. Scaled from meetups to 600+ annual attendees. Organized 11 editions. Received Community Builder Award from eBay CEO John Donahoe. Sparked a global event series.",
    icon: "tabler:users"
  },
  {
    name: "CRO.CAFE",
    period: "2018-2022",
    description: "Created an interview podcast for the conversion optimization community. 200+ episodes across four languages. Received Experimentation Culture Award. Built sustainable sponsorship model.",
    icon: "tabler:microphone"
  },
  {
    name: "Spryker",
    period: "2021-2025",
    description: "Built enterprise community function from scratch serving 130+ B2B clients. Launched Customer Advisory Board, MIT-licensed module ecosystem, and structures that translate community intelligence into product decisions.",
    icon: "tabler:building"
  }
];
---

<section
  id="the-pattern"
  class="py-24 md:py-28 bg-base-50 dark:bg-base-800/50"
  aria-labelledby="pattern-heading"
>
  <div class="site-container px-4">
    <div class="mx-auto text-center max-w-3xl mb-16" data-aos="fade-up">
      <Badge>The Pattern</Badge>
      <h2 id="pattern-heading" class="h2 mb-4">
        Building Communities From Zero
      </h2>
      <p class="description text-lg md:text-xl">
        I've built community functions from scratch four times, in different contexts. Here's the pattern:
      </p>
    </div>

    <div class="max-w-4xl mx-auto">
      <div class="relative">
        <!-- Timeline line -->
        <div
          class="absolute left-8 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-primary-500 via-primary-400 to-primary-300 dark:from-primary-600 dark:via-primary-500 dark:to-primary-400 -translate-x-1/2"
          aria-hidden="true"
        ></div>

        <!-- Timeline items -->
        {communities.map((community, index) => (
          <div
            class={`relative flex items-start gap-6 md:gap-8 mb-12 last:mb-0 ${index % 2 === 0 ? 'md:flex-row' : 'md:flex-row-reverse'}`}
            data-aos={index % 2 === 0 ? "fade-right" : "fade-left"}
            data-aos-delay={index * 100}
          >
            <!-- Timeline node -->
            <div
              class="absolute left-8 md:left-1/2 w-4 h-4 bg-primary-500 dark:bg-primary-400 rounded-full -translate-x-1/2 mt-2 ring-4 ring-base-50 dark:ring-base-800/50 z-10"
              aria-hidden="true"
            ></div>

            <!-- Content card -->
            <div class={`ml-16 md:ml-0 md:w-[calc(50%-2rem)] ${index % 2 === 0 ? 'md:pr-8' : 'md:pl-8'}`}>
              <article class="bg-surface dark:bg-gray-800 rounded-xl shadow-md p-6 transition-all duration-300 hover:shadow-lg">
                <div class="flex items-center gap-3 mb-3">
                  <div class="p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg">
                    <Icon
                      name={community.icon}
                      class="w-5 h-5 text-primary-600 dark:text-primary-400"
                    />
                  </div>
                  <span class="text-sm font-medium text-primary-600 dark:text-primary-400">
                    {community.period}
                  </span>
                </div>
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">
                  {community.name}
                </h3>
                <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                  {community.description}
                </p>
              </article>
            </div>
          </div>
        ))}
      </div>
    </div>

    <div class="text-center mt-12" data-aos="fade-up">
      <a
        href="/communities/"
        class="inline-flex items-center text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium transition-colors duration-200"
      >
        Read the full community building story
        <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>
  </div>
</section>

<style>
  /* Ensure proper stacking on mobile */
  @media (max-width: 768px) {
    [data-aos="fade-left"],
    [data-aos="fade-right"] {
      --aos-default-duration: 400ms;
    }
  }
</style>
