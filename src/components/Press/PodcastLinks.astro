---
/**
 * Fallback component for podcasts without local audio files.
 * Shows links to external platforms (no DRM required for links).
 */
interface Props {
  spotifyId?: string;
  applePodcastsUrl?: string;
  title: string;
}

const { spotifyId, applePodcastsUrl, title } = Astro.props;

const spotifyUrl = spotifyId
  ? `https://open.spotify.com/episode/${spotifyId}`
  : null;
---

<div class="podcast-links w-full rounded-xl bg-base-200 dark:bg-base-800 p-4 transition-colors">
  <p class="text-sm text-base-600 dark:text-base-400 mb-3">
    Listen on your preferred platform:
  </p>
  <div class="flex flex-wrap gap-2">
    {spotifyUrl && (
      <a
        href={spotifyUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-[#1DB954] hover:bg-[#1ed760] text-white text-sm font-medium transition-colors"
        aria-label={`Listen to ${title} on Spotify (opens in new tab)`}
      >
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/>
        </svg>
        Spotify
      </a>
    )}
    {applePodcastsUrl && (
      <a
        href={applePodcastsUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-gradient-to-b from-[#F452FF] to-[#832BC1] hover:from-[#f76aff] hover:to-[#9333ea] text-white text-sm font-medium transition-colors"
        aria-label={`Listen to ${title} on Apple Podcasts (opens in new tab)`}
      >
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M5.34 0A5.328 5.328 0 000 5.34v13.32A5.328 5.328 0 005.34 24h13.32A5.328 5.328 0 0024 18.66V5.34A5.328 5.328 0 0018.66 0zm6.525 2.568c2.336 0 4.448.902 6.056 2.587 1.224 1.272 1.912 2.619 2.264 4.392.12.59-.12 1.2-.59 1.54-.468.329-1.089.39-1.619.149a1.752 1.752 0 01-1.02-1.32c-.24-1.17-.72-2.088-1.5-2.88-1.2-1.2-2.69-1.77-4.591-1.77-1.62 0-3.06.54-4.32 1.62-1.68 1.44-2.52 3.36-2.52 5.76 0 1.2.24 2.34.72 3.42s1.2 2.1 2.16 3.06c.36.36.54.84.54 1.32 0 .48-.18.93-.51 1.26-.72.72-1.89.72-2.58.03-1.32-1.32-2.34-2.76-3.03-4.32-.69-1.56-1.05-3.24-1.05-5.04 0-3.36 1.26-6.18 3.78-8.46 1.92-1.74 4.26-2.61 7.02-2.61zm.06 4.5c1.32 0 2.52.42 3.6 1.26 1.2.96 1.92 2.28 2.16 3.96.06.54-.12 1.05-.51 1.44-.39.39-.93.57-1.47.51-.6-.06-1.08-.36-1.38-.87-.18-.3-.33-.42-.45-.63-.24-.42-.54-.78-.9-1.08-.6-.48-1.29-.72-2.07-.72s-1.47.24-2.07.72c-.78.6-1.26 1.44-1.44 2.52-.18 1.08.06 2.04.72 2.88.42.54.96.93 1.62 1.17.66.24 1.17.39 1.53.45.54.06 1.02.33 1.35.75s.45.93.36 1.47c-.12.72-.57 1.26-1.23 1.47-.36.12-.66.09-.9.09-.36 0-.63-.03-.81-.06-.9-.15-1.74-.48-2.52-.99s-1.44-1.17-1.98-1.98c-.78-1.14-1.17-2.46-1.17-3.96 0-1.92.66-3.54 1.98-4.86 1.26-1.26 2.76-1.89 4.5-1.89zm.06 4.47c.54 0 1.02.15 1.44.45.48.36.78.87.9 1.53.06.36.03.66-.06.9-.15.36-.42.63-.81.81s-.75.21-1.08.09c-.24-.09-.45-.24-.63-.45-.24-.3-.36-.63-.36-1.02 0-.48.18-.9.54-1.26.36-.36.78-.54 1.26-.54zm-.06 4.53c.54 0 .99.21 1.35.63.36.42.54.93.54 1.53v2.01c0 .54-.18 1.02-.54 1.44-.36.42-.81.63-1.35.63s-.99-.21-1.35-.63c-.36-.42-.54-.9-.54-1.44v-2.01c0-.6.18-1.11.54-1.53.36-.42.81-.63 1.35-.63z"/>
        </svg>
        Apple Podcasts
      </a>
    )}
  </div>
</div>
