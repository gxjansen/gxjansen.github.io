---
import type { CollectionEntry } from "astro:content";

interface Props {
  currentSlug: string;
  presentations: CollectionEntry<"presentations">[];
}

const { currentSlug, presentations } = Astro.props;

// Sort presentations by title
const sortedPresentations = presentations.sort((a, b) =>
  (a.data.title ?? "").localeCompare(b.data.title ?? ""),
);

// Find current presentation index
const currentIndex = sortedPresentations.findIndex(
  (p) => p.slug === currentSlug,
);
const prevPresentation =
  currentIndex > 0 ? sortedPresentations[currentIndex - 1] : null;
const nextPresentation =
  currentIndex < sortedPresentations.length - 1
    ? sortedPresentations[currentIndex + 1]
    : null;
---

<nav class="mt-12 border-t border-base-200 pt-8 dark:border-base-800">
  <div class="flex items-center justify-between">
    <a
      href="/presentations/"
      class="flex items-center gap-2 text-base-600 hover:text-primary-500 dark:text-base-400 dark:hover:text-primary-400"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-4 w-4"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        fill="none"
      >
        <path d="M15 6l-6 6l6 6"></path>
      </svg>
      Back to Presentation Overview
    </a>
  </div>

  <div class="mt-8 flex items-center justify-between gap-4">
    {
      prevPresentation && (
        <a
          href={`/presentations/${prevPresentation.slug}/`}
          class="group flex-1 rounded-lg border border-base-200 p-4 hover:border-primary-500 dark:border-base-800 dark:hover:border-primary-400"
        >
          <span class="flex items-center gap-1 text-sm text-base-500 group-hover:text-primary-500 dark:text-base-400 dark:group-hover:text-primary-400">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              fill="none"
            >
              <path d="M15 6l-6 6l6 6" />
            </svg>
            Previous
          </span>
          <p class="mt-1 line-clamp-2 font-medium text-base-900 group-hover:text-primary-500 dark:text-white dark:group-hover:text-primary-400">
            {prevPresentation.data.title}
          </p>
        </a>
      )
    }

    {
      nextPresentation && (
        <a
          href={`/presentations/${nextPresentation.slug}/`}
          class="group flex-1 rounded-lg border border-base-200 p-4 text-right hover:border-primary-500 dark:border-base-800 dark:hover:border-primary-400"
        >
          <span class="flex items-center justify-end gap-1 text-sm text-base-500 group-hover:text-primary-500 dark:text-base-400 dark:group-hover:text-primary-400">
            Next
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              fill="none"
            >
              <path d="M9 6l6 6l-6 6" />
            </svg>
          </span>
          <p class="mt-1 line-clamp-2 font-medium text-base-900 group-hover:text-primary-500 dark:text-white dark:group-hover:text-primary-400">
            {nextPresentation.data.title}
          </p>
        </a>
      )
    }
  </div>
</nav>
