---
interface Props {
  slideshareKey: string;
}

const { slideshareKey } = Astro.props;
---

<div class="mb-12">
  <h2 class="h3 mb-4">Slides</h2>
  <div
    class="relative rounded-lg bg-base-200 pb-[56.25%] dark:bg-base-800"
    id={`slide-container-${slideshareKey}`}
  >
    <iframe
      src={`https://www.slideshare.net/slideshow/embed_code/key/${slideshareKey}?hostedIn=slideshare&page=upload`}
      class="absolute left-0 top-0 h-full w-full rounded-lg border-none"
      allowfullscreen
      loading="lazy"
      onload="this.parentElement.classList.remove('bg-base-200', 'dark:bg-base-800')"
      onerror={`document.getElementById('slide-container-${slideshareKey}').innerHTML = '<div class="absolute inset-0 flex items-center justify-center text-base-500 dark:text-base-400">Failed to load slides. <a href="https://www.slideshare.net/slideshow/embed_code/key/${slideshareKey}" target="_blank" class="ml-2 text-primary-500 hover:underline">View on SlideShare</a></div>'`}
    ></iframe>
  </div>
</div>

<script is:inline define:vars={{ slideshareKey }}>
  // Suppress jQuery not found errors
  window.jQuery = window.jQuery || function () {};
  window.$ = window.$ || function () {};
</script>
