---
/**
 * Native HTML <details> accordion component
 * Uses the `name` attribute to enable "only one open at a time" behavior
 * when multiple accordions share the same group name.
 */
import { Icon } from "astro-icon";

interface Props {
  title: string;
  details: string;
  /** Group name for exclusive accordions - only one with same name can be open */
  group?: string;
}

const { title, details, group = "accordion" } = Astro.props;
---

<details class="accordion group" name={group}>
  <summary
    class="primary-focus flex cursor-pointer list-none items-center justify-between gap-2 py-3 text-lg font-bold text-base-900 transition hover:text-primary-500 dark:text-base-100 dark:hover:text-primary-500"
  >
    {title}
    <Icon
      name="tabler/circle-arrow-up"
      aria-hidden="true"
      class="accordion__chevron size-6 shrink-0 rotate-180 text-primary-500 transition-transform duration-[400ms] ease-[cubic-bezier(0.33,1,0.68,1)]"
    />
  </summary>
  <div class="accordion__content">
    <p class="description prose mb-4 mr-auto mt-1 max-w-lg leading-snug">
      <Fragment set:html={details} />
    </p>
  </div>
</details>

<style>
  /* Hide default marker (webkit + Firefox) */
  details summary {
    list-style: none;
  }
  details summary::-webkit-details-marker {
    display: none;
  }

  /* Rotate chevron when open */
  details[open] .accordion__chevron {
    transform: rotate(0deg);
  }

  /* Animate content with grid technique for smooth height transitions */
  .accordion__content {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 400ms cubic-bezier(0.33, 1, 0.68, 1);
  }

  .accordion__content > * {
    overflow: hidden;
  }

  details[open] .accordion__content {
    grid-template-rows: 1fr;
  }
</style>
