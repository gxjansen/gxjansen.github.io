---
// layout
import BaseLayout from "@layouts/BaseLayout.astro";

// components
import HeroSideImage from "@components/Hero/HeroSideImage.astro";
import FeatureCardsSmall from "@components/Feature/FeatureCardsSmall.astro";
import FeatureGalleryMarquee from "@components/Feature/FeatureGalleryMarquee.astro";
import FeatureFlagsMarquee from "@components/Feature/FeatureFlagsMarquee.astro";
import SiteContent from "@components/SiteContent/SiteContent.astro";
import CtaCardSplit from "@components/Cta/CtaCardSplit.astro";
import UpcomingEvents from "@components/Events/UpcomingEvents.astro";
import CompanyLogos from "@components/Companies/CompanyLogos.astro";

// utils
import { getLocaleFromUrl } from "@js/localeUtils";
import { getTranslatedData } from "@js/translationUtils";
import { getAllEvents } from "../utils/eventUtils";

// Load all events with their icons
const eventIcons = await getAllEvents();

// data
const currLocale = getLocaleFromUrl(Astro.url);
const siteData = getTranslatedData("siteData", currLocale);
---

<BaseLayout title={siteData.title} description={siteData.description}>
  <HeroSideImage />
  <SiteContent />
  <FeatureCardsSmall />

  <UpcomingEvents events={eventIcons} />
  
  <div class="flex justify-center mb-16">
    <a 
      href="/events" 
      class="inline-flex min-h-[44px] min-w-[44px] items-center justify-center rounded-lg border border-gray-300 bg-white px-5 py-3 text-center text-base font-medium text-base-700 dark:text-base-200 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"
      aria-label="View all past speaking events"
    >
      View Past Events
    </a>
  </div>
  
  <FeatureFlagsMarquee />

  <FeatureGalleryMarquee />
  <CompanyLogos />
  <CtaCardSplit />
</BaseLayout>
