---
// layout
import BaseLayout from "@layouts/BaseLayout.astro";

// components
import HeroSideImage from "@components/Hero/HeroSideImage.astro";
import FeatureCardsSmall from "@components/Feature/FeatureCardsSmall.astro";
import FeatureGalleryMarquee from "@components/Feature/FeatureGalleryMarquee.astro";
import FeatureFlagsMarquee from "@components/Feature/FeatureFlagsMarquee.astro";
import SiteContent from "@components/SiteContent/SiteContent.astro";
import CtaCardSplit from "@components/Cta/CtaCardSplit.astro";
import UpcomingEvents from "@components/Events/UpcomingEvents.astro";
import CompanyLogos from "@components/Companies/CompanyLogos.astro";
import ColleagueTestimonials from "@components/Testimonials/ColleagueTestimonials.astro";

// utils
import { getLocaleFromUrl } from "@js/localeUtils";
import { getTranslatedData } from "@js/translationUtils";
import { getAllEvents } from "../utils/eventUtils";

// Load all events with their icons
const eventIcons = await getAllEvents();

// data
const currLocale = getLocaleFromUrl(Astro.url);
const siteData = getTranslatedData("siteData", currLocale);
---

<BaseLayout title={siteData.title} description={siteData.description}>
  <HeroSideImage />
  <SiteContent />
  <ColleagueTestimonials />
  <FeatureCardsSmall />

  <UpcomingEvents events={eventIcons} />
  
  <FeatureFlagsMarquee />

  <FeatureGalleryMarquee />
  <CompanyLogos />
  <CtaCardSplit />
</BaseLayout>
