---
import BaseLayout from "../../layouts/BaseLayout.astro";
import PodcastFeed from "../../components/Podcasts/PodcastFeed.astro";
import type { PodcastEpisode } from "../../types/podcast";

// In development, use sample data
// In production, this will be replaced with the Netlify function call
const podcastData = await import("../../data/sample-podcast-data.json");
const episodes: PodcastEpisode[] = podcastData.episodes;

// Sort episodes by date, newest first
const sortedEpisodes = [...episodes].sort((a, b) => 
  new Date(b.pubDate).getTime() - new Date(a.pubDate).getTime()
);
---

<BaseLayout 
  title="Podcast Episodes" 
  description="Listen to the latest episodes from our podcast series about CRO and e-commerce."
>
  <main class="container mx-auto px-4 py-12">
    <PodcastFeed episodes={sortedEpisodes} />
  </main>
</BaseLayout>
